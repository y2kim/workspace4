if(!nexacro.Device||nexacro.OS=="Android"){if(!nexacro._init_litedb_api){nexacro._createLiteDBConnectionObject=nexacro._emptyFn;nexacro._setLiteDBConnectionHandleBusyTimeOut=nexacro._emptyFn;nexacro._setLiteDBConnectionHandleDataSource=nexacro._emptyFn;nexacro._setLiteDBConnectionHandleOpenFlag=nexacro._emptyFn;nexacro._setLiteDBConnectionHandlePreConnect=nexacro._emptyFn;nexacro._setLiteDBConnectionHandleAsync=nexacro._emptyFn;nexacro._beginLiteDBConnectionHandle=nexacro._emptyFn;nexacro._closeLiteDBConnectionHandle=nexacro._emptyFn;nexacro._commitLiteDBConnectionHandle=nexacro._emptyFn;nexacro._isConnectedLiteDBConnectionHandle=nexacro._emptyFn;nexacro._openLiteDBConnectionHandle=nexacro._emptyFn;nexacro._rollbackLiteDBConnectionHandle=nexacro._emptyFn;nexacro._createLiteDBStatementObject=nexacro._emptyFn;nexacro._setLiteDBStatementHandleQuery=nexacro._emptyFn;nexacro._setLiteDBStatementHandleldbConnection=nexacro._emptyFn;nexacro._initParamsLiteDBStatementHandle=nexacro._emptyFn;nexacro._addParamsLiteDBStatementHandle=nexacro._emptyFn;nexacro._setLiteDBStatementHandleParameter=nexacro._emptyFn;nexacro._closeLiteDBStatementHandle=nexacro._emptyFn;nexacro._executeQueryLiteDBStatementHandle=nexacro._emptyFn;nexacro._executeUpdateLiteDBStatementHandle=nexacro._emptyFn;}if(!nexacro.LiteDBEventInfo){nexacro.LiteDBEventInfo=function(_a,_b,_c){this.id=this.eventid=_a||"onerror";this.reason=_b;this.returnvalue=_c;delete _c;_c=null;};var _pLiteDBEventInfo=nexacro.LiteDBEventInfo.prototype=nexacro._createPrototype(nexacro.Event,nexacro.LiteDBEventInfo);_pLiteDBEventInfo._type_name="LiteDBEventInfo";delete _pLiteDBEventInfo;}if(!nexacro.LiteDBErrorEventInfo){nexacro.LiteDBErrorEventInfo=function(_a,_b,_c,_d,_e){this.id=this.eventid=_a||"onsuccess";this.errortype="ObjectError";this.statuscode=_b;this.errormsg=_c;this.ldberrorcode=_d;this.ldberrormsg=_e;};var _pLiteDBErrorEventInfo=nexacro.LiteDBErrorEventInfo.prototype=nexacro._createPrototype(nexacro.Event,nexacro.LiteDBErrorEventInfo);_pLiteDBErrorEventInfo._type_name="LiteDBErrorEventInfo";delete _pLiteDBErrorEventInfo;}if(!nexacro.LiteDBConnection){nexacro.LiteDBConnection=function(_a,_b){this.id=this.name=_a;if(_b){this.parent=_b;}this.sqlstatement="";this.busytimeout=60000;this.openflag=1;this.datasource="";this.preconnect="false";this.async="true";this._event_list={"onsuccess":1,"onerror":1};this.onsuccess=null;this.onerror=null;this._handle=nexacro._createLiteDBConnectionObject(this);};nexacro.LiteDBConnection.openReadWrite=0;nexacro.LiteDBConnection.openReadWriteCreate=1;var _pLiteDBConnection=nexacro.LiteDBConnection.prototype=nexacro._createPrototype(nexacro.EventSinkObject,nexacro.LiteDBConnection);_pLiteDBConnection._type_name="LiteDBConnection";_pLiteDBConnection.on_created=function(){};_pLiteDBConnection.destroy=function(){if(this._handle){this.close();this._handle=null;}return true;};_pLiteDBConnection.set_busytimeout=function(_a){if(this.paramck_busytimeout(_a)){this.busytimeout=_a;nexacro._setLiteDBConnectionHandleBusyTimeOut(this,_a);return true;}else{return false;}};_pLiteDBConnection.set_datasource=function(_a){if(this.paramck_datasource(_a)){this.datasource=_a;nexacro._setLiteDBConnectionHandleDataSource(this,_a);if(this.preconnect=="true"||this.preconnect==true){this.open();}return true;}else{return false;}};_pLiteDBConnection.set_openflag=function(_a){if(_a==LiteDBConnection.openReadWrite||_a==LiteDBConnection.openReadWriteCreate){this.openflag=_a;nexacro._setLiteDBConnectionHandleOpenFlag(this,_a);return true;}else{return false;}};_pLiteDBConnection.set_preconnect=function(_a){if(_a=="true"||_a=="false"||_a==true||_a==false){this.preconnect=nexacro._toBoolean(_a);nexacro._setLiteDBConnectionHandlePreConnect(this,this.preconnect);if(this.preconnect=="true"||this.preconnect==true){if(this.datasource!=""){this.open();}}return true;}else{return false;}};_pLiteDBConnection.set_async=function(_a){if(_a=="true"||_a=="false"||_a==true||_a==false){this.async=nexacro._toBoolean(_a);nexacro._setLiteDBConnectionHandleAsync(this,this.async);return true;}else{return false;}};_pLiteDBConnection.begin=function(){if(this._handle){nexacro._beginLiteDBConnectionHandle(this);}};_pLiteDBConnection.close=function(){if(this._handle){nexacro._closeLiteDBConnectionHandle(this);}};_pLiteDBConnection.commit=function(){if(this._handle){nexacro._commitLiteDBConnectionHandle(this);}};_pLiteDBConnection.isConnected=function(){if(this._handle){nexacro._isConnectedLiteDBConnectionHandle(this);}};_pLiteDBConnection.open=function(_a,_b){if(typeof (_b)!="undefined"||_b!=null){this.openflag=_b;nexacro._setLiteDBConnectionHandleOpenFlag(this,this.openflag);}if(typeof (_a)!="undefined"||_a!=null){this.datasource=_a;nexacro._setLiteDBConnectionHandleDataSource(this,this.datasource);}if(this.paramck_open(this.datasource,this.openflag)){nexacro._openLiteDBConnectionHandle(this,this.datasource,this.openflag);}else{return false;}return true;};_pLiteDBConnection.rollback=function(){if(this._handle){nexacro._rollbackLiteDBConnectionHandle(this);}};_pLiteDBConnection.on_success=function(_a,_b){var _c=new nexacro.LiteDBEventInfo("onsuccess",_a,_b);this.on_fire_onsuccess(this,_c);};_pLiteDBConnection.on_fire_onsuccess=function(_a,_b){if(this.onsuccess&&this.onsuccess._has_handlers){return this.onsuccess._fireEvent(this,_b);}return true;};_pLiteDBConnection.on_error=function(_a,_b,_c,_d){var _e=new nexacro.LiteDBErrorEventInfo("onerror",_a,_b,_c,_d);this.on_fire_onerror(this,_e);};_pLiteDBConnection.on_fire_onerror=function(_a,_b){if(this.onerror&&this.onerror._has_handlers){return this.onerror._fireEvent(this,_b);}return true;};_pLiteDBConnection.paramck_busytimeout=function(_a){if(_a==null||typeof (_a)=="undefined"){return false;}if(!this._publicNumCheck(_a)){return false;}if(_a<200||_a>86400000){return false;}return true;};_pLiteDBConnection.paramck_datasource=function(_a){if(_a==null||typeof (_a)=="undefined"){return false;}return true;};_pLiteDBConnection.paramck_open=function(_a,_b){if(_a==null||typeof (_a)=="undefined"||typeof (_a)!="string"){return false;}if(!this._publicNumCheck(_b)){return false;}return true;};_pLiteDBConnection._publicNumCheck=function(_a){try{var _b=_a.toString().split(" ").join("");}catch(e){return false;}if(_b.length==0){return false;}try{var _c=Number(_a.toString());}catch(e){return false;}if(( +_c)!=( +_c)){return false;}return true;};delete _pLiteDBConnection;}if(!nexacro.LiteDBParameter){nexacro.LiteDBParameter=function(_a,_b,_c){this.name=_a||"";this.type=_b||"string";this.value=_c;};var _pLiteDBParameter=nexacro.LiteDBParameter.prototype=nexacro._createPrototype(nexacro.EventSinkObject,nexacro.LiteDBParameter);_pLiteDBParameter._type_name="LiteDBParameter";_pLiteDBParameter.set_name=function(_a){if(this.paramck_datasource(_a)){this.name=_a;return true;}else{return false;}};_pLiteDBParameter.set_value=function(_a){if(this.paramck_datasource(_a)){this.value=_a;return true;}else{return false;}};_pLiteDBParameter.set_type=function(_a){if(this.paramck_datasource(_a)){this.type=_a;return true;}else{return false;}};if(nexacro.Device){_pLiteDBParameter.toJSON=function(){var valueString;if(this.value==null){valueString='null';}else if(this.value==undefined){valueString='undefined';}else{switch(nexacro.DataUtils.toTypeCode(this.type)){case 2:case 3:valueString=nexacro.DataUtils.toTextFromDecimal(this.value);break;case 4:valueString='"'+nexacro.DataUtils.toTextFromDecimal(this.value)+'"';break;case 5:valueString='"'+nexacro.DataUtils.toTextFromDate(this.value)+'"';break;case 6:valueString='"'+nexacro.DataUtils.toTextFromTime(this.value)+'"';break;case 7:if(this.value.dateObj==undefined){valueString='"'+nexacro.DataUtils.toTextFromDateTime(this.value)+'"';}else{valueString='"'+nexacro.DataUtils.toTextFromDateTime(this.value.dateObj)+'"';}break;case 0:case 1:case 8:case 9:default:valueString='"'+nexacro.Device.encodeString(this.value)+'"';break;}}return eval('({"name":"'+this.name+'","type":'+nexacro.DataUtils.toTypeCode(this.type)+',"value":'+valueString+'})');};}_pLiteDBParameter.paramck_datasource=function(_a){if(_a==null||typeof (_a)=="undefined"){return false;}return true;};delete _pLiteDBParameter;}if(!nexacro.LiteDBStatement){nexacro.LiteDBStatement=function(_a,_b){this.id=this.name=_a;if(_b){this.parent=_b;}this.query="";this.ldbconnection="";this.parameters={};this.applyrowpos= -1;this.async="true";this._event_list={"onsuccess":1,"onerror":1};this.onsuccess=null;this.onerror=null;this._handle=nexacro._createLiteDBStatementObject(this);};var _pLiteDBStatement=nexacro.LiteDBStatement.prototype=nexacro._createPrototype(nexacro.EventSinkObject,nexacro.LiteDBStatement);_pLiteDBStatement._type_name="LiteDBStatement";_pLiteDBStatement.on_created=function(){};_pLiteDBStatement.destroy=function(){if(this._handle){this._handle=null;}return true;};_pLiteDBStatement.set_query=function(_a){if(this.paramck_query(_a)){this.query=_a;nexacro._setLiteDBStatementHandleQuery(this,_a);return true;}else{return false;}};_pLiteDBStatement.set_ldbconnection=function(_a){var _b=false;if(_a instanceof nexacro.LiteDBConnection){this.ldbconnection=_a;nexacro._setLiteDBStatementHandleldbConnection(this,_a);_b=true;}else if(typeof (_a)=="string"){var _c="@";if(_a.indexOf(_c)==0){_a=_a.substring(_c.length);}else if(_a.match(/@/)==null){_a=_c+_a;}if(null!=this.parent[_a]&&this.parent[_a] instanceof nexacro.LiteDBConnection){this.ldbconnection=this.parent[_a];nexacro._setLiteDBStatementHandleldbConnection(this,this.parent[_a]);_b=true;}}return _b;};_pLiteDBStatement.set_parameters=function(_a){if(_a instanceof nexacro.Dataset){var _b=_a;var _c=_b.getColCount();var _d=_b.getRowCount();nexacro._initParamsLiteDBStatementHandle(this);for(var _i=0;_i<_d;_i++ ){var _e=nexacro._addParamsLiteDBStatementHandle(this);for(var _j=0;_j<_c;_j++ ){var _f=new nexacro.LiteDBParameter;var _g=_b.getColumnInfo(_j);var _h=_b.getColumn(_i,_g.name);_f.set_name(_g.name);_f.set_type(_g.type);_f.set_value(_h);nexacro._setLiteDBStatementHandleParameter(this,_f,_e);}}this.parameters=_a;return true;}else if(_a instanceof Array){nexacro._initParamsLiteDBStatementHandle(this);var _e=nexacro._addParamsLiteDBStatementHandle(this);for(var _k=0;_k<_a.length;_k+=1){var _f=_a[_k];if(_f instanceof nexacro.LiteDBParameter){nexacro._setLiteDBStatementHandleParameter(this,_f,_e);}}this.parameters=_a;return true;}else if(_a instanceof Object){nexacro._initParamsLiteDBStatementHandle(this);var _e=nexacro._addParamsLiteDBStatementHandle(this);for(var _l in _a){var _f=_a[_l];if(_f instanceof nexacro.LiteDBParameter){nexacro._setLiteDBStatementHandleParameter(this,_f,_e);}}this.parameters=_a;return true;}return false;};_pLiteDBStatement.set_async=function(_a){if(_a=="true"||_a=="false"||_a==true||_a==false){this.async=nexacro._toBoolean(_a);nexacro._setLiteDBStatementHandleAsync(this,this.async);return true;}else{return false;}};_pLiteDBStatement.close=function(){if(this._handle){nexacro._closeLiteDBStatementHandle(this);}};_pLiteDBStatement.executeQuery=function(_a){if(_a==null){if(this.query.length==0){return false;}}else{if(typeof (_a)=="string"&&_a.length>0){this.query=_a;nexacro._setLiteDBStatementHandleQuery(this,_a);}else{return false;}}if(this.ldbconnection==null||this.ldbconnection==undefined){return false;}if(!this.ldbconnection instanceof nexacro.LiteDBConnection){return false;}nexacro._executeQueryLiteDBStatementHandle(this);return true;};_pLiteDBStatement.executeUpdate=function(_a){if(_a==null){if(this.query.length==0){return false;}}else{if(typeof (_a)=="string"&&_a.length>0){this.query=_a;nexacro._setLiteDBStatementHandleQuery(this,_a);}else{return false;}}if(this.ldbconnection==null||this.ldbconnection==undefined){return false;}if(!this.ldbconnection instanceof nexacro.LiteDBConnection){return false;}nexacro._executeUpdateLiteDBStatementHandle(this);return true;};_pLiteDBStatement.on_success=function(_a,_b){var _c;if(_a!="7"){_c=new nexacro.LiteDBEventInfo("onsuccess",_a,_b);}else{var _d=new nexacro.Dataset("__tempDS",this.parent);_d=this.JSONStringToDataset2(_b,_d);_c=new nexacro.LiteDBEventInfo("onsuccess",_a,_d);}this.on_fire_onsuccess(this,_c);};_pLiteDBStatement.on_fire_onsuccess=function(_a,_b){if(this.onsuccess&&this.onsuccess._has_handlers){return this.onsuccess._fireEvent(this,_b);}return true;};_pLiteDBStatement.on_error=function(_a,_b,_c,_d){var _e=new nexacro.LiteDBErrorEventInfo("onerror",_a,_b,_c,_d);this.on_fire_onerror(this,_e);};_pLiteDBStatement.on_fire_onerror=function(_a,_b){if(this.onerror&&this.onerror._has_handlers){return this.onerror._fireEvent(this,_b);}return true;};_pLiteDBStatement.retQueryString=function(_a){_a=_a.replace(/"/g,"_DQOUT_");_a=_a.replace(/'/g,"_QUOT_");return _a;};_pLiteDBStatement.caheckTypeKeyword=function(_a){if(typeof (_a)=="undefined"||_a.length==0){return;}var _b=_a.toLowerCase();var _c=_b.split(" ");for(var _d=0;_d<_c.length;_d++ ){if(_a.match(/select/i)!=null){return 1;}else if(_a.match(/insert/i)!=null){return 2;}else if(_a.match(/update/i)!=null){return 3;}else if(_a.match(/delete/i)!=null){return 4;}}return 0;};_pLiteDBStatement.paramck_query=function(_a){if(_a==null||typeof (_a)=="undefined"||typeof (_a)!="string"){return false;}return true;};_pLiteDBStatement.JSONStringToDataset2=function(jsonString,dataset){if(dataset==undefined){dataset=new nexacro.Dataset();}return this.JSONObjectToDataset2(eval('('+jsonString+')'),dataset);};_pLiteDBStatement.JSONObjectToDataset2=function(_a,_b){if(_a==undefined){return _b;}if(_b==undefined){_b=new nexacro.Dataset();}var _c=_a.columnInfos;for(var _f=0;_f<_c.length;_f++ ){_b.addColumn(_c[_f].name,nexacro.DataUtils.toTypeName(_c[_f].type));}var _d=_a.rows;for(var _f=0;_f<_d.length;_f++ ){var _e=_b.addRow();for(var _g=0;_g<_c.length;_g++ ){switch(_c[_g].type){case 1:_b.setColumn(_e,_c[_g].name,this.jsonDecodeString(_d[_f][_c[_g].name]));break;case 4:_b.setColumn(_e,_c[_g].name,_d[_f][_c[_g].name]);break;case 2:case 3:case 5:case 6:case 7:case 0:case 8:case 9:default:_b.setColumn(_e,_c[_g].name,_d[_f][_c[_g].name]);break;}}}return _b;};_pLiteDBStatement.jsonDecodeString=function(_a){if(_a===undefined||_a===null){return _a;}if(typeof (_a)!='string'){return _a;}var _b=_a;_b=_b.replace(/\"/g,"&quot;");_b=_b.replace(/\'/g,"&apos;");_b=_b.replace(/\r/g,"&#13;");_b=_b.replace(/\n/g,"&#10;");_b=_b.replace(/\t/g,"&#9;");_b=_b.replace(/\\/g,"&#92;");return _b;};_pLiteDBStatement.jsonDecodeString=function(_a){if(_a===undefined||_a===null){return _a;}if(typeof (_a)!='string'){return _a;}var _b=_a;_b=_b.replace(/\&quot\;/g,"\"");_b=_b.replace(/\&apos\;/g,"'");_b=_b.replace(/\&\#13\;/g,"\r");_b=_b.replace(/\&\#10\;/g,"\n");_b=_b.replace(/\&\#9\;/g,"\t");_b=_b.replace(/\&\#92\;/g,"\\");return _b;};delete _pLiteDBStatement;}}