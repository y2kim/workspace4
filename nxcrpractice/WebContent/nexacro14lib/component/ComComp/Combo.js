if(!nexacro.Combo){nexacro.ComboCloseUpEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this.id=this.eventid=_b||"oncloseup";this.fromobject=this.fromreferenceobject=_a;this.posttext=_g;this.pretext=_d;this.postvalue=_h;this.prevalue=_e;this.postindex=_f;this.preindex=_c;this.isselect=_i;};var _pComboCloseUpEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ComboCloseUpEventInfo);nexacro.ComboCloseUpEventInfo.prototype=_pComboCloseUpEventInfo;_pComboCloseUpEventInfo._type_name="ComboCloseUpEventInfo";delete _pComboCloseUpEventInfo;_pComboCloseUpEventInfo=null;nexacro.Combo_Style=function(_a,_b){nexacro.Style.call(this,_a,_b);this.itemheight=null;this.itembackground=null;this.itemcolor=null;this.itemfont=null;this.itemgradation=null;this.itemborder=null;this.itembordertype=null;this.itempadding=null;this.buttonsize=null;this.itemaccessibility=null;this.popuptype=null;this.displaynulltextcolor=null;};var _pComboStyle=nexacro._createPrototype(nexacro.Style,nexacro.Combo_Style);nexacro.Combo_Style.prototype=_pComboStyle;_pComboStyle._type_name="ComboStyle";eval(nexacro._createValueAttributeEvalStr("_pComboStyle","itemheight"));eval(nexacro._createBackgroundAttributeEvalStr("_pComboStyle","itembackground"));eval(nexacro._createColorAttributeEvalStr("_pComboStyle","itemcolor"));eval(nexacro._createFontAttributeEvalStr("_pComboStyle","itemfont"));eval(nexacro._createGradationAttributeEvalStr("_pComboStyle","itemgradation"));eval(nexacro._createBorderAttributeEvalStr("_pComboStyle","itemborder"));eval(nexacro._createBordertypeAttributeEvalStr("_pComboStyle","itembordertype"));eval(nexacro._createPaddingAttributeEvalStr("_pComboStyle","itempadding"));eval(nexacro._createValueAttributeEvalStr("_pComboStyle","buttonsize"));eval(nexacro._createAccessibilityAttributeEvalStr("_pComboStyle","itemaccessibility"));eval(nexacro._createValueAttributeEvalStr("_pComboStyle","popuptype"));eval(nexacro._createColorAttributeEvalStr("_pComboStyle","displaynulltextcolor"));_pComboStyle.__custom_emptyObject=function(){this.itemheight=null;this.itembackground=null;this.itemcolor=null;this.itemfont=null;this.itemgradation=null;this.itemborder=null;this.itembordertype=null;this.itempadding=null;this.buttonsize=null;this.itemaccessibility=null;this.popuptype=null;this.displaynulltextcolor=null;};_pComboStyle.__get_custom_style_value=function(){var _a="";var _b=this.itemheight;if(_b&&_b._is_empty){_a+="itemheight:"+_b._value+"; ";}_b=this.itembackground;if(_b&&_b._is_empty){_a+="itembackground:"+_b._value+"; ";}_b=this.itemcolor;if(_b&&_b.is_empty){_a+="itemcolor:"+_b._value+"; ";}_b=this.itemfont;if(_b&&_b._is_empty){_a+="itemfont:"+_b._value+"; ";}_b=this.itemgradation;if(_b&&_b._is_empty){_a+="itemgradation:"+_b._value+"; ";}_b=this.itemborder;if(_b&&_b._is_empty){_a+="itemborder:"+_b._value+"; ";}_b=this.itembordertype;if(_b&&_b._is_empty){_a+="itembordertype:"+_b._value+"; ";}_b=this.itempadding;if(_b&&_b._is_empty){_a+="itempadding:"+_b._value+"; ";}_b=this.buttonsize;if(_b&&_b._is_empty){_a+="buttonsize:"+_b._value+"; ";}_b=this.accessibility;if(_b&&_b._is_empty){_a+="accessibility:"+_b._value+"; ";}_b=this.itemaccessibility;if(_b&&_b._is_empty){_a+="itemaccessibility:"+_b._value+"; ";}_b=this.popuptype;if(_b&&_b._is_empty){_a+="popuptype:"+_b._value+"; ";}_b=this.displaynulltextcolor;if(_b&&_b._is_empty){_a+="displaynulltextcolor:"+_b._value+"; ";}_b=null;return _a;};nexacro.Combo_CurrentStyle=function(){nexacro.CurrentStyle.call(this);this.itemheight=null;this.itembackground=null;this.itemcolor=null;this.itemfont=null;this.itemgradation=null;this.itemborder=null;this.itembordertype=null;this.itempadding=null;this.buttonsize=null;this.itemaccessibility=null;this.popuptype=null;this.displaynulltextcolor=null;};var _pComboCurrentStyle=nexacro._createPrototype(nexacro.CurrentStyle,nexacro.Combo_CurrentStyle);nexacro.Combo_CurrentStyle.prototype=_pComboCurrentStyle;_pComboCurrentStyle._type_name="ComboCurrentStyle";_pComboCurrentStyle.__custom_emptyObject=_pComboStyle.__custom_emptyObject;_pComboCurrentStyle.__get_custom_style_value=_pComboStyle.__get_custom_style_value;delete _pComboStyle;delete _pComboCurrentStyle;nexacro.Combo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._selectinfo={index: -1,text:"",value:undefined};this._eventinfo={postindex: -1,posttext:"",postvalue:undefined,preindex: -1,pretext:"",prevalue:undefined,isselect:false};this.comboedit=null;this.dropbutton=null;this.combolist=null;this.popupwindow=null;this.value=undefined;this.index= -1;this.text="";this.codecolumn="";this.datacolumn="";this.innerdataset=null;this.type="dropdown";this.readonly=false;this.displayrowcount= -1;this.displaynulltext="";this.autoselect=false;this.autoskip=false;this.usesoftkeyboard=true;this.imemode="normal";this.inputtype="normal";this.useime="global";this.selectchangetype="noboundup";this.usecontextmenu=true;this._exprcache={};this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"onmove":1,"onsize":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onrbuttondown":1,"onrbuttonup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"onflingstart":1,"onfling":1,"onflingend":1,"onpinchstart":1,"onpinch":1,"onpinchend":1,"onlongpress":1,"onslidestart":1,"onslide":1,"onslideend":1,"oneditclick":1,"ontextchanged":1,"onitemclick":1,"canitemchange":1,"onitemchanged":1,"ondropdown":1,"oncloseup":1,"ontextchange":1,"onchar":1,"cancharchange":1,"oncontextmenu":1,"onmousewheel":1};this._prevalue=undefined;this._preindex= -1;this._pretext="";this._moverindex= -1;this._default_buttonsize=nexacro._getCachedStyleObj("buttonsize","-1");this._innerdataset=null;this._filtereddataset=null;this._downkey=false;this._enterkey=false;this._keyval=undefined;this._text_change=false;this._want_arrows=true;this._accessibility_role="combobox";this._has_inputElement=true;this._edit_base_api=null;this._is_recheck=false;this._scroll_proc=false;this._start_vscroll_pos=0;this._is_notify_dropdown=false;this._is_force=false;this._init_value=undefined;this._init_index= -1;this._is_mouseover=false;};var _pCombo=nexacro._createPrototype(nexacro.Component,nexacro.Combo);nexacro.Combo.prototype=_pCombo;_pCombo._type_name="Combo";_pCombo.on_create_custom_style=function(){return new nexacro.Combo_Style(this);};_pCombo.on_create_custom_currentStyle=function(){return new nexacro.Combo_CurrentStyle();};_pCombo.on_apply_custom_pseudo=function(_a){var _b=this.currentstyle;var _c=this.on_find_CurrentStyle_itemheight(_a);if(_c!=_b.itemheight){_b.itemheight=_c;this.on_apply_style_itemheight(_c);}_c=this.on_find_CurrentStyle_itembackground(_a);if(_c!=_b.itembackground){_b.itembackground=_c;this.on_apply_style_itembackground(_c);}_c=this.on_find_CurrentStyle_itemcolor(_a);if(_c!=_b.itemcolor){_b.itemcolor=_c;this.on_apply_style_itemcolor(_c);}_c=this.on_find_CurrentStyle_itemfont(_a);if(_c!=_b.itemfont){_b.itemfont=_c;this.on_apply_style_itemfont(_c);}_c=this.on_find_CurrentStyle_itemgradation(_a);if(_c!=_b.itemgradation){_b.itemgradation=_c;this.on_apply_style_itemgradation(_c);}_c=this.on_find_CurrentStyle_itemborder(_a);if(_c!=_b.itemborder){_b.itemborder=_c;this.on_apply_style_itemborder(_c);}_c=this.on_find_CurrentStyle_itembordertype(_a);if(_c!=_b.itembordertype){_b.itembordertype=_c;this.on_apply_style_itembordertype(_c);}_c=this.on_find_CurrentStyle_itempadding(_a);if(_c!=_b.itempadding){_b.itempadding=_c;this.on_apply_style_itempadding(_c);}_c=this.on_find_CurrentStyle_itemaccessibility(_a);if(_c!=_b.itemaccessibility){_b.itemaccessibility=_c;this.on_apply_style_itemaccessibility(_c);}_c=this.on_find_CurrentStyle_buttonsize(_a);if(_c!=_b.buttonsize){_b.buttonsize=_c;this.on_apply_style_buttonsize(_c);}_c=this.on_find_CurrentStyle_align(_a);if(_c!=_b.align){_b.align=_c;this.on_apply_style_align(_c);}_c=this.on_find_CurrentStyle_font(_a);if(_c!=_b.font){_b.font=_c;this.on_apply_style_font(_c);}_c=this.on_find_CurrentStyle_letterspace(_a);if(_c!=_b.letterspace){_b.letterspace=_c;this.on_apply_style_letterspace(_c);}_c=this.on_find_CurrentStyle_color(_a,this.comboedit);if(_c!=_b.color){_b.color=_c;if(_c!=null){this.on_apply_style_color(_c);}}_c=this.on_find_CurrentStyle_displaynulltextcolor(_a);if(_c!=_b.displaynulltextcolor){_b.displaynulltextcolor=_c;this.on_apply_style_displaynulltextcolor(_c);}var _d=this.on_find_CurrentStyle_popuptype(_a);if(_b.popuptype!=_d){_b.popuptype=_d;}_c=null;};_pCombo.on_find_CurrentStyle_itemheight=function(_a){return this._find_pseudo_obj("itemheight",_a);};_pCombo.on_find_CurrentStyle_itembackground=function(_a){return this._find_pseudo_obj("itembackground",_a,"background");};_pCombo.on_find_CurrentStyle_itemcolor=function(_a){return this._find_pseudo_obj("itemcolor",_a,"color")||nexacro.Component._default_color;};_pCombo.on_find_CurrentStyle_itemfont=function(_a){return this._find_pseudo_obj("itemfont",_a,"font");};_pCombo.on_find_CurrentStyle_itemgradation=function(_a){return this._find_pseudo_obj("itemgradation",_a,"gradation");};_pCombo.on_find_CurrentStyle_itemborder=function(_a){return this._find_pseudo_obj("itemborder",_a,"border");};_pCombo.on_find_CurrentStyle_itembordertype=function(_a){return this._find_pseudo_obj("itembordertype",_a,"bordertype");};_pCombo.on_find_CurrentStyle_itempadding=function(_a){return this._find_pseudo_obj("itempadding",_a,"padding")||nexacro.Component._default_padding;};_pCombo.on_find_CurrentStyle_itemaccessibility=function(_a){return this._find_pseudo_obj("itemaccessibility",_a,"accessibility")||nexacro.Component._default_accessibility;};_pCombo.on_find_CurrentStyle_buttonsize=function(_a){return this._find_pseudo_obj("buttonsize",_a)||this._default_buttonsize;};_pCombo.on_find_CurrentStyle_popuptype=function(_a){return this._find_pseudo_obj("popuptype",_a);};_pCombo.on_find_CurrentStyle_align=function(_a,_b){if(_b){return _b._find_pseudo_obj("align",_a,"align")||this._find_pseudo_obj("align",_a,"align");}return this._find_pseudo_obj("align",_a,"align");};_pCombo.on_find_CurrentStyle_background=function(_a,_b){if(_b){return _b._find_pseudo_obj("background",_a,"background")||this._find_pseudo_obj("background",_a,"background");}return this._find_pseudo_obj("background",_a,"background");};_pCombo.on_find_CurrentStyle_border=function(_a,_b){if(_b){return _b._find_pseudo_obj("border",_a,"border")||this._find_pseudo_obj("border",_a,"border");}return this._find_pseudo_obj("border",_a,"border");};_pCombo.on_find_CurrentStyle_bordertype=function(_a,_b){if(_b){return _b._find_pseudo_obj("bordertype",_a,"bordertype")||this._find_pseudo_obj("bordertype",_a,"bordertype");}return this._find_pseudo_obj("bordertype",_a,"bordertype");};_pCombo.on_find_CurrentStyle_color=function(_a,_b){if(_b){return _b._find_pseudo_obj("color",_a,"color")||this._find_pseudo_obj("color",_a,"color");}return this._find_pseudo_obj("color",_a,"color");};_pCombo.on_find_CurrentStyle_font=function(_a,_b){if(_b){var _c=_b._find_pseudo_obj("font",_a,"font");if(_c){return _c;}}return nexacro.Component.prototype.on_find_CurrentStyle_font.call(this,_a);};_pCombo.on_find_CurrentStyle_displaynulltextcolor=function(_a,_b){if(_b){var _c=_b._find_pseudo_obj("displaynulltextcolor",_a,"color")||this._find_pseudo_obj("displaynulltextcolor",_a,"color");}else{var _c=this._find_pseudo_obj("displaynulltextcolor",_a,"color");}if(!_c){_c=this._find_pseudo_obj("color",_a,"color");}if(!_c){_c=this._find_inherit_pseudo_obj("color",_a,"color");}return (_c)?_c:nexacro.Component._default_color;};_pCombo.on_find_CurrentStyle_gradation=function(_a,_b){if(_b){return _b._find_pseudo_obj("gradation",_a,"gradation")||this._find_pseudo_obj("gradation",_a,"gradation");}return this._find_pseudo_obj("gradation",_a,"gradation");};_pCombo.on_find_CurrentStyle_accessibility=function(_a,_b){if(_b){return _b._find_pseudo_obj("accessibility",_a,"accessibility")||this._find_pseudo_obj("accessibility",_a,"accessibility");}return this._find_pseudo_obj("accessibility",_a,"accessibility")||nexacro.Component._default_accessibility;};_pCombo.on_update_style_color=function(){this.on_apply_style_color(this.currentstyle.color=this.on_find_CurrentStyle_color(this._pseudo,this.comboedit));};_pCombo.on_update_style_itemheight=function(){this.on_apply_style_itemheight(this.currentstyle.itemheight=this.on_find_CurrentStyle_itemheight(this._pseudo));};_pCombo.on_update_style_itembackground=function(){this.on_apply_style_itembackground(this.currentstyle.itembackground=this.on_find_CurrentStyle_itembackground(this._pseudo));};_pCombo.on_update_style_itemcolor=function(){this.on_apply_style_itemcolor(this.currentstyle.itemcolor=this.on_find_CurrentStyle_itemcolor(this._pseudo));};_pCombo.on_update_style_displaynulltextcolor=function(){this.on_apply_style_displaynulltextcolor(this.currentstyle.displaynulltextcolor=this.on_find_CurrentStyle_displaynulltextcolor(this._pseudo));};_pCombo.on_update_style_itemfont=function(){this.on_apply_style_itemfont(this.currentstyle.itemfont=this.on_find_CurrentStyle_itemfont(this._pseudo));};_pCombo.on_update_style_itemgradation=function(){this.on_apply_style_itemgradation(this.currentstyle.itemgradation=this.on_find_CurrentStyle_itemgradation(this._pseudo));};_pCombo.on_update_style_itemborder=function(){this.on_apply_style_itemborder(this.currentstyle.itemborder=this.on_find_CurrentStyle_itemborder(this._pseudo));};_pCombo.on_update_style_itembordertype=function(){this.on_apply_style_itembordertype(this.currentstyle.itembordertype=this.on_find_CurrentStyle_itembordertype(this._pseudo));};_pCombo.on_update_style_itempadding=function(){this.on_apply_style_itempadding(this.currentstyle.itempadding=this.on_find_CurrentStyle_itempadding(this._pseudo));};_pCombo.on_update_style_itemaccessibility=function(){this.on_apply_style_itemaccessibility(this.currentstyle.itemaccessibility=this.on_find_CurrentStyle_itemaccessibility(this._pseudo));};_pCombo.on_update_style_buttonsize=function(){this.on_apply_style_buttonsize(this.currentstyle.buttonsize=this.on_find_CurrentStyle_buttonsize(this._pseudo));};_pCombo.on_update_style_popuptype=function(){this.currentstyle.popuptype=this.on_find_CurrentStyle_popuptype(this._pseudo);};_pCombo.on_apply_style_color=function(_a){if(this.comboedit){this.comboedit.on_apply_style_color(this.comboedit.currentstyle.color=_a);}};_pCombo.on_apply_style_displaynulltextcolor=function(_a){if(this.comboedit){this.comboedit.on_apply_style_displaynulltextcolor(this.comboedit.currentstyle.displaynulltextcolor=_a);}};_pCombo.on_apply_style_font=function(_a){if(this.comboedit){this.comboedit.on_apply_style_font(this.comboedit.currentstyle.font=_a);}};_pCombo.on_apply_style_letterspace=function(_a){if(this.comboedit){this.comboedit.on_apply_style_letterspace(this.comboedit.currentstyle.letterspace=_a);}};_pCombo.on_apply_style_align=function(_a){if(!_a){_a=this.on_find_CurrentStyle_align(this._pseudo);}if(this.comboedit){this.comboedit.style.set_align(_a);}};_pCombo.on_apply_style_itemheight=function(_a){if(this.combolist){this.combolist.on_update_style_itemheight();}};_pCombo.on_apply_style_itembackground=function(_a){if(this.combolist){this.combolist.on_apply_style_itembackground(_a);}};_pCombo.on_apply_style_itemcolor=function(_a){if(this.combolist){this.combolist.on_apply_style_color(_a);}};_pCombo.on_apply_style_itemfont=function(_a){if(this.combolist){this.combolist.on_apply_style_font(_a);}};_pCombo.on_apply_style_itemgradation=function(_a){if(this.combolist){this.combolist.on_apply_style_itemgradation(_a);}};_pCombo.on_apply_style_itemborder=function(_a){if(this.combolist){this.combolist.on_apply_style_itemborder(_a);}};_pCombo.on_apply_style_itembordertype=function(_a){if(this.combolist){this.combolist.on_apply_style_itembordertype(_a);}};_pCombo.on_apply_style_itempadding=function(_a){if(this.combolist){this.combolist.on_apply_style_itempadding(_a);}};_pCombo.on_apply_style_itemaccessibility=function(_a){if(this.combolist){this.combolist.on_apply_style_itemaccessibility(_a);}};_pCombo.on_apply_style_buttonsize=function(_a){this._recalcLayout();};_pCombo.on_apply_style_accessibility=function(_a){nexacro.Component.prototype.on_apply_style_accessibility.call(this,_a);if(this.comboedit){this.comboedit.on_apply_style_accessibility(_a);}};_pCombo.on_create_contents=function(){if(this.getElement()){this.comboedit=new nexacro.ComboEditCtrl("comboedit","absolute",0,0,0,0,null,null,this);this.dropbutton=new nexacro.ComboButtonCtrl("dropbutton","absolute",0,0,0,0,null,null,this);this.comboedit.createComponent();this.dropbutton.createComponent();}};_pCombo.on_created_contents=function(){this.on_apply_autoskip();this.on_apply_displaynulltext();this.on_apply_imemode();this.on_apply_type();this.on_apply_autoselect();this.on_apply_style_displaynulltextcolor(this.currentstyle.displaynulltextcolor);if(this.value===undefined){this.value=this._init_value;this.index=this._init_index;}if(this.value!==undefined){this.on_apply_value();this.applyto_bindSource("value",this.value);}else if(this.index> -1){this.on_apply_index();}else if(this.text!==""){if(!this._innerdataset){this.on_apply_text();}else{this.on_apply_index();}}this.on_apply_usecontextmenu();this._setEventHandler("onmousewheel",this.on_notify_combo_mousewheel,this);this.comboedit._setEventHandler("oneditclick",this.on_notify_edit_oneditclick,this);this.comboedit._setEventHandler("ontextchanged",this.on_notify_edit_ontextchanged,this);this.comboedit._setEventHandler("ontextchange",this.on_notify_edit_ontextchange,this);this.comboedit._setEventHandler("onchar",this.on_notify_edit_onchar,this);this.comboedit._setEventHandler("cancharchange",this.on_notify_edit_cancharchange,this);if(!nexacro.isTouchInteraction&&!nexacro.SupportTouch){this.comboedit._setEventHandler("onlbuttondown",this.on_notify_edit_onlbuttondown,this);this.dropbutton._setEventHandler("onlbuttondown",this.on_notify_ondropdown,this);this.comboedit._setEventHandler("onmouseenter",this.on_notify_edit_onmouseenter,this);this.comboedit._setEventHandler("onmouseleave",this.on_notify_edit_onmouseleave,this);}this.comboedit.on_created();this._edit_base_api=this.comboedit._edit_base_api;this.dropbutton.on_created();this._setEditReaonly();if(nexacro._enableaccessibility){this._want_arrows=false;this._setAccessibilityActiveDescendant(this.comboedit);this._setAccessibilityStatAutoComplete("list");this.on_apply_style_itemaccessibility(this.currentstyle.itemaccessibility=this.on_find_CurrentStyle_itemaccessibility(this._pseudo));}this.on_apply_style_align(this.currentstyle.align);this.on_apply_style_cursor(this.currentstyle.cursor);this.on_apply_style_letterspace(this.currentstyle.letterspace);this.on_apply_prop_rtldirection();if(!this.innerdataset||this.index== -1){this._is_force=true;this.set_text("");this._is_force=false;}};_pCombo.on_destroy_contents=function(){var _a=this._getWindow();if(_a&&this._track_capture){_a._releaseCaptureLock(this);}var _b=this._getRootForm();if(_b){_b._bind_manager._dettachSBindItem(this);}if(this.comboedit){this.comboedit.destroy();this.comboedit=null;}if(this.dropbutton){this.dropbutton.destroy();this.dropbutton=null;}if(this.combolist){this.combolist.destroy();this.combolist=null;}if(this.popupwindow){this.popupwindow.destroy();this.popupwindow=null;}if(this._innerdataset){this._innerdataset._removeEventHandler("onvaluechanged",this._callback_onvaluechanged,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._callback_onrowsetchanged,this);}this._innerdataset=null;this.innerdataset=null;this._filtereddataset=null;this._selectinfo=null;this._eventinfo=null;this._exprcache=null;this._default_buttonsize=null;};_pCombo.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pCombo.on_apply_custom_setfocus=function(_a){var _b=this.comboedit;try{_b._stat_change("focus","focused");if(!(nexacro.isTouchInteraction&&nexacro.SupportTouch)||!nexacro.SupportTouch||(nexacro._isMobile&&nexacro._isMobile())){_b.on_apply_custom_setfocus(_a);}else{nexacro.Component.prototype.on_apply_custom_setfocus.call(this,_a);}}catch(e){}};_pCombo.on_getBindableProperties=function(){return "value";};_pCombo._callback_onvaluechanged=function(_a,_b){if(this.type=="filter"||this.type=="filterlike"){this._createFilteredDataset();}this._recheckValue();this._is_recheck=true;var _c=this.combolist;if(_c){_c._recreate_data(true);}};_pCombo._callback_onrowsetchanged=function(_a,_b){if(_b.reason==22||_b.reason==31){if(this.type=="filter"||this.type=="filterlike"){this._createFilteredDataset();}}else if(_b.reason==10){this.set_index( -1);}if(this._is_recheck==false){this._recheckValue();this._is_recheck=true;}};_pCombo.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);var _b=_a;if(_a==undefined){_b=this.enable;}if(this.comboedit){this.comboedit._setEnable(_b);}if(this.dropbutton){this.dropbutton._setEnable(_b);}if(this.combolist){this.combolist._setEnable(_b);}};_pCombo.on_apply_prop_rtldirection=function(){nexacro.Component.prototype.on_apply_prop_rtldirection.call(this);this.on_change_containerRect(this._client_width,this._client_height);var _a=this._rtldirection;if(this.comboedit){this.comboedit._setRtlDirection(_a);}if(this.dropbutton){this.dropbutton._setRtlDirection(_a);}if(this.combolist){this.combolist._setRtlDirection(_a);}};_pCombo.on_apply_custom_class=function(){if(this.comboedit){this.comboedit.on_apply_prop_class();}if(this.dropbutton){this.dropbutton.on_apply_prop_class();}if(this.combolist){this.combolist.on_apply_prop_class();}};_pCombo.on_init_bindSource=function(_a,_b,_c){if(this.type=="filter"||this.type=="filterlike"){this._createFilteredDataset();}this._prevalue=undefined;this._preindex= -1;this._pretext="";this.value=undefined;this.index= -1;this.text="";this._eventinfo.preindex= -1;this._eventinfo.pretext="";this._eventinfo.prevalue=undefined;this._eventinfo.postindex= -1;this._eventinfo.posttext="";this._eventinfo.postvalue=undefined;this.redraw();return true;};_pCombo.on_change_bindSource=function(_a,_b,_c,_d,_e){if(_a!=="value"||!_b||_c< -1||_d< -1){return false;}if(this.type=="filter"||this.type=="filterlike"){this._createFilteredDataset();}var _f=_b.getColumn(_c,_d);if(!this._is_created){if(this._init_value!=undefined&&this._init_value!=_f){this.on_apply_value();return;}}if(this.value==_f){return true;}this._prevalue=this.value;this._preindex=this.index;this._pretext=this.text;this.value=_f;this.index=this._getIndex(_f);this.text=this._getItemText(this.index);if(this.index== -1&&!this._innerdataset){this.index=_c;this.text=_f;}this._eventinfo.preindex=this._preindex;this._eventinfo.pretext=this._pretext;this._eventinfo.prevalue=this._prevalue;this._eventinfo.postindex=this.index;this._eventinfo.posttext=this.text;this._eventinfo.postvalue=this.value;this.redraw();return true;};_pCombo.on_update_position=function(_a,_b){nexacro.Component.prototype.on_update_position.call(this,_a,_b);if(this._isPopupVisible()){if(_a||_b){this._closePopup();return;}this._update_popupwindow_position();if(!nexacro._isDesktop()&&nexacro.OS=="Android"&&nexacro.Browser=="Runtime"){var _c=this;var _d=this._popupwindow_position_observer;if(_d){if(_d._interval_timer){_d._interval_timer.stop();delete _d._interval_timer;_d._interval_timer=null;}this._popupwindow_position_observer=null;}var _e=this._control_element;_d=this._popupwindow_position_observer={};_d._observed_count=0;_d._elem_pos=nexacro._getElementPositionInFrame(_e);_d._interval_timer=new nexacro.CallbackTimer(this,function(){if( ++_d._observed_count>=50){_d._interval_timer.destroy();delete _d._interval_timer;_d._interval_timer=null;return;}var _f=nexacro._getElementPositionInFrame(_e);if(_d._elem_pos.x!=_f.x||_d._elem_pos.y!=_f.y){_c._update_popupwindow_position();_d._observed_count=50;}},100);_d._interval_timer.start();}}};_pCombo._getDlgCode=function(_a,_b,_c,_d){if(_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_DOWN){if(_c||_b){return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:true};}}return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:this._want_arrows};};_pCombo.on_get_style_accessibility_label=function(){return "";};_pCombo._getAccessibilityReadLabel=function(_a){var _b=nexacro.Component.prototype._getAccessibilityReadLabel.call(this);if(_a&&this.comboedit._input_element&&this._status!="focus"){if(!this.comboedit._input_element._wantAccessibilityAdditionalLabel||!this.comboedit._input_element._wantAccessibilityAdditionalLabel()){_b=this.text+" "+_b;}}return _b;};_pCombo._isItemAccessibilityEnable=function(){return false;};_pCombo.set_visible=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);if(_a!=this.visible){nexacro.Component.prototype.set_visible.call(this,_a);if(!_a&&this._is_created){this.closeDropdown();}}};_pCombo.set_value=function(_a){if(_a!=this.value){this._prevalue=this.value;this.value=_a;if(!this._is_created){this._init_value=this.value;}this.on_apply_value();if(this._is_created&&this.value===undefined&&_a!==undefined){this.value=_a;}else{this.applyto_bindSource("value",this.value);}}};_pCombo.on_apply_value=function(){if(this.getElement()){var _a=this._filtereddataset?this._filtereddataset:this._getFilteredDataset();var _b=(this.type=="filter"||this.type=="filterlike")?_a:this._innerdataset;if(_b){var _c=_b.getRowCount();for(var _f=0;_f<_c;_f++ ){var _d=this._getItemValue(_f);if(_d instanceof nexacro.Decimal&&this.value instanceof nexacro.Decimal){if(_d.isEqual(this.value)){this.index=_f;this.text=this._getItemText(this.index);this._preindex=this.index;this._prevalue=this.value;this.redraw();this._refreshAccessibilityValue();return;}}else{var _e=this.value;if(_e instanceof nexacro.Decimal){_e=_e.toString();}else if(_d instanceof nexacro.Decimal){_d=_d.toString();}if(this.value==_d){if(_d===0){_d=_d+"";}if(_e===0){_e=_e+"";}if(_d==_e){this.index=_f;this.text=this._getItemText(this.index);this._preindex=this.index;this._prevalue=this.value;this.redraw();this._refreshAccessibilityValue();return;}}}}if(this._is_created){this.value=undefined;}this.index= -1;this.text="";this._refreshAccessibilityValue();}this._preindex=this.index;this._prevalue=this.value;this.redraw();this._refreshAccessibilityValue();}};_pCombo.set_index=function(_a){if(_a!=this.index){var _b;if(this.type=="filter"||this.type=="filterlike"){_b=this._filtereddataset;}else{_b=this._innerdataset;}if(_b){if(_a!==undefined){_a=parseInt(_a,10)|0;}this._preindex=this.index;this._pretext=this.text;this._prevalue=this.value;this.index=_a;if(_a>=0&&_b&&_a<_b.getRowCount()){this.value=this._getItemValue(_a);this.text=this._getItemText(_a);}if(!this._is_created){this._init_index=this.index;}this.on_apply_index();}}};_pCombo.on_apply_index=function(){if(this.getElement()){var _a=this._innerdataset;var _b=this.index;if(_b>=0&&_a&&_b<_a.getRowCount()){this.value=this._getItemValue(_b);this.text=this._getItemText(_b);this._eventinfo.preindex=this._preindex;this._eventinfo.pretext=this._pretext;this._eventinfo.prevalue=this._prevalue;this._eventinfo.postindex=this.index;this._eventinfo.posttext=this.text;this._eventinfo.postvalue=this.value;if(this.applyto_bindSource("value",this.value)===false&&!nexacro._isNull(this.value)){this.index=this._preindex;this.value=this._prevalue;this.text=this._getItemText(this.index);}var _c=this.combolist;if(_c){if(this.type=="filter"||this.type=="filterlike"){var _d=this._filtereddataset?this._filtereddataset:this._getFilteredDataset();_d.set_filterstr("");}_c.set_index(this.index);}_c=null;this.redraw();this._refreshAccessibilityValue();return;}this.index= -1;this.value=undefined;this.text="";if(_a){if(this.applyto_bindSource("value",this.value)===false){this.index=this._preindex;this.value=this._prevalue;if(this.index!= -1){this.text=this._getItemText(this.index);}}}this._preindex=this.index;this._prevalue=this.value;this.redraw();this._refreshAccessibilityValue();}};_pCombo.set_text=function(_a){if(_a!=this.text||this._is_force){this._pretext=this.text;this.text=_a==undefined?"":_a;this.on_apply_text();}};_pCombo.on_apply_text=function(){if(this.getElement()){var _a=this._filtereddataset?this._filtereddataset:this._getFilteredDataset();var _b=(this.type=="filter"||this.type=="filterlike")?_a:this._innerdataset;if(!_b||(!this.datacolumn&&!this.codecolumn)){if(this.comboedit._input_element._value==undefined||this._pretext!=""){if(this.value){this._setEditValue(this.text);}else{if(this.displaynulltext||this.text==""){this._setEditValue(undefined);}else{this._setEditValue(this.text);}}}this._refreshAccessibilityValue();return;}if(_b&&this._is_created){var _c=_b.getRowCount();for(var _d=0;_d<_c;_d++ ){if(this.text==this._getItemText(_d)){this.index=_d;this.value=this._getItemValue(_d);if(this.applyto_bindSource("value",this.value)===false){this.index=this._preindex;this.value=this._prevalue;}this._preindex=this.index;this._prevalue=this.value;this.redraw();this._refreshAccessibilityValue();return;}}this.value=undefined;this.text="";}this._preindex=this.index;this._prevalue=this.value;this.redraw();this._refreshAccessibilityValue();}};_pCombo.set_codecolumn=function(_a){if(_a!=this.codecolumn){this.codecolumn=_a;this.on_apply_codecolumn();}};_pCombo.on_apply_codecolumn=function(){if(this.combolist){this.combolist.set_codecolumn(this.codecolumn);}if(this.type=="filter"||this.type=="filterlike"){this._createFilteredDataset();}this._recheckValue();this._is_recheck=true;};_pCombo.set_datacolumn=function(_a){if(_a!=this.datacolumn){this.datacolumn=_a;this.on_apply_datacolumn();}};_pCombo.on_apply_datacolumn=function(){if(this.combolist){this.combolist.set_datacolumn(this.datacolumn);}if(this.type=="filter"||this.type=="filterlike"){this._createFilteredDataset();}this._recheckValue();this._is_recheck=true;};_pCombo.setInnerDataset=function(_a){if(!_a){this._innerdataset=null;this.innerdataset="";this.on_apply_innerdataset();}else if(_a instanceof nexacro.Dataset||(typeof _a=="object"&&_a._type_name=="Dataset")){this._innerdataset=_a;this.innerdataset=_a.id;this.on_apply_innerdataset();this._recheckValue();this._is_recheck=true;}};_pCombo._setInnerDatasetStr=function(_a){if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}};_pCombo.getInnerDataset=function(){return this._innerdataset;};_pCombo.set_innerdataset=function(_a){this.innerdataset="";if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(_a!=this.innerdataset){if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}this.on_apply_innerdataset();}else if(this.innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this.innerdataset);this.on_apply_innerdataset();}};_pCombo.on_apply_innerdataset=function(){var _a=this._innerdataset;if(this.combolist){this.combolist.setInnerDataset(_a);}if(_a){_a._setEventHandler("onvaluechanged",this._callback_onvaluechanged,this);_a._setEventHandler("onrowsetchanged",this._callback_onrowsetchanged,this);if(this.type=="filter"||this.type=="filterlike"){this._createFilteredDataset();}}};_pCombo.set_displayrowcount=function(_a){if(_a!=this.displayrowcount){this.displayrowcount=_a;}};_pCombo.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.autoselect){this.autoselect=_a;this.on_apply_autoselect();}};_pCombo.on_apply_autoselect=function(){if(this.type=="search"){this.comboedit&&this.comboedit.set_autoselect(this.autoselect);}else{this.comboedit&&this.comboedit.set_autoselect(false);}};_pCombo.set_autoskip=function(_a){if(_a!=this.autoskip){this.autoskip=_a;this.on_apply_autoskip();}};_pCombo.on_apply_autoskip=function(){this.comboedit&&this.comboedit.set_autoskip(this.autoskip);};_pCombo.set_displaynulltext=function(_a){if(_a!=this.displaynulltext){this.displaynulltext=_a;this.on_apply_displaynulltext();}};_pCombo.on_apply_displaynulltext=function(){this.comboedit&&this.comboedit.set_displaynulltext(this.displaynulltext);};_pCombo.set_type=function(_a){if(_a!=this.type){this.type=_a;this.on_apply_type();}};_pCombo.on_apply_type=function(){if(this.getElement()){if(this._filtereddataset){this._filtereddataset.filter("");}this._setEditReaonly();this.comboedit.set_readonly(this.readonly);this.on_apply_autoselect();}};_pCombo.set_usesoftkeyboard=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.usesoftkeyboard){this.usesoftkeyboard=_a;this.on_apply_usesoftkeyboard();}};_pCombo.on_apply_usesoftkeyboard=function(){var _a=this.comboedit?this.comboedit._input_element:null;if(_a){_a.setElementUseSoftKeyboard(this.usesoftkeyboard);}};_pCombo.set_imemode=function(_a){this.imemode=nexacro._toString(_a);this.on_apply_imemode();};_pCombo.on_apply_imemode=function(){this.comboedit&&this.comboedit.set_imemode(this.imemode);};_pCombo.set_inputtype=function(_a){};_pCombo.set_comboedit=function(_a){};_pCombo.set_combolist=function(_a){};_pCombo.set_popupwindow=function(_a){};_pCombo.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.readonly){this.readonly=_a;this.on_apply_readonly();}};_pCombo.on_apply_readonly=function(){var _a=this.readonly;if(_a){this._stat_change("readonly",this._pseudo);}else{this._stat_change("writable",this._pseudo=="readonly"?"normal":this._pseudo);}if(this.comboedit){this.comboedit.set_readonly(_a);if(_a===false){this._setEditReaonly();}}};_pCombo.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.usecontextmenu){this.usecontextmenu=_a;this.on_apply_usecontextmenu();}};_pCombo.on_apply_usecontextmenu=function(){var _a=this.comboedit;if(_a){_a.set_usecontextmenu(this.usecontextmenu);}};_pCombo.set_useime=function(_a){};_pCombo.set_selectchangetype=function(_a){this.selectchangetype=nexacro._toString(_a);};_pCombo.redraw=function(){var _a=this.combolist;if(this.comboedit){if(this.text){this._setEditValue(this.text);}else{this._setEditValue(undefined);}}this._moverindex=this.index;_a=null;};_pCombo.dropdown=function(){if(this.enable===false||this.readonly===true||this.visible===false){return;}var _a;if(!this.isDropdown()){if(this.type=="filter"||this.type=="filterlike"){_a=this._filtereddataset;if(_a){_a.set_filterstr("");}else{_a=this._getFilteredDataset();}}else{_a=this._innerdataset;}if(_a&&_a.rowcount==0){_a=this._innerdataset;}this.setFocus(false);this._showPopup(_a,this.index);}};_pCombo.isDropdown=function(){if(!this.popupwindow){return false;}return this.popupwindow._is_popup();};_pCombo.getSelect=function(){if(this._control_element){return this.comboedit.getSelect();}};_pCombo.getCount=function(){if(this._control_element){if(this.combolist){return this.combolist.getCount();}else if(this._innerdataset){return this._innerdataset.getRowCount();}else{return 0;}}};_pCombo.getSelectedText=function(){if(this._control_element){return this.comboedit.getSelectedText();}};_pCombo.getCaretPos=function(){if(this.readonly){return  -1;}if(this._control_element){return this.comboedit.getCaretPos();}};_pCombo.setCaretPos=function(_a){if(this._control_element){return this.comboedit.setCaretPos(_a);}};_pCombo.setSelect=function(_a,_b){if(this._control_element){return this.comboedit.setSelect(_a,_b);}};_pCombo.setSelectedText=function(_a){if(this._control_element){return this.comboedit.setSelectedText(_a);}};_pCombo.closeDropdown=function(_a,_b){if(this.isDropdown()){this.popupwindow._closePopup();}};_pCombo.updateToDataset=function(){if(!this._bind_event){return false;}return this.applyto_bindSource("value",this.value);};_pCombo.isAboveSelected=function(){};_pCombo.on_notify_ondropdown=function(_a,_b){if(this.readonly){return false;}var _c=this._innerdataset;if(this._isPopupVisible()==true){this.popupwindow._closePopup();}else{var _d=this.comboedit;if(_d){_d.setSelect(0,0);}if(this.combolist&&(this.type=="filter"||this.type=="filterlike")){if(this._filtereddataset){this._filtereddataset.set_filterstr("");}var _e=_c.getRowCount();for(i=0;i<_e;i++ ){if(this.text==this._getItemText(i)){this._showPopup(_c,i);return false;}else{this._showPopup(_c,this.index);}}}else{this._showPopup(_c,this.index);}}return false;};_pCombo.on_notify_item_onlbuttonup=function(){if(!this.combolist){return false;}if(this.selectchangetype!="noboundup"){return false;}if(this._isPopupVisible()){if(!this._scroll_proc){this.popupwindow._closePopup();}}return false;};_pCombo.on_notify_item_canitemchange=function(_a,_b){var _c=_b,_d;if(this.type=="filter"||this.type=="filterlike"){var _e=this._filtereddataset?this._filtereddataset:this._getFilteredDataset();var _f=this._getRawIndex(_e,_b.postindex);_f=(_f== -1)?_b.postindex:_f;}else{_f=_b.postindex;}if(_d=this.on_fire_canitemchange(_a,this.index,this.text,this.value,_f,_b.posttext,_b.postvalue)){_c.preindex=_c.postindex;_c.pretext=_c.posttext;_c.prevalue=_c.postvalue;_c.postindex=_f;_c.posttext=_b.posttext;_c.postvalue=_b.postvalue;this._setIndex(_f);if(this._isPopupVisible()){if(!this._scroll_proc){this.popupwindow._closePopup();}}}else{if(this._isPopupVisible()){if(!this._scroll_proc){this.popupwindow._closePopup();}}if(this.type=="filter"||this.type=="filterlike"){_e.set_filterstr("");}}if(this.comboedit){if(this.autoskip&&this.type=="search"&&this._refform.getNextComponent(this,true)!=this){return _d;}if(nexacro._enableaccessibility&&nexacro._accessibilitytype==4){var _g=this._getWindow();if(_g){_g._removeFromCurrentFocusPath(this,true);}}if((this.parent&&(this.parent._last_focused&&(this.parent._last_focused.id==this.id)))||this._is_subcontrol){this.comboedit._setFocus(false);}}return _d;};_pCombo.on_notify_item_onitemclick=function(_a,_b){if(!this.combolist||!this.comboedit){return false;}this.on_fire_onitemclick(_a,_b.index,_b.itemtext,_b.itemvalue,_b.button,_b.altKey,_b.ctrlKey,_b.shiftKey,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY);if(_b.index==this.index){if(this.type=="filter"||this.type=="filterlike"){var _c=this._filtereddataset?this._filtereddataset:this._getFilteredDataset();var _d=(this.type=="filter"||this.type=="filterlike")?_c:this._innerdataset;var _e=this._getRawIndex(_d,_b.index);if(_e!=this.index){return;}}var _f=_b;this.on_fire_canitemchange(_a,this.index,this.text,this.value,_b.index,_b.itemtext,_b.itemvalue);if(this._isPopupVisible()){if(!this._scroll_proc){this.popupwindow._closePopup();}if(this.comboedit){if(nexacro._enableaccessibility&&nexacro._accessibilitytype==4){var _g=this._getWindow();if(_g){_g._removeFromCurrentFocusPath(this,true);}}this.comboedit._setFocus(false);}else{this._setFocus(false);}}}};_pCombo.on_notify_item_onitemchanged=function(_a,_b){if(!this.combolist||!this.comboedit){return false;}var _c=_b.postindex;var _d=this.codecolumn;var _e=this.datacolumn;var _f;if(this.type=="filter"||this.type=="filterlike"){var _g=this._filtereddataset?this._filtereddataset:this._getFilteredDataset();_f=(this.type=="filter"||this.type=="filterlike")?_g:this._innerdataset;_c=this._getRawIndex(_f,_c);_f=this._filtereddataset;_g.set_filterstr("");}else{_f=this._innerdataset;}var _h=this._selectinfo;var _i={preindex:this.index,pretext:this.text,prevalue:this.value,postindex:_c,posttext:_f.getColumn(_c,_e||_d),postvalue:_f.getColumn(_c,_d||_e)};this._eventinfo.preindex=_i.preindex;this._eventinfo.pretext=_i.pretext;this._eventinfo.prevalue=_i.prevalue;this._eventinfo.postindex=_i.postindex;this._eventinfo.posttext=_i.posttext;this._eventinfo.postvalue=_i.postvalue;this._eventinfo.isselect=true;if(this.index!=_c){if(this._isPopupVisible()){if(!this._scroll_proc){this.popupwindow._closePopup();}}}else{if(this.type!="dropdown"){this._setEditValue(this.text);}if(this._isPopupVisible()){if(!this._scroll_proc){this.popupwindow._closePopup();}}}if(this.comboedit){if(this.autoskip&&this.type=="search"&&this._refform.getNextComponent(this,true)!=this){return false;}if(nexacro._enableaccessibility&&nexacro._accessibilitytype==4){var _j=this._getWindow();if(_j){_j._removeFromCurrentFocusPath(this,true);}}if((this.parent&&(this.parent._last_focused&&(this.parent._last_focused.id==this.id)))||this._is_subcontrol){this.comboedit._setFocus(false);}}return false;};_pCombo._setEditValue=function(_a){this.comboedit.set_value(_a);};_pCombo.on_combo_keydown=function(_a,_b,_c,_d,_e,_f){if(this.readonly||!this.comboedit){return false;}var _g=nexacro.Event;var _h=this.combolist;var _i=this.popupwindow;var _j=this._filtereddataset?this._filtereddataset:this._getFilteredDataset();var _k=(this.type=="filter"||this.type=="filterlike")?_j:this._innerdataset;var _l=this.datacolumn;var _m=this.codecolumn;var _n,_o,_p=this._moverindex;if(_p<0){_p=this.index;}if(!_k||(!_l&&!_m)){return;}if(_b==_g.KEY_ESC){if(this._isPopupVisible()){_i._closePopup();this._setEditValue(this.text);}return false;}if(_c==true&&_b==_g.KEY_DOWN){if(this._isPopupVisible()){_i._closePopup();}else{this._showPopup(_k,this.index);}return false;}var _q=this._selectinfo;var _r={preindex:this.index,pretext:this.text,prevalue:this.value,postindex:_q.index,posttext:_q.text,postvalue:_q.value};if(_b==_g.KEY_ENTER){if(_p>=0&&_p==this._moverindex){if(this.type=="filter"||this.type=="filterlike"){_o=this._getRawIndex(_k,_p);_o=(_o== -1)?_p:_o;_j.set_filterstr("");}else{_o=_p;}}else{return false;}_r.postindex=_o;_r.postvalue=this._getItemValue(_o);_r.posttext=this._getItemText(_o);if(this.on_fire_canitemchange(this,_r.preindex,_r.pretext,_r.prevalue,_r.postindex,_r.posttext,_r.postvalue)==false){this._setEditValue(this.text);if(this._isPopupVisible()){_i._closePopup();}return false;}this._setIndex(_o);if(this._isPopupVisible()){this._enterkey=true;_i._closePopup();}this._eventinfo.isselect=true;}if(_b==nexacro.Event.KEY_UP||_b==nexacro.Event.KEY_DOWN){if(!nexacro._enableaccessibility||_d||this._isPopupVisible()){if(this._isPopupVisible()){var _s;if(_b==nexacro.Event.KEY_UP){if(_p>0){var _t= -1;if(_h._overedItem){_t=_h._overedItem.index;}else{_t=_p;}if(_t==_p){_n=_p-1;}else{_n=_t-1;}}else{_n=0;}this._downkey=false;_s=_k.getColumn(_n,_l||_m);_s=_s==undefined?"":_s;this._setEditValue(_s);_h._reset_item(_n);_h._overeditemindex=_n;this._moverindex=_n;}else{var _t=0;if(_h._overedItem){_t=_h._overedItem.index;}else{_t=_p;}if(_t==_p){_n=_p+1;}else{_n=_t+1;}if(_n<_k.getRowCount()){_s=_k.getColumn(_n,_l||_m);_s=_s==undefined?"":_s;this._setEditValue(_s);this._downkey=true;_h._reset_item(_n);_h._overeditemindex=_n;this._moverindex=_n;}}}else{if(_b==nexacro.Event.KEY_UP){if(_p>0){_n=_p-1;}else{_n=0;}}else{if(_p+1<_k.getRowCount()){_n=_p+1;}else{_n=_p;}}if(_n>=0){if(this.type=="filter"||this.type=="filterlike"){_o=this._getRawIndex(_k,_n);_o=(_o== -1)?_n:_o;_j.set_filterstr("");}else{_o=_n;}}_r.postindex=_o;_r.postvalue=this._getItemValue(_o);_r.posttext=this._getItemText(_o);if(this.index!=_o){var _u=this.on_fire_canitemchange(this,_r.preindex,_r.pretext,_r.prevalue,_r.postindex,_r.posttext,_r.postvalue);if(_u){this._setIndex(_o);}}}}if(this._getWindow()._keydown_element){this._getWindow()._keydown_element._event_stop=true;}return false;}return false;};if(nexacro.Browser=="Gecko"){_pCombo.on_fire_sys_onkeyup=function(_a,_b,_c,_d,_e,_f){var _g=this.popupwindow;if(this.comboedit.value==null||this.comboedit.value==""){if(_g&&_g._is_popup()){_g._closePopup();}}var _h=nexacro.Component.prototype.on_fire_sys_onkeyup.call(this,_a,_b,_c,_d,_e,_f);if(_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_DOWN){if(this.type=="dropdown"){this.comboedit.setCaretPos(0);}}return _h;};_pCombo._eachColosePopup=nexacro._emptyFn;}else{_pCombo._eachColosePopup=function(_a){var _b=this.popupwindow;if(_b._is_popup()){_b._closePopup();}};}_pCombo.on_fire_onkillfocus=function(_a,_b){if(this._text_change==true){this._setEditValue(this.text);this._text_change=false;}if(this.combolist){this.combolist._reset_item(this.index);this.combolist._overeditemindex= -1;this._moverindex= -1;}if(this._isPopupVisible()){this.popupwindow._closePopup();this._setEditValue(this.text);}var _c=this._filtereddataset?this._filtereddataset:this._getFilteredDataset();var _d=(this.type=="filter"||this.type=="filterlike")?_c:this._innerdataset;var _e=this.datacolumn;var _f=this.codecolumn;if((!_d||(!_e&&!_f))){this._setEditValue(undefined);}else{if(this.index== -1){this._setEditValue(this.value);}}if(this.comboedit){if((nexacro.Browser=="Runtime"||nexacro.Browser=="Edge"||nexacro.Browser=="IE")&&this.autoselect==true){this.comboedit._cancelSelect();}this.comboedit._stat_change("notfocus","normal");}nexacro.Component.prototype.on_fire_onkillfocus.call(this,_a,_b);};_pCombo.on_notify_edit_onlbuttondown=function(_a,_b){if(this.readonly){return false;}if(this._isPopupVisible()){this.popupwindow._closePopup();}else{if(this.type=="dropdown"){this._showPopup(this._innerdataset,this.index);}}return false;};_pCombo.on_notify_edit_onmouseenter=function(_a,_b){this._is_mouseover=true;return false;};_pCombo.on_notify_edit_onmouseleave=function(_a,_b){this._is_mouseover=false;return false;};_pCombo._is_fling=false;_pCombo._on_bubble_flingstart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){this._is_fling=true;return nexacro.Component.prototype._on_bubble_flingstart.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);};_pCombo._on_bubble_flingend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){this._is_fling=false;return nexacro.Component.prototype._on_bubble_flingend.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);};_pCombo.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return nexacro.Component.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pCombo.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=this._is_real_upelem;this._is_real_upelem=null;if(_l instanceof nexacro.ScrollBarCtrl){return;}if(_l&&_l.parent instanceof nexacro.ScrollBarCtrl){return;}var _o=nexacro.Component.prototype.on_fire_sys_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);var _p=this._getWindow();var _q="";var _r=_p.findComponent(_p._cur_ldown_elem,0,0);if(_r&&_r[0]){_q=_r[0]._unique_id;}var _s="";_r=_p.findComponent(_m,0,0);if(_r&&_r[0]){_s=_r[0]._unique_id;}if(_q!=_s){return;}var _t= -1;var _u=this.index;var _v=this.combolist;var _w=this.comboedit;var _x=_v&&_v._selectinfo;if(_v){_t=_v._overeditemindex;}if(this.visible&&this._isEnable()&&this._isPopupVisible()){if(_v){if(_t> -1){if(_u!=_t){if(_x.index==_t){this._setIndex(_u);}else{this._setIndex(_t);}if(_n&&this._isPopupVisible()){if(!this._scroll_proc){this.popupwindow._closePopup();}}}else{this._setIndex(_u);}if(_w){if(!(nexacro.isTouchInteraction&&nexacro.SupportTouch)||!nexacro.SupportTouch){_w.on_apply_custom_setfocus();}}}else{this._setIndex(_u);}}}_v=null;_w=null;return _o;};_pCombo.on_fire_sys_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(_l&&(_l instanceof nexacro.ScrollBarCtrl||(_l.parent&&_l.parent instanceof nexacro.ScrollBarCtrl))){return;}if(this._is_fling_stop){return;}if(this.isDropdown()){var _n=this.combolist._selectinfo_list;if(this._scroll_proc){if(_n.length){var _o=_n.length-1;var _p=_n[_o];if(_p.index!=this.index){_p.obj._keep_selecting=false;_p.obj._control_pseudo="";_p.obj._contents_pseudo="";_p.obj._stat_change("notselect","normal");_n.splice(_o,1);}}return;}while(_n.length){var _q=_n[0].obj;if(_q){_q._keep_selecting=false;if(!_q.selected){_q._stat_change("notselect","normal");}}_n.shift();}}return;};_pCombo.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f){return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f);};_pCombo.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f){var _g=nexacro.Component.prototype.on_fire_sys_onkeydown.call(this,_a,_b,_c,_d,_e,_f);this.on_combo_keydown(null,_a,_b,_c,_d,0);return _g;};_pCombo._on_mousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.popupwindow&&this.popupwindow._is_popup()){if(this.combolist){return this.combolist._on_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}}return true;};_pCombo.on_fire_sys_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.readonly){return false;}var _o=this._find_lastFocused();if((this!=_o&&!this._is_subcontrol)||(this.parent!=_o&&this._is_subcontrol)){return;}if(!this.popupwindow||!this.popupwindow._is_popup()){var _p=this._filtereddataset?this._filtereddataset:this._getFilteredDataset();var _q=(this.type=="filter"||this.type=="filterlike")?_p:this._innerdataset;var _r=this.index;var _s=0;if(_b>0){if(_r>0){_s=_r-1;}else{_s=0;}this._setIndex(_s);}else{_s=_r+1;if(_q&&_s<_q.getRowCount()){this._setIndex(_s);}}}return true;};_pCombo.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._update_popupwindow_position();return (this.popupwindow&&this.popupwindow._is_popup())?true:false;};_pCombo.on_fire_sys_onfling=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=nexacro.Component.prototype.on_fire_sys_onfling.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._update_popupwindow_position();return _j;};_pCombo.on_notify_edit_cancharchange=function(_a,_b){if(this.cancharchange&&this.cancharchange._has_handlers){_b.fromobject=this;var _c=this.cancharchange._fireCheckEvent(this,_b);if(!_c){this.value=_b.pretext;this.text=_b.pretext;this._setEditValue(this.text);}return nexacro._toBoolean(_c);}return true;};_pCombo.on_notify_edit_onchar=function(_a,_b){if(this.onchar&&this.onchar._has_handlers){var _c=new nexacro.CharEventInfo(_a,"onchar",_b.chartext,_b.pretext,_b.posttext);var _d=this.onchar._fireCheckEvent(this,_c);return nexacro._toBoolean(_d);}return true;};_pCombo.on_notify_edit_ontextchange=function(_a,_b){return this.on_fire_ontextchange(_a,_b);};_pCombo.on_notify_edit_ontextchanged=function(_a,_b){return this.on_fire_ontextchanged(_a,_b);};_pCombo.on_fire_ontextchange=function(_a,_b){if(this.ontextchange&&this.ontextchange._has_handlers){_b.fromobject=this;var _c=this.ontextchange._fireCheckEvent(this,_b);if(_b.pretext!=_b.posttext){this._text_change=true;}return nexacro._toBoolean(_c);}return true;};_pCombo.on_fire_ontextchanged=function(_a,_b){var _c=false;if(this.ontextchanged&&this.ontextchanged._has_handlers){_b.fromobject=this;_c=this.ontextchanged._fireEvent(this,_b);}if(_b.pretext!=_b.posttext){this.on_combo_text_changed(_b.pretext,_b.posttext);}return nexacro._toBoolean(_c);};_pCombo.on_notify_edit_oneditclick=function(_a,_b){var _c=true;if(nexacro.isTouchInteraction||nexacro.SupportTouch){var _d=new nexacro.EventInfo(this,"oneditclick");if((nexacro.Browser=="Runtime"&&(_b.button=="lbutton"||_b.button=="touch"))||(nexacro.Browser!="Runtime"&&(nexacro.isTouchInteraction&&_b.button=="touch"||(!nexacro.isTouchInteraction&&application.enabletouchevent&&((nexacro._pointerType=="pen"&&_b.button=="touch")||_b.button=="lbutton"))||(nexacro.Browser!="IE"&&!application.enabletouchevent&&_b.button=="lbutton")||(nexacro.Browser=="IE"&&!application.enabletouchevent)))){_c=false;this.on_notify_edit_onlbuttondown(this,_d);}}else{_c=false;}if(!_c&&this.oneditclick&&this.oneditclick._has_handlers){_b.fromobject=this;var _e=this.oneditclick._fireEvent(this,_b);return nexacro._toBoolean(_e);}return true;};_pCombo.on_combo_text_changed=function(_a,_b){if(this.readonly||!this.comboedit){return false;}if((this.type!="dropdown")&&(this.onkeydown&&this.onkeydown.defaultprevented===true)){this.comboedit.set_value("");return;}var _c=this._filtereddataset?this._filtereddataset:this._getFilteredDataset();var _d=(this.type=="filter"||this.type=="filterlike")?_c:this._innerdataset;if(!_d){return false;}if(!this.combolist&&this.type!="dropdown"){this._createList(_d);}var _e=this.datacolumn||this.codecolumn;var _f=_b;var _g=this.comboedit;var _h=this.popupwindow;this._keyval=_f;if(_f===""){this._text_change=true;this._eachColosePopup();return;}if(_a!=_b){this._text_change=true;}switch(this.type){case "search":var _i=_d.findRowAs(_e,_f);if(_i>=0){var _j=false;if(_g._edit_base_api&&_g._edit_base_api._charcode==nexacro.Event.KEY_BACKSPACE){_j=true;}if(!_h||!_h._is_popup()){this._text_change=true;this._showPopup(_d,_i);}else{this._showPopup(_d,_i);}}else{if(_h&&_h._is_popup()){_h._closePopup();}}break;case "filter":case "filterlike":var _k=/[\　\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/;var _l="";var _m=_f.length;for(var _o=0;_o<_m;_o++ ){var _n=_f.charAt(_o);if(_k.test(_n)){_l+="\\";}_l+=_n;}if(this.type=="filter"){_d.set_filterstr(_e+".match(/^("+_l+")/)");}else if(this.type=="filterlike"){_d.set_filterstr(_e+".match(/"+_l+"/)");}else{_d.set_filterstr("");}if(_d.getRowCount()>0){this.combolist._overeditemindex=0;this._moverindex=0;this._text_change=true;this._showPopup(_d,0);}else{if(_h&&_h._is_popup()){_h._closePopup();}}break;}this._keyval=undefined;};_pCombo.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onitemclick&&this.onitemclick._has_handlers){var _o=new nexacro.ItemClickEventInfo(_a,"onitemclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);this.onitemclick._fireEvent(this,_o);}return false;};_pCombo.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){this.applyto_bindSource("value",_a.value);var _h=this._selectinfo;_h.index=_e;_h.text=_f;_h.value=_g;this._eventinfo.preindex=_b;this._eventinfo.pretext=_c;this._eventinfo.prevalue=_d;this._eventinfo.postindex=_e;this._eventinfo.posttext=_f;this._eventinfo.postvalue=_g;this._eventinfo.isselect=true;if(this.onitemchanged&&this.onitemchanged._has_handlers){var _i=new nexacro.ItemChangeEventInfo(this,"onitemchanged",_b,_c,_d,_e,_f,_g);this.onitemchanged._fireEvent(this,_i);}return false;};_pCombo.on_fire_canitemchange=function(_a,_b,_c,_d,_e,_f,_g){if(this.canitemchange&&this.canitemchange._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"canitemchange",_b,_c,_d,_e,_f,_g);var _i=this.canitemchange._fireCheckEvent(this,_h);return nexacro._toBoolean(_i);}return true;};_pCombo.on_fire_ondropdown=function(_a){if(this.ondropdown&&this.ondropdown._has_handlers){var _b=new nexacro.EventInfo(this,"ondropdown");_b.postvalue=this.value;var _c=this.ondropdown._fireEvent(this,_b);if(_c==undefined){_c=true;}return nexacro._toBoolean(_c);}return true;};_pCombo.on_fire_oncloseup=function(_a,_b,_c,_d,_e,_f,_g,_h){var _i=this._getWindow();if(_i&&this._track_capture){_i._releaseCaptureLock(this);}var _j;if(this.combolist){_j=this.combolist.index;if(this.type=="filter"){_j=this._getRawToListindex(_j);}if(!this._enterkey){this.combolist._reset_item(_j);}this._enterkey=false;this.combolist._overeditemindex= -1;this._moverindex= -1;if(this.combolist._overedItem){this.combolist._overedItem=null;}}if(_h==false&&(this.combolist&&this.index!=_j)){if((_c==_f)&&(this._keyval!=="")&&(this._text_change==false)){this._setEditValue(this.text);}if(this.combolist){if(this.type=="filter"){_b=this._getRawToListindex(_b);}this.combolist.index=_b;this.combolist.on_apply_index(_b);}}if(this.oncloseup&&this.oncloseup._has_handlers){var _k=new nexacro.ComboCloseUpEventInfo(this,"oncloseup",_b,_c,_d,_e,_f,_g,_h);var _l=this.oncloseup._fireEvent(this,_k);return nexacro._toBoolean(_l);}return false;};_pCombo.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=false;if(this._isPopupVisible()){var _e=this.combolist;var _f=_e._get_contents_rows();var _g=null;if(_f){if(_a){_e._overeditemindex++ ;}else{_e._overeditemindex-- ;}if(_e._overeditemindex<0||_e._overeditemindex>_f.length-1){if(this._isPopupVisible()){this._closePopup();}_e._overeditemindex=0;}else{_g=_e._getItemByRealIdx(_f,_e._overeditemindex).obj;}}if(_g){_d=true;_g._setAccessibilityNotifyEvent();}}return _d;};_pCombo._applyZoomPopup=function(){if(this.popupwindow&&this.popupwindow._is_popup()){if(this.enable===false||this.readonly===true||this.visible===false){return;}var _a=this._filtereddataset?this._filtereddataset:this._getFilteredDataset();var _b=this.type=="filter"?_a:this._innerdataset;if(_b&&_b.rowcount==0){_b=this._innerdataset;}this._showPopup(_b,this.index);}};_pCombo._setIndex=function(_a,_b){if(_b||_a!=this.index){var _c;if(this.type=="filter"){_c=this._filtereddataset;}else{_c=this._innerdataset;}if(_c){_a=parseInt(_a,10)|0;this._preindex=this.index;this._pretext=this.text;this._prevalue=this.value;this.index=_a;this.on_apply_index();this.on_fire_onitemchanged(this,this._eventinfo.preindex,this._eventinfo.pretext,this._eventinfo.prevalue,this._eventinfo.postindex,this._eventinfo.posttext,this._eventinfo.postvalue);var _d=this.comboedit;if(this.autoskip&&_d&&this.type=="search"){_d.on_apply_autoskip();}}}this._cancelSelect();return _a;};_pCombo._recalcLayout=function(){if(!this.getElement()||!this._is_created_contents){return;}var _a=this.comboedit;var _b=this.dropbutton;var _c=0;var _d=this._client_width;var _e=this._client_height;var _f=this._client_left;var _g=this._client_top;var _h=this.on_find_CurrentStyle_buttonsize(this._pseudo);if(!_h||_h._is_empty){_c=_e;}else if(parseInt(_h._value,10)>_d){_c=_d;}else{_c=parseInt(_h._value,10)|0;if(_c<0){_c=_e;}}if(_b){var _i=_d-_c;var _j=_g;var _k=_c;var _l=_e;var _m=_b.on_find_CurrentStyle_margin(this._pseudo);if(_m&&!_m._is_empty){_i=_i+_m.left;_j=_m.top;_k=_c-_m.left-_m.right;_l=_e-_m.top-_m.bottom;}_b.move(_i,_j,_k,_l,null,null);}if(_a){var _n=_f;var _o=_g;var _p=_d-_c-1;var _q=_e;var _r=_a.on_find_CurrentStyle_margin(this._pseudo);if(_r&&!_r._is_empty){_n=_r.left;_o=_r.top;_p=_p-_r.left-_r.right;_q=_q-_r.top-_r.bottom;}_a.move(_n,_o,_p,_q,null,null);}};_pCombo._getMaxTextSize=function(_a){var _b=this.datacolumn||this.codecolumn;var _c=this.combolist;if(!_a||!_b||!_c){return false;}return _c._getMaxTextSize();};_pCombo._isPopupVisible=function(){var _a=this.popupwindow;if(_a&&_a.visible==true){return true;}else{return false;}};_pCombo._createListOnly=function(_a){var _b=this.datacolumn;var _c=this.codecolumn;var _d=this.combolist;if(!_a||_a&&_a.getRowCount()<=0||(!_b&&!_c)){return;}if(!_d){this._exprcache={};_d=this.combolist=new nexacro.ComboListCtrl("combolist","absolute",0,0,1,1,null,null,this);_d.set_scrollbars("autovert");_d.set_codecolumn(_c);_d.set_datacolumn(_b);this.on_apply_innerdataset();_d.createComponent(true);_d._setEventHandler("onitemclick",this.on_notify_item_onitemclick,this);_d._setEventHandler("canitemchange",this.on_notify_item_canitemchange,this);_d._setEventHandler("onitemchanged",this.on_notify_item_onitemchanged,this);}};_pCombo._createList=function(_a,_b,_c){var _d=this.datacolumn;var _e=this.codecolumn;if(!_a||_a&&_a.getRowCount()<=0||(!_d&&!_e)){return;}if(!this.combolist){this._createListOnly(_a);}var _f=this.combolist;_f._is_redrawing=true;var _g=this.popupwindow;if(!_g){_g=this.popupwindow=new nexacro.ComboPopupWindow("combopopup","absolute",0,0,0,0,null,null,this);}if(!_g._is_created){_g.createComponent(true);_g._attach(_f);_g.on_created();}if(!_f._is_created){var _h=_f._control_element;if(_h&&_h._adjust_height==null){if(_b!=undefined&&_c!=undefined){_h.setElementSize(_b,_c);}else{var _i=this._getPopuplistSize(_a);var _j=_i.width;var _k=_i.height;_h.setElementSize(_j,_k);}}_f.on_created();_f.getElement().setElementToolTip("",_f.getElement().tooltiptype);}_g=null;_f=null;};_pCombo._update_popupwindow_position=function(){var _a=this.popupwindow;if(_a){var _b=_a._control_element;var _c=this.type=="filter"?(this._filtereddataset?this._filtereddataset:this._getFilteredDataset()):this._innerdataset;_c=(_c&&_c.rowcount==0)?this._innerdataset:_c;var _d=this._getPopuplistSize(_c);var _e=_d.height,_f=_d.width;var _g=nexacro._getElementPositionInFrame(this._control_element);{var _h={x:0,y:0};var _i=this._getWindow();var _j=_i.getWidth();var _k=_i.getHeight();var _l=this._getCumulativeZoomFactor()/100.0;_h.width=_j-_g.x+(this._adjust_width*_l);_f=parseInt(Math.min(_f,_h.width/_l));_h.height=_k-_g.y+(this._adjust_height*_l);_e=parseInt(Math.min(_e,_h.height/_l));}var _m=_a._getScalePosition(_f,_e);var _n=_g.x+_m.left,_o=_g.y+_m.top;if(this._getPopupType()=="center"){var _p=this._getOwnerFrame();if(!_p){return;}var _q=_p._getWindow();_p=_q?_q.frame:null;if(!_p){return;}_n=((_p.width/2)-(_b.width/2));_o=((_p.height/2)-(_b.height/2));_o=_o<0?0:_o;_b.setElementPosition(_n/_l,_o);}else{_b.setElementPosition(_n,_o);}_a=null;}};_pCombo._showPopup=function(_a,_b){if(this._isPopupVisible()){this._closePopup();}var _c=false;var _d=this.index;this._eventinfo.preindex=this.index;this._eventinfo.pretext=this.text;this._eventinfo.prevalue=this.value;if(this.on_fire_ondropdown(this)==false){return;}if(_d!=this.index){_c=true;}if((this.ondropdown&&this.dropdown.preventable&&this.ondropdown.defaultprevented===true)||!_a||(_a&&_a.getRowCount()==0)||this._getPopupType()=="none"){return;}if(_c){_b=this.index;}this._createListOnly(_a);this.combolist._set_scroll_max_size();var _e=this._getPopuplistSize(_a);var _f=parseInt(_e.width);var _g=parseInt(_e.height);if(_g>700){var _h={x:0,y:0};var _i=this._getWindow();var _j=_i.getWidth();var _k=_i.getHeight();var _l=nexacro._getElementPositionInFrame(this._control_element);var _m=this._getCumulativeZoomFactor()/100.0;_h.width=_j-_l.x+(this._adjust_width*_m);_f=parseInt(Math.min(_f,_h.width/_m));_h.height=_k-_l.y+(this._adjust_height*_m);_g=parseInt(Math.min(_g,_h.height/_m));}this._createList(_a,_f,_g);var _n=this.combolist;var _o=this.popupwindow;_o._track_capture=true;this.on_apply_prop_rtldirection();if(nexacro._enableaccessibility){this._want_arrows=true;}if(_n){if(this._getPopupType()=="center"){_o._popupCenterAuto(_f,_g);}else{_o._popupAuto(_f,_g);}if(nexacro.Browser=="Chrome"&&_n.vscrollbar){var _p=_n.getElement().scroll_top;_n.getElement().getContainerElement()._cached_scrollTop=1;_n.getElement().setElementVScrollPos(1);_n.getElement().setElementVScrollPos(_p);}_n._is_redrawing=false;_n.setInnerDataset(_a);_n.set_index(_b);_n._reset_item(_b);if(this._isRtl()){_n.on_update_position(true);}if(_b<=0&&_n.vscrollbar){if(nexacro.Browser=="Chrome"){_n.getElement().getContainerElement()._cached_scrollTop=1;_n.getElement().setElementVScrollPos(1);}_n.getElement().setElementVScrollPos(0);}if(nexacro._enableaccessibility){this._setAccessibilityStatExpanded(true);if(nexacro._accessibilitytype==4){var _q=_n._get_contents_rows();if(_q&&_q.length>0){var _b=this.index>=0?this.index:0;_q[_b]._setFocus();}}else if(nexacro._accessibilitytype==5){_n._setAccessibilityNotifyEvent();}}_n=null;}};_pCombo._closePopup=function(){var _a=this.popupwindow;if(_a){_a._closePopup();}_a=null;};_pCombo._getPopuplistSize=function(_a){var _b=this.combolist;var _c=_a.getRowCount();var _d=this.displayrowcount<_c?this.displayrowcount:_c;var _e,_f;var _g=this._getMaxTextSize(_a);var _h=parseInt(_b.currentstyle.itemheight._value,10);var _i=_b.on_find_CurrentStyle_padding(this._pseudo);var _j=_b.on_find_CurrentStyle_border(this._pseudo);var _k=_b.on_find_CurrentStyle_itempadding(this._pseudo);var _l=_b.on_find_CurrentStyle_itemborder(this._pseudo);var _m=_i?_i._getPaddingWidth():0;var _n=_i?_i._getPaddingHeight():0;var _o=_j?_j._getBorderWidth():0;var _p=_j?_j._getBorderHeight():0;var _q=_k?_k._getPaddingWidth():0;var _r=_l?_l._getBorderWidth():0;_f=_d<=0?_h*_c:_h*_d;_f+=_n+_p;_g+=_m+_o;_e=Math.max(this._adjust_width,_g);return {width:_e,height:_f};};_pCombo._getRawToListindex=function(_a){if(this.type=="filter"){var _b=this._filtereddataset?this._filtereddataset:this._getFilteredDataset();var _c=_b._viewRecords.length;var _d=_b._viewRecords;for(var _e=0;_e<_c;_e++ ){if(_d[_e]._rawidx==_a){return _e;}}}return _a;};_pCombo._getRawIndex=function(_a,_b){var _c=this._innerdataset;if(_b== -1||(_a._viewRecords.length<=_b)){return  -1;}var _d=_a._viewRecords[_b]._rawidx;var _e=_c._rawRecords;var _f=_e.length;for(var _g=0;_g<_f;_g++ ){if(_e[_g]._rawidx==_d){return _d;}}return  -1;};_pCombo._getFilteredDataset=function(){if(!this._filtereddataset){this._createFilteredDataset();}return this._filtereddataset;};_pCombo._createFilteredDataset=function(){var _a=this._filtereddataset;var _b=this.codecolumn;var _c=this.datacolumn;var _d=this._innerdataset;if(_d&&(!(_b in _d.colinfos)||!(_c in _d.colinfos))){if(_a){_a.clear();this._filtereddataset=null;}return;}if(!_d||_d&&_d.getRowCount()<=0||!_c&&!_b){if(_a){_a.clear();this._filtereddataset=null;}return;}var _e=_d.getRowCount();if(!_a){_a=this._filtereddataset=new nexacro.Dataset("filter_"+this.id);_a.addColumn(_b,"string");_a.addColumn(_c,"string");for(var _f=0;_f<_e;_f++ ){_a.insertRow(_f);_a.setColumn(_f,_b,_d.getColumn(_f,_b));_a.setColumn(_f,_c,_d.getColumn(_f,_c));}}else{if(this.combolist){this.combolist._userDsChange=false;_a.clear();_a.addColumn(_b,"string");_a.addColumn(_c,"string");for(var _f=0;_f<_e;_f++ ){_a.insertRow(_f);_a.setColumn(_f,_b,_d.getColumn(_f,_b));_a.setColumn(_f,_c,_d.getColumn(_f,_c));}this.combolist._userDsChange=true;this.combolist.redraw();}else{_a.clear();_a.addColumn(_b,"string");_a.addColumn(_c,"string");for(var _f=0;_f<_e;_f++ ){_a.insertRow(_f);_a.setColumn(_f,_b,_d.getColumn(_f,_b));_a.setColumn(_f,_c,_d.getColumn(_f,_c));}}}};_pCombo._getDragData=function(){if(this.comboedit&&this.comboedit.getSelectedText){return this.comboedit.getSelectedText();}};_pCombo._recheckValue=function(){var _a=this._innerdataset;if(!this.comboedit){return false;}if(this.value!==undefined){if(_a){var _b=_a.getRowCount();for(var _e=0;_e<_b;_e++ ){var _c=nexacro.DataUtils.toString(this.value);var _d=nexacro.DataUtils.toString(this._getItemValue(_e));if(_c==_d){this.index=_e;this.text=this._getItemText(_e);this.redraw();return;}}this.index= -1;this.text="";this.redraw();return;}}if(this.text!=""){if(_a){var _b=_a.getRowCount();for(var _e=0;_e<_b;_e++ ){if(this.text==this._getItemText(_e)){this.index=_e;this.value=this._getItemValue(_e);this.redraw();return;}}}}if(this.index!= -1){if(_a){if(this.index<_a.getRowCount()){this.value=this._getItemValue(this.index);this.text=this._getItemText(this.index);this.redraw();return;}}}this.index= -1;this.value=undefined;this.text="";if(!_a){this.redraw();}};_pCombo._getItemValue=function(_a){var _b=this._innerdataset;var _c=this.codecolumn||this.datacolumn;if(_b&&_c){var _d=_b.getColumn(_a,_c);if(_d==undefined&&(this.type=="filter"||this.type=="filterlike")){_d=this._innerdataset.getColumn(_a,_c);}return _d;}return null;};_pCombo._getItemText=function(_a){var _b=this._innerdataset;var _c=this.datacolumn||this.codecolumn;if(_b&&_c){var _d=_b.getColumn(_a,_c);if(_d==undefined&&(this.type=="filter"||this.type=="filterlike")){_d=this._innerdataset.getColumn(_a,_c);}return _d;}return null;};_pCombo._getIndex=function(_a){var _b=this._filtereddataset?this._filtereddataset:this._getFilteredDataset();var _c=(this.type=="filter"||this.type=="filterlike")?_b:this._innerdataset;if(_c){var _d=_c.getRowCount();for(var _f=0;_f<_d;_f++ ){var _e=this._getItemValue(_f);if(_a instanceof nexacro.Decimal){_a=_a.toString();}if(_e instanceof nexacro.Decimal){_e=_e.toString();}if(_a==_e){return _f;}}}return  -1;};if(nexacro.Browser=="Edge"||nexacro.Browser=="IE"){_pCombo._cancelSelect=function(){if(this.comboedit){this.comboedit._cancelSelect();}};}else{_pCombo._cancelSelect=function(){if(this.comboedit){this.comboedit.setCaretPos(0);}};}_pCombo._setAccessibilityInfoByHover=function(_a){if(this._isPopupVisible()){var _b=this.combolist;return _b._setAccessibilityInfoByHover(_a);}else{return this._setAccessibilityNotifyEvent();}};_pCombo._clearAccessibilityInfoByHover=function(){if(this.combolist){this.combolist._clearAccessibilityInfoByHover();}};_pCombo._setEditReaonly=function(){if(this.comboedit){var _a=this.comboedit._input_element;if(this.type=="dropdown"){if(_a){if(nexacro.Browser=="Runtime"){var _b=_a._handle;if(_b){nexacro.__setElementHandleReadOnly(_b,true);}}else{var _c=_a._input_handle;if(_c){nexacro.__setDOMNodeReadOnly(_c,true);}}}}else{if(_a){if(nexacro.Browser=="Runtime"){var _b=_a._handle;if(_b){nexacro.__setElementHandleReadOnly(_b,this.readonly);}}else{var _c=_a._input_handle;if(_c){nexacro.__setDOMNodeReadOnly(_c,this.readonly);}}}}}};delete _pCombo;_pCombo=null;nexacro.ComboListCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.ListBoxCtrl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._default_itemheight=nexacro._getCachedStyleObj("itemheight","20");this._overedItem=null;this._downItem=null;this._is_accessibility_changeIdx=false;};var _pComboListCtrl=nexacro._createPrototype(nexacro.ListBoxCtrl,nexacro.ComboListCtrl);nexacro.ComboListCtrl.prototype=_pComboListCtrl;_pComboListCtrl.on_find_CurrentStyle_itemheight=function(_a){return this.parent.on_find_CurrentStyle_itemheight(_a)||this._default_itemheight;};_pComboListCtrl.on_find_CurrentStyle_border=function(_a){return this._find_pseudo_obj("border",_a,"border");};_pComboListCtrl.on_find_CurrentStyle_itembackground=function(_a){return this.parent._find_pseudo_obj("itembackground",_a,"background")||this._find_pseudo_obj("itembackground",_a,"background");};_pComboListCtrl.on_find_CurrentStyle_itemgradation=function(_a){return this.parent._find_pseudo_obj("itemgradation",_a,"gradation")||this._find_pseudo_obj("itemgradation",_a,"gradation");};_pComboListCtrl.on_find_CurrentStyle_itemborder=function(_a){return this.parent._find_pseudo_obj("itemborder",_a,"border")||this._find_pseudo_obj("itemborder",_a,"border");};_pComboListCtrl.on_find_CurrentStyle_itembordertype=function(_a){return this.parent._find_pseudo_obj("itembordertype",_a,"bordertype")||this._find_pseudo_obj("itembordertype",_a,"bordertype");};_pComboListCtrl.on_find_CurrentStyle_itempadding=function(_a){return this.parent._find_pseudo_obj("itempadding",_a,"padding")||this._find_pseudo_obj("itempadding",_a,"padding");};_pComboListCtrl.on_find_CurrentStyle_itemaccessibility=function(_a){return this.parent._find_pseudo_obj("itemaccessibility",_a,"accessibility")||this._find_pseudo_obj("itemaccessibility",_a,"accessibility")||nexacro.Component._default_accessibility;};_pComboListCtrl.on_find_CurrentStyle_color=function(_a){return this.parent._find_pseudo_obj("itemcolor",_a,"color")||this._find_inherit_pseudo_obj("color",_a,"color")||nexacro.Component._default_color;};_pComboListCtrl.on_find_CurrentStyle_font=function(_a){return this.parent._find_pseudo_obj("itemfont",_a,"font")||this._find_inherit_pseudo_obj("font",_a,"font")||nexacro.Component._default_font;};_pComboListCtrl.on_find_CurrentStyle_rtlimagemirroring=function(_a){return;};_pComboListCtrl._on_mousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){return nexacro.Component.prototype._on_mousewheel.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);};_pComboListCtrl.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(_l&&(_l instanceof nexacro.ScrollBarCtrl||(_l.parent&&_l.parent instanceof nexacro.ScrollBarCtrl))){return;}if(nexacro.isTouchInteraction||nexacro.SupportTouch){if(this._is_fling_stop){return;}var _n=this._selectinfo_list;if(this.parent._scroll_proc){if(_n.length){var _o=_n.length-1;var _p=_n[_o];if(_p.index!=this.parent.index){_p.obj._keep_selecting=false;_p.obj._control_pseudo="";_p.obj._contents_pseudo="";_p.obj._stat_change("notselect","normal");_n.splice(_o,1);}}return;}}var _q=this._getWindow().findComponent(_m);var _r=this._selectinfo;var _s=nexacro.Component.prototype.on_fire_sys_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);var _t=_r.obj;if(_t){this._is_lbutton_up=true;_t._keep_selecting=false;var _u=this._get_contents_rows();var _v;if(this._contains(_m)){this.on_fire_onitemclick(this,_q.index,_q.text,_q.value,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);if(nexacro._enableaccessibility){if(this._accessibility_index> -1){var _w=this._get_rowobj_byrow(this._accessibility_index);if(_r.index!=this._accessibility_index&&_w&&_w._selected==true){this._deselect_all(true);_w._stat_change("notselect","normal");}}}_v=_q;var _x=_v.index;if(this.multiselect){if(this._shiftKey==true||this._ctrlKey==true){this._select_withmouseevent(_x);}else{this._do_select(_x,false);}}else{if(this._changeIndex(_x)){this.on_apply_index();if(!_t.selected){_t._stat_change("notselect","normal");}}else{if(!_t.selected){_t._stat_change("notselect","normal");}}}}else{if(!_t.selected){_t._stat_change("notselect","normal");}}if(nexacro._enableaccessibility&&nexacro._accessibilitytype==5){this._is_accessibility_changeIdx=true;}}return _s;};_pComboListCtrl.on_fire_sys_ontouchstart=function(_a,_b,_c,_d){if(this._is_fling_stop=this.parent._is_fling){return;}this._downItem=this._getWindow().findComponent(_a[0]._elem);var _e=nexacro.Component.prototype.on_fire_sys_ontouchstart.call(this,_a,_b,_c,_d);return _e;};_pComboListCtrl.on_fire_sys_ontouchend=function(_a,_b,_c,_d){if(_d&&(_d instanceof nexacro.ScrollBarCtrl||(_d.parent&&_d.parent instanceof nexacro.ScrollBarCtrl))){return;}if(this._is_fling_stop){return;}var _e=this._selectinfo_list;if(this.parent._scroll_proc){if(_e.length){var _f=_e.length-1;var _g=_e[_f];if(_g.index!=this.parent.index){_g.obj._keep_selecting=false;_g.obj._control_pseudo="";_g.obj._contents_pseudo="";_g.obj._stat_change("notselect","normal");_e.splice(_f,1);}}return;}var _h=this._getWindow().findComponent(_a[0]._elem);var _i=nexacro.Component.prototype.on_fire_sys_ontouchend.call(this,_a,_b,_c,_d);while(_e.length){var _j=_e[0].obj;if(_j){_j._keep_selecting=false;var _k=this._get_contents_rows();var _l;if(this._contains(_h)&&this._downItem.index==_h.index){var _m=_a[0];this.on_fire_onitemclick(this,_h.index,_h.text,_h.value,_m._current_state,this._altKey,this._ctrlKey,this._shiftKey,_m.screenX,_m.screenY,_m.canvasX,_m.canvasY,_m.clientX,_m.clientY);_l=_h;var _n=_l.index;if(this.multiselect){if(this._shiftKey==true||this._ctrlKey==true){this._select_withmouseevent(_n);}else{this._do_select(_n,false);}}else{if(this._changeIndex(_n)){this.on_apply_index();if(!_j.selected){_j._stat_change("notselect","normal");}}else{if(!_j.selected){_j._stat_change("notselect","normal");}}}}else{if(!_j.selected){_j._stat_change("notselect","normal");}}}_e.shift();}if(nexacro._enableaccessibility&&nexacro._accessibilitytype==5){this._is_accessibility_changeIdx=true;}return _i;};_pComboListCtrl.on_fire_sys_ontouchcancel=function(_a,_b,_c,_d){if(_d&&(_d instanceof nexacro.ScrollBarCtrl||(_d.parent&&_d.parent instanceof nexacro.ScrollBarCtrl))){return;}if(this._is_fling_stop){return;}var _e=this._selectinfo_list;if(this.parent._scroll_proc){if(_e.length){var _f=_e.length-1;var _g=_e[_f];if(_g.index!=this.parent.index){_g.obj._keep_selecting=false;_g.obj._control_pseudo="";_g.obj._contents_pseudo="";_g.obj._stat_change("notselect","normal");_e.splice(_f,1);}}return;}if(this._downItem){this._downItem._stat_change("notselect","normal");}while(_e.length){var _h=_e[0].obj;if(_h){_h._keep_selecting=false;if(!_h.selected){_h._stat_change("notselect","normal");}}_e.shift();}return;};_pComboListCtrl.on_vscroll=function(_a,_b){if(_b._evtkind=="fling"||_b._evtkind=="slide"){if(_b.pos!=this.parent._start_vscroll_pos){this.parent._scroll_proc=true;}}nexacro.ListBoxCtrl.prototype.on_vscroll.call(this,_a,_b);};_pComboListCtrl.on_hscroll=function(_a,_b){this.parent._scroll_proc=true;nexacro.ListBoxCtrl.prototype.on_hscroll.call(this,_a,_b);};_pComboListCtrl._is_fling_stop=false;_pComboListCtrl.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!nexacro.isTouchInteraction&&!nexacro.SupportTouch){return;}if(this._is_fling_stop=this.parent._is_fling){return;}var _n=_a.parent;while(!_n._is_component){_n=_n.parent;}if(!_n){return;}_n._keep_selecting=true;_n._control_pseudo="";_n._contents_pseudo="";_n._stat_change("select","selected");var _o=this._shiftKey=_e;this._ctrlKey=_d;this._altKey=_c;this._selectinfo.obj=_n;this._selectinfo.index=_n.index;this._selectinfo.text=_n.text;this._selectinfo.value=_n.value;this._selectinfo_list[this._selectinfo_list.length]=this._selectinfo;if(!_o){this._shift_select_base_index=_n.index;}this._lbtnDownIdx=_n.index;};_pComboListCtrl.on_notify_item_onlbuttondown=function(_a,_b){if(nexacro.isTouchInteraction||nexacro.SupportTouch){if(this._is_fling_stop=this.parent._is_fling){return;}}this.parent._start_vscroll_pos=this.vscroll&&this.vscroll.pos>0?this.vscroll.pos:0;this.parent._scroll_proc=false;if(!nexacro.isTouchInteraction&&!nexacro.SupportTouch){var _c=this.getSelectedItems();var _d=_c.length;for(var _f=0;_f<_d;_f++ ){var _e=this._get_rowobj_byrow(_c[_f]);if(_e){_e.selected=false;_e._stat_change("notselect","normal");}}}nexacro.ListBoxCtrl.prototype.on_notify_item_onlbuttondown.call(this,_a,_b);};_pComboListCtrl.on_notify_item_onmouseenter=function(_a,_b){};_pComboListCtrl.on_notify_item_onmouseleave=function(_a,_b){};_pComboListCtrl._create_item=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return new nexacro.ComboListItemCtrl(_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pComboListCtrl._reset_item=function(_a){var _b=this.getElement();var _c=this.index;if(this._overedItem){_c=this._overedItem.index;}var _d=_b.scroll_top==undefined?0:_b.scroll_top;var _e,_f,_g;var _h=parseInt(this.currentstyle.itemheight._value,10);var _i=this._get_rowcount();var _j=this._get_last_visible_row(true)-1;if(_a>=_i){return;}_f=(_a<0?0:_a)*_h;_g=_f+_h;if((_c!=_a)&&(_g>=this._client_height+_d)&&(this.parent._downkey==true)){_e=_d+_h;}else if(_f<_d){_e=_f;}if(_e>=0){this.vscrollbar.set_pos(_e);}var _k=this._get_contents_rows();var _l=this._getItemByRealIdx(_k,this._overeditemindex).obj;var _m=this._getItemByRealIdx(_k,_a).obj;if(_l){_l.on_apply_mouseover(false);this._set_overeditemindex( -1);}if(_m){this._overedItem=_m;_m.on_apply_mouseover(true);this._set_overeditemindex(_m.index);}};_pComboListCtrl._refresh_size=function(_a){var _b=this.getElement();if(_b){this._onResetScrollBar();var _c=this._contents_maxwidth;var _d=this._contents_maxheight;var _e=_b.container_maxwidth;var _f=_b.container_maxheight;_c=Math.max(_c,_b.client_width);_d=Math.max(_d,_b.client_height);if((_b.container_maxwidth!=_c||_b.container_maxheight!=_d)){_b.setElementScrollMaxSize(_c,_d);}if(_a){this._refresh_scroll();}}};_pComboListCtrl._adjustScrollRows_callback=function(_a){this._adjustScrollRows_proc(_a);if(this.parent&&!this.parent._is_fling){this._clearHiddenPage();}};_pComboListCtrl._set_overeditemindex=function(_a){this._overeditemindex=_a;this.parent._moverindex=_a;};_pComboListCtrl._changeIndex=function(_a,_b,_c,_d){var _e=this.parent;if(_b||_a!=this.index||((_e.type=="search")&&_e.index!=_a&&_a==this.index&&!_e._keyval)){var _f=this._innerdataset;var _g=parseInt(_a,10)|0;var _h=this.index;var _i=this.text;var _j=this.value;var _k=(this.codecolumn||this.datacolumn);if(_f&&_k){var _l=_f.getColumn(_g,this.datacolumn||this.codecolumn);var _m=_f.getColumn(_g,this.codecolumn||this.datacolumn);var _n=_l==undefined?"":_l;var _o=_m;if(_c!=true){if(this.on_fire_canitemchange(this,_h,_i,_j,_g,_n,_o)!=false){this._accessibility_index=this.index=_g;this.text=_n;if(!this._is_value_setting){this.value=_o;}this.applyto_bindSource("value",_m);this.on_fire_onitemchanged(this,_h,_i,_j,_g,_n,_o);return true;}}else{this._accessibility_index=this.index=_g;this.text=_n;if(!this._is_value_setting){this.value=_o;}this.applyto_bindSource("value",_m);return true;}}}else if((_e.type=="filterlike"||_e.type=="filter")&&_a==this.index&&!_e._keyval){if(_d=="_select_add"){return true;}var _f=_e._filtereddataset?_e._filtereddataset:_e._getFilteredDataset();_a=_e._getRawIndex(_f,_a);if(_a!=_e.index){var _g=parseInt(this.index,10)|0;var _h=this.index;var _i=this.text;var _j=this.value;var _k=(this.codecolumn||this.datacolumn);if(_f&&_k){var _l=_f.getColumn(_g,this.datacolumn||this.codecolumn);var _m=_f.getColumn(_g,this.codecolumn||this.datacolumn);var _n=_l==undefined?"":_l;var _o=_m;if(this.on_fire_canitemchange(this,_h,_i,_j,_g,_n,_o)!=false){this._accessibility_index=this.index=_g;this.text=_n;if(!this._is_value_setting){this.value=_o;}this.applyto_bindSource("value",_m);this.on_fire_onitemchanged(this,_h,_i,_j,_g,_n,_o);return true;}}}else{var _p=this._get_rowobj_byrow(_a);if(_p&&_p.selected==false){_p.set_selected(true);}if(_e._isPopupVisible()&&!_c){if(!_e._scroll_proc){_e.popupwindow._closePopup();}}}}return false;};_pComboListCtrl._setAccessibilityNotifyEvent=function(_a){if(this._is_accessibility_changeIdx){this._is_accessibility_changeIdx=false;return this.parent._setAccessibilityNotifyEvent(_a);}else{return nexacro.ListBox.prototype._setAccessibilityNotifyEvent.call(this,_a);}};delete _pComboListCtrl;_pComboListCtrl=null;nexacro.ComboListItemCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.ListItemCtrl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};var _pComboListItemCtrl=nexacro._createPrototype(nexacro.ListItemCtrl,nexacro.ComboListItemCtrl);nexacro.ComboListItemCtrl.prototype=_pComboListItemCtrl;_pComboListItemCtrl.on_mousemove_basic_action=function(){if(nexacro.isTouchInteraction||nexacro.SupportTouch){return;}var _a=this.parent._overedItem;if(_a&&_a!=this){if(_a._apply_pushed_pseudo&&_a._is_push){_a._stat_change("notpush","normal");_a._is_pushed_area=false;}else if(!_a._selected){_a._stat_change("","normal");}_a=null;}this.parent._overedItem=this;if(this._apply_pushed_pseudo&&this._is_push){this._stat_change("push","pushed");this._is_pushed_area=true;}else{this.parent._set_overeditemindex(this.index);this._stat_change("","mouseover");}};_pComboListItemCtrl.on_apply_mouseover=function(_a){if(this.selected){return;}if(_a){this._stat_change("notselect","mouseover");}else{this._stat_change("notselect","normal");}};_pComboListItemCtrl.on_apply_selected=function(){if(this.selected){this._stat_change("select","selected");}else{this._stat_change("notselect","normal");}};_pComboListItemCtrl._common_lbuttonup=function(_a,_b,_c,_d,_e){if(_a){var _f=nexacro._getFirstTouchInfo(_a);if(_f){_b=_f._elem;_c=_f.canvasX;_d=_f.canvasY;_e=_b;_f=null;}}if(_b!=_e){this.parent.parent._is_real_upelem=_e;}return true;};_pComboListItemCtrl._on_touchend=function(_a,_b,_c,_d,_e,_f){this._common_lbuttonup(_c,null,null,null,null);return nexacro.Component.prototype._on_touchend.call(this,_a,_b,_c,_d,_e,_f);};_pComboListItemCtrl._on_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){this._common_lbuttonup(null,_a,_f,_g,_m);return nexacro.Component.prototype._on_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};_pComboListItemCtrl.on_apply_custom_setfocus=function(_a){if(nexacro._enableaccessibility&&nexacro._accessibilitytype==4){return nexacro.Component.prototype.on_apply_custom_setfocus.call(this,_a);}return nexacro.ListItemCtrl.prototype.on_apply_custom_setfocus.call(this,_a);};delete _pComboListItemCtrl;_pComboListItemCtrl=null;nexacro.ComboEditCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.EditCtrl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._accessibility_role="combobox";};var _pComboEditCtrl=nexacro._createPrototype(nexacro.EditCtrl,nexacro.ComboEditCtrl);nexacro.ComboEditCtrl.prototype=_pComboEditCtrl;_pComboEditCtrl.on_find_CurrentStyle_color=function(_a){return this.parent.on_find_CurrentStyle_color(_a,this)||nexacro.Component._default_color;};_pComboEditCtrl.on_find_CurrentStyle_displaynulltextcolor=function(_a){return this.parent.on_find_CurrentStyle_displaynulltextcolor(_a,this)||nexacro.Component._default_color;};_pComboEditCtrl.on_find_CurrentStyle_font=function(_a){return this.parent.on_find_CurrentStyle_font(_a,this)||nexacro.Component._default_font;};_pComboEditCtrl.on_find_CurrentStyle_align=function(_a){return this.parent.on_find_CurrentStyle_align(_a,this)||nexacro.Component._default_align;};_pComboEditCtrl.on_find_CurrentStyle_accessibility=function(_a){return this.parent.on_find_CurrentStyle_accessibility(_a,this)||nexacro.Component._default_accessibility;};_pComboEditCtrl.on_find_CurrentStyle_background=function(_a){return this.parent.on_find_CurrentStyle_background(_a,this);};_pComboEditCtrl.on_find_CurrentStyle_border=function(_a){return this.parent.on_find_CurrentStyle_border(_a,this);};_pComboEditCtrl.on_find_CurrentStyle_bordertype=function(_a){return this.parent.on_find_CurrentStyle_bordertype(_a,this);};_pComboEditCtrl.on_find_CurrentStyle_gradation=function(_a){return this.parent.on_find_CurrentStyle_gradation(_a,this);};_pComboEditCtrl.on_apply_custom_setfocus=function(_a){var _b=this._input_element;if(_b){if(nexacro._enableaccessibility){_b._setElementInputRole();}_b.setElementFocus(true);_b=null;}};_pComboEditCtrl.on_get_style_accessibility_label=function(){return "";};_pComboEditCtrl._getFromComponent=function(_a){var _b=_a.parent;if(_b&&_b._isPopupVisible()){return _b;}else{return nexacro.Component.prototype._getFromComponent.call(this,_a);}};_pComboEditCtrl.set_value=function(_a){nexacro.Edit.prototype.set_value.call(this,_a);this._setAccessibilityValue(this.text,false);if(this.parent.type=="dropdown"&&this._input_element._is_focused==true){this.setCaretPos(0);}};_pComboEditCtrl.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this.parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this.parent,_l);};delete _pComboEditCtrl;_pComboEditCtrl=null;nexacro.ComboButtonCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.ButtonCtrl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};var _pComboButtonCtrl=nexacro._createPrototype(nexacro.ButtonCtrl,nexacro.ComboButtonCtrl);nexacro.ComboButtonCtrl.prototype=_pComboButtonCtrl;_pComboButtonCtrl.on_find_CurrentStyle_background=function(_a){return this._find_ctrl_pseudo_obj("background",_a,"background");};_pComboButtonCtrl.on_find_CurrentStyle_gradation=function(_a){return this._find_ctrl_pseudo_obj("gradation",_a,"gradation");};_pComboButtonCtrl.on_find_CurrentStyle_border=function(_a){return this._find_ctrl_pseudo_obj("border",_a,"border");};_pComboButtonCtrl.on_find_CurrentStyle_bordertype=function(_a){return this._find_ctrl_pseudo_obj("bordertype",_a,"bordertype");};_pComboButtonCtrl.on_find_CurrentStyle_align=function(_a){return this._find_ctrl_pseudo_obj("align",_a,"align")||nexacro.Component._default_align;};_pComboButtonCtrl.on_find_CurrentStyle_margin=function(_a){return this._find_ctrl_pseudo_obj("margin",_a,"margin")||nexacro.Component._default_margin;};_pComboButtonCtrl.on_find_CurrentStyle_cursor=function(_a){return this._find_ctrl_pseudo_obj("cursor",_a,"cursor")||nexacro.Component._default_cursor;};_pComboButtonCtrl.on_find_CurrentStyle_opacity=function(_a){return this._find_ctrl_pseudo_obj("opacity",_a,"opacity")||nexacro.Component._default_opacity;};_pComboButtonCtrl.on_find_CurrentStyle_shadow=function(_a){return this._find_ctrl_pseudo_obj("shadow",_a,"shadow");};_pComboButtonCtrl.on_apply_custom_setfocus=function(_a){var _b=this.parent;if(_b){if(_b.comboedit){if(!(nexacro.isTouchInteraction||nexacro.SupportTouch)||(nexacro._isMobile&&nexacro._isMobile())){_b.comboedit.on_apply_custom_setfocus(_a);}else{nexacro.Component.prototype.on_apply_custom_setfocus.call(this,_a);}}_b=null;}};_pComboButtonCtrl.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(nexacro.isTouchInteraction||nexacro.SupportTouch){var _m=new nexacro.EventInfo(this,"ondropdown");if((nexacro.Browser=="Runtime"&&(_a=="lbutton"||_a=="touch"))||(nexacro.Browser!="Runtime"&&(_a=="touch"||(!nexacro.isTouchInteraction&&_a=="lbutton")))){this.parent.on_notify_ondropdown(this,_m);}}return this.parent.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pComboButtonCtrl.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this.parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this.parent,_l);};delete _pComboButtonCtrl;_pComboButtonCtrl=null;nexacro.ComboPopupWindow=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.PopupComponent.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_subcontrol=true;this._is_ios=false;};var _pPopupWindow=nexacro._createPrototype(nexacro.PopupComponent,nexacro.ComboPopupWindow);nexacro.ComboPopupWindow.prototype=_pPopupWindow;_pPopupWindow.set_visible=function(_a){nexacro.PopupComponent.prototype.set_visible.call(this,_a);var _b=this.parent;if(!_a){var _c=_b._keyval;var _d=_b._eventinfo;if(_c===null||_c===undefined){if(_b.displaynulltext!=""&&_b.value==undefined){_b._setEditValue(undefined);}else{_b._setEditValue(_b.text);}}_b.on_fire_oncloseup(_b,_d.preindex,_d.pretext,_d.prevalue,_d.postindex,_d.posttext,_d.postvalue,_d.isselect);}else{_b._eventinfo.isselect=false;}_b=null;};_pPopupWindow._closePopup=function(){if(nexacro._enableaccessibility){this.parent._want_arrows=false;this.parent._setAccessibilityStatExpanded(false);}if(nexacro.OS=="iOS"&&this._is_ios&&this.parent.comboedit._input_element._is_ios_composition){this.parent.comboedit._input_element._input_handle.blur();this.parent.comboedit._input_element._is_ios_composition=false;}nexacro.PopupComponent.prototype._closePopup.call(this);var _a=this._getWindow();if(_a&&this._track_capture){_a._releaseCaptureLock(this);_a._releaseCaptureLock(this._attached_comp);this._track_capture=false;}var _b=this._find_lastFocused(this);if(!this.parent._is_mouseover&&_b==this.parent){this.parent._stat_change("focus","focused");}};_pPopupWindow._getMainFrame=function(){var _a=this;while(_a&&_a instanceof nexacro.MainFrame){_a=_a.parent;}return _a;};_pPopupWindow._getScalePosition=function(_a,_b){var _c=this.parent;var _d=this._attached_comp;if(!_d){return;}var _e=this._getOwnerFrame();if(!_e){return;}var _f=_e._getWindow();_e=_f?_f.frame:null;if(!_e){return;}var _g=this._getCumulativeZoomFactor()/100.0;var _h=nexacro._getElementPositionInFrame(_c.getElement());var _i=nexacro._getElementPositionInFrame(_e.getElement());var _j=nexacro._getElementScreenPosition(_e.getElement());var _k=_a;var _l=_b*_g;var _m=_c._adjust_width;var _n=_c._adjust_height*_g;var _o,_p,_q,_r;var _s,_t;var _u=_b;var _v,_w,_x;_s=_i.x+_e._adjust_width;_t=_i.y+_e._adjust_height;var _y=nexacro._getScreenAvailHeight();_o=0;_p=_n;_q=_k;_r=_l;var _z=0;if(_y>_t&&_j.y+_t>_y){_z=_y-_j.y-(_h.y+_n);}else if(nexacro.Browser=="Runtime"&&_y<=_t){_z=_y-_j.y-(_h.y+_n);}else{_z=_t-(_h.y+_n);}var _aa=_h.y;var _ab=list_pb=list_bt=list_bb=0;var _ac=(parseInt(_d.currentstyle.itemheight._value,10))*_g;if(_d.currentstyle.padding){_ab=(parseInt(_d.currentstyle.padding.top,10))*_g;list_pb=(parseInt(_d.currentstyle.padding.bottom,10))*_g;}if(_d.currentstyle.border){list_bt=(parseInt(_d.currentstyle.border.top_width,10))*_g;list_bb=(parseInt(_d.currentstyle.border.bottom_width,10))*_g;}var _ad=_ab+list_pb+list_bt+list_bb;var _ae=_c.displayrowcount;var _af=0;var _ag=0;var _ah=_c._filtereddataset?_c._filtereddataset:_c._getFilteredDataset();var _ai=(_c.type=="filter"||_c.type=="filterlike")?_ah:_c._innerdataset;if(_ai){_af=_ai.getRowCount();}if(_ae== -1){_ag=(_af<3?_af:3)*_ac+_ad;_l=(_af*_ac+_ad);if(_z>_ag){if(_z>_l){_r=_l;}else{_r=_z;}}else{if(_aa>_ag){if(_aa>_l){_p= -_l;_r=_l;}else{_p= -_aa;_r=_aa;}}else{if(_z>_aa){_r=_z;}else{_p= -_aa;_r=_aa;}}}}else{_af=_af>_ae?_ae:_af;_ag=_af*_ac+_ad;_l=(_af*_ac+_ad);if(_z>_ag){_r=_ag;}else{if(_aa>_ag){_p= -_ag;_r=_ag;}else{if(_z>_aa){_r=_z;}else{_p= -_aa;_r=_aa;}}}}_w=this.parent._getMaxTextSize(this.parent._innerdataset);if(_d.vscrollbar){_v=_d.vscrollbar.width;_x=_w+_v;if((_m<_x)&&(_r<_u)){_q+=_v;}}if(_h.x<_i.x){var _aj=_i.x-_h.x;_o+=_aj;}else if(_h.x+_k>_i.x+_s){var _aj=(_h.x+_k)-(_i.x+_s);_o-=_aj;if(_d.vscrollbar){_o-=_v;}if(_o<(_i.x-_h.x)){_o=_i.x-_h.x;}}return {left:_o,top:_p,width:_q,height:_r,scale:_g};};_pPopupWindow._popupAuto=function(_a,_b){var _c=this._getScalePosition(_a,_b);var _d=_c.scale,_e=_c.left,_f=_c.top,_g=_c.width,_h=_c.height;var _i=this.getElement();if(_i.setZoom){_i.setZoom(_d*100);}else if(nexacro.ScrollableContainerElement.prototype.setZoom){nexacro.ScrollableContainerElement.prototype.setZoom.call(_i,_d*100);}if(this._attached_comp._isRtl()){_e= -_e;}this._popupBy(this.parent,_e,_f,_g,(_h/_d));};_pPopupWindow._popupCenterAuto=function(_a,_b){var _c=this._getScalePosition(_a,_b);var _d=_c.scale,_e=_c.left,_f=_c.top,_g=_c.width,_h=_c.height;var _i=this.getElement();if(_i.setZoom){_i.setZoom(_d*100);}else if(nexacro.ScrollableContainerElement.prototype.setZoom){nexacro.ScrollableContainerElement.prototype.setZoom.call(_i,_d*100);}var _j=this._getOwnerFrame();if(!_j){return;}var _k=_j._getWindow();_j=_k?_k.frame:null;var _l=nexacro._getElementPositionInFrame(_j.getElement());var _m=((_j.width/2)-(_g/2));var _n=((_j.height/2)-(_h/2));_n=_n<0?0:_n;this._popupBy(_j,(_m/_d),_n,_g,(_h/_d));};delete _pPopupWindow;_pPopupWindow=null;nexacro.ComboCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Combo.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_subcontrol=true;};var _pComboCtrl=nexacro.ComboCtrl.prototype=nexacro._createPrototype(nexacro.Combo,nexacro.ComboCtrl);_pComboCtrl._type_name="ComboControl";nexacro._setForControlStyleFinder(_pComboCtrl);_pComboCtrl.on_created_contents=function(){nexacro.Combo.prototype.on_created_contents.call(this);if(nexacro._enableaccessibility&&nexacro._accessibilitytype==4){this._control_element.setElementAccessibilityHidden(true);}};delete _pComboCtrl;_pComboCtrl=null;};