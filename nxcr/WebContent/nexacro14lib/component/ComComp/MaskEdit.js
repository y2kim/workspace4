if(!nexacro.MaskEdit){nexacro.MaskEdit_Style=function(_a){nexacro.Style.call(this);if(_a){this._target=_a;}this.caretcolor=null;this.compositecolor=null;this.displaynulltextcolor=null;};var _pMaskEditStyle=nexacro._createPrototype(nexacro.Style,nexacro.MaskEdit_Style);nexacro.MaskEdit_Style.prototype=_pMaskEditStyle;eval(nexacro._createColorAttributeEvalStr("_pMaskEditStyle","caretcolor"));eval(nexacro._createColorAttributeEvalStr("_pMaskEditStyle","compositecolor"));eval(nexacro._createColorAttributeEvalStr("_pMaskEditStyle","selectcolor"));eval(nexacro._createColorAttributeEvalStr("_pMaskEditStyle","selectbackground"));eval(nexacro._createColorAttributeEvalStr("_pMaskEditStyle","displaynulltextcolor"));_pMaskEditStyle.__custom_emptyObject=function(){this.caretcolor=null;this.compositecolor=null;this.selectcolor=null;this.selectbackground=null;this.displaynulltextcolor=null;};_pMaskEditStyle.__get_custom_style_value=function(){var _a="";if(this.caretcolor&&!this.caretcolor._is_empty){_a+="caretcolor:"+this.caretcolor._value+"; ";}if(this.compositecolor&&!this.compositecolor._is_empty){_a+="compositecolor:"+this.compositecolor._value+"; ";}if(this.selectcolor&&!this.selectcolor._is_empty){_a+="selectcolor:"+this.selectcolor._value+"; ";}if(this.selectbackground&&!this.selectbackground._is_empty){_a+="selectbackground:"+this.selectbackground._value+"; ";}if(this.displaynulltextcolor&&!this.displaynulltextcolor._is_empty){_a+="displaynulltextcolor:"+this.displaynulltextcolor._value+"; ";}return _a;};nexacro.MaskEdit_CurrentStyle=function(){nexacro.CurrentStyle.call(this);this.caretcolor=null;this.compositecolor=null;this.selectcolor=null;this.selectbackground=null;this.displaynulltextcolor=null;};var _pMaskEditCurrentStyle=nexacro._createPrototype(nexacro.CurrentStyle,nexacro.MaskEdit_CurrentStyle);nexacro.MaskEdit_CurrentStyle.prototype=_pMaskEditCurrentStyle;_pMaskEditCurrentStyle.__custom_emptyObject=_pMaskEditStyle.__custom_emptyObject;_pMaskEditCurrentStyle.__get_custom_style_value=_pMaskEditStyle.__get_custom_style_value;delete _pMaskEditStyle;delete _pMaskEditCurrentStyle;_pMaskEditStyle=null;_pMaskEditCurrentStyle=null;nexacro.MaskEdit=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this.type="number";this.limitbymask="decimal";this.trimtype="none";this.value=undefined;this.text="";this.displaynulltext="";this.readonly=false;this.autoselect=false;this.autoskip=false;this.clipmode="includespace";this.mask="";this.maskchar="_";this.updatebindingvalue="default";this.usesoftkeyboard=true;this.useinputpanel=true;this.usecontextmenu=true;this._activate_flag=false;this._is_focusing=false;this._is_first_focus=true;this._lose_focus_comp=null;this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"ondragend":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"oneditclick":1,"canchange":1,"cancharchange":1,"onchanged":1,"onchar":1,"ontextchange":1,"ontextchanged":1,"oncontextmenu":1,"onfling":1,"onflingstart":1,"onflingend":1,"onpinch":1,"onpinchstart":1,"onpinchend":1,"onslide":1,"onslidestart":1,"onslideend":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"onlongpress":1};this._input_element=null;this._edit_base_api=null;this._accessibility_role="edit";this._caret_pos={begin: -1,end: -1};this._setcaret=false;this._textchanging=false;this._dsupdate_in_textchanging=false;this._dsupdate_cancel=false;this._has_inputElement=true;this._locale="";this._old_selection=[0,0];};var _pMaskEdit=nexacro._createPrototype(nexacro.Component,nexacro.MaskEdit);nexacro.MaskEdit.prototype=_pMaskEdit;_pMaskEdit._type_name="MaskEdit";_pMaskEdit.on_apply_custom_pseudo=function(_a){if(_a){this._pseudo=_a;}else if(this._pseudo){_a=this._pseudo;}var _b=this.currentstyle;var _c=this.on_find_CurrentStyle_align(_a)||nexacro.Component._default_left_align;if(_c!=_b.align){_b.align=_c;this.on_apply_style_align(_c);}var _d=this.on_find_CurrentStyle_font(_a);if(_d!=_b.font){_b.font=_d;this.on_apply_style_font(_d);}var _e=this.on_find_CurrentStyle_letterspace(_e);if(_e!=_b.letterspace){_b.letterspace=_e;this.on_apply_style_letterspace(_e);}var _f=this.on_find_CurrentStyle_color(_a);if(_f!=_b.color){_b.color=_f;this.on_apply_style_color(_f);}_f=this.on_find_CurrentStyle_caretcolor(_a);if(_f!=_b.caretcolor){_b.caretcolor=_f;this.on_apply_style_caretcolor(_f);}_f=this.on_find_CurrentStyle_compositecolor(_a);if(_f!=_b.compositecolor){_b.compositecolor=_f;this.on_apply_style_compositecolor(_f);}_f=this.on_find_CurrentStyle_selectcolor(_a);if(_f!=_b.selectcolor){_b.selectcolor=_f;this.on_apply_style_selectcolor(_f);}_f=this.on_find_CurrentStyle_displaynulltextcolor(_a);if(_f!=_b.displaynulltextcolor){_b.displaynulltextcolor=_f;this.on_apply_style_displaynulltextcolor(_f);}_f=this.on_find_CurrentStyle_selectbackground(_a);if(_f!=_b.selectbackground){_b.selectbackground=_f;this.on_apply_style_selectbackground(_f);}var _g=this.on_find_CurrentStyle_rtlimagemirroring(_a);if(_g!=_b.rtlimagemirroring){_b.rtlimagemirroring=_g;this.on_apply_style_rtlimagemirroring(_g);}};_pMaskEdit.on_create_custom_style=function(){return new nexacro.MaskEdit_Style(this);};_pMaskEdit.on_create_custom_currentStyle=function(){return new nexacro.MaskEdit_CurrentStyle();};_pMaskEdit.on_find_CurrentStyle_cursor=function(_a){var _b="";if(!this._isEnable()&&this.parent&&!this.parent._is_application){if(!this._is_subcontrol){_b=this.parent._find_pseudo_obj("cursor",_a,"value");}else{var _c=this.parent;while(_c&&_c._is_form){_c=_c.parent;}if(_c){_b=_c._find_pseudo_obj("cursor",_a,"value");}else{_b=null;}}}else{_b=this._find_pseudo_obj("cursor",_a,"value");}return (_b)?_b:nexacro.Component._default_cursor;};_pMaskEdit.on_find_CurrentStyle_caretcolor=function(_a){return this._find_pseudo_obj("caretcolor",_a,"color");};_pMaskEdit.on_find_CurrentStyle_compositecolor=function(_a){return this._find_pseudo_obj("compositecolor",_a,"color");};_pMaskEdit.on_find_CurrentStyle_selectcolor=function(_a){var _b=this._find_pseudo_obj("selectcolor",_a,"color");if(!_b){if(_a=="focused"){_b=nexacro.Edit._focused_selectcolor;}else{_b=nexacro.Edit._default_selectcolor;}}return _b;};_pMaskEdit.on_find_CurrentStyle_displaynulltextcolor=function(_a){var _b=this._find_pseudo_obj("displaynulltextcolor",_a,"color");if(!_b){_b=this._find_pseudo_obj("color",_a,"color");}if(!_b){_b=this._find_inherit_pseudo_obj("color",_a,"color");}return (_b)?_b:nexacro.Component._default_color;};_pMaskEdit.on_find_CurrentStyle_selectbackground=function(_a){var _b=this._find_pseudo_obj("selectbackground",_a,"background");return (_b)?_b:nexacro.Edit._default_selectbackground;};_pMaskEdit.on_update_style_cursor=function(){var _a=this.on_find_CurrentStyle_cursor(this._pseudo);this.currentstyle.cursor=_a;this.on_apply_style_cursor(_a);};_pMaskEdit.on_update_style_caretcolor=function(){var _a=this.on_find_CurrentStyle_caretcolor(this._pseudo);this.currentstyle.caretcolor=_a;this.on_apply_style_caretcolor(_a);};_pMaskEdit.on_update_style_compositecolor=function(){var _a=this.on_find_CurrentStyle_compositecolor(this._pseudo);this.currentstyle.compositecolor=_a;this.on_apply_style_compositecolor(_a);};_pMaskEdit.on_update_style_selectcolor=function(){var _a=this.on_find_CurrentStyle_selectcolor(this._pseudo);this.currentstyle.selectcolor=_a;this.on_apply_style_selectcolor(_a);};_pMaskEdit.on_update_style_displaynulltextcolor=function(){var _a=this.on_find_CurrentStyle_displaynulltextcolor(this._pseudo);this.currentstyle.displaynulltextcolor=_a;this.on_apply_style_displaynulltextcolor(_a);};_pMaskEdit.on_update_style_selectbackground=function(){var _a=this.on_find_CurrentStyle_selectbackground(this._pseudo);this.currentstyle.selectbackground=_a;this.on_apply_style_selectbackground(_a);};_pMaskEdit.on_apply_style_color=function(_a){var _b=this._input_element;if(_b){_b.setElementColor(_a);}};_pMaskEdit.on_apply_style_font=function(_a){if(_a==null){_a=nexacro.Component._default_font;}var _b=this._edit_base_api;var _c=this._input_element;if(_c){_c.setElementFont(_a);_b.setPosition();_b._apply_style(_c);}};_pMaskEdit.on_apply_style_cursor=function(_a){var _b=this.getElement();if(_b){_b.setElementCursor(_a);var _c=this._input_element;if(_c){_c.setElementCursor(_a);}}};_pMaskEdit.on_apply_style_align=function(_a){if(_a==null){_a=nexacro.Component._default_left_align;}var _b=this._edit_base_api;var _c=this._input_element;if(_c){_b.setPosition();_b._apply_style(_c);}};_pMaskEdit.on_apply_style_caretcolor=function(_a){};_pMaskEdit.on_apply_style_compositecolor=function(_a){};_pMaskEdit.on_apply_style_selectbackground=function(_a){var _b=this._input_element;if(_b){_b.setElementSelectBackgroundColor(_a);}};_pMaskEdit.on_apply_style_selectcolor=function(_a){var _b=this._input_element;if(_b){_b.setElementSelectColor(_a);}};_pMaskEdit.on_apply_style_displaynulltextcolor=function(_a){var _b=this._input_element;if(_b){_b.setElementDisplayNullTextColor(_a);}};_pMaskEdit.on_apply_style_accessibility=function(_a){nexacro.Component.prototype.on_apply_style_accessibility.call(this,_a);if(this._input_element){this._input_element.setElementAccessibilityRole(_a.role);}};_pMaskEdit.on_apply_style_letterspace=function(_a){if(this._input_element){this._input_element.setElementLetterSpace(_a);}};_pMaskEdit.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._input_element=new nexacro.InputElement(_a);if(this.type=="number"){this._edit_base_api=new nexacro.EditMaskNumber(this);}else{this._edit_base_api=new nexacro.EditMaskString(this);}var _c=this.currentstyle;_b.setElementSize(this._client_width,this._client_height);_b.setElementFont(_c.font);_b.setElementColor(_c.color);_b.setElementAlign(_c.align);_b.setElementSelectColor(_c.selectcolor);_b.setElementSelectBackgroundColor(_c.selectbackground);_b.setElementDisplayNullTextColor(_c.displaynulltextcolor);}};_pMaskEdit.on_created_contents=function(_a){this._default_align=this._default_left_align;var _b=this._edit_base_api;var _c=this._input_element;if(_c){var _d=this.currentstyle;_c.setElementInputType(this.type);_c.setElementInputTypeKeypad(this.type);this.on_apply_limitbymask();this.on_apply_trimtype();this.on_apply_maskchar();this.on_apply_clipmode();this.on_apply_mask();this.on_apply_value();this.on_apply_locale();_c._is_maskedit=true;_c.create();_c.setElementImeMode("disabled");_c.setElementEnable(this._isEnable());_c.setElementReadonly(this.readonly);_c._bindEvent(_c);if(_b){_b.setPosition();}if(nexacro._isDesktop()&&((nexacro.Browser=="Chrome"||nexacro.Browser=="Safari"))){this.setCaretPos(0);}if(nexacro._enableaccessibility&&nexacro._accessibilitytype==4){_c._setElementInputLabel();}this.on_apply_prop_rtldirection();this.on_apply_displaynulltext();this.on_apply_style_letterspace(_d.letterspace);if(_d&&_d.cursor){this.on_apply_style_cursor(_d.cursor);}}};_pMaskEdit.on_destroy_contents=function(){var _a=this._input_element;if(_a){_a._unBindEvent();_a.destroy();this._input_element=null;}var _b=this._edit_base_api;if(_b){_b._destroy();this._edit_base_api=null;}this._caret_pos=null;};_pMaskEdit.on_change_containerRect=function(_a,_b){var _c=this._input_element;var _d=this._edit_base_api;if(_c&&_d){_d.setPosition();_d._apply_style(_c);}};_pMaskEdit.on_getBindableProperties=function(){return "value";};_pMaskEdit.on_apply_prop_enable=function(_a){var _b=this._input_element;if(_b){_b.setElementEnable(_a);this.on_apply_style_cursor(this.currentstyle.cursor);}};_pMaskEdit.on_apply_custom_setfocus=function(_a){var _b=this._input_element;var _c=this._edit_base_api;if(_b&&_c){if(nexacro.Browser=="IE"&&nexacro.BrowserVersion==8){if(this.displaynulltext&&this._is_focusing){return;}}this._is_focusing=true;if(!(nexacro.Browser=="Gecko"&&_b._is_mousedown)){_c._changeFocusText(_b);_c._bChangeFocusText=true;var _d=this.text;var _e=this;if(this._old_selection[0]!=this._old_selection[1]){_b.setElementSetSelect(this._old_selection[0],this._old_selection[1]);}_b.setElementFocus();if(nexacro.OS=="iOS"&&_b._keypad_type=="change"&&!this.readonly){setTimeout(function(){_c._text=_d;_b.setElementInputType("text",true);if(_e.autoselect){var _f=_c._select_text=_c._text;_c._is_apply_autoselect=true;_c.setElementCaretPos(0,_f.length,_b);}_b.setElementInputTypeKeypad("changed");},500);}}else{_c._bChangeFocusText=false;}}};_pMaskEdit.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){var _d=this._edit_base_api;if(_d){if(_d._undoStack){_d._undoStack.init();}}this._setValue(undefined);return true;}};_pMaskEdit.on_change_bindSource=function(_a,_b,_c,_d,_e){if(_a=="value"){var _f=_b.getColumn(_c,_d);var _g=this._edit_base_api;var _h=this._input_element;if(_g){var _i=_g._getFocusValue();if(_h){if(_f===this.value&&_f===_g._value&&_f===_h.value){if(_i!=_f){_g._setFocusValue();}return true;}}if(_g._undoStack){_g._undoStack.init();}}this._setValue(_f);if(_g&&_h){if(_i!=_f){_g._setFocusValue();}}return true;}return false;};_pMaskEdit.on_get_style_accessibility_label=function(){var _a="";return _a;};_pMaskEdit._on_getAccessibilityAdditionalLabel=function(){if(this._edit_base_api){return this._edit_base_api._on_getAccessibilityAdditionalLabel();}return "";};_pMaskEdit._getAccessibilityReadLabel=function(_a){var _b=nexacro.Component.prototype._getAccessibilityReadLabel.call(this);if(_a&&this._input_element&&this._status!="focus"){if(!this._input_element._wantAccessibilityAdditionalLabel||!this._input_element._wantAccessibilityAdditionalLabel()){_b=this.text+" "+_b;}}return _b;};_pMaskEdit._getAccessibilityRole=function(_a){var _b=nexacro.Component.prototype._getAccessibilityRole.call(this,_a);if(nexacro._accessibilitytype==4){return "";}else{return _b;}};_pMaskEdit._setAccessibilityStatFocus=function(_a){if(this._input_element){var _b=this._getAccessibilityRole(this.on_find_CurrentStyle_accessibility(this._pseudo));if(this._getDescLevel()=="none"){_b="none";}this._input_element.setElementAccessibilityRole(_b);}return nexacro.Component.prototype._setAccessibilityStatFocus.call(this,_a);};_pMaskEdit._setAccessibilityNotifyEvent=function(_a){if(this._edit_base_api){this._edit_base_api._setAccessibilityNotifyLabel();}return nexacro.Component.prototype._setAccessibilityNotifyEvent.call(this,_a);};_pMaskEdit.on_apply_prop_rtldirection=function(){nexacro.Component.prototype.on_apply_prop_rtldirection.call(this);var _a=this._edit_base_api;if(_a){_a.setPosition();}if(this._input_element){this._input_element.setElementRtlDirection(this._rtldirection);}};_pMaskEdit.set_text=function(_a,_b){};_pMaskEdit.set_value=function(_a){_a=nexacro._toString(_a);if(_a&&_a!==undefined&&_a!=""){_a=_a.replace(/&quot;/g,"\"");}if(_a!=this.value){var _b=this._getRootForm();var _c=this._edit_base_api;if(!this.applyto_bindSource("value",_a)){return;}if(nexacro.Browser=="Edge"||nexacro.Browser=="IE"){if(_c){var _d=_c._accept_keyinput_event;_c._accept_keyinput_event=false;this._setValue(_a);_c._accept_keyinput_event=_d;}else{this._setValue(_a);}if(nexacro.BrowserVersion<=8){if(_b&&_b._bFireLoadEvent){this._recreateInputElement();}}}else{this._setValue(_a);}if(_c){_c._setFocusValue();}}};_pMaskEdit.on_apply_value=function(){var _a=this._edit_base_api;if(_a){_a.setValue(this.value);_a.syncValue();}this._refreshAccessibilityValue();};_pMaskEdit.set_displaynulltext=function(_a){var _b=nexacro._isNull(_a);if(_b){_a="";}else{_a=nexacro._toString(_a);_a=_a.replace(/&quot;/g,"\"");}if(_a!=this.displaynulltext){this.displaynulltext=_a;this.on_apply_displaynulltext();}};_pMaskEdit.on_apply_displaynulltext=function(){var _a=this._input_element;if(_a){_a.setElementDisplayNullText(this.displaynulltext);}};_pMaskEdit.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.readonly){this.readonly=_a;this.on_apply_readonly();}};_pMaskEdit.on_apply_readonly=function(){var _a=this.readonly;if(_a){this._stat_change("readonly",this._pseudo);}else{this._stat_change("writable",this._pseudo=="readonly"?"normal":this._pseudo);}var _b=this._input_element;if(_b){_b.setElementReadonly(_a);}};_pMaskEdit.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.autoselect){this.autoselect=_a;}};_pMaskEdit.set_autoskip=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.autoskip){this.autoskip=_a;}};_pMaskEdit.on_apply_autoskip=function(){var _a=this._getRootComponent(this);var _b=this._refform.getNextComponent(_a,true);if(_b){_b.setFocus();var _c=_b._edit_base_api?_b._edit_base_api:null;if(_c){if(!_b.autoselect){_b.setCaretPos(0);}}}};_pMaskEdit.set_clipmode=function(_a){_a=nexacro._toString(_a);if(_a!=this.clipmode){this.clipmode=_a;this.on_apply_clipmode();}};_pMaskEdit.on_apply_clipmode=function(){var _a=this._edit_base_api;if(_a&&this.type=="string"){if(this.clipmode=="includespace"){_a._FillMaskChar=" ";}else{_a._FillMaskChar=undefined;}}};_pMaskEdit.set_limitbymask=function(_a){_a=nexacro._toString(_a);if(_a!=this.limitbymask){this.limitbymask=_a;this.on_apply_limitbymask();}};_pMaskEdit.on_apply_limitbymask=function(){var _a=this._edit_base_api;if(_a&&this.type=="number"){if(this.limitbymask=="both"){_a._nLimitType=3;}else if(this.limitbymask=="integer"){_a._nLimitType=1;}else if(this.limitbymask=="decimal"){_a._nLimitType=2;}else{_a._nLimitType=0;}}};_pMaskEdit.set_mask=function(_a,_b){_a=nexacro._toString(_a);if(_a!=this.mask){this.mask=_a;this.on_apply_mask();if(_b!==false){this.on_apply_value();}}};_pMaskEdit.on_apply_mask=function(){var _a=this._edit_base_api;if(_a){var _b=this.mask;if(!_b){_b="";}_a.setMask(_b);}};_pMaskEdit.set_maskchar=function(_a){_a=nexacro._toString(_a);if(_a==""){_a="_";}if(_a!=this.maskchar){this.maskchar=_a;this.on_apply_maskchar();this.on_apply_value();}};_pMaskEdit.on_apply_maskchar=function(){var _a=this._edit_base_api;if(_a&&this.type=="string"){var _b=this.maskchar;if(_b&&_b.length>0){_a._cMaskChar=_b;}else{_a._cMaskChar=undefined;}}};_pMaskEdit.set_trimtype=function(_a){_a=nexacro._toString(_a);if(_a!=this.trimtype){this.trimtype=_a;this.on_apply_trimtype();}};_pMaskEdit.on_apply_trimtype=function(){var _a=this._edit_base_api;if(_a&&this.type=="string"){if(this.trimtype=="left"){_a._nTrimType=1;}else if(this.trimtype=="right"){_a._nTrimType=2;}else if(this.trimtype=="both"){_a._nTrimType=3;}else{_a._nTrimType=0;}}};_pMaskEdit.set_type=function(_a){_a=nexacro._toString(_a);if(_a!=this.type){this.type=_a;this.on_apply_type();this.on_apply_limitbymask();this.on_apply_trimtype();this.on_apply_maskchar();this.on_apply_clipmode();this.on_apply_displaynulltext();this.on_apply_mask();this.on_apply_value();}};_pMaskEdit.on_apply_type=function(){var _a=this.getElement();if(_a){if(this.type=="number"){this._edit_base_api=null;this._edit_base_api=new nexacro.EditMaskNumber(this);}else{this._edit_base_api=null;this._edit_base_api=new nexacro.EditMaskString(this);}this._input_element.setElementInputType(this.type);this._input_element.setElementInputTypeKeypad(this.type);}};_pMaskEdit.set_usesoftkeyboard=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.usesoftkeyboard){this.usesoftkeyboard=_a;this.on_apply_usesoftkeyboard();}};_pMaskEdit.on_apply_usesoftkeyboard=function(){var _a=this._input_element;if(_a){_a.setElementUseSoftKeyboard(this.usesoftkeyboard);}};_pMaskEdit.set_useinputpanel=function(_a){};_pMaskEdit.set_updatebindingvalue=function(_a){};_pMaskEdit.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this.usecontextmenu!=_a){this.usecontextmenu=_a;}};_pMaskEdit.set_locale=function(_a){if(_a!=this.locale){this.locale=_a;if(this._locale!=_a){this._locale=_a;this.on_apply_locale();}}};_pMaskEdit.on_apply_locale=function(){var _a=this._edit_base_api;if(_a){var _b=this._getLocale();_a._setLocale(_b);this.on_apply_value();}};_pMaskEdit.getLength=function(){var _a=this._input_element;if(_a){var _b=this._edit_base_api;var _c=_b.getValue();if(_c){var _d=_c.length;if(this.type=="number"){if( -1!=_c.indexOf("-",0)){_d-=1;}if( -1!=_c.indexOf(".",0)){_d-=1;}}return _d;}else{return  -1;}}return  -1;};_pMaskEdit.getCaretPos=function(){if(this.readonly){return  -1;}var _a=this._input_element;if(_a){if(!_a._checkActiveElement()){return  -1;}var _b=_a.getElementCaretPos();if(_b&&_b!= -1){return _b.begin;}}return  -1;};_pMaskEdit.getInputElementAttribute=function(_a){var _b=this._input_element;if(_b){return _b.getInputElementAttribute(_a);}return undefined;};_pMaskEdit.setInputElementAttribute=function(_a,_b){var _c=this._input_element;if(_c){return _c.setInputElementAttribute(_a,_b);}return false;};_pMaskEdit.setCaretPos=function(_a){var _b=this._edit_base_api;var _c=this._input_element;if(_c){if(arguments.length==0){_a=0;}else{_a=nexacro._toInt(_a);if(_a== -1){if(_a){_a=this.text.length;}else{_a=0;}}}_c.setElementSetSelect(_a,_a);_b._begin_pos=_b._end_pos=_a;this._caret_pos.begin=_a;this._caret_pos.end=_a;this._setcaret=true;return true;}return false;};_pMaskEdit.getSelect=function(){var _a=this._input_element;if(_a){var _b=this._edit_base_api;var _c=_b._begin_pos!==undefined?_b._begin_pos:0;var _d=_b._end_pos!==undefined?_b._end_pos:0;return [_c,_d];}else{return [0,0];}};_pMaskEdit.setSelect=function(_a,_b){var _c=this._input_element;if(_c){var _d=this._edit_base_api;var _e=this.text?this.text:"";var _f=_e.length;if(nexacro._isNull(_a)||_a===""){_a=0;}if(nexacro._isNull(_b)||_b===""){_b= -1;}if(!nexacro._isNumber(_a)){_a=nexacro._toInt(_a);}if(!nexacro._isNumber(_b)){_b=nexacro._toInt(_b);}if(_a== -1){_a=_f;}if(_b== -1){_b=_f;}if(_a>_b){var _g=_a;_a=_b;_b=_g;}_d._begin_pos=_a;_d._end_pos=_b;this._caret_pos.begin=_a;this._caret_pos.end=_b;this._setcaret=true;_c.setElementSetSelect(_a,_b);return true;}return false;};_pMaskEdit.getSelectedText=function(){var _a=this._input_element;if(_a){var _b=this._edit_base_api;var _c=_b._begin_pos!==undefined?_b._begin_pos:0;var _d=_b._end_pos!==undefined?_b._end_pos:0;var _e=_b._getText();if(_e&&(_c!=_d)){return _e.substring(_c,_d);}else{return "";}}return "";};_pMaskEdit.isAboveSelected=function(){};_pMaskEdit.updateToDataset=function(){if(!this._bind_event){return false;}var _a=this.applyto_bindSource("value",this.value);if(this._textchanging){this._dsupdate_in_textchanging=true;if(!_a){this._dsupdate_cancel=true;}else{this._dsupdate_cancel=false;}}else{this._dsupdate_in_textchanging=false;}return _a;};_pMaskEdit._on_activate=function(){var _a=this._input_element;var _b=this._edit_base_api;if(_b){_b._changeFocusText(_a);_b._bChangeFocusText=true;}if(!this._isSelected()){this._stat_change("focus","normal");}this._activate_flag=true;};_pMaskEdit._on_killfocus=function(_a,_b){if(!this._is_alive){return;}var _c=this._edit_base_api;var _d=this._input_element;this._is_focusing=false;if(_c&&_d){var _e=_c._getFocusText();var _f=_c._getFocusValue();var _g=this.text;var _h=this.value;if(this._activate_flag){this._activate_flag=false;}if(nexacro.Browser=="Edge"||nexacro.Browser=="IE"){if(!_d._is_focused){if(_e!=_g||_f!=_h){this.applyto_bindSource("value",this.value);}return;}if(_c._is_composition()){var _i=_c._stat_composition.getData();_c._on_input_compositionend(_i);if(!_c._is_hangul(_i)){_c._fire_text_event(_i);}}}_c._is_on_killfocus=true;this._on_input_blur(_d);_c._is_on_killfocus=false;if(_e!=_g||_f!=_h){var _j=this._getWindow();if(_j&&_j._is_active_window!=true&&!_a){_d.setElementValue(_c._value,false,true);return;}var _k=this._on_fire_changeEventSet(_e,_f,_g,_h);if(!_k){return;}}else if(_f===undefined&&_e==_g&&!this._isPasswordUsed(_c)){_c._setValue(undefined);_c._setText(_e);_c.syncValue();_d.setElementValue(_c._value);}else{_d.setElementValue(_c._value,false,true);}this._restoreSelect();this._cancelSelect();}};_pMaskEdit._cancelSelect=function(){var _a=this._edit_base_api;if(nexacro.Browser=="Edge"||nexacro.Browser=="IE"){if(_a._is_selected()){if(this.visible){var _b=this._getRootForm();var _c=_b.getElement();if(_b.vscrollbar){_c._recover_vpos=_b.vscrollbar.pos;}if(_b.hscrollbar){_c._recover_hpos=_b.hscrollbar.pos;}var _d=this._input_element._input_handle;var _e=this._input_element.getRootWindowHandle();this._input_element.setElementSetSelect(_a._begin_pos,_a._begin_pos);nexacro._inputsetCaretPos(_d,_e);if(nexacro.BrowserVersion<=8){_c._recover_vpos=undefined;_c._recover_hpos=undefined;}}else{this.setCaretPos(_a._begin_pos);}}}else if(nexacro.Browser=="Runtime"){if(_a._is_selected()&&this.autoselect==true){this.setCaretPos(_a._begin_pos);}}};_pMaskEdit._restoreSelect=function(){this._old_selection=this.getSelect();};_pMaskEdit._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(!this._is_alive){return;}if(this._isEnable()&&this.enableevent){var _j=this.getCaretPos();var _k=this._getClientXY(_f,_g);this.on_fire_oneditclick(this,_j,_b,_c,_d,_e,_h,_i,_f,_g,_k[0],_k[1],this,this);}};_pMaskEdit._on_input_keyinput=function(_a){var _b=this._edit_base_api;if(_b){_b._on_input_keyinput(_a);_b._on_input_keyinput_after();}};_pMaskEdit._on_input_focus=function(_a,_b){var _c=this._edit_base_api;if(_c){_c._on_input_focus(_a);if(this._is_first_focus){this._input_element.setElementSetSelect(_c._begin_pos,_c._end_pos);this._is_first_focus=false;}}};_pMaskEdit._on_input_blur=function(_a,_b){var _c=this._edit_base_api;if(_c){_c._on_input_blur(_a);}};_pMaskEdit._on_input_keypress=function(_a,_b,_c,_d,_e,_f){var _g=false;var _h=this._edit_base_api;if(_h){_g=_h._on_input_keypress(_a,_b,_c,_d,_e,_f);}return _g;};_pMaskEdit._on_input_keydown=function(_a,_b,_c,_d,_e){var _f=false;var _g=this._edit_base_api;if(_g){_f=_g._on_input_keydown(_a,_b,_c,_d,_e);}return _f;};_pMaskEdit._on_input_keyup=function(_a,_b,_c,_d,_e){var _f=false;var _g=this._edit_base_api;if(_g){_f=_g._on_input_keyup(_a,_b,_c,_d,_e);}return _f;};_pMaskEdit._on_input_mousedown=function(_a,_b,_c,_d){var _e=this._edit_base_api;if(_e){this._is_first_focus=false;_e._on_input_mousedown(_a,_b,_c,_d);}};_pMaskEdit._on_input_mouseup=function(_a,_b,_c,_d){var _e=this._edit_base_api;if(_e){_e._on_input_mouseup(_a,_b,_c,_d);}};_pMaskEdit._on_input_touchstart=function(_a){var _b=this._edit_base_api;if(_b){_b._on_input_touchstart(_a);}};_pMaskEdit._on_input_touchmove=function(_a){var _b=this._edit_base_api;if(_b){_b._on_input_touchmove(_a);}};_pMaskEdit._on_input_touchend=function(_a){var _b=this._edit_base_api;if(_b){_b._on_input_touchend(_a);}};_pMaskEdit._on_input_mousemove=function(_a){var _b=this._edit_base_api;if(_b){_b._on_input_mousemove(_a);}};_pMaskEdit._on_input_select=function(_a){var _b=this._edit_base_api;if(_b){_b._on_input_select(_a);}};_pMaskEdit._on_input_selectionchange=function(_a){var _b=this._edit_base_api;if(_b){_b._on_input_selectionchange(_a);}};_pMaskEdit._on_input_copy=function(_a){var _b=this._edit_base_api;if(_b){_b._on_input_copy(_a);}};_pMaskEdit._on_input_cut=function(_a){var _b=this._edit_base_api;if(_b){_b._on_input_cut(_a);}};_pMaskEdit._on_input_paste=function(_a){var _b=this._edit_base_api;if(_b){_b._on_input_paste(_a);}};_pMaskEdit._on_input_compositionstart=function(_a){var _b=this._edit_base_api;if(_b){_b._on_input_compositionstart(_a);}};_pMaskEdit._on_input_compositionupdate=function(_a){var _b=this._edit_base_api;if(_b){_b._on_input_compositionupdate(_a);}};_pMaskEdit._on_input_compositionend=function(_a){var _b=this._edit_base_api;if(_b){_b._on_input_compositionend(_a);}};_pMaskEdit.on_fire_cancharchange=function(_a,_b,_c,_d){if(this.cancharchange&&this.cancharchange._has_handlers){var _e=new nexacro.CanCharEventInfo(_a,"cancharchange",_b,_c,_d);return this.cancharchange._fireCheckEvent(this,_e);}return true;};_pMaskEdit.on_fire_canchange=function(_a,_b,_c,_d,_e){if(this.canchange&&this.canchange._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"canchange",_b,_c,_d,_e);return this.canchange._fireCheckEvent(this,_f);}return true;};_pMaskEdit.on_fire_oneditclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.oneditclick&&this.oneditclick._has_handlers){var _o=new nexacro.EditClickEventInfo(_a,"oneditclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);return this.oneditclick._fireEvent(this,_o);}return true;};_pMaskEdit.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(this.onchanged&&this.onchanged._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"onchanged",_b,_c,_d,_e);return this.onchanged._fireEvent(this,_f);}};_pMaskEdit.on_fire_ontextchanged=function(_a,_b,_c){if(this.ontextchanged&&this.ontextchanged._has_handlers){var _d=new nexacro.TextChangedEventInfo(this,"ontextchanged",_b,_c);return this.ontextchanged._fireEvent(this,_d);}return true;};_pMaskEdit.on_fire_ontextchange=function(_a,_b){var _c=true;var _d=this._edit_base_api;var _e={value:null,text:"",begin_pos:this._input_begin_pos,bChange:false};var _f=new nexacro.TextChangeEventInfo(this,"ontextchange",_a.chartext,_a.pretext,_a.posttext,_a.preimetext,_a.postimetext);if(_b){_b.evt=_f;}if(this.ontextchange&&this.ontextchange._has_handlers){_c=this.ontextchange._fireCheckEvent(this,_f);if(_c&&_a.chartext!=_f.chartext){_d._setValue(_d._old_value);_d._setText(_d._old_text);_d.setElementCaretPos(_d._old_begin_pos,_d._old_end_pos);if(this.type=="number"){_e=_d._apply_filter(_f.chartext);if(_e.bChange){_d._setValue(_e.value);_d._setText(_e.text);_d.setElementCaretPos(_e.caret,_e.caret);}_a.setTextInfo(_f.chartext,_d._old_text,_d._text,"","");}else if(this.type=="string"){var _g=_d.inputText(chartext);_a.setTextInfo(_f.chartext,_d._old_text,_g.newText,"","");}}}return _c;};_pMaskEdit.on_fire_onchar=function(_a,_b){var _c=true;var _d=this._edit_base_api;var _e={value:null,text:"",begin_pos:this._input_begin_pos,bChange:false};var _f=new nexacro.TextChangeEventInfo(this,"onchar",_a.chartext,_a.prechareventtext,_a.posttext);if(_b){_b.evt=_f;}if(this.onchar&&this.onchar._has_handlers){_c=this.onchar._fireCheckEvent(this,_f);if(_c&&_a.chartext!=_f.chartext){_d._setValue(_d._old_value);_d._setText(_d._old_text);_d.setElementCaretPos(_d._old_begin_pos,_d._old_end_pos);if(this.type=="number"){_e=_d._apply_filter(_f.chartext);if(_e.bChange){_d._setValue(_e.value);_d._setText(_e.text);_d.setElementCaretPos(_e.caret,_e.caret);}_a.setTextInfo(_f.chartext,_d._old_text,_d._text,"","");}else if(this.type=="string"){var _g=_d.inputText(_f.chartext);_a.setTextInfo(_f.chartext,_d._old_text,_g.newText,"","");}}}return _c;};_pMaskEdit._on_fire_changeEventSet=function(_a,_b,_c,_d){var _e=this._edit_base_api;var _f=this._input_element;this._textchanging=true;var _g=this.on_fire_canchange(this,_a,_b,_c,_d);if(!_g){if(this.type=="string"){if(!_b){_e._setMaskedValue(_e.makeMaskedValue(""));}else{_e._setMaskedValue(_e.makeMaskedValue(_b));}}_e._setText(_a);_e._setValue(_b);_e.syncValue();_e._setFocusValue();_f.setElementValue(_e._value);this._init_bind_flag();return false;}if(this.type=="string"){var _h=_e.getValue();if(!_h){_e._setMaskedValue(_e.makeMaskedValue(""));}else{_e._setMaskedValue(_e.makeMaskedValue(_h));}_e._setText(_e.makeText(_e._strMaskedValue));_e._setValue(_e.makeValue(_e._strMaskedValue));_e.syncValue();}_f.setElementValue(_e._value);if(this._dsupdate_cancel||(!this._dsupdate_in_textchanging&&!this.applyto_bindSource("value",this.value))){if(this.type=="string"){if(!_b){_e._setMaskedValue(_e.makeMaskedValue(""));}else{_e._setMaskedValue(_e.makeMaskedValue(_b));}}_e._setText(_a);_e._setValue(_b);_e.syncValue();_e._setFocusValue();_f.setElementValue(_e._value);this._init_bind_flag();return false;}_e._setFocusValue();this._init_bind_flag();this.on_fire_onchanged(this,_a,_b,this.text,this.value);_e._setFocusValue();return true;};_pMaskEdit._init=function(){var _a=this._edit_base_api;if(_a){_a._init();}this.set_value(undefined);};_pMaskEdit._init_bind_flag=function(){this._textchanging=false;this._dsupdate_in_textchanging=false;this._dsupdate_cancel=false;};_pMaskEdit._getDragData=function(){return this.getSelectedText();};_pMaskEdit._setValue=function(_a){if(nexacro._isNull(_a)){this.text="";}else{this.text=nexacro._toString(_a);}this.value=_a;this.on_apply_value();};_pMaskEdit._accept_keydown_event=function(_a){return true;};_pMaskEdit._recreateInputElement=function(){var _a=this._input_element;if(_a){_a._destroyInputHandle();_a._input_handle=_a._createInputHandle();_a._bindEvent(_a);}};_pMaskEdit._isPasswordUsed=function(_a){var _b=_a&&_a._bufPass?_a._bufPass.length:0;while(_b-- ){if(_a._bufPass[_b]==true){return true;}}return false;};_pMaskEdit._set_editbase_focusstat=function(_a){var _b=this._edit_base_api;if(_b){switch(_a){case "focus":_b._stat_focus.setStatus(nexacro.EditBase.Status.Focus);break;case "blur":_b._stat_focus.setStatus(nexacro.EditBase.Status.Blur);break;default:_b._stat_focus.setStatus(_a);break;};}};delete _pMaskEdit;_pMaskEdit=null;nexacro.MaskEditCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.MaskEdit.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_subcontrol=true;};var _pMaskEditCtrl=nexacro._createPrototype(nexacro.MaskEdit,nexacro.MaskEditCtrl);nexacro.MaskEditCtrl.prototype=_pMaskEditCtrl;_pMaskEditCtrl._type_name="MaskEditControl";nexacro._setForControlStyleFinder(_pMaskEditCtrl);delete _pMaskEditCtrl;_pMaskEditCtrl=null;};