if(!nexacro.MenuItem){nexacro.MenuItem=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.StaticCtrl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this.index=0;this.datarow=0;this.itemexpand=true;this.id="";this.enable=true;this.level="";this.userdata=null;this.selected=false;this._init_padding=false;this._accessibility_role="menuitem";};var _pMenuItem=nexacro._createPrototype(nexacro.StaticCtrl,nexacro.MenuItem);nexacro.MenuItem.prototype=_pMenuItem;_pMenuItem._type_name="MenuItem";_pMenuItem._updateControl=function(_a,_b){if(!this._isEnableRedraw()){return;}if(application._cur_track_info&&_b=="mouseover"){return;}if(_a&&this._control_pseudo!=_b&&this._adjust_width!=0&&this._adjust_height!=0){this._control_pseudo=_b;var _c=this.currentstyle;var _d=this.on_find_CurrentStyle_border(_b);var _e=this.on_find_CurrentStyle_bordertype(_b);var _f=this.on_find_CurrentStyle_background(_b);var _g=this.on_find_CurrentStyle_gradation(_b);var _h=(_f!=_c.background);var _i=(_e!=_c.bordertype);var _j=(_d!=_c.border);var _k=(_g!=_c.gradation);if(_j||_i||_h||_k){this._apply_client_border=_j;_c.bordertype=_e;_c.border=_d;_c.background=_f;_c.gradation=_g;_a.setElementBorder(_d,_e);_a.setElementBackground(_f,_g);}var _l=this.on_find_CurrentStyle_opacity(_b);if(_l&&_l!=_c.opacity){_c.opacity=_l;_a.setElementOpacity(_l);}var _m=this.on_find_CurrentStyle_shadow(_b);if(_m&&_m!=_c.shadow){_c.shadow=_m;_a.setElementShadow(_m);}var _n=this.on_find_CurrentStyle_cursor(_b);if(_n&&_n!=_c.cursor){_c.cursor=_n;_a.setElementCursor(_n);}if(nexacro._enableaccessibility){var _o=this.on_find_CurrentStyle_accessibility(_b);if(_o&&_o!=_c.accessibility){_c.accessibility=this._make_accessibility_value(_o);_a.setAccessibility(_c.accessibility);}}if(this._apply_client_padding){var _p=this.on_find_CurrentStyle_padding(_b);if((_p&&_p!=_c.padding)||_j){_c.padding=_p;_a.setElementPadding(_p);}}this._updateClientSize(_a);return true;}return false;};_pMenuItem.on_find_CurrentStyle_color=function(_a){if(!this.enable){_a="disabled";}else if(!(this.parent instanceof nexacro.PopupMenu)&&this.selected){_a="selected";}return this.parent.on_find_CurrentStyle_color(_a);};_pMenuItem.on_find_CurrentStyle_font=function(_a){if(!this.enable){_a="disabled";}else if(!(this.parent instanceof nexacro.PopupMenu)&&this.selected){_a="selected";}return this.parent.on_find_CurrentStyle_font(_a);};_pMenuItem.on_find_CurrentStyle_letterspace=function(_a){if(!this.enable){_a="disabled";}else if(!(this.parent instanceof nexacro.PopupMenu)&&this.selected){_a="selected";}return this.parent.on_find_CurrentStyle_letterspace(_a);};_pMenuItem.on_find_CurrentStyle_align=function(_a){if(!this.enable){_a="disabled";}else if(!(this.parent instanceof nexacro.PopupMenu)&&this.selected){_a="selected";}var _b=this.parent.on_find_CurrentStyle_itemalign(_a);return (_b)?_b:nexacro.Component._default_align;};_pMenuItem.on_find_CurrentStyle_background=function(_a){if(!this.enable){_a="disabled";}else if(!(this.parent instanceof nexacro.PopupMenu)&&this.selected){_a="selected";}return this.parent.on_find_CurrentStyle_itembackground(_a);};_pMenuItem.on_find_CurrentStyle_padding=function(_a){if(!this.enable){_a="disabled";}else if(!(this.parent instanceof nexacro.PopupMenu)&&this.selected){_a="selected";}return this.parent.on_find_CurrentStyle_itempadding(_a);};_pMenuItem.on_find_CurrentStyle_gradation=function(_a){if(!this.enable){_a="disabled";}else if(!(this.parent instanceof nexacro.PopupMenu)&&this.selected){_a="selected";}return this.parent.on_find_CurrentStyle_itemgradation(_a);};_pMenuItem.on_find_CurrentStyle_border=function(_a){if(!this.enable){_a="disabled";}else if(!(this.parent instanceof nexacro.PopupMenu)&&this.selected){_a="selected";}return this.parent.on_find_CurrentStyle_itemborder(_a);};_pMenuItem.on_find_CurrentStyle_bordertype=function(_a){if(!this.enable){_a="disabled";}else if(!(this.parent instanceof nexacro.PopupMenu)&&this.selected){_a="selected";}return this.parent.on_find_CurrentStyle_itembordertype(_a);};_pMenuItem.on_find_CurrentStyle_cursor=function(_a){if(!this.enable){_a="disabled";}else if(!(this.parent instanceof nexacro.PopupMenu)&&this.selected){_a="selected";}var _b=this._getRootComponent(this);return _b.on_find_CurrentStyle_cursor(_a);};_pMenuItem.on_find_CurrentStyle_accessibility=function(_a){if(!this.enable){_a="disabled";}else if(!(this.parent instanceof nexacro.PopupMenu)&&this.selected){_a="selected";}return this.parent.on_find_CurrentStyle_itemaccessibility(_a);};_pMenuItem.on_apply_style_padding=function(_a){var _b=this._control_element;if(_b){_b.setElementPadding(_a);this._updateClientSize(_b);}};_pMenuItem.on_apply_style_accessibility=function(_a){var _b=this._control_element;if(_b&&_a){_b.setAccessibility(_a);this._updateAccessibilityLabel(this);}};_pMenuItem.on_apply_mouseover=function(_a){if(!_a){this._stat_change("enable","normal");}else{var _b=this._getRootComponent(this);if(this.parent._key_action||(_b&&_b._pseudo=="focused")){this._stat_change("enable","selected");}else{this._stat_change("enable","mouseover");}}};_pMenuItem.on_tap_basic_action=function(){var _a=this.parent;var _b=_a._popupmenu;if(_b){if(_b._is_popup()){if(_a.beforeindex!=this.index){_a.beforeindex=this.index;}_b.cancelPopup();_a._menuitemindex=this.index;_a._popupitemindex= -1;}}var _c=this._getRootComponent(this);if(this.itemexpand){_a._closeflag=true;_a._showPopup(this);if(_c instanceof nexacro.Menu){_c._popupitemindex=this.index;}}else{if(this.enable==false||_c._getPopupType()=="none"){return;}if(_c.onmenuclick&&_c.onmenuclick._has_handlers){_c.on_fire_onitemclick(_c,"onmenuclick",this.id,this.userdata,this.index,this.parent.level);_c._popupitemindex= -1;}_c._closePopup();}return nexacro.Component.prototype.on_tap_basic_action.apply(this,arguments);};_pMenuItem._getWindowPosition=function(){var _a=this._control_element;if(_a){var _b=this.on_find_CurrentStyle_border(this._pseudo);var _c=nexacro._getElementXYInWindow(_a._handle);var _d=_c[0];var _e=_c[1];return {x:_d,y:_e};}return {x:0,y:0};};_pMenuItem._killfocus_item=function(){this._control_pseudo="";this.selected=false;var _a="enable";var _b="normal";if(!this.enable){_a="disable";_b="disabled";}this._stat_change(_a,_b);this.on_apply_custom_pseudo(_b);};_pMenuItem._on_lbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(!this.enable){return;}nexacro._skipDragEventAfterMsgBox=false;var _m=this._getForm();_m._skip_comp=true;var _n=this._on_bubble_lbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,true);var _o=this._getFromComponent(this);if(!_o.onlbuttondown||(_o.onlbuttondown&&!_o.onlbuttondown.defaultprevented)){this.on_lbuttondown_default_action(_a,this._focus_refer_comp,_f,_g);_n=this._on_bubble_lbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,false);}_m._skip_comp=false;return _n;};_pMenuItem._on_dragleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q){var _r=nexacro.Component.prototype._on_dragleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q);var _s=this._getRootComponent(this);if(_s.ondragleave){_s._last_mouseleave_iteminfo.index=this.index;_s._last_mouseleave_iteminfo.bindindex=this._bindindex;_s._last_mouseleave_iteminfo.level=this.parent.level;}return _r;};_pMenuItem._updateAccessibilityLabel=function(_a){var _b=this._getRootComponent(this);var _c=_b._innerdataset.getRowCount();_a._setAccessibilityInfoIndex(_a.datarow+1);_a._setAccessibilityInfoCount(_c);_a._setAccessibilityFlagHasPopup(_a.itemexpand?true:false);};delete _pMenuItem;}if(!nexacro.Menu){nexacro.MenuClickEventInfo=function(_a,_b,_c,_d,_e,_f){this.eventid=_b||"onmenuclick";this.id=_c;this.fromobject=_a;this.fromreferenceobject=_a;this.index=_e;this.level=_f;this.userdata=_d;};var _pMenuClickEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuClickEventInfo);nexacro.MenuClickEventInfo.prototype=_pMenuClickEventInfo;_pMenuClickEventInfo._type_name="MenuClickEventInfo";delete _pMenuClickEventInfo;nexacro.MenuDragEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v){this.id=_c;this.eventid=_b||"onmenudrag";if(!_i){_i=_h;}this.cancelable=true;this.bubbles=true;this.dragdata=_d;this.userdata=_e;this.sourceobject=_f;this.sourcereferenceobject=_g;this.fromobject=_h;this.fromreferenceobject=_i;this.altKey=_k||false;this.ctrlKey=_l||false;this.button=_j||"";this.shiftKey=_m||false;this.screenX=_n|| -1;this.screenY=_o|| -1;this.canvasX=_p|| -1;this.canvasY=_q|| -1;this.clientX=_r|| -1;this.clientY=_s|| -1;this.level=_t;this.index=_u;this.bindindex=_v;};var _pEventMenuDragEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuDragEventInfo);nexacro.MenuDragEventInfo.prototype=_pEventMenuDragEventInfo;_pEventMenuDragEventInfo._type_name="MenuDragEventInfo";delete _pEventMenuDragEventInfo;nexacro.MenuMouseEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r){this.id=_c;this.eventid=_b||"onmenumouse";this.cancelable=true;this.bubbles=true;this.fromobject=_n;this.fromreferenceobject=_o;this.altKey=_e||false;this.ctrlKey=_f||false;this.button=_d||"";this.shiftKey=_g||false;this.screenX=_h|| -1;this.screenY=_i|| -1;this.canvasX=_j|| -1;this.canvasY=_k|| -1;this.clientX=_l|| -1;this.clientY=_m|| -1;this.level=_p;this.index=_q;this.bindindex=_r;};var _pEventMenuMouseEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuMouseEventInfo);nexacro.MenuMouseEventInfo.prototype=_pEventMenuMouseEventInfo;_pEventMenuMouseEventInfo._type_name="MenuMouseEventInfo";delete _pEventMenuMouseEventInfo;nexacro.Menu_Style=function(_a){nexacro.Style.call(this);if(_a){this._target=_a;}this.autohotkey=null;this.buttonimage=null;this.popupcolor=null;this.popupborder=null;this.popupbordertype=null;this.popuppadding=null;this.popupfont=null;this.popupbackground=null;this.popupgradation=null;this.itemalign=null;this.itembackground=null;this.itemborder=null;this.itembordertype=null;this.itemgradation=null;this.itempadding=null;this.checkboximage=null;this.expandimage=null;this.popupitemheight=null;this.popupitemalign=null;this.popupitempadding=null;this.popupitemborder=null;this.popupitembordertype=null;this.popupitembackground=null;this.popupitemgradation=null;this.itemaccessibility=null;this.popuptype=null;this.buttonsize=null;this.buttonalign=null;};var _pMenuStyle=nexacro._createPrototype(nexacro.Style,nexacro.Menu_Style);nexacro.Menu_Style.prototype=_pMenuStyle;eval(nexacro._createValueAttributeEvalStr("_pMenuStyle","autohotkey"));eval(nexacro._createValueAttributeEvalStr("_pMenuStyle","buttonimage"));eval(nexacro._createColorAttributeEvalStr("_pMenuStyle","popupcolor"));eval(nexacro._createBorderAttributeEvalStr("_pMenuStyle","popupborder"));eval(nexacro._createBordertypeAttributeEvalStr("_pMenuStyle","popupbordertype"));eval(nexacro._createPaddingAttributeEvalStr("_pMenuStyle","popuppadding"));eval(nexacro._createFontAttributeEvalStr("_pMenuStyle","popupfont"));eval(nexacro._createBackgroundAttributeEvalStr("_pMenuStyle","popupbackground"));eval(nexacro._createGradationAttributeEvalStr("_pMenuStyle","popupgradation"));eval(nexacro._createAlignAttributeEvalStr("_pMenuStyle","itemalign"));eval(nexacro._createBackgroundAttributeEvalStr("_pMenuStyle","itembackground"));eval(nexacro._createBorderAttributeEvalStr("_pMenuStyle","itemborder"));eval(nexacro._createBordertypeAttributeEvalStr("_pMenuStyle","itembordertype"));eval(nexacro._createGradationAttributeEvalStr("_pMenuStyle","itemgradation"));eval(nexacro._createPaddingAttributeEvalStr("_pMenuStyle","itempadding"));eval(nexacro._createValueAttributeEvalStr("_pMenuStyle","checkboximage"));eval(nexacro._createValueAttributeEvalStr("_pMenuStyle","expandimage"));eval(nexacro._createValueAttributeEvalStr("_pMenuStyle","popupitemheight"));eval(nexacro._createAlignAttributeEvalStr("_pMenuStyle","popupitemalign"));eval(nexacro._createPaddingAttributeEvalStr("_pMenuStyle","popupitempadding"));eval(nexacro._createBorderAttributeEvalStr("_pMenuStyle","popupitemborder"));eval(nexacro._createBordertypeAttributeEvalStr("_pMenuStyle","popupitembordertype"));eval(nexacro._createBackgroundAttributeEvalStr("_pMenuStyle","popupitembackground"));eval(nexacro._createGradationAttributeEvalStr("_pMenuStyle","popupitemgradation"));eval(nexacro._createAccessibilityAttributeEvalStr("_pMenuStyle","itemaccessibility"));eval(nexacro._createValueAttributeEvalStr("_pMenuStyle","popuptype"));eval(nexacro._createValueAttributeEvalStr("_pMenuStyle","buttonsize"));eval(nexacro._createValueAttributeEvalStr("_pMenuStyle","buttonalign"));_pMenuStyle.__custom_emptyObject=function(){this.autohotkey=null;this.buttonimage=null;this.popupcolor=null;this.popupborder=null;this.popupbordertype=null;this.popuppadding=null;this.popupfont=null;this.popupbackground=null;this.popupgradation=null;this.itemalign=null;this.itembackground=null;this.itemborder=null;this.itembordertype=null;this.itemgradation=null;this.itempadding=null;this.checkboximage=null;this.expandimage=null;this.popupitemheight=null;this.popupitemalign=null;this.popupitempadding=null;this.popupitemborder=null;this.popupitembordertype=null;this.popupitembackground=null;this.popupitemgradation=null;this.itemaccessibility=null;this.popuptype=null;this.buttonsize=null;this.buttonalign=null;};_pMenuStyle.__get_custom_style_value=function(){var _a="";var _b=this.popupitempadding;if(_b&&_b._value.length){_a+="popupitempadding:"+this.popupitempadding._value+"; ";}var _c=this.popupborder;if(_c&&_c._value.length){_a+="popupborder:"+_c._value+"; ";}var _d=this.popupbordertype;if(_d&&_d._value.length){_a+="popupbordertype:"+_d._value+"; ";}var _e=this.popupfont;if(_e&&_e._value.length){_a+="popupfont:"+_e._value+"; ";}var _f=this.popuppadding;if(_f&&_f._value.length){_a+="popuppadding:"+_f._value+"; ";}var _g=this.popupcolor;if(_g&&_g._value.length){_a+="popupcolor:"+_g._value+"; ";}var _h=this.popupbackground;if(_h&&_h._value.length){_a+="popupbackground:"+_h._value+"; ";}var _i=this.popupgradation;if(_i&&_i._value.length){_a+="popupgradation:"+_i._value+"; ";}var _j=this.itemalign;if(_j&&_j._value.length){_a+="itemalign:"+_j._value+"; ";}var _k=this.itembackground;if(_k&&_k._value.length){_a+="itembackground:"+_k._value+"; ";}var _l=this.itemborder;if(_l&&_l._value.length){_a+="itemborder:"+_l._value+"; ";}var _m=this.itembordertype;if(_m&&_m._value.length){_a+="itembordertype:"+_m._value+"; ";}var _n=this.itemgradation;if(_n&&_n._value.length){_a+="itemgradation:"+_n._value+"; ";}var _o=this.itempadding;if(_o&&_o._value.length){_a+="itempadding:"+_o._value+"; ";}var _p=this.popuptype;if(_p&&_p._value.length){_a+="popuptype:"+_p._value+"; ";}var _q=this.checkboximage;if(_q&&_q._value.length){_a+="checkboximage:"+_q._value+"; ";}var _r=this.expandimage;if(_r&&_r._value.length){_a+="expandimage:"+_r._value+"; ";}var _s=this.popupitembackground;if(_s&&_s._value.length){_a+="popupitembackground:"+_s._value+"; ";}var _t=this.popupitemheight;if(_t&&_t._value.length){_a+="popupitemheight:"+_t._value+"; ";}var _u=this.popupitemalign;if(_u&&_u._value.length){_a+="popupitemalign:"+_u._value+"; ";}var _v=this.popupitemborder;if(_v&&_v._value.length){_a+="popupitemborder:"+_v._value+"; ";}var _w=this.popupitembordertype;if(_w&&_w._value.length){_a+="popupitembordertype:"+_w._value+"; ";}var _x=this.popupitemgradation;if(_x&&_x._value.length){_a+="popupitemgradation:"+_x._value+"; ";}var _y=this.autohotkey;if(_y&&_y._value.length){_a+="autohotkey:"+_y._value+"; ";}var _z=this.itemaccessibility;if(_z&&_z._value.length){_a+="itemaccessibility:"+_z._value+"; ";}var _aa=this.buttonsize;if(_aa&&_aa._value.length){_a+="buttonsize:"+_aa._value+"; ";}var _ab=this.buttonalign;if(_ab&&_ab._value.length){_a+="buttonalign:"+_ab._value+"; ";}return _a;};nexacro.Menu_CurrentStyle=function(){nexacro.CurrentStyle.call(this);this.autohotkey=null;this.buttonimage=null;this.popupcolor=null;this.popupborder=null;this.popupbordertype=null;this.popuppadding=null;this.popupfont=null;this.popupbackground=null;this.popupgradation=null;this.itemalign=null;this.itembackground=null;this.itemborder=null;this.itembordertype=null;this.itemgradation=null;this.itempadding=null;this.checkboximage=null;this.expandimage=null;this.popupitemheight=null;this.popupitemalign=null;this.popupitempadding=null;this.popupitemborder=null;this.popupitembordertype=null;this.popupitembackground=null;this.popupitemgradation=null;this.itemaccessibility=null;this.popuptype=null;this.buttonsize=null;this.buttonalign=null;};var _pMenuCurrentStyle=nexacro._createPrototype(nexacro.CurrentStyle,nexacro.Menu_CurrentStyle);nexacro.Menu_CurrentStyle.prototype=_pMenuCurrentStyle;_pMenuCurrentStyle.__custom_emptyObject=_pMenuStyle.__custom_emptyObject;_pMenuCurrentStyle.__get_custom_style_value=_pMenuStyle.__get_custom_style_value;_pMenuStyle=null;_pMenuCurrentStyle=null;nexacro.Menu=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this.captioncolumn="";this.checkboxcolumn="";this.enablecolumn="";this.hotkeycolumn="";this.iconcolumn="";this.idcolumn="";this.levelcolumn="";this.userdatacolumn="";this.beforeindex= -1;this.level=0;this.innerdataset="";this._is_menu_click=false;this._innerdataset="";this._popupmenu=null;this._items=[];this._cancelPopup=undefined;this._close_popup=false;this._want_arrow=true;this._hot_key_list=[];this._last_mouseleave_iteminfo={bindindex: -1,index: -1,level: -1};this._is_popupmenu_mouseover=false;this.spinupbutton=null;this.spindownbutton=null;this._spin_width=15;this._scrollIndex=0;this._scrollIndex_tmp=0;this._buttonRect=[];this._item_total_width=0;this._accessibility_role="menubar";this._focus_obj=null;this._menuitemindex= -1;this._menuitemonmouseenter=null;this._popupitemindex= -1;this._popupitempreviousindex=0;this._previousitem=0;this._clickitemindex= -1;this._key_action=false;this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onmenuclick":1,"onmousedown":1,"onmouseup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"onflingstart":1,"onfling":1,"onflingend":1,"onpinchstart":1,"onpinch":1,"onpinchend":1,"onlongpress":1,"onslidestart":1,"onslide":1,"onslideend":1};};var _pMenu=nexacro._createPrototype(nexacro.Component,nexacro.Menu);nexacro.Menu.prototype=_pMenu;_pMenu._type_name="Menu";nexacro.Menu._default_image_align=nexacro.Component._default_buttonimg_align;nexacro.Menu._default_buttonsize=nexacro._getCachedStyleObj("buttonsize", -1);nexacro.Menu._default_buttonalign=nexacro._getCachedStyleObj("buttonalign","auto");nexacro.Menu._default_autohotkey=nexacro._getCachedStyleObj("autohotkey","false");_pMenu.on_apply_custom_pseudo=function(_a){var _b=this.currentstyle;var _c=this.on_find_CurrentStyle_font(_a);if(_b.font!=_c){_b.font=_c;this.on_apply_style_font(_c);}var _d=this.on_find_CurrentStyle_letterspace(_a);if(_b.letterspace!=_d){_b.letterspace=_d;this.on_apply_style_letterspace(_d);}var _e=this.on_find_CurrentStyle_color(_a);if(_b.color!=_e){_b.color=_e;this.on_apply_style_color(_e);}var _f=this.on_find_CurrentStyle_align(_a);if(_f!=_b.align){_b.align=_f;this.on_apply_style_align(_f);}var _g=this.on_find_CurrentStyle_itemalign(_a);if(_b.itemalign!=_g){_b.itemalign=_g;}var _h=this.on_find_CurrentStyle_itembackground(_a);if(_b.itembackground!=_h){_b.itembackground=_h;}var _i=this.on_find_CurrentStyle_itemborder(_a);if(_b.itemborder!=_i){_b.itemborder=_i;}var _j=this.on_find_CurrentStyle_itembordertype(_a);if(_b.itembordertype!=_j){_b.itembordertype=_j;}var _k=this.on_find_CurrentStyle_itemgradation(_a);if(_b.itemgradation!=_k){_b.itemgradation=_k;}var _l=this.on_find_CurrentStyle_itempadding(_a);if(_b.itempadding!=_l){_b.itempadding=_l;}var _m=this.on_find_CurrentStyle_checkboximage(_a);if(_b.checkboximage!=_m){_b.checkboximage=_m;}var _n=this.on_find_CurrentStyle_expandimage(_a);if(_b.expandimage!=_n){_b.expandimage=_n;}var _o=this.on_find_CurrentStyle_popupborder(_a);if(_b.popupborder!=_o){_b.popupborder=_o;}var _p=this.on_find_CurrentStyle_popupbordertype(_a);if(_b.popupbordertype!=_p){_b.popupbordertype=_p;}var _q=this.on_find_CurrentStyle_popuppadding(_a);if(_b.popuppadding!=_q){_b.popuppadding=_q;}var _r=this.on_find_CurrentStyle_popupfont(_a);if(_b.popupfont!=_r){_b.popupfont=_r;}var _s=this.on_find_CurrentStyle_popupcolor(_a);if(_b.popupcolor!=_s){_b.popupcolor=_s;}var _t=this.on_find_CurrentStyle_popupbackground(_a);if(_b.popupbackground!=_t){_b.popupbackground=_t;}var _u=this.on_find_CurrentStyle_popupgradation(_a);if(_b.popupgradation!=_u){_b.popupgradation=_u;}var _v=this.on_find_CurrentStyle_popupitemheight(_a);if(_b.popupitemheight!=_v){_b.popupitemheight=_v;}var _w=this.on_find_CurrentStyle_popupitempadding(_a);if(_b.popupitempadding!=_w){_b.popupitempadding=_w;}var _x=this.on_find_CurrentStyle_popupitembackground(_a);if(_b.popupitembackground!=_x){_b.popupitembackground=_x;}var _y=this.on_find_CurrentStyle_popupitemalign(_a);if(_b.popupitemalign!=_y){_b.popupitemalign=_y;}var _z=this.on_find_CurrentStyle_popupitemborder(_a);if(_b.popupitemborder!=_z){_b.popupitemborder=_z;}var _aa=this.on_find_CurrentStyle_popupitembordertype(_a);if(_b.popupitembordertype!=_aa){_b.popupitembordertype=_aa;}var _ab=this.on_find_CurrentStyle_popupitemgradation(_a);if(_b.popupitemgradation!=_ab){_b.popupitemgradation=_ab;}var _ac=this.on_find_CurrentStyle_autohotkey(_a);if(_b.autohotkey!=_ac){_b.autohotkey=_ac;}var _ad=this.on_find_CurrentStyle_accessibility(_a);if(_b.accessibility!=_ad){_b.accessibility=_ad;}var _ae=this.on_find_CurrentStyle_itemaccessibility(_a);if(_b.itemaccessibility!=_ae){_b.itemaccessibility=_ae;}var _af=this.on_find_CurrentStyle_rtlimagemirroring(_a);if(_af!=_b.rtlimagemirroring){_b.rtlimagemirroring=_af;this.on_apply_style_rtlimagemirroring(_af);}var _ag=this.on_find_CurrentStyle_buttonsize(_a);if(_ag!=_b.buttonsize){_b.buttonsize=_ag;this.on_apply_style_buttonsize(_ag);}var _ah=this.on_find_CurrentStyle_buttonalign(_a);if(_ah!=_b.buttonalign){_b.buttonalign=_ah;this.on_apply_style_buttonalign(_ah);}if(this.spinupbutton){this.spinupbutton._control_pseudo="";this.spinupbutton._contents_pseudo="";this.spinupbutton.on_apply_pseudo(_a);}if(this.spindownbutton){this.spindownbutton._control_pseudo="";this.spindownbutton._contents_pseudo="";this.spindownbutton.on_apply_pseudo(_a);}};_pMenu.on_apply_custom_setfocus=function(_a){if((this._pseudo=="focused")&&!this._is_menu_click&&this._items&&this._items.length>0){this._menuitemindex=0;this._menuitemonmouseenter=this._items[this._menuitemindex];this._item_focus(this._menuitemonmouseenter,true);}var _b=this._control_element;if(_b){var _c=((_a=="lbutton")?false:nexacro._enableaccessibility);_b.setElementFocus(_c);}};_pMenu.on_create_custom_style=function(){return new nexacro.Menu_Style(this);};_pMenu.on_create_custom_currentStyle=function(){return new nexacro.Menu_CurrentStyle();};_pMenu.on_find_CurrentStyle_buttonimage=function(_a){return this._find_pseudo_obj("buttonimage",_a);};_pMenu.on_find_CurrentStyle_popupcolor=function(_a){return this._find_pseudo_obj("popupcolor",_a,"color");};_pMenu.on_find_CurrentStyle_popupborder=function(_a){return this._find_pseudo_obj("popupborder",_a,"border");};_pMenu.on_find_CurrentStyle_popupbordertype=function(_a){return this._find_pseudo_obj("popupbordertype",_a,"bordertype");};_pMenu.on_find_CurrentStyle_popuppadding=function(_a){return this._find_pseudo_obj("popuppadding",_a,"padding");};_pMenu.on_find_CurrentStyle_popupfont=function(_a){return this._find_pseudo_obj("popupfont",_a,"font");};_pMenu.on_find_CurrentStyle_letterspace=function(_a){return this._find_pseudo_obj("letterspace",_a,"letterspace");};_pMenu.on_find_CurrentStyle_popupbackground=function(_a){return this._find_pseudo_obj("popupbackground",_a,"background");};_pMenu.on_find_CurrentStyle_popupgradation=function(_a){return this._find_pseudo_obj("popupgradation",_a,"gradation");};_pMenu.on_find_CurrentStyle_itemalign=function(_a){return this._find_pseudo_obj("itemalign",_a,"align");};_pMenu.on_find_CurrentStyle_itembackground=function(_a){return this._find_pseudo_obj("itembackground",_a,"background");};_pMenu.on_find_CurrentStyle_itemborder=function(_a){return this._find_pseudo_obj("itemborder",_a,"border");};_pMenu.on_find_CurrentStyle_itembordertype=function(_a){return this._find_pseudo_obj("itembordertype",_a,"bordertype");};_pMenu.on_find_CurrentStyle_itemgradation=function(_a){return this._find_pseudo_obj("itemgradation",_a,"gradation");};_pMenu.on_find_CurrentStyle_itempadding=function(_a){return this._find_pseudo_obj("itempadding",_a,"padding");};_pMenu.on_find_CurrentStyle_checkboximage=function(_a){return this._find_pseudo_obj("checkboximage",_a);};_pMenu.on_find_CurrentStyle_expandimage=function(_a){return this._find_pseudo_obj("expandimage","normal");};_pMenu.on_find_CurrentStyle_popupitemheight=function(_a){return this._find_pseudo_obj("popupitemheight",_a);};_pMenu.on_find_CurrentStyle_popupitemalign=function(_a){return this._find_pseudo_obj("popupitemalign",_a);};_pMenu.on_find_CurrentStyle_popupitempadding=function(_a){return this._find_pseudo_obj("popupitempadding",_a,"padding");};_pMenu.on_find_CurrentStyle_popupitemborder=function(_a){return this._find_pseudo_obj("popupitemborder",_a,"border");};_pMenu.on_find_CurrentStyle_popupitembordertype=function(_a){return this._find_pseudo_obj("popupitembordertype",_a,"bordertype");};_pMenu.on_find_CurrentStyle_popupitembackground=function(_a){return this._find_pseudo_obj("popupitembackground",_a,"background");};_pMenu.on_find_CurrentStyle_popupitemgradation=function(_a){return this._find_pseudo_obj("popupitemgradation",_a,"gradation");};_pMenu.on_find_CurrentStyle_autohotkey=function(_a){return this._find_pseudo_obj("autohotkey",_a)||nexacro.Menu._default_autohotkey;};_pMenu.on_find_CurrentStyle_itemaccessibility=function(_a){return this._find_pseudo_obj("itemaccessibility",_a,"accessibility")||nexacro.Component._default_accessibility;};_pMenu.on_find_CurrentStyle_popuptype=function(_a){return this._find_pseudo_obj("popuptype",_a);};_pMenu.on_find_CurrentStyle_buttonsize=function(_a){return this._find_pseudo_obj("buttonsize",_a)||nexacro.Menu._default_buttonsize;};_pMenu.on_find_CurrentStyle_buttonalign=function(_a){return this._find_pseudo_obj("buttonalign",_a)||nexacro.Menu._default_buttonalign;};_pMenu.on_update_style_popuptype=function(){this.currentstyle.popuptype=this.on_find_CurrentStyle_popuptype(this._pseudo);};_pMenu.on_update_style_buttonsize=function(){this.on_apply_style_buttonsize(this.currentstyle.buttonsize=this.on_find_CurrentStyle_buttonsize(this._pseudo));};_pMenu.on_update_style_buttonalign=function(){this.on_apply_style_buttonalign(this.currentstyle.buttonalign=this.on_find_CurrentStyle_buttonalign(this._pseudo));};_pMenu.on_update_style_color=function(){this.currentstyle.color=this.on_find_CurrentStyle_color(this._pseudo);var _a=this._items;if(_a){var _b=_a.length;for(var _c=0;_c<_b;_c++ ){if(_a[_c]&&_a[_c].enable){_a[_c].on_update_style_color();}}}};_pMenu.on_update_style_font=function(){this.currentstyle.font=this.on_find_CurrentStyle_font(this._pseudo);var _a=this._items;if(_a){var _b=_a.length;for(var _c=0;_c<_b;_c++ ){if(_a[_c]){_a[_c].on_apply_style_font(this.currentstyle.font);}}this._createMenu(false);}};_pMenu.on_update_style_align=function(){this.currentstyle.align=this.on_find_CurrentStyle_align(this._pseudo);var _a=this._items;if(_a){var _b=_a.length;for(var _c=0;_c<_b;_c++ ){if(_a[_c]){_a[_c].on_update_style_align();}}}};_pMenu.on_update_style_buttonimage=function(){this.on_apply_style_buttonimage(this.currentstyle.buttonimage=this.on_find_CurrentStyle_buttonimage(this._pseudo));};_pMenu.on_update_style_popupcolor=function(){this.currentstyle.popupcolor=this.on_find_CurrentStyle_popupcolor(this._pseudo);if(this._popupmenu){this._popupmenu.on_update_style_color();}};_pMenu.on_update_style_popupborder=function(){this.currentstyle.popupborder=this.on_find_CurrentStyle_popupborder(this._pseudo);if(this._popupmenu){this._popupmenu.on_update_style_border();}};_pMenu.on_update_style_popupbordertype=function(){this.currentstyle.popupbordertype=this.on_find_CurrentStyle_popupbordertype(this._pseudo);if(this._popupmenu){this._popupmenu.on_update_style_bordertype();}};_pMenu.on_update_style_popuppadding=function(){this.currentstyle.popuppadding=this.on_find_CurrentStyle_popuppadding(this._pseudo);if(this._popupmenu){this._popupmenu.on_update_style_padding();}};_pMenu.on_update_style_popupfont=function(){this.currentstyle.popupfont=this.on_find_CurrentStyle_popupfont(this._pseudo);if(this._popupmenu){this._popupmenu.on_update_style_font();}};_pMenu.on_update_style_popupbackground=function(){this.on_apply_style_popupbackground(this.currentstyle.popupbackground=this.on_find_CurrentStyle_popupbackground(this._pseudo));if(this._popupmenu){this._popupmenu.on_update_style_background();}};_pMenu.on_update_style_popupgradation=function(){this.currentstyle.popupgradation=this.on_find_CurrentStyle_popupgradation(this._pseudo);if(this._popupmenu){this._popupmenu.on_update_style_gradation();}};_pMenu.on_update_style_itemalign=function(){this.on_apply_style_itemalign(this.currentstyle.itemalign=this.on_find_CurrentStyle_itemalign(this._pseudo));};_pMenu.on_update_style_itembackground=function(){this.on_apply_style_itembackground(this.currentstyle.itembackground=this.on_find_CurrentStyle_itembackground(this._pseudo));};_pMenu.on_update_style_itemborder=function(){this.on_apply_style_itemborder(this.currentstyle.itemborder=this.on_find_CurrentStyle_itemborder(this._pseudo));};_pMenu.on_update_style_itembordertype=function(){this.on_apply_style_itembordertype(this.currentstyle.itembordertype=this.on_find_CurrentStyle_itembordertype(this._pseudo));};_pMenu.on_update_style_itemgradation=function(){this.on_apply_style_itemgradation(this.currentstyle.itemgradation=this.on_find_CurrentStyle_itemgradation(this._pseudo));};_pMenu.on_update_style_itempadding=function(){this.on_apply_style_itempadding(this.currentstyle.itempadding=this.on_find_CurrentStyle_itempadding(this._pseudo));};_pMenu.on_update_style_checkboximage=function(){this.on_apply_style_checkboximage(this.currentstyle.checkboximage=this.on_find_CurrentStyle_checkboximage(this._pseudo));};_pMenu.on_update_style_expandimage=function(){this.on_apply_style_expandimage(this.currentstyle.expandimage=this.on_find_CurrentStyle_expandimage(this._pseudo));};_pMenu.on_update_style_popupitemheight=function(){this.on_apply_style_popupitemheight(this.currentstyle.popupitemheight=this.on_find_CurrentStyle_popupitemheight(this._pseudo));};_pMenu.on_update_style_popupitemalign=function(){this.on_apply_style_popupitemalign(this.currentstyle.popupitemalign=this.on_find_CurrentStyle_popupitemalign(this._pseudo));};_pMenu.on_update_style_popupitempadding=function(){this.on_apply_style_popupitempadding(this.currentstyle.popupitempadding=this.on_find_CurrentStyle_popupitempadding(this._pseudo));};_pMenu.on_update_style_popupitemborder=function(){this.on_apply_style_popupitemborder(this.currentstyle.popupitemborder=this.on_find_CurrentStyle_popupitemborder(this._pseudo));};_pMenu.on_update_style_popupitembordertype=function(){this.on_apply_style_popupitembordertype(this.currentstyle.popupitembordertype=this.on_find_CurrentStyle_popupitembordertype(this._pseudo));};_pMenu.on_update_style_popupitembackground=function(){this.on_apply_style_popupitembackground(this.currentstyle.popupitembackground=this.on_find_CurrentStyle_popupitembackground(this._pseudo));};_pMenu.on_update_style_popupitemgradation=function(){this.on_apply_style_popupitemgradation(this.currentstyle.popupitemgradation=this.on_find_CurrentStyle_popupitemgradation(this._pseudo));};_pMenu.on_update_style_autohotkey=function(){this.on_apply_style_autohotkey(this.currentstyle.autohotkey=this.on_find_CurrentStyle_autohotkey(this._pseudo));};_pMenu.on_update_style_itemaccessibility=function(){this.on_apply_style_itemaccessibility(this.currentstyle.itemaccessibility=this.on_find_CurrentStyle_itemaccessibility(this._pseudo));};_pMenu.on_apply_style_color=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _e=0;_e<_c;_e++ ){var _d=_b[_e];if(_d.selected){_d._pseudo="selected";}if(!_d.enable){_d._pseudo="disabled";}_a=this.on_find_CurrentStyle_color(_d._pseudo);_d.on_apply_style_color(_a);}}};_pMenu.on_apply_style_font=function(_a){this._createMenu();};_pMenu.on_apply_style_letterspace=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _e=0;_e<_c;_e++ ){_b[_e].on_apply_style_letterspace(_a);}}this._calcMenuItem();this._updateMenuItemPosition();var _d=this._popupmenu;if(_d){_d.on_apply_style_letterspace(_a);}};_pMenu.on_apply_style_itemalign=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_apply_style_align(_a);}}};_pMenu.on_apply_style_itembackground=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_apply_style_background(_a);}}};_pMenu.on_apply_style_itemborder=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_apply_style_border(_a);}}};_pMenu.on_apply_style_itembordertype=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_apply_style_bordertype(_a);}}};_pMenu.on_apply_style_itemgradation=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_apply_style_gradation(_a);}}};_pMenu.on_apply_style_itempadding=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_apply_style_padding(_a);}this._createMenu(false);}};_pMenu.on_apply_style_checkboximage=function(_a){if(_a){this._load_image(_a,0);}if(this._popupmenu){this._popupmenu.on_apply_style_checkboximage(_a);}};_pMenu.on_apply_style_expandimage=function(_a){if(_a){this._load_image(_a,1);}if(this._popupmenu){this._popupmenu.on_apply_style_expandimage(_a);}};_pMenu.on_apply_style_popupborder=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_border(_a);}};_pMenu.on_apply_style_popupbordertype=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_bordertype(_a);}};_pMenu.on_apply_style_popupfont=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_font(_a);}};_pMenu.on_apply_style_popuppadding=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_padding(_a);}};_pMenu.on_apply_style_popupcolor=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_color(_a);}};_pMenu.on_apply_style_popupgradation=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_gradation(_a);}};_pMenu.on_apply_style_popupbackground=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_background(_a);}};_pMenu.on_apply_style_popupitembackground=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_itembackground(_a);}};_pMenu.on_apply_style_popupitemalign=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_itemalign(_a);}};_pMenu.on_apply_style_popupitemborder=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_itemborder(_a);}};_pMenu.on_apply_style_popupitembordertype=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_itembordertype(_a);}};_pMenu.on_apply_style_popupitemgradation=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_itemgradation(_a);}};_pMenu.on_apply_style_autohotkey=nexacro._emptyFn;_pMenu.on_apply_style_popupitemheight=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_itemheight(_a);}};_pMenu.on_apply_style_popupitempadding=function(_a){var _b=this._popupmenu;if(_b){_b.on_apply_style_itempadding(_a);}};_pMenu.on_apply_style_itemaccessibility=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_apply_style_accessibility(_a);}}};_pMenu.on_apply_style_rtlimagemirroring=function(_a){return;};_pMenu.on_apply_style_buttonsize=function(_a){if(_a&&_a._value!= -1){this._spin_width=parseInt(_a._value);}else{this._spin_width=15;}this._createMenu(false);var _b=this._items;var _c=_b.length;var _d=this.on_find_CurrentStyle_padding(this._pseudo);var _e=this._client_height;if(_d){_e=_e-_d.top-_d.bottom;}for(var _f=0;_f<_c;_f++ ){_b[_f].resize(_b[_f]._adjust_width,_e);}};_pMenu.on_apply_style_buttonalign=function(_a){if(_a){var _b=_a._value;if(_b=="none"){this._spin_width=0;}else{var _c=this.on_find_CurrentStyle_buttonsize(this._pseudo);if(_c&&_c._value!= -1){this._spin_width=parseInt(_c._value);}else{this._spin_width=15;}}}this._createMenu(false);var _d=this._items;var _e=_d.length;var _f=this.on_find_CurrentStyle_padding(this._pseudo);var _g=this._client_height;if(_f){_g=_g-_f.top-_f.bottom;}for(var _h=0;_h<_e;_h++ ){_d[_h].resize(_d[_h]._adjust_width,_g);}};_pMenu.on_create_contents=function(){var _a=this.currentstyle;this._createMenu(true);if(_a.checkboximage){this._load_image(_a.checkboximage,0);}if(_a.expandimage){this._load_image(_a.expandimage,1);}};_pMenu.on_created_contents=function(){var _a=this.getElement();if(_a){var _b=this._items;if(_b){var _c=this._items.length;var _d=null;for(var _e=0;_e<_c;_e++ ){_b[_e].on_created();}}if(nexacro._enableaccessibility){this._want_arrow=true;this._setAccessibilityInfoLevel(this.level);}if(this._innerdataset&&this.enablecolumn){this.on_apply_enablecolumn();}this._createMenu(false);this.on_apply_prop_rtldirection();}};_pMenu.on_destroy_contents=function(){if(this._popupmenu){this._popupmenu.destroy();this._popupmenu=null;}var _a=this._items;if(_a){var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].destroy();_a[_c]=null;}this._items=null;}_a=null;this._destroySpinButton();};_pMenu.on_change_containerRect=function(_a,_b){this._createMenu(false);var _c=this._items;var _d=_c.length;var _e=this.on_find_CurrentStyle_padding(this._pseudo);if(_e){_b=_b-_e.top-_e.bottom;}for(var _f=0;_f<_d;_f++ ){_c[_f].resize(_c[_f]._adjust_width,_b);}this._item_focus(this._focus_obj,true);};_pMenu.on_apply_prop_enable=function(_a){var _b=this.getElement();if(_b){var _c=this._items;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e]._setEnable(_a);}}};_pMenu.set_captioncolumn=function(_a){var _b=_a;var _c=this._popupmenu;if(_c){_c.set_captioncolumn(_b);}if(_b!=this.captioncolumn){this.captioncolumn=_b;this.on_apply_captioncolumn();}};_pMenu.on_apply_captioncolumn=function(){var _a=this.captioncolumn;if(this._innerdataset){this._createMenu(false);var _b=this._items;var _c=_b.length;for(var _e=0;_e<_c;_e++ ){var _d=this._innerdataset.getColumn(_b[_e].datarow,this.captioncolumn);if(_d){_b[_e].set_text(_d);}else{_b[_e].set_text("");}}}};_pMenu.set_checkboxcolumn=function(_a){var _b=_a;if(this._popupmenu){this._popupmenu.set_checkboxcolumn(_b);}if(_b!=this.checkboxcolumn){this.checkboxcolumn=_b;this._createMenu(false);}return this.checkboxcolumn;};_pMenu.set_enablecolumn=function(_a){if(_a!=this.enablecolumn){this.enablecolumn=_a;this.on_apply_enablecolumn();}return this.enablecolumn;};_pMenu.on_apply_enablecolumn=function(){var _a=this.enablecolumn;if(this._innerdataset){this._createMenu(false);var _b=this._items;var _c=_b.length;for(var _e=0;_e<_c;_e++ ){var _d=this._innerdataset.getColumn(_b[_e].datarow,this.enablecolumn);_d=_d==false||_d=="false"?false:true;_b[_e].set_enable(_d);}}if(this._popupmenu){this._popupmenu.set_enablecolumn(this.enablecolumn);}};_pMenu.set_hotkeycolumn=function(_a){var _b=this._popupmenu;if(_b){_b.set_hotkeycolumn(_a);}if(_a!=this.hotkeycolumn){this.hotkeycolumn=_a;this._createMenu(false);}return this.hotkeycolumn;};_pMenu.set_iconcolumn=function(_a){var _b=this._popupmenu;if(_b){_b.set_iconcolumn(_a);}if(_a!=this.iconcolumn){this.iconcolumn=_a;this._createMenu(false);}return this.iconcolumn;};_pMenu.set_idcolumn=function(_a){var _b=this._popupmenu;if(_b){_b.set_idcolumn(_a);}if(_a!=this.idcolumn){this.idcolumn=_a;this.on_apply_idcolumn();}return this.idcolumn;};_pMenu.on_apply_idcolumn=function(){var _a=this.idcolumn;if(this._innerdataset){this._createMenu(false);var _b=this._items;var _c=_b.length;for(var _e=0;_e<_c;_e++ ){var _d=this._innerdataset.getColumn(_b[_e].datarow,this.idcolumn);_b[_e].id=_d?_d:"";}}};_pMenu.set_levelcolumn=function(_a){var _b=_a;var _c=this._popupmenu;if(_c){_c.set_levelcolumn(_b);}if(_b!=this.levelcolumn){this.levelcolumn=_b;this.on_apply_levelcolumn();}return this.levelcolumn;};_pMenu.on_apply_levelcolumn=function(){var _a=this.levelcolumn;if(this._innerdataset){this._createMenu(false);var _b=this._items;var _c=_b.length;for(var _e=0;_e<_c;_e++ ){var _d=this._innerdataset.getColumn(_b[_e].datarow,this.levelcolumn);_b[_e].level=_d?_d: -1;}}};_pMenu.set_userdatacolumn=function(_a){var _b=_a;var _c=this._popupmenu;if(_c){_c.set_userdatacolumn(_b);}if(_b!=this.userdatacolumn){this.userdatacolumn=_b;this.on_apply_userdatacolumn();}return this.userdatacolumn;};_pMenu.on_apply_userdatacolumn=function(){var _a=this.userdatacolumn;if(this._innerdataset){this._createMenu(false);var _b=this._items;var _c=_b.length;for(var _e=0;_e<_c;_e++ ){var _d=this._innerdataset.getColumn(_b[_e].datarow,this.userdatacolumn);if(_d){_b[_e].userdata=_d;}}}};_pMenu.setInnerDataset=function(_a){if(!_a){this._innerdataset=null;this.innerdataset="";this.on_apply_innerdataset();}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this.innerdataset=_a.id;this.on_apply_innerdataset();}};_pMenu._setInnerDatasetStr=function(_a){if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}};_pMenu.getInnerDataset=function(){return this._innerdataset;};_pMenu.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(_a!=this.innerdataset){if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}this.on_apply_innerdataset();}else if(this.innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this.innerdataset);this.on_apply_innerdataset();}return this.innerdataset;};_pMenu.on_apply_innerdataset=function(){var _a=this._innerdataset;if(_a){var _b=this._callbackFromDataset;_a._setEventHandler("onrowposchanged",_b,this);_a._setEventHandler("oncolumnchanged",_b,this);_a._setEventHandler("onrowsetchanged",_b,this);}var _c=this.getElement();if(_c&&this.innerdataset){this._createMenu(true);this.beforeindex= -1;this.beforevalue="";this.beforeText="";}};_pMenu.on_apply_prop_rtldirection=function(){nexacro.Component.prototype.on_apply_prop_rtldirection.call(this);this.on_change_containerRect(this._client_width,this._client_height);var _a=this._rtldirection;var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setRtlDirection(_a);}if(this._popupmenu){this._popupmenu._setRtlDirection(_a);}};_pMenu.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var _m=_l._overedobj||_l;var _n=new nexacro.MenuMouseEventInfo(this,"onlbuttondown",_m.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_l.level,_m.index,_m._bindindex);return this.onlbuttondown._fireUserEvent(this,_n);}return false;};_pMenu.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _m=_l._overedobj||_l;var _n=new nexacro.MenuMouseEventInfo(this,"onlbuttonup",_m.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_l.level,_m.index,_m._bindindex);return this.onlbuttonup._fireUserEvent(this,_n);}return false;};_pMenu.on_fire_user_onrbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var _m=_l._overedobj||_l;var _n=new nexacro.MenuMouseEventInfo(this,"onrbuttondown",_m.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_l.level,_m.index,_m._bindindex);return this.onrbuttondown._fireUserEvent(this,_n);}return false;};_pMenu.on_fire_user_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var _m=_l._overedobj||_l;var _n=new nexacro.MenuMouseEventInfo(this,"onrbuttonup",_m.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_l.level,_m.index,_m._bindindex);return this.onrbuttonup._fireUserEvent(this,_n);}return false;};_pMenu.on_fire_user_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onmouseup&&this.onmouseup._has_handlers){var _m=_l._overedobj||_l;var _n=new nexacro.MenuMouseEventInfo(this,"onmouseup",_m.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_l.level,_m.index,_m._bindindex);return this.onmouseup._fireUserEvent(this,_n);}return false;};_pMenu.on_fire_user_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onmousedown&&this.onmousedown._has_handlers){var _m=_l._overedobj||_l;var _n=new nexacro.MenuMouseEventInfo(this,"onmousedown",_m.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_l.level,_m.index,_m._bindindex);return this.onmousedown._fireUserEvent(this,_n);}return false;};_pMenu.on_fire_user_onmouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onmouseenter&&this.onmouseenter._has_handlers){var _m=_l._overedobj||_l;var _n=new nexacro.MenuMouseEventInfo(this,"onmouseenter",_m.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_l.level,_m.index,_m._bindindex);return this.onmouseenter._fireUserEvent(this,_n);}return false;};_pMenu.on_fire_user_onmouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onmouseleave&&this.onmouseleave._has_handlers){var _m=new nexacro.MenuMouseEventInfo(this,"onmouseleave",_l.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this._last_mouseleave_iteminfo.level,this._last_mouseleave_iteminfo.index,this._last_mouseleave_iteminfo.bindindex);return this.onmouseleave._fireUserEvent(this,_m);}return false;};_pMenu.on_fire_user_onmousemove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this._menuitemonmouseenter&&(this._menuitemonmouseenter!=_l)&&(this!=_l)){this._process_mousemove(_l);}if(this.onmousemove&&this.onmousemove._has_handlers){var _m=_l._overedobj||_l;var _n=new nexacro.MenuMouseEventInfo(this,"onmousemove",_m.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_l.level,_m.index,_m._bindindex);return this.onmousemove._fireUserEvent(this,_n);}return false;};_pMenu.on_fire_user_ondrag=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.ondrag&&this.ondrag._has_handlers){var _n=this._getDragData();var _o=_m._overedobj||_m;var _p=new nexacro.MenuDragEventInfo(this,"ondrag",_l.id,_n,null,this,_m,_k,_l,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_m.level,_o.index,_o._bindindex);return [this.ondrag._fireUserEvent(this,_p),this,_m,_n,_p.userdata];}return [false];};_pMenu.on_fire_user_ondrop=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(this.ondrop&&this.ondrop._has_handlers){var _q=_p._overedobj||_p;var _r=new nexacro.MenuDragEventInfo(this,"ondrop",_b.id,_c,_d,_a,_b,_o,_p,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_p.level,_q.index,_q._bindindex);return this.ondrop._fireUserEvent(this,_r);}return false;};_pMenu.on_fire_user_ondragenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(this.ondragenter&&this.ondragenter._has_handlers){var _q=_p._overedobj||_p;var _r=new nexacro.MenuDragEventInfo(this,"ondragenter",_b.id,_c,_d,_a,_b,_o,_p,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_p.level,_q.index,_q._bindindex);return this.ondragenter._fireUserEvent(this,_r);}return false;};_pMenu.on_fire_user_ondragleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(this.ondragleave&&this.ondragleave._has_handlers){var _q=new nexacro.MenuDragEventInfo(this,"ondragleave",_b.id,_c,_d,_a,_b,_o,_p,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,this._last_mouseleave_iteminfo.level,this._last_mouseleave_iteminfo.index,this._last_mouseleave_iteminfo.bindindex);return this.ondragleave._fireUserEvent(this,_q);}return false;};_pMenu.on_fire_user_ondragmove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(this.ondragmove&&this.ondragmove._has_handlers){var _q=_p._overedobj||_p;var _r=new nexacro.MenuDragEventInfo(this,"ondragmove",_b.id,_c,_d,_a,_b,_o,_p,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_p.level,_q.index,_q._bindindex);return this.ondragmove._fireUserEvent(this,_r);}return false;};_pMenu.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f){var _g=this._popupmenu_find(this);var _h=this._item_find(_g);var _i=this._popupmenu_visible(this);var _j=this._items;var _k;if(_j[this._menuitemindex]){_k=this._popupmenuitem_extend(_j[this._menuitemindex]);}var _l;if(_h[this._popupitemindex]){_l=this._popupmenuitem_extend(_h[this._popupitemindex]);}var _m=_h.length-1;var _n=_j.length-1;var _o=nexacro.Event;if(nexacro._enableaccessibility){switch(_a){case _o.KEY_UP:if(this._focus_obj instanceof nexacro.Menu){this._menuitemindex= -1;var _p=this.parent.getPrevAccessibilityComponent(_g);_p._setFocus(false);}else if(this._focus_obj instanceof nexacro.PopupMenuItem){_h=this._item_find(_g);this._item_focus(_h[this._popupitemindex],false);this._popupitemindex-- ;if(this._popupitemindex<0){this._popupitemindex=_m;}this._focus_obj=this._menuitemonmouseenter=_h[this._popupitemindex];this._item_focus(_h[this._popupitemindex],true);}else if(this._focus_obj instanceof nexacro.MenuItem){if(_i){this._showPopup(this._focus_obj);_h=this._item_find(_g);this._item_focus(_h[this._popupitemindex],false);this._popupitemindex-- ;if(this._popupitemindex<0){this._popupitemindex=_m;}this._focus_obj=this._menuitemonmouseenter=_h[this._popupitemindex];this._item_focus(_h[this._popupitemindex],true);}else{this._focus_obj=_g;this._item_focus(this._focus_obj);}}break;case _o.KEY_DOWN:if(this._focus_obj instanceof nexacro.Menu){this._menuitemindex=0;this._focus_obj=_j[this._menuitemindex];this._item_focus(this._focus_obj,true);}else if(this._focus_obj instanceof nexacro.PopupMenuItem){_h=this._item_find(_g);this._item_focus(_h[this._popupitemindex],false);this._popupitemindex++ ;if(this._popupitemindex>_m){this._popupitemindex=0;}this._focus_obj=this._menuitemonmouseenter=_h[this._popupitemindex];this._item_focus(_h[this._popupitemindex],true);}else if(this._focus_obj instanceof nexacro.MenuItem){if(_k==true){var _q=this._focus_obj;this._showPopup(_q);_h=this._item_find(_g);this._previousitem=this._menuitemindex;_i=true;}if(_i){this._item_focus(_h[this._popupitemindex],false);this._popupitemindex++ ;if(this._popupitemindex>_m){this._popupitemindex=0;}this._focus_obj=this._menuitemonmouseenter=_h[this._popupitemindex];if(nexacro.Browser=="IE"&&nexacro.BrowserVersion==8){nexacro.OnceCallbackTimer.callonce(this,function(){this._item_focus(this._focus_obj,true);});}else{this._item_focus(this._focus_obj,true);}}}break;case _o.KEY_LEFT:if(_i){this._previousitem=this._menuitemindex;}else{this._menuitemindex-- ;this._previousitem=this._menuitemindex;}if(this._menuitemindex<0){this._menuitemindex=_n;}if(_i){if(_g.parent instanceof nexacro.PopupMenu){this._item_focus(_h[this._popupitemindex],false);this._popupitemindex=_g.parent._previousitem;var _h=_g.parent._items;_g._closePopup();this._focus_obj=_h[this._popupitemindex];this._menuitemonmouseenter=this._focus_obj;this._item_focus(this._focus_obj,true);}else{this._previousitem-- ;if(this._previousitem<0){this._previousitem=_n;}this._menuitemindex=this._previousitem;var _k=this._popupmenuitem_extend(_j[this._menuitemindex]);this.on_notify_menuitem_onmouseenter(_j[this._menuitemindex]);this._popupitemindex=0;if(!_k){this._focus_obj=_j[this._menuitemindex];this._menuitemonmouseenter=this._focus_obj;this._item_focus(this._focus_obj,true);}else{var _r=this._popupmenu_find(this);var _s=this._item_find(_r);this._item_focus(this,false);this._focus_obj=_s[this._popupitemindex];this._menuitemonmouseenter=this._focus_obj;if(nexacro.Browser=="IE"&&nexacro.BrowserVersion==8){nexacro.OnceCallbackTimer.callonce(this,function(){this._item_focus(this._focus_obj,true);});}else{this._item_focus(this._focus_obj,true);}}}}else{_g._previousitem=this._menuitemindex;this._focus_obj=_j[this._menuitemindex];this._menuitemonmouseenter=this._focus_obj;this._item_focus(this._focus_obj,true);}break;case _o.KEY_RIGHT:if(!_i){this._menuitemindex++ ;this._previousitem=this._menuitemindex;}if(this._menuitemindex>_n){this._menuitemindex=0;}if(_k&&_i==true){if(this._popupitemindex== -1){this._popupitemindex=0;}var _l=this._popupmenuitem_extend(_h[this._popupitemindex]);if(!_l){this._menuitemindex++ ;if(this._menuitemindex>_n){this._menuitemindex=0;}this.on_notify_menuitem_onmouseenter(_j[this._menuitemindex]);var _k=this._popupmenuitem_extend(_j[this._menuitemindex]);if(!_k){this._focus_obj=_j[this._menuitemindex];this._item_focus(this._focus_obj,true);}else{var _r=this._popupmenu_find(this);var _s=this._item_find(_r);this._item_focus(this,false);this._popupitemindex=0;this._focus_obj=_s[this._popupitemindex];if(nexacro.Browser=="IE"&&nexacro.BrowserVersion==8){nexacro.OnceCallbackTimer.callonce(this,function(){this._item_focus(this._focus_obj,true);});}else{this._item_focus(this._focus_obj,true);}}}else{_g.on_notify_menuitem_onmouseenter(_h[this._popupitemindex]);var _s=this._item_find(_g);this._item_focus(this,false);this._popupitemindex=0;this._focus_obj=_s[this._popupitemindex];this._menuitemonmouseenter=this._focus_obj;this._item_focus(this._focus_obj,true);}}else{this._focus_obj=_j[this._menuitemindex];this._menuitemonmouseenter=_j[this._menuitemindex];this._item_focus(this._focus_obj,true);}break;case _o.KEY_ENTER:if(this._menuitemonmouseenter){if(_k==true&&(!this._popupmenu||(this._popupmenu&&!this._popupmenu._is_popup()))){this.on_notify_menuitem_onlbuttondown(_j[this._menuitemindex]);this._previousitem=this._menuitemindex;}else if(_g instanceof nexacro.Menu){_g.on_notify_menuitem_onclick(this._menuitemonmouseenter);}else{var _r=this._menuitemonmouseenter.parent;_r.on_notify_menuitem_onclick(this._menuitemonmouseenter);}}break;case _o.KEY_ESC:if(_i){this._popupitemindex= -1;_g._closePopup();var _h=_g.parent._items[_g.parent._previousitem];this._item_focus(_h,false);this._focus_obj=_h;this._item_focus(_h,true);}break;default:break;}}else{this._key_action=true;switch(_a){case _o.KEY_UP:var _t=this._menuitemindex> -1?this._menuitemindex:this._clickitemindex;if(_t> -1){if(_i){if(_g._is_spin_visible){_g._popupitemindex=this._popupitemindex;_g._do_scroll(_a,_g);}var _u=true;var _v=_h[this._popupitemindex];if(_v&&(!_v.enable||_v._pseudo=="mouseover")){_u=false;}_v=null;if(_u){this._popupitemindex=0;}else{this._popupitemindex-- ;}_u=null;if(this._popupitemindex<0){this._popupitemindex=_m;}this._menuitemonmouseenter=_h[this._popupitemindex];this._item_focus(_h[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}}break;case _o.KEY_DOWN:var _t=this._menuitemindex> -1?this._menuitemindex:this._clickitemindex;if(_t> -1){if(_k&&_j[_t].enable){if(_i==true){if(_g._is_spin_visible){_g._popupitemindex=this._popupitemindex;_g._do_scroll(_a,_g);}var _u=true;var _v=_h[this._popupitemindex];if(_v&&(!_v.enable||_v._pseudo=="mouseover")){_u=false;}_v=null;if(_u){this._popupitemindex=0;}else{this._popupitemindex++ ;}_u=null;if(this._popupitemindex>_m){this._popupitemindex=0;}this._menuitemonmouseenter=_h[this._popupitemindex];this._item_focus(_h[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}else if(_i==false){if(!this._is_menu_click){this._is_menu_click=true;}this.on_notify_menuitem_onlbuttondown(_j[_t]);this._previousitem=this._menuitemindex;var _r=this._popupmenu_find(this);if(_r!=this){var _s=this._item_find(_r);this._popupitemindex=0;this._menuitemonmouseenter=_s[this._popupitemindex];this._item_focus(_s[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}}}else if(!this._is_menu_click&&!this._selected&&this._menuitemonmouseenter&&this._menuitemonmouseenter._pseudo=="normal"){this._menuitemindex=0;if(!this._is_menu_click){this._is_menu_click=true;}this._previousitem=this._menuitemindex;this._menuitemonmouseenter=_j[this._menuitemindex];_k=this._popupmenuitem_extend(this._menuitemonmouseenter);if(_k){this.on_notify_menuitem_onlbuttondown(this._menuitemonmouseenter);}else{this._item_focus(this._menuitemonmouseenter,this._is_menu_click);break;}var _r=this._popupmenu_find(this);if(_r!=this){var _s=this._item_find(_r);this._popupitemindex=0;this._menuitemonmouseenter=_s[this._popupitemindex];this._item_focus(_s[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}}}break;case _o.KEY_LEFT:if(_i){this._previousitem=this._menuitemindex;if(_g.parent instanceof nexacro.PopupMenu){this._popupitemindex=_g.parent._previousitem;var _h=_g.parent._items;_g._closePopup();this._menuitemonmouseenter=_h[this._popupitemindex];this._item_focus(_h[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}else{if(this._is_spin_visible){this._do_scroll(_a,this);}this._previousitem-- ;if(this._previousitem<0){this._previousitem=_n;}this._menuitemindex=this._previousitem;var _v=_j[this._menuitemindex];var _k=this._popupmenuitem_extend(_v);this.on_notify_menuitem_onmouseenter(_v);this._item_focus(_v,true);this._popupitemindex=0;if(!_k){this._menuitemonmouseenter=_v;this._item_focus(_v,true);}else{var _r=this._popupmenu_find(this);if(_r!=this){var _s=this._item_find(_r);this._menuitemonmouseenter=_s[this._popupitemindex];this._item_focus(_s[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}}}}else{if(this._is_spin_visible){this._do_scroll(_a,this);}if(!this._is_menu_click&&!this._selected&&this._menuitemonmouseenter&&this._menuitemonmouseenter._pseudo=="normal"){this._menuitemindex=0;}else if(!_i){this._menuitemindex-- ;}if(this._menuitemindex<0){this._menuitemindex=_n;}this._menuitemonmouseenter=_j[this._menuitemindex];this._clickitemindex=this._menuitemindex;if(this._previousitem> -1){this._item_focus(_j[this._previousitem],false);}this._previousitem=this._menuitemindex;var _k=this._popupmenuitem_extend(this._menuitemonmouseenter);if(_k){if(_j[this._menuitemindex].enable&&this._clickitemindex>=0&&!this._close_popup){this.on_notify_menuitem_onlbuttondown(_j[this._menuitemindex]);}else{this._item_focus(_j[this._menuitemindex],true);break;}var _r=this._popupmenu_find(this);var _s=this._item_find(_r);this._popupitemindex=0;if(!(_s[this._popupitemindex] instanceof nexacro.PopupMenuItem)){this._item_focus(this._menuitemonmouseenter,true);break;}this._menuitemonmouseenter=_s[this._popupitemindex];this._item_focus(_s[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}else{this._item_focus(_j[this._menuitemindex],true);}}break;case _o.KEY_RIGHT:if(this._menuitemonmouseenter&&!(_g instanceof nexacro.Menu)){var _w=this._menuitemonmouseenter.parent;if(_w._is_popupmenu_mouseover){var _x=_g._popupmenuitem_mouseover(_a,_g,_h);if(_x){_g=_x.pThis;_l=_x.popupexpand;_h=_x.item;}_x=null;}_w._is_popupmenu_mouseover=false;_w=null;}if(_k&&_i==true){if(this._popupitemindex== -1){this._popupitemindex=0;}if(!_l){if(this._is_spin_visible){this._do_scroll(_a,this);}this._menuitemindex++ ;if(this._menuitemindex>_n){this._menuitemindex=0;}this._previousitem=this._menuitemindex;var _v=_j[this._menuitemindex];var _k=this._popupmenuitem_extend(_v);this.on_notify_menuitem_onmouseenter(_v);this._item_focus(_v,true);if(!_k){this._menuitemonmouseenter=_v;this._item_focus(_v,true);}else{var _r=this._popupmenu_find(this);if(_r!=this){var _s=this._item_find(_r);this._popupitemindex=0;this._menuitemonmouseenter=_s[this._popupitemindex];this._item_focus(_s[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}}}else{if(_h[this._popupitemindex]&&_h[this._popupitemindex].enable){var _v=_h[this._popupitemindex];var _y=this._is_menu_click;if(_v._pseudo=="normal"){if(_v!=this._menuitemonmouseenter){_g._closePopup();this._is_menu_click=_y;this._menuitemindex++ ;if(this._menuitemindex>_n){this._menuitemindex=0;}this._previousitem=this._menuitemindex;_v=_j[this._menuitemindex];this.on_notify_menuitem_onmouseenter(_v);this._item_focus(_v,true);if(_v.enable){this._showPopup(_v);}_v=this._item_find(_g);if(this._popupitemindex== -1){this._popupitemindex=0;}_v=_v[this._popupitemindex];this._menuitemonmouseenter=_v;}else{_g._showPopup(_v);}this._item_focus(_v,true);_v=null;_y=null;break;}_g._previousitem=this._popupitemindex;_g._closeflag=true;_g._showPopup(_h[this._popupitemindex]);var _s=this._item_find(_g);this._popupitemindex=0;this._menuitemonmouseenter=_s[this._popupitemindex];this._item_focus(_s[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}else{if(this._is_spin_visible){this._do_scroll(_a,this);}this._menuitemindex++ ;if(this._menuitemindex>_n){this._menuitemindex=0;}this._previousitem=this._menuitemindex;var _v=_j[this._menuitemindex];this.on_notify_menuitem_onmouseenter(_v);this._item_focus(_v,true);var _r=this._popupmenu_find(this);if(_r!=this){var _s=this._item_find(_r);this._popupitemindex=0;this._menuitemonmouseenter=_s[this._popupitemindex];this._item_focus(_s[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}}}}else{if(this._is_spin_visible){this._do_scroll(_a,this);}if(!this._is_menu_click&&!this._selected&&this._menuitemonmouseenter&&this._menuitemonmouseenter._pseudo=="normal"){this._menuitemindex=0;}else if(!_i){this._menuitemindex++ ;}if(this._menuitemindex>_n){this._menuitemindex=0;}this._menuitemonmouseenter=_j[this._menuitemindex];this._clickitemindex=this._menuitemindex;this._previousitem=this._menuitemindex;var _k=this._popupmenuitem_extend(this._menuitemonmouseenter);if(_k){if(_j[this._menuitemindex].enable&&this._clickitemindex>=0&&!this._close_popup){this.on_notify_menuitem_onlbuttondown(_j[this._menuitemindex]);}else{this._item_focus(_j[this._menuitemindex],true);break;}var _r=this._popupmenu_find(this);var _s=this._item_find(_r);this._popupitemindex=0;if(!(_s[this._popupitemindex] instanceof nexacro.PopupMenuItem)){this._item_focus(this._menuitemonmouseenter,true);break;}this._menuitemonmouseenter=_s[this._popupitemindex];this._item_focus(_s[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}else{this._item_focus(_j[this._menuitemindex],true);}}break;case _o.KEY_ENTER:if(this._menuitemonmouseenter&&this._menuitemonmouseenter.enable){if(!(_g instanceof nexacro.Menu)){var _w=this._menuitemonmouseenter.parent;if(_w._is_popupmenu_mouseover){_g=_g._popupmenuitem_mouseover(_a,_g,_h);_h=this._item_find(_g);}_w._is_popupmenu_mouseover=false;_w=null;}if((_k==true&&_j[this._menuitemindex].enable)&&(this._menuitemonmouseenter instanceof nexacro.MenuItem&&!(this._menuitemonmouseenter instanceof nexacro.PopupMenuItem))){this._key_action=false;this.on_notify_menuitem_onlbuttondown(_j[this._menuitemindex]);this._key_action=true;this._previousitem=this._menuitemindex;var _r=this._popupmenu_find(this);if(_r!=this){var _s=this._item_find(_r);this._popupitemindex=0;this._menuitemonmouseenter=_s[this._popupitemindex];this._item_focus(_s[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}else{this._menuitemindex=0;}}else if(_g instanceof nexacro.Menu){if(!this._is_menu_click&&!this._selected&&this._menuitemonmouseenter._pseudo=="normal"){this._menuitemindex=0;this._clickitemindex=0;this._previousitem=this._menuitemindex;this._menuitemonmouseenter=this._items[this._clickitemindex];_k=this._popupmenuitem_extend(this._menuitemonmouseenter);if(_k){this._key_action=false;this.on_notify_menuitem_onlbuttondown(this._menuitemonmouseenter);this._key_action=true;}else{_g.on_notify_menuitem_onclick(this._menuitemonmouseenter);this._is_menu_click=!this._is_menu_click;this._item_focus(this._items[this._clickitemindex],this._is_menu_click);break;}var _r=this._popupmenu_find(this);if(_r!=this){var _s=this._item_find(_r);this._popupitemindex=0;this._menuitemonmouseenter=_s[this._popupitemindex];this._item_focus(_s[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}}else{_g.on_notify_menuitem_onclick(this._menuitemonmouseenter);this._is_menu_click=!this._is_menu_click;this._item_focus(this._items[this._clickitemindex],this._is_menu_click);}}else{var _r=this._menuitemonmouseenter.parent;_r.on_notify_menuitem_onclick(this._menuitemonmouseenter);if(!this._menuitemonmouseenter.itemexpand){this._menuitemonmouseenter=_j[this._menuitemindex];if(this._menuitemonmouseenter){this._menuitemonmouseenter._stat_change("notselect","normal");}}else{var _v=_h[this._popupitemindex];if(_v&&_v.enable){_g._previousitem=this._popupitemindex;_g._closeflag=true;_g._showPopup(_v);var _s=this._item_find(_g);this._popupitemindex=0;this._menuitemonmouseenter=_s[this._popupitemindex];this._item_focus(_s[this._popupitemindex],true);this._popupitempreviousindex=this._popupitemindex;}else{this._menuitemindex=0;}}}}break;case _o.KEY_ESC:if(_i){_g._closePopup();var _h=_g.parent._items[_g.parent._previousitem];this._item_focus(_h,true);this._menuitemindex=_h.index;this._menuitemonmouseenter=_h;}break;default:break;}this._key_action=false;}return nexacro.Component.prototype.on_fire_sys_onkeydown.call(this,_a,_b,_c,_d,_e,_f);};_pMenu._do_defocus=function(_a,_b){var _c=this._getWindow();_c._removeFromCurrentFocusPath(_a,true);if(_b){_c._removeFromCurrentFocusPath(this,false);}};_pMenu._do_scroll=function(_a,_b){var _c=this._items?this._items.length: -1;if(_c>0){var _d=nexacro.Event;switch(_a){case _d.KEY_LEFT:if(this._menuitemindex==0){var _e=this._getViewItemQty(_b,_c);if(this._scrollIndex!=0){this._scrollIndex=0;}else if(this._items[this._menuitemindex]._pseudo!="normal"){this._scrollIndex=_c-_e;}if(this._scrollIndex> -1){this._calcMenuItem();this._updateMenuItemPosition();}_e=null;}else if(this._menuitemindex==this._scrollIndex){this._spinup();}break;case _d.KEY_RIGHT:var _e=this._getViewItemQty(_b,_c);if((this._menuitemindex==(_c-1))||((this._menuitemindex==0)&&(this._scrollIndex!=0))){this._scrollIndex=0;this._calcMenuItem();this._updateMenuItemPosition();}else if(_e==(this._menuitemindex-this._scrollIndex+1)){this._spindown();}_e=null;break;default:break;}}_c=null;};_pMenu._setFocus=function(_a,_b,_c){var _d=this.setFocus(_a);var _e=this._items;var _f=_e.length-1;if(_f>0){if(_b>=2){this._focus_obj=this;this._menuitemindex= -1;}else{if(_b==0||_b==1){this._previousitem=this._menuitemindex=0;}this._focus_obj=_e[this._menuitemindex];if(this._focus_obj&&(!this._menuitemonmouseenter||((this._focus_obj.index!=this._menuitemonmouseenter.index)||(this._menuitemonmouseenter.index==0)))){this._closePopup();}this._menuitemonmouseenter=this._focus_obj;this._key_action=true;this._item_focus(this._focus_obj,true);this._key_action=false;}}else{if(nexacro._enableaccessibility){this._focus_obj=this;}this._previousitem=0;this._menuitemindex= -1;this._do_defocus(this._last_focused,true);this._on_focus(true);}return _d;};_pMenu._on_lbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._skipDragEventAfterMsgBox=false;var _m=this._getForm();_m._skip_comp=true;var _n=this._on_bubble_lbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,true);var _o=this._getFromComponent(this);if(!_o.onlbuttondown||(_o.onlbuttondown&&!_o.onlbuttondown.defaultprevented)){this.on_lbuttondown_default_action(_a,this._focus_refer_comp,_f,_g);_n=this._on_bubble_lbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,false);}_m._skip_comp=false;return _n;};_pMenu._on_activate=function(){if(!this._is_alive){return;}if(!this._isSelected()){this._stat_change("focus","normal");if(this._items&&this._items.length>0){this._menuitemindex=0;this._menuitemonmouseenter=this._items[this._menuitemindex];this._item_focus(this._menuitemonmouseenter,true);}}};_pMenu.on_notify_menuitem_onmouseleave=function(_a,_b){if(_a.selected||(this._popupmenu&&this._popupmenu._isVisible())){this._item_focus(_a,true);}else{this._menuitemindex=0;}this._last_mouseleave_iteminfo.index=_a.index;this._last_mouseleave_iteminfo.bindindex=_a._bindindex;this._last_mouseleave_iteminfo.level=_a.parent.level;if(this._find_lastFocused()==this._getRootComponent(this)){this._on_focus(true);}};_pMenu.on_notify_menuitem_onmouseenter=function(_a,_b){if((_a&&!_a.enable&&!this._key_action)||!(_a instanceof nexacro.MenuItem)){return;}var _c=this._popupmenu;this._menuitemonmouseenter=_a;this._previousitem=_a.index;if(_c){if(_c._is_popup()||this._is_menu_click){var _d=this._is_menu_click;if(this.beforeindex!=_a.index){this.beforeindex=_a.index;}if(!this._menuitemonmouseenter.selected){this._cancelPopup=true;_c.cancelPopup();this._cancelPopup=false;if(_a.enable){this._showPopup(_a);}}this._menuitemindex=_a.index;this._popupitemindex= -1;this._is_menu_click=_d;}}else{if(this._is_menu_click){if(_a.enable){this._showPopup(_a);}}}var _e=this._items;this._menuitemindex=_a.index;this._previousitem=_a.index;if(this._is_menu_click){_e[_a.index].selected=true;this._item_focus(_e[_a.index],true);this._clickitemindex=_a.index;}else{this._item_focus(_e[_a.index],true);}return true;};_pMenu.on_notify_menuitem_onclick=function(_a,_b){if(_a.enable==false||this._getPopupType()=="none"){return;}if(!this._is_alive){return;}if(this.visible&&this._isEnable()&&this.enableevent){this._on_focus(true);if(!_a.itemexpand){this._close_popup=!this._close_popup;var _c=this._getRootComponent(_a);this.on_fire_onitemclick(_c,"onmenuclick",_a.id,_a.userdata,_a.index,_a.parent.level);_c=null;}if(!this._is_menu_click){return;}if(this._items){var _d=this._items[this._menuitemindex];if(_d){if(_d==_a){this._item_focus(_d,true);}else{this._item_focus(_d,false);}}else{this._item_focus(this._items[this._previousitem],false);this._item_focus(this._items[this._clickitemindex],false);}if(nexacro._enableaccessibility){this._focus_obj=_d;}}this._menuitemonmouseenter=_d;this._popupitemindex= -1;this._popupitempreviousindex=0;this._previousitem=0;this._clickitemindex=_a.index;}this._previousitem=_a.index;};_pMenu.on_notify_menuitem_onlbuttondown=function(_a,_b){var _c=this._popupmenu;if(_c){if(_c._is_popup()){if(this.beforeindex!=_a.index){this.beforeindex=_a.index;}this._cancelPopup=true;_c.cancelPopup();this._cancelPopup=false;this._previousitem=this._menuitemindex=_a.index;this._popupitemindex= -1;this._close_popup=true;this._is_menu_click=false;this._clickitemindex= -1;return;}}else{this._menuitemonmouseenter=_a;this._previousitem=this._menuitemindex=_a.index;}this._menuitemindex=_a.index;if(!this._key_action){if(!this._is_menu_click){this._is_menu_click=true;}else{_a.selected=false;this._item_focus(_a,false);this._is_menu_click=false;return;}}if(this._is_menu_click){if(_a.itemexpand){this._showPopup(_a);}else{return;}_a.selected=true;this._item_focus(_a,true);}};_pMenu.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f){if(this.onmenuclick&&this.onmenuclick._has_handlers){var _g=new nexacro.MenuClickEventInfo(_a,_b,_c,_d,_e,_f);this.onmenuclick._fireEvent(this,_g);}};_pMenu.cancelPopup=function(){var _a=this._popupmenu;if(_a){if(_a.isPopup()){_a.cancelPopup();}if(this._is_menu_click){this._is_menu_click=false;}}return true;};_pMenu.isPopup=function(){return this._isPopupVisible();};_pMenu.trackPopup=function(_a,_b,_c,_d){_a=parseInt(_a);this._track_capture=_d=(_d===false||_d=="false")?false:true;var _e=this.on_find_CurrentStyle_popupitemalign();var _f=this._items;if(_f&&!this._is_menu_click){this._is_menu_click=true;this._showPopup(_f[_a],_b,_c,_d);this._menuitemindex=_f[_a].index;return true;}return false;};_pMenu._calcMenuItem=function(){var _a=this._innerdataset;var _b=0;var _c=0;var _d=_a.getRowCount();var _e,_f,_g,_h,_i,_j;var _k=this._buttonRect;if(_k[0]){for(var _o=0;_o<this._scrollIndex;_o++ ){_b-=_k[_o].width;}if(this._is_spin_visible){if(this._scrollIndex==0){_b=this._spin_width;}}}var _l=0;var _m=false;this._item_total_width=0;for(var _o=0;_o<_d;_o++ ){_f=_a.getColumn(_o,this.idcolumn);_g=_a.getColumn(_o,this.levelcolumn);if(_g==0){_e=_a.getColumn(_o,this.captioncolumn);size=this._getTextSize(_e);_j=this.on_find_CurrentStyle_itemborder(this._pseudo);_h=this.on_find_CurrentStyle_itempadding(this._pseudo);_i=Math.ceil(size[0])+(_j?_j._left_width+_j._right_width:0)+(_h?_h.left+_h.right:0);if(this._is_spin_visible&&(_b+_i>this._client_width-this._spin_width)){_b=this._client_width;}var _n={left:0,top:0,right:0,bottom:0,width:0};_n.left=_b;_n.top=0;_n.right=_b+_i;_n.bottom=this._client_height;_n.width=_i;_b+=_i;this._item_total_width+=_i;if(!_m&&this._is_spin_visible&&this._scrollIndex>0&&_b>=0){_m=true;_b+=this._spin_width;}_k[_l]=_n;_l++ ;}}};_pMenu._calcSpinButton=function(){if(!this.spindownbutton&&!this.spinupbutton){return;}var _a=this._buttonRect;var _b=_a.length;if(_b>0&&(this._item_total_width>this._client_width)&&this._spin_width>0){this._is_spin_visible=true;this.spinupbutton.set_visible(true);this.spinupbutton.move(0,0,this._spin_width,this._client_height);var _c=this._spin_width;var _d=this._client_width;this.spindownbutton.set_visible(true);this.spindownbutton.move(_d-_c,0,_c,this._client_height);this._scrollIndex=this._scrollIndex_tmp;var _e=0;for(var _f=this._scrollIndex;_f<_b;_f++ ){if(_a[_f].right>(this._client_width-(this._spin_width*2))){break;}_e+=_a[_f].width;}if(_f==_b){for(var _g=this._scrollIndex-1;_g>=0;_g-- ){_e+=_a[_g].width;if(_e>(this._client_width-(this._spin_width*2))){break;}-- this._scrollIndex;}this._scrollIndex_tmp=this._scrollIndex;}}else{this._scrollIndex=0;this._is_spin_visible=false;this.spinupbutton.set_visible(false);this.spindownbutton.set_visible(false);}};_pMenu._updateMenuItemPosition=function(){var _a=this._buttonRect;var _b=this._items;var _c=_b?_b.length:0;for(var _d=0;_d<_c;_d++ ){_b[_d].move(_a[_d].left,_a[_d].top,_a[_d].width,_a[_d].bottom);}};_pMenu._createMenu=function(_a){var _b=this.getElement();if(_b){this._destroySpinButton();this._createSpinbutton();this._deleteMenu();var _c=this._innerdataset;if(_c&&this.captioncolumn&&this.captioncolumn&&this.idcolumn){var _d=0;var _e=_c.getRowCount();var _f,_g,_h,_i,_j,_k,_l,_m,_n,_o;var _p;var _q=this._buttonRect;this._calcMenuItem();this._calcSpinButton();this._calcMenuItem();var _r=0;for(var _s=0;_s<_e;_s++ ){_h=_c.getColumn(_s,this.hotkeycolumn);_i=_c.getColumn(_s,this.idcolumn);_j=_c.getColumn(_s,this.levelcolumn);if(_h&&(_s==_e-1||_j>=_c.getColumn(_s+1,this.levelcolumn))){this._set_hotkey(_i,_h);}if(_j==0){_f=_c.getColumn(_s,this.captioncolumn);_g=_c.getColumn(_s,this.enablecolumn);_k=_c.getColumn(_s,this.userdatacolumn);var _p=new nexacro.MenuItem("item","absolute",_q[_r].left,0,_q[_r].width,_q[_r].bottom,null,null,this);_p._is_subcontrol=true;_p.userdata=_k;_p._bindindex=_s;_p.index=_d++ ;_p.datarow=_s;_p.id=_i?_i:"";_p.level=_j;if(_f){_p.set_text(_f);}_p._setEventHandler("onlbuttondown",this.on_notify_menuitem_onlbuttondown,this);_p._setEventHandler("onlbuttonup",this.on_notify_menuitem_onclick,this);if(!(nexacro.isTouchInteraction&&nexacro.SupportTouch)){_p._setEventHandler("onmouseenter",this.on_notify_menuitem_onmouseenter,this);_p._setEventHandler("onmouseleave",this.on_notify_menuitem_onmouseleave,this);}if(_s==_c.getRowCount()-1){_p.itemexpand=false;}else{_j=_c.getColumn(_s+1,this.levelcolumn);if(_j<=this.level){_p.itemexpand=false;}}_p.set_enable(_g==false||_g=="false"?false:true);_p.createComponent();this._items.push(_p);_p=null;_r++ ;}}this._focus_obj=this._clickitemindex> -1?this._items[this._clickitemindex]:null;}}};_pMenu._deleteMenu=function(){var _a=this._hot_key_list;var _b=_a.length;var _c=this._getMainForm();for(var _e=0;_e<_b;_e++ ){nexacro._unregisterHotkeyComp(_c,this,_a[_e].key);}this._hot_key_list=[];var _d=this._items;if(_d){var _b=_d.length;for(var _e=0;_e<_b;_e++ ){_d[_e].destroy();_d[_e]=null;}this._items=[];}};_pMenu._createSpinbutton=function(){if(!this.spinupbutton){this.spinupbutton=new nexacro.MenuSpinButtonCtrl("spinupbutton",this.position,0,0,0,0,null,null,this);this.spinupbutton.createComponent();this.spinupbutton.set_visible(false);this.spinupbutton._setEventHandler("onclick",this.on_notify_spinup_onclick,this);this.spinupbutton.on_created();this._is_spin_visible=false;}if(!this.spindownbutton){this.spindownbutton=new nexacro.MenuSpinButtonCtrl("spindownbutton",this.position,0,0,0,0,null,null,this);this.spindownbutton.createComponent();this.spindownbutton.set_visible(false);this.spindownbutton._setEventHandler("onclick",this.on_notify_spindown_onclick,this);this.spindownbutton.on_created();this._is_spin_visible=false;}};_pMenu._destroySpinButton=function(){if(this.spinupbutton){this.spinupbutton.destroy();this.spinupbutton=null;}if(this.spindownbutton){this.spindownbutton.destroy();this.spindownbutton=null;}};_pMenu._getTextSize=function(_a){var _b=this.on_find_CurrentStyle_font(this._pseudo)||nexacro.Component._default_font;var _c=this.on_find_CurrentStyle_letterspace(this._pseudo);return nexacro._getTextSize2(_c,_a,_b,null,null,null,this._rtldirection);};_pMenu._getViewItemQty=function(_a,_b){if(!_a){return;}var _c=0;var _d=0;var _e=this.width-this._spin_width-this._spin_width;for(i=this._scrollIndex;i<_b;i++ ){_d+=this._buttonRect[i].width;_c=i-_a._scrollIndex;if(_d>_e){break;}}_e=null;_d=null;return _c;};_pMenu._loaded_expImage=function(_a,_b,_c){this._expImage_width=_b;this._expImage_height=_c;};_pMenu._loaded_chkImage=function(_a,_b,_c){this._chkImage_width=_b;this._chkImage_height=_c;};_pMenu._load_image=function(_a,_b){var _c=this._control_element;if(_c){var _d=(_a&&_a!="")?_a._value:"";if(_d){_d=nexacro._getURIValue(_d);_d=nexacro._getImageLocation(_d,this._getRefFormBaseUrl());var _e;if(_b){_e=nexacro._getImageSize(_d,this._loaded_expImage,this,undefined,(_a?_a._value:""));if(_e){this._expImage_width=_e.width;this._expImage_height=_e.height;}}else{_e=nexacro._getImageSize(_d,this._loaded_chkImage,this,undefined,(_a?_a._value:""));if(_e){this._chkImage_width=_e.width;this._chkImage_height=_e.height;}}}}};_pMenu._getDlgCode=function(_a,_b,_c,_d){var _e=this._want_arrow;this._want_arrow=nexacro._enableaccessibility;return {want_tab:false,want_return:true,want_escape:false,want_chars:false,want_arrows:_e};};_pMenu._showPopup=function(_a,_b,_c,_d){if(this._getPopupType()=="none"){return;}if(this._innerdataset&&this.levelcolumn&&this.captioncolumn&&this.idcolumn&&_a.itemexpand==true){var _e=this._popupmenu;this._track_capture=_d=(_d===false||_d=="false")?false:true;if(_e==null){_e=this._popupmenu=new nexacro.PopupMenuCtrl("popupmenu","absolute",0,0,0,0,null,null,this);_e._is_subcontrol=true;_e._scrollIndex=0;_e._scrollIndex_tmp=0;_e.level=1;_e.index=_a.index;_e.datarow=_a.datarow+1;_e.selfpopup=false;_e.setInnerDataset(this._innerdataset);_e.set_captioncolumn(this.captioncolumn);_e.set_iconcolumn(this.iconcolumn);_e.set_checkboxcolumn(this.checkboxcolumn);_e.set_hotkeycolumn(this.hotkeycolumn);_e.set_idcolumn(this.idcolumn);_e.set_levelcolumn(this.levelcolumn);_e.set_userdatacolumn(this.userdatacolumn);_e.set_enablecolumn(this.enablecolumn);_e.style.set_checkboximage(this.currentstyle.checkboximage);_e.style.set_expandimage(this.currentstyle.expandimage);_e._track_capture=_d;_e.createComponent();_e._setRtlDirection(this._rtldirection);_e._setEventHandler("oncloseup",this.on_notify_onclosepopup,this);_e.style.popuptype=this.style.popuptype;_e._trackPopup(_a,"vertical",_b,_c);}else{_e.datarow=_a.datarow+1;_e.style.popuptype=this.style.popuptype;_e._track_capture=_d;_e._trackPopup(_a,"vertical",_b,_c);}if(_e._is_popup()){var _f=this._getWindow();if(_f){if(this._track_capture){_f._setCaptureLock(this,true,false);}else{_f._releaseCaptureLock();}}}this._close_popup=false;}};_pMenu._isPopupVisible=function(){var _a=this._popupmenu;return _a?_a._is_popup():false;};_pMenu._callbackFromDataset=function(_a,_b){this._createMenu();};_pMenu._closePopup=function(){var _a=this._popupmenu;if(this._is_menu_click){this._is_menu_click=false;}if(_a){_a.cancelPopup();var _b=this._getWindow();if(_b&&this._track_capture){_b._releaseCaptureLock(this);}}var _c=this._items;if(_c&&_c[this._clickitemindex]){_c[this._clickitemindex].selected=false;this._item_focus(_c[this._clickitemindex],false);}this._menuitemindex=0;this._popupitemindex= -1;if(!this._cancelPopup&&this._cancelPopup!==undefined){if(_c&&_c[this._clickitemindex]){_c[this._clickitemindex].selected=false;}this._on_focus(true);}else if(this._cancelPopup===undefined){this._is_menu_click=false;}this._menuitemonmouseenter=_c[this._menuitemindex];};_pMenu._process_mousemove=function(_a,_b){if(!(_a instanceof nexacro.Menu)&&!(_a instanceof nexacro.PopupMenu)&&!(_a instanceof nexacro.PopupMenuItem)){this.on_notify_menuitem_onmouseenter(_a,_b);}};_pMenu._killfocus_item=function(){var _a=this._items;if(_a){this._is_menu_click=false;this._clickitemindex= -1;if(_a[this._menuitemindex]){_a[this._menuitemindex]._killfocus_item();}this._menuitemindex=0;}};_pMenu._on_killfocus=function(_a,_b){if(!this._is_alive||application._is_on_alert){return;}if(!(this&&this.parent&&(this.parent instanceof nexacro.PopupMenu||this.parent instanceof nexacro.PopupMenuCtrl))){var _c=this._cancelPopup;this._cancelPopup=true;this._closePopup();this._cancelPopup=_c;}var _d=this._items;if(_d){this._item_focus(_d[this._previousitem],false);this._item_focus(_d[this._clickitemindex],false);if(_d[this._clickitemindex]){_d[this._clickitemindex]._stat_change("notselect","normal");}}_d=null;this._clickitemindex= -1;};_pMenu.on_notify_onclosepopup=function(_a,_b){var _c=this._getWindow();if(_c&&this._track_capture){_c._releaseCaptureLock(this);}this._closePopup();};_pMenu.on_notify_spinup_onclick=function(_a,_b){this._closePopup();this._spinup();};_pMenu.on_notify_spindown_onclick=function(_a,_b){this._closePopup();this._spindown();};_pMenu._spinup=function(){if(this._scrollIndex>0){this._scrollIndex-- ;this._scrollIndex_tmp=this._scrollIndex;this._calcMenuItem();this._updateMenuItemPosition();}};_pMenu._spindown=function(){var _a=this._buttonRect;var _b=_a?_a.length:0;if(_b==0){return;}if(_a[_b-1].right>this._client_width){this._scrollIndex++ ;this._scrollIndex_tmp=this._scrollIndex;this._calcMenuItem();this._updateMenuItemPosition();}};_pMenu._processHotkey=function(_a,_b,_c,_d,_e){var _f=this.on_find_CurrentStyle_autohotkey(this.pseudo);if(_f&&nexacro._toBoolean(_f._value)){var _g=this._hot_key_list;var _h=_g.length;var _i=null;var _j=null;for(var _k=0;_k<_h;_k++ ){_i=_g[_k].key;if(_i._keycode==_a){_j=_i._modifierkey;if(_b==((_j&0x02)==0x02)&&_c==((_j&0x01)==0x01)&&_d==((_j&0x04)==0x04)){this.on_fire_onitemclick(this,"onmenuclick",_g[_k].id,"",_g[_k].index,_g.level);return;}}}}nexacro.Component.prototype._processHotkey.call(this,_a,_b,_c,_d,_e);};_pMenu._set_hotkey=function(_a,_b){var _c=this.hotkey;var _d=this._hotkey;this._hotkey=null;this.set_hotkey(_b);var _e=this._hotkey;this.hotkey=_c?_c:null;this._hotkey=_d?_d:null;var _f={id:_a,key:_e};this._hot_key_list.push(_f);};_pMenu._item_focus=function(_a,_b){if(_a){if(nexacro._enableaccessibility){if(_b){if(_a instanceof nexacro.PopupMenuItem){_a._on_focus(false);}else{_a._on_focus(true);}}else{var _c=this._getWindow();if(_c){_c._removeFromCurrentFocusPath(_a,true);}}}if(_a.on_apply_mouseover){var _d=_a.parent?_a.parent._items:null;var _e=_d?_d.length: -1;for(i=0;i<_e;i++ ){_d[i]._control_pseudo="";_d[i].selected=false;_d[i].on_apply_custom_pseudo("normal");_d[i].on_apply_mouseover(false);}_d=null;_a.selected=this._is_menu_click?_b:_a.selected;_a.on_apply_mouseover(_b);}}};_pMenu._item_find=function(_a){if(_a._popupmenu==null||_a._popupmenu.visible==false){return _a._items;}return _a._popupmenu._items;};_pMenu._popupmenu_visible=function(_a){if(_a._popupmenu==null||_a._popupmenu.visible==false){return false;}return true;};_pMenu._popupmenu_find=function(_a){var _b=_a;while(_b){if(_b._popupmenu===null||_b._popupmenu.visible==false){break;}var _b=_b._popupmenu;}return _b;};_pMenu._popupmenuitem_extend=function(_a){return _a.itemexpand;};_pMenu._popupmenuitem_find=function(_a){var _b=_a._overedobj;while(_b){if(_b._overedobj===null){break;}var _b=_b._overedobj;}return _b;};_pMenu._find_lastFocused=function(){var _a=this._getForm();if(!_a){return null;}var _b=_a._last_focused;while(_b&&_b._is_form){var _c=_b._getLastFocused();if(!_c){break;}_b=_c;}return _b;};delete _pMenu;nexacro.MenuSpinButtonCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.ImageButtonCtrl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};var _pMenuSpinButtonCtrl=nexacro.MenuSpinButtonCtrl.prototype=nexacro._createPrototype(nexacro.ImageButtonCtrl,nexacro.MenuSpinButtonCtrl);_pMenuSpinButtonCtrl._processHotkey=function(_a,_b,_c,_d){var _e=this.parent;if(_e){return _e._processHotkey(_a,_b,_c,_d);}};delete _pMenuSpinButtonCtrl;_pMenuSpinButtonCtrl=null;nexacro.MenuCtrl=function(_a,_b,_c,_d,_e,_f){nexacro.Menu.call(this,_a,_b,_c,_d,_e,_f);this._is_subcontrol=true;};var _pMenuCtrl=nexacro.MenuCtrl.prototype=nexacro._createPrototype(nexacro.Menu,nexacro.MenuCtrl);_pMenuCtrl._type_name="MenuControl";nexacro._setForControlStyleFinder(_pMenuCtrl);delete _pMenuCtrl;};