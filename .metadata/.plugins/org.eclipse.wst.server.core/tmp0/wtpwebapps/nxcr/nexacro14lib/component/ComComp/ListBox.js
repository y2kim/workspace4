if(!nexacro.ListBox){nexacro.ListBoxClickEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro.ClickEventInfo.call(this,_a,_b||"onlistboxclick",_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this.fromobject=_n;this.fromreferenceobject=_o;this.index=_c;};var _pListBoxClickEventInfo=nexacro._createPrototype(nexacro.ClickEventInfo,nexacro.ListBoxClickEventInfo);nexacro.ListBoxClickEventInfo.prototype=_pListBoxClickEventInfo;_pListBoxClickEventInfo._type_name="ListBoxClickEventInfo";delete _pListBoxClickEventInfo;_pListBoxClickEventInfo=null;nexacro.ListBox_Style=function(_a){nexacro.Style.call(this);if(_a){this._target=_a;}this.itemheight=null;this.itembackground=null;this.itemgradation=null;this.itemborder=null;this.itembordertype=null;this.itempadding=null;this.itemaccessibility=null;};var _pListBoxStyle=nexacro._createPrototype(nexacro.Style,nexacro.ListBox_Style);nexacro.ListBox_Style.prototype=_pListBoxStyle;eval(nexacro._createValueAttributeEvalStr("_pListBoxStyle","itemheight"));eval(nexacro._createBackgroundAttributeEvalStr("_pListBoxStyle","itembackground"));eval(nexacro._createGradationAttributeEvalStr("_pListBoxStyle","itemgradation"));eval(nexacro._createBorderAttributeEvalStr("_pListBoxStyle","itemborder"));eval(nexacro._createBordertypeAttributeEvalStr("_pListBoxStyle","itembordertype"));eval(nexacro._createPaddingAttributeEvalStr("_pListBoxStyle","itempadding"));eval(nexacro._createAccessibilityAttributeEvalStr("_pListBoxStyle","itemaccessibility"));_pListBoxStyle.__custom_emptyObject=function(){this.itemheight=null;this.itembackground=null;this.itemgradation=null;this.itemborder=null;this.itembordertype=null;this.itempadding=null;this.itemaccessibility=null;};_pListBoxStyle.__get_custom_style_value=function(){var _a="";var _b=this.itemheight;if(_b&&_b._is_empty){_a+="itemheight:"+_b._value+"; ";}_b=this.itembackground;if(_b&&_b._is_empty){_a+="itembackground:"+_b._value+"; ";}_b=this.itemgradation;if(_b&&_b._is_empty){_a+="itemgradation:"+_b._value+"; ";}_b=this.itemborder;if(_b&&_b._is_empty){_a+="itemborder:"+_b._value+"; ";}_b=this.itembordertype;if(_b&&_b._is_empty){_a+="itembordertype:"+_b._value+"; ";}_b=this.itempadding;if(_b&&_b._is_empty){_a+="itempadding:"+_b._value+"; ";}_b=this.itemaccessibility;if(_b&&_b._is_empty){_a+="itemaccessibility:"+_b._value+"; ";}_b=null;return _a;};nexacro.ListBox_CurrentStyle=function(){nexacro.CurrentStyle.call(this);this.itemheight=null;this.itembackground=null;this.itemgradation=null;this.itemborder=null;this.itembordertype=null;this.itempadding=null;this.itemaccessibility=null;};var _pListBoxCurrentStyle=nexacro._createPrototype(nexacro.CurrentStyle,nexacro.ListBox_CurrentStyle);nexacro.ListBox_CurrentStyle.prototype=_pListBoxCurrentStyle;_pListBoxCurrentStyle.__custom_emptyObject=_pListBoxStyle.__custom_emptyObject;_pListBoxCurrentStyle.__get_custom_style_value=_pListBoxStyle.__get_custom_style_value;delete _pListBoxStyle;_pListBoxStyle=null;delete _pListBoxCurrentStyle;_pListBoxCurrentStyle=null;nexacro.ListBox=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._selectinfo={index: -1,text:"",value:undefined,obj:null};this.scrollbars="autoboth";this.isAboveSelected=false;this.codecolumn="";this.datacolumn="";this.multiselect=false;this.innerdataset=null;this.readonly=false;this.index= -1;this.text="";this.value=undefined;this.dragscrolltype="all";this.selectscrollmode="default";this._scrollbars=3;this._is_scrollable=true;this._temp_elem=null;this._innerdataset=null;this._codecolumn=null;this._datacolumn=null;this._total_page_rowcnt=0;this._total_page_cnt=0;this._contents_maxwidth=null;this._contents_maxheight=null;this._page_rowcount=0;this._page_rowcount_min=0;this._shiftKey=false;this._ctrlKey=false;this._altKey=false;this._vscrollpos=0;this._prevpos=0;this._refresh_rows=[];this._vscrollTask=null;this._userDsChange=true;this._exprcache={};this._overeditemindex= -1;this._lbtnDownIdx= -1;this._cur_end= -1;this._is_redraw=false;this._want_tab=true;this._want_arrow=false;this._accessibility_index= -1;this._accessibility_role="listbox";this._shift_select_base_index=null;this._is_first_focus=false;this._scroll_vpos_queue=[];this._apply_ds_val=false;this._is_redrawing=false;this._select_multi={"items":[],"map":{},"keys":[],"length":0,"lastselected":null};this._selectinfo_list=[];this._keep_scrolling=false;this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onitemclick":1,"onitemdblclick":1,"canitemchange":1,"onitemchanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ontap":1,"ondbltap":1,"onpinchstart":1,"onpinch":1,"onpinchend":1,"onflingstart":1,"onfling":1,"onflingend":1,"onlongpress":1,"onslidestart":1,"onslide":1,"onslideend":1,"onitemmouseenter":1,"onvscroll":1,"onhscroll":1,"onmousedown":1,"onmouseup":1};this._setEventHandler("onkeydown",this.on_notify_listbox_onkeydown,this);};var _pListBox=nexacro._createPrototype(nexacro.Component,nexacro.ListBox);nexacro.ListBox.prototype=_pListBox;_pListBox._type_name="ListBox";_pListBox._default_align=nexacro.Component._default_left_align;_pListBox._default_Item_height=24;_pListBox._setVScrollDefaultAction=function(_a,_b){if(_b>=0){_b=this.currentstyle.itemheight;}else{_b= -(this.currentstyle.itemheight);}_a.set_pos(_a.pos-_b);};_pListBox.on_apply_custom_class=function(){var _a=this._get_contents_rows();if(_a){var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].on_apply_prop_class();}_a=null;}};_pListBox.on_create_custom_style=function(){return new nexacro.ListBox_Style(this);};_pListBox.on_create_custom_currentStyle=function(){return new nexacro.ListBox_CurrentStyle();};_pListBox.on_apply_custom_pseudo=function(_a){if(_a){this._pseudo=_a;}else if(this._pseudo){_a=this._pseudo;}var _b=this.currentstyle;var _c=this.on_find_CurrentStyle_itemheight(_a);if(_c!=_b.itemheight){_b.itemheight=_c;this.on_apply_style_itemheight(_c);}_c=this.on_find_CurrentStyle_itembackground(_a);if(_c!=_b.itembackground){_b.itembackground=_c;this.on_apply_style_itembackground(_c);}_c=this.on_find_CurrentStyle_itemgradation(_a);if(_c!=_b.itemgradation){_b.itemgradation=_c;this.on_apply_style_itemgradation(_c);}_c=this.on_find_CurrentStyle_itemborder(_a);if(_c!=_b.itemborder){_b.itemborder=_c;this.on_apply_style_itemborder(_c);}_c=this.on_find_CurrentStyle_itembordertype(_a);if(_c!=_b.itembordertype){_b.itembordertype=_c;this.on_apply_style_itembordertype(_c);}_c=this.on_find_CurrentStyle_itempadding(_a);if(_c!=_b.itempadding){_b.itempadding=_c;this.on_apply_style_itempadding(_c);}_c=this.on_find_CurrentStyle_font(_a);if(_c!=_b.font){_b.font=_c;this.on_apply_style_font(_c);}_c=this.on_find_CurrentStyle_letterspace(_a);if(_c!=_b.letterspace){_b.letterspace=_c;this.on_apply_style_letterspace(_c);}_c=this.on_find_CurrentStyle_color(_a);if(_c!=_b.color){_b.color=_c;this.on_apply_style_color(_c);}_c=this.on_find_CurrentStyle_align(_a);if(_c!=_b.align){_b.align=_c;this.on_apply_style_align(_c);}_c=this.on_find_CurrentStyle_itemaccessibility(_a);if(_c!=_b.itemaccessibility){_b.itemaccessibility=_c;this.on_apply_style_itemaccessibility(_c);}_c=this.on_find_CurrentStyle_rtlimagemirroring(_a);if(_c!=_b.rtlimagemirroring){_b.rtlimagemirroring=_c;this.on_apply_style_rtlimagemirroring(_c);}_c=null;};_pListBox.on_apply_style_color=function(_a){var _b=this._get_contents_rows();if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].style.set_color(_a._value);}_b=null;}};_pListBox.on_apply_style_font=function(_a){var _b=this._get_contents_rows();if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_a){_a=this._search_style_obj(_a,"font",_d);_b[_d].style.set_font(_a._value);}}_b=null;}};_pListBox.on_apply_style_align=function(_a){var _b=this._get_contents_rows();if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].style.set_align(_a._value);}_b=null;}};_pListBox.on_apply_style_cursor=function(_a){nexacro.Component.prototype.on_apply_style_cursor.call(this,_a);var _b=this._get_contents_rows();if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].style.set_cursor(_a._value);}_b=null;}};_pListBox.on_apply_style_itembackground=function(_a){var _b=this._get_contents_rows();var _c=_b.length;var _d=_a;for(var _e=0;_e<_c;_e++ ){_d=this._search_style_obj(_a,"background",_e);if(_d){_b[_e].style.set_background(_d._value);}}};_pListBox.on_apply_style_itemheight=function(_a){var _b=this.vscrollbar;if(_b){_b._setScrollLayout(_b.min,_b.max,_b.page,this._get_rowheight(),_b.pos);}if(this._is_redraw==false){this._recreate_data(true);this._is_redraw=true;}};_pListBox.on_apply_style_itemaccessibility=function(_a){var _b=this._get_contents_rows();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_update_style_accessibility();}_b=null;};_pListBox.on_apply_style_itemgradation=function(_a){if(_a==null){return false;}this.on_apply_style_itembackground(this.currentstyle.itembackground);var _b=this._get_contents_rows();var _c=_b.length;var _d=_a;for(var _e=0;_e<_c;_e++ ){_d=this._search_style_obj(_a,"gradation",_e);if(_d){_b[_e].style.set_gradation(_d._value);}}_b=null;};_pListBox.on_apply_style_itemborder=function(_a){var _b=this._get_contents_rows();var _c=_b.length;var _d=_a;for(var _e=0;_e<_c;_e++ ){_d=this._search_style_obj(_a,"border",_e);if(_d){_b[_e].style.set_border(_d._value);}}_b=null;};_pListBox.on_apply_style_itembordertype=function(_a){var _b=this._get_contents_rows();var _c=_b.length;var _d=_a;for(var _e=0;_e<_c;_e++ ){_d=this._search_style_obj(_a,"bordertype",_e);if(_d){_b[_e].on_apply_style_bordertype(_d);}}_b=null;};_pListBox.on_apply_style_itempadding=function(_a){var _b=this._get_contents_rows();var _c=_b.length;var _d=_a;for(var _e=0;_e<_c;_e++ ){_d=this._search_style_obj(_a,"padding",_e);if(_d){_b[_e].style.set_padding(_d._value);}}_b=null;};_pListBox.on_apply_style_letterspace=function(_a){var _b=this._get_contents_rows();if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_a){_a=this._search_style_obj(_a,"letterspace",_d);_b[_d].on_apply_style_letterspace(_a);}}_b=null;}};_pListBox.on_apply_style_rtlimagemirroring=function(_a){return;};_pListBox.on_apply_prop_rtldirection=function(){nexacro.Component.prototype.on_apply_prop_rtldirection.call(this);var _a=this._get_contents_rows();var _b=_a.length;var _c=this._rtldirection;for(var _d=0,_e=_b.length;_d<_e;_d++ ){_a[_d]._setRtlDirection(_c);}if(this._is_redraw==false){this._recreate_data(true);this._is_redraw=true;}};_pListBox.on_find_CurrentStyle_itemheight=function(_a){var _b=this._find_pseudo_obj("itemheight",_a);if(!_b){_b=nexacro._getCachedStyleObj("itemheight",nexacro._default_Item_height);}else{var _c=_b._value;if(_c<0||_c===null||_c===""||_c===undefined){var _d=this.on_find_CurrentStyle_letterspace(this._pseudo);var _e=nexacro._getTextSize2(_d,"1",this.currentstyle.font);_b=nexacro._getCachedStyleObj("itemheight",_e[1]);}}return _b;};_pListBox.on_find_CurrentStyle_border=function(_a){return this._find_pseudo_obj("border",_a,"border");};_pListBox.on_find_CurrentStyle_padding=function(_a){return this._find_pseudo_obj("padding",_a,"padding");};_pListBox.on_find_CurrentStyle_itembackground=function(_a){return this._find_pseudo_obj("itembackground",_a,"background");};_pListBox.on_find_CurrentStyle_itemgradation=function(_a){return this._find_pseudo_obj("itemgradation",_a,"gradation");};_pListBox.on_find_CurrentStyle_itemborder=function(_a){return this._find_pseudo_obj("itemborder",_a,"border");};_pListBox.on_find_CurrentStyle_itembordertype=function(_a){return this._find_pseudo_obj("itembordertype",_a,"bordertype");};_pListBox.on_find_CurrentStyle_itempadding=function(_a){return this._find_pseudo_obj("itempadding",_a,"padding");};_pListBox.on_find_CurrentStyle_itemaccessibility=function(_a){return this._find_pseudo_obj("itemaccessibility",_a,"accessibility")||nexacro.Component._default_accessibility;};_pListBox.on_update_style_itemheight=function(){this._is_redraw=false;this.on_apply_style_itemheight(this.currentstyle.itemheight=this.on_find_CurrentStyle_itemheight(this._pseudo));};_pListBox.on_update_style_itembackground=function(){this.on_apply_style_itembackground(this.currentstyle.itembackground=this.on_find_CurrentStyle_itembackground(this._pseudo));};_pListBox.on_update_style_itemgradation=function(){this.on_apply_style_itemgradation(this.currentstyle.itemgradation=this.on_find_CurrentStyle_itemgradation(this._pseudo));};_pListBox.on_update_style_itemborder=function(){this.on_apply_style_itemborder(this.currentstyle.itemborder=this.on_find_CurrentStyle_itemborder(this._pseudo));};_pListBox.on_update_style_itembordertype=function(){this.on_apply_style_itembordertype(this.currentstyle.itembordertype=this.on_find_CurrentStyle_itembordertype(this._pseudo));};_pListBox.on_update_style_itempadding=function(){this.on_apply_style_itempadding(this.currentstyle.itempadding=this.on_find_CurrentStyle_itempadding(this._pseudo));};_pListBox.on_update_style_itemaccessibility=function(){this.on_apply_style_itemaccessibility(this.currentstyle.itemaccessibility=this.on_find_CurrentStyle_itemaccessibility(this._pseudo));};_pListBox.on_create_contents=function(){var _a=this.getElement();_a.setElementSize(this._client_width,this._client_height);this._temp_elem=new nexacro.Element(_a._client_element);this._temp_elem.setElementSize(1,1);this._temp_elem.setElementVisible(false);};_pListBox.on_created_contents=function(){this._temp_elem.create();if(this.getElement()){this.on_apply_innerdataset();}var _a=this._refresh_rows,_b;for(var _c=0,_d=_a.length;_c<_d;_c++ ){_b=_a[_c];if(_b){_b.on_created(this._window);_b._real_visible=false;}}this.on_apply_style_itemheight(this.currentstyle.itemheight);this.on_apply_style_letterspace(this.currentstyle.letterspace);this._refresh_rows=[];if(nexacro._enableaccessibility){this._want_arrow=true;this._refreshAccessibilityValue();}{this._recreate_data();this._is_redraw=true;}this._selectinfo.obj=null;this._selectinfo.index=this.index;this._selectinfo.text=this.text;this._selectinfo.value=this.value;this.on_apply_prop_rtldirection();};_pListBox.on_destroy_contents=function(){this._clear_contents();if(this._vscrollTask){this._vscrollTask.destroy();this._vscrollTask=null;}if(this._temp_elem){this._temp_elem.destroy();this._temp_elem=null;}if(this._innerdataset){this._innerdataset._removeEventHandler("onload",this._callback_onload,this);this._innerdataset._removeEventHandler("onvaluechanged",this._callback_onvaluechanged,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._callback_onrowsetchanged,this);this._innerdataset=null;this.innerdataset=null;}this._removeEventHandler("onkeydown",this.on_notify_listbox_onkeydown,this);this._selectinfo=null;this._select_multi=null;this._refresh_rows.length=0;this._exprcache=null;this._selectinfo_list.length=0;this._scroll_vpos_queue=null;};_pListBox.on_change_containerRect=function(_a,_b){if(this._is_created){this._recreate_data(true);}};_pListBox._callback_onload=function(_a,_b){this._exprcache={};switch(_b.reason){case 0:this._recreate_data();this._is_redraw=true;if(this.index> -1){if(this._changeIndex(this.index)){this.on_apply_index();}}else if(this.value!=""){var _c=this._innerdataset.findRow(this.codecolumn,this.value);if(this._changeIndex(_c)){this.on_apply_index();}}break;}};_pListBox._callback_onvaluechanged=function(_a,_b){if(this._is_created&&this._userDsChange){this._recreate_data();this._is_redraw=true;}};_pListBox._callback_onrowsetchanged=function(_a,_b){if(this._is_created&&this._userDsChange){this._recreate_data();this._is_redraw=true;}};_pListBox.on_init_bindSource=function(_a,_b,_c){if(this._is_redraw==false){this._recreate_data();this._is_redraw=true;}if(_b=="value"){this.set_value(undefined);return true;}return false;};_pListBox.on_change_bindSource=function(_a,_b,_c,_d,_e){var _f;if(this._is_redraw==false){this._recreate_data();this._is_redraw=true;}if(_a=="value"){_f=_b.getColumn(_c,_d);this._apply_ds_val=true;this.set_value(_f);this._apply_ds_val=false;return true;}return false;};_pListBox.on_getBindableProperties=function(){return "value";};_pListBox.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);var _b=_a;if(_a==undefined){_b=this.enable;}var _c=this._get_contents_rows();if(_c&&_c.length>0){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e]._setEnable(_b);}_c=null;}};_pListBox._getDlgCode=function(_a,_b,_c,_d){var _e,_f;if(_a&&(_a==nexacro.Event.KEY_TAB)){_e=false;}else{_f=this._getPreCalculateWantArrow(_a);}if(this._is_first_focus){this._is_first_focus=false;}this._want_arrow=_f;this._want_tab=true;if(_c){if(_a==nexacro.Event.KEY_LEFT){var _g=this.hscrollbar;if(_g){_f=_g.pos>_g.min?true:false;}else{_f=false;}}else if(_a==nexacro.Event.KEY_UP){var _h=this.vscrollbar;if(_h){_f=_h.pos>_h.min?true:false;}else{_f=false;}}else if(_a==nexacro.Event.KEY_RIGHT){var _g=this.hscrollbar;if(_g){_f=_g.pos<_g.max?true:false;}else{_f=false;}}else if(_a==nexacro.Event.KEY_DOWN){var _h=this.vscrollbar;if(_h){_f=_h.pos<_h.max?true:false;}else{_f=false;}}}return {want_tab:_e,want_return:false,want_escape:false,want_chars:false,want_arrows:_f};};_pListBox._setFocus=function(_a,_b,_c){this._focus_direction=_b;var _d=this.setFocus(_a,_c);this._focus_direction= -1;return _d;};_pListBox._on_focus=function(_a,_b,_c,_d,_e,_f){var _g=false;var _h=this._focus_direction;if(_b=="tabkey"){_h=0;}else if(_b=="shifttabkey"){_h=1;}else if(_b=="downkey"){_h=2;}else if(_b=="upkey"){_h=3;}if(_a==false){this._focus_direction= -1;}if(_h>=0){_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(_a==false){this._accessibility_index= -1;if(this._last_focused){this._do_defocus(this._last_focused,false);}if(_h<2){var _i=this._get_contents_rows();if(_i.length>0){var _j;if(this.index> -1){this._accessibility_index=this.index;}else{if(_h==0){this._accessibility_index=0;}else{this._accessibility_index=_i.length-1;}}this._is_first_focus=true;_j=_i[this._accessibility_index];if(!_j){return;}_j._on_focus(true);this._shift_select_base_index=this._accessibility_index;_j=null;}_i=null;}else if(_h==2){if(!this._isAccessibilityEnable()){var _j;var _i=this._get_contents_rows();this._is_first_focus=true;if(this.index> -1){_j=_i[this._accessibility_index=this.index];if(!_j){return;}_j._on_focus(true);_j.set_selected(true);this._shift_select_base_index=this.index;}else if(_i.length>0){if(this.multiselect){this._do_select(this._getNextAccessibilityOrderIndex(1));}else if(this._changeIndex(this._getNextAccessibilityOrderIndex(1))){this.on_apply_index();}}_i=null;_j=null;}}else if(_h==3){this._is_first_focus=true;var _i=this._get_contents_rows();var _j;if(this.index== -1){if(_i.length>0){if(this.multiselect){if(this.index> -1){this._accessibility_index=this.index;}else{this._accessibility_index=_i.length;}var _k=this._getNextAccessibilityOrderIndex( -1);this._do_select(_k);}else{if(this.index> -1){this._accessibility_index=this.index;}else{this._accessibility_index=_i.length;}var _k=this._getNextAccessibilityOrderIndex( -1);_j=_i[_k];if(this._changeIndex(_k)){this.on_apply_index();}}}}else{_j=_i[this._accessibility_index=this.index];if(nexacro._enableaccessibility&&this.multiselect){this._do_select(this._accessibility_index);}else{_j.set_selected(true);}}_i=null;_j=null;}}}else{_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(this._last_focused){this._do_defocus(this._last_focused,false);}else if(this._select_multi.lastselected===undefined&&this._accessibility_index> -1){var _i=this._get_contents_rows();_i[this._accessibility_index]._stat_change("notfocus","normal");}}return _g;};_pListBox.on_apply_custom_setfocus=function(_a){if(nexacro.Browser!="Safari"||(nexacro.Browser=="Safari"&&window&&window==window.parent)){nexacro.Component.prototype.on_apply_custom_setfocus.call(this,_a);return;}var _b=this._control_element;if(_b){var _c=((_a=="lbutton")?false:nexacro._enableaccessibility);if(!(nexacro.Browser=="Safari"&&_a=="lbuttondown")){_b.setElementFocus(_c);}}};_pListBox.on_get_style_accessibility_label=function(){var _a="";if(!this._is_first_focus){_a=this.text?this.text:this.value;}return _a;};_pListBox._setAccessibilityNotifyEvent=function(_a){var _b=this._get_contents_rows();if(_b&&_b.length>0){var _c=null;if(this._overeditemindex<0||this._overeditemindex>=_b.length){if(_a==undefined){_a=1;}if(_a>0){this._overeditemindex=0;}else{this._overeditemindex=_b.length-1;}}_c=this._getItemByRealIdx(_b,this._overeditemindex).obj;if(_c){return _c._setAccessibilityNotifyEvent();}}else{return nexacro.Component.prototype._setAccessibilityNotifyEvent.call(this,_a);}};_pListBox._setAccessibilityInfoByHover=function(_a){if(_a){this._overeditemindex=_a.index;return _a._setAccessibilityInfoByHover();}else{return nexacro.Component.prototype._setAccessibilityNotifyEvent.call(this);}};_pListBox._clearAccessibilityInfoByHover=function(){this._overeditemindex= -1;return;};_pListBox._getAccessibilityRole=function(_a){var _b=nexacro.Component.prototype._getAccessibilityRole.call(this,_a);if(nexacro._accessibilitytype==4){var _c=this.getElement();var _d=this._get_contents_rows();if(_c&&_d.length<=0){_b="static";}}return _b;};_pListBox.setInnerDataset=function(_a){if(!_a){this._innerdataset=null;this.innerdataset="";this.on_apply_innerdataset();}else if(_a instanceof nexacro.Dataset||(typeof _a=="object"&&_a._type_name=="Dataset")){this._innerdataset=_a;this.innerdataset=_a.id;this._keep_scrolling=(this.innerdataset!=_a.id)?false:true;this.on_apply_innerdataset();}this._onResetScrollBar();};_pListBox._setInnerDatasetStr=function(_a){if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}};_pListBox.getInnerDataset=function(){return this._innerdataset;};_pListBox.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(_a!=this.innerdataset){if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}this.on_apply_innerdataset();}else if(this.innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this.innerdataset);this.on_apply_innerdataset();}this._onResetScrollBar();};_pListBox.on_apply_innerdataset=function(){var _a=this._innerdataset;if(_a){if(this.datacolumn||this.codecolumn){if(!this.datacolumn){this._datacolumn=this.codecolumn;}if(!this.codecolumn){this._codecolumn=this.datacolumn;}_a._setEventHandler("onload",this._callback_onload,this);_a._setEventHandler("onvaluechanged",this._callback_onvaluechanged,this);_a._setEventHandler("onrowsetchanged",this._callback_onrowsetchanged,this);this._recreate_data(this._keep_scrolling);this._is_redraw=true;}}};_pListBox.set_visible=function(_a){var _b=this.vscrollbar;var _c=nexacro.Browser=="Chrome"&&_a&&this.visible!=_a&&_b;nexacro.Component.prototype.set_visible.call(this,_a);if(_c){var _d=_b.pos;_b.set_pos(_d-1);_b.set_pos(_d);}};_pListBox.set_codecolumn=function(_a){if(_a&&_a!=this.codecolumn){this.codecolumn=_a;this.on_apply_innerdataset();}};_pListBox.set_datacolumn=function(_a){if(_a&&_a!=this.datacolumn){this.datacolumn=_a;this.on_apply_innerdataset();}};_pListBox.set_multiselect=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.multiselect){this.multiselect=_a;this.on_apply_multiselect();}};_pListBox.on_apply_multiselect=function(){var _a= -1;if(!this.multiselect){this._select_clear();}this._shiftKey=false;this._ctrlKey=false;if(!this.multiselect){_a=this.index;this._do_select(_a);}};_pListBox.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.readonly){this.readonly=_a;this.on_apply_readonly();this._setAccessibilityFlagReadOnly(_a);}};_pListBox.on_apply_readonly=function(){var _a=this.readonly;if(_a){this._stat_change("readonly",this._pseudo);}else{this._stat_change("writable",this._pseudo=="readonly"?"normal":this._pseudo);}};_pListBox.set_text=function(_a){};_pListBox.set_index=function(_a,_b){var _c=this._innerdataset;var _a=parseInt(_a,10)|0;if(this._is_created){if(!_c||_a<0||_a>_c.getRowCount()-1){_a= -1;}}if(this._changeIndex(_a,_b,true)){this.on_apply_index();}else{this._on_last_selectfocuschanged(this.index,true);}};_pListBox.on_apply_index=function(){if(!this.multiselect){var _a=this.index;var _b=this._get_contents_rows();var _c=_b.length;if(_b&&_a== -1){for(i=0;i<_c;i++ ){var _d=_b[i];_d.set_selected(false);if(nexacro._enableaccessibility){_d._setAccessibilityInfoIndex(i+1);_d._setAccessibilityInfoCount(_c);}}_b=null;}var _e=this.getElement();if(_e&&_a> -1){this._do_select(_a);}}};_pListBox.set_value=function(_a){if(_a!==this.value){this.value=_a;}var _b=this._innerdataset;if(_b){var _c= -1;if(this.value!==undefined){_c=_b.findRow(this.codecolumn,this.value);}if(this.index!=_c){this._is_value_setting=true;this.set_index(_c);this._is_value_setting=false;}}};_pListBox.set_dragscrolltype=function(_a){nexacro.Form.prototype.set_dragscrolltype.call(this,_a);};_pListBox.set_resizebutton=function(){};_pListBox.set_selectscrollmode=function(_a){this.selectscrollmode=nexacro._toString(_a);};_pListBox.set_rtldirection=function(_a){this._is_redraw=false;nexacro.Component.prototype.set_rtldirection.call(this,_a);};_pListBox.getCount=function(){return (this._innerdataset)?this._innerdataset.getRowCount():0;};_pListBox.getSelectedCount=function(){return this._get_selectcount();};_pListBox.getSelect=function(_a){if(_a<0||_a>=this.getCount()){return false;}var _b=this._select_multi.items;var _c=this._select_multi.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d]==_a){return true;}}return false;};_pListBox.getSelectedItems=function(){if(this._select_multi&&this._select_multi.length>0){var _a=this._select_multi.items;_a.sort();return _a;}else{return [];}};_pListBox.clearSelect=function(){if(this._select_multi&&this._select_multi.length>0){this._selectinfo.index= -1;if(this._changeIndex( -1)){this.on_apply_index();}this._select_clear();if(this._ctrlKey===true){this._recreate_data();this._is_redraw=true;}return true;}else{return false;}};_pListBox.redraw=function(){if(this._is_redraw==false){this._recreate_data();this._is_redraw=true;}};_pListBox.setSelect=function(_a,_b){_b=nexacro._toBoolean(_b);_a=parseInt(_a)|0;var _c=this._get_rowobj_byrow(_a);if(_a>=0&&_c){if(_b==true){if(!this.multiselect){this._deselect_all(true);if(this._changeIndex(_a,true,true)){this.on_apply_index();}}else{if(_c){_c.set_selected(_b);}this._changeIndex(_a,false,true);this._select_add(_a);}}else{if(_c){_c.set_selected(false);}this._select_remove(_a);if(this._select_multi&&this._select_multi.length==0){this._changeIndex( -1,false,true);}}}else{if(this._changeIndex( -1,false,true)){this.on_apply_index();}this._select_clear();}};_pListBox.updateToDataset=function(){if(!this._bind_event){return false;}return this.applyto_bindSource("value",this.value);};_pListBox.isAboveSelected=function(){};_pListBox.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f){var _g=this._accessibility_index;var _h=this._get_contents_rows().length;if(_a==nexacro.Event.KEY_TAB){var _i=this._selectinfo;if(_i&&_i.index> -1){if(_d){if(_g<0){this._want_tab=false;}else{var _j=this._last_focused;this._do_defocus(_j,true);if(_j&&_j._selected){_j._stat_change("select","selected");}this._accessibility_index= -1;}}else{if(_g> -1){this._want_tab=false;}else{var _k=this._get_contents_rows();var _l=_k[this.index];if(_l){_l._on_focus(true);}this._accessibility_index=this.index;}}}else{if((_d&&_g<0)||(!_d&&_g>=_h-1)){this._want_tab=false;}else{if(_d){_g-- ;}else{_g++ ;}var _k=this._get_contents_rows();var _l=_k[_g];if(_l){_l._on_focus(true);}this._accessibility_index=_g;}}this._getWindow()._keydown_element._event_stop=true;}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f);};_pListBox.on_notify_listbox_onkeydown=function(_a,_b){if(this.readonly){return false;}var _c=this._selectinfo;var _d,_e=this._overeditemindex;var _f=this._innerdataset;var _g= +this.index;var _h=this.text;var _i=this.value;var _j,_k,_l;var _m=this._get_contents_rows();var _n=this._shiftKey=_b.shiftKey;this._ctrlKey=_b.ctrlKey;this._altKey=_b.altKey;var _o=_b.keycode;if(_o==nexacro.Event.KEY_UP){if(_b.ctrlKey){this._do_scroll("up");return true;}if(this.multiselect){if(nexacro._enableaccessibility){_d=this._getNextAccessibilityOrderIndex( -1);if(this._accessibility_index<0){var _p=this._getWindow();_p._removeFromCurrentFocusPath(this,true);if(this._isAccessibilityEnable()){this._on_focus(true);}this._accessibility_index= -1;return;}else{if(this._select_multi.lastselected===undefined&&this._accessibility_index<this._get_rowcount()){_m[this._accessibility_index]._stat_change("notfocus","normal");}this._select_withkeyupevent(_b);}_d=this._accessibility_index;}else{this._select_withkeyupevent(_b);_d=this._get_selection_last();}if(_d!=null){if(_d> -1){this._changeIndex(_d);}}}else{if(nexacro._enableaccessibility){if(this.index==0){var _p=this._getWindow();_p._removeFromCurrentFocusPath(this,true);if(this._isAccessibilityEnable()){this._on_focus(true);}this._accessibility_index= -1;return;}else{if(this._accessibility_index!=this.index){var _q=_m[this._accessibility_index];if(_q){_q._stat_change("notfocus","normal");}}this._accessibility_index=this._getNextAccessibilityOrderIndex( -1);_d=this._accessibility_index;}}else{_d= +this.index-1;}if(_d> -1){if(this._changeIndex(_d)){this.on_apply_index();}}}}else if(_o==nexacro.Event.KEY_DOWN){if(_b.ctrlKey){this._do_scroll("down");return true;}if(this.multiselect){if(nexacro._enableaccessibility){if(this.index> -1&&this._accessibility_index== -1){_d=this._accessibility_index=this.index;this._do_select(this._accessibility_index);}else{_d=this._getNextAccessibilityOrderIndex(1);if(this._accessibility_index<_f.getRowCount()){if(this._select_multi.lastselected===undefined&&this._accessibility_index> -1){_m[this._accessibility_index]._stat_change("notfocus","normal");}this._select_withkeydownevent(_b);}}}else{this._select_withkeydownevent(_b);_d=this._get_selection_last();}if(_d!=null){if(_d<_f.getRowCount()){this._changeIndex(_d);}}}else{if(nexacro._enableaccessibility){if(this.index> -1&&this._accessibility_index== -1){_m[this.index]._on_focus(true);this._accessibility_index=this.index;}else{if(this._accessibility_index!=this.index){var _q=_m[this._accessibility_index];if(_q){_q._stat_change("notfocus","normal");}}this._accessibility_index=this._getNextAccessibilityOrderIndex(1);}_d=this._accessibility_index;}else{_d= +this.index+1;}if(_d<_f.getRowCount()){if(this._changeIndex(_d)){this.on_apply_index();}}}}if(!_n){this._shift_select_base_index=_a.index;}if((this.multiselect==true)&&(this._ctrlKey==true)&&(_o==nexacro.Event.KEY_SPACE)){var _r=this._get_rowobj_byrow(this._select_multi.lastselected);var _s=false;this._sellist=this._select_multi.items;var _t=this._sellist.length;var _u,_v;for(var _w=0;_w<_t;_w++ ){_v=this._sellist[_w];if(this._select_multi.lastselected==_v){_s=true;_r=this._get_rowobj_byrow(_v);_u=_v;}}if(_s!==true){if(_r){_r.set_selected(true);}this._select_add(this._select_multi.lastselected);}else{this._do_deselect(_u,true);}}else if(_o==nexacro.Event.KEY_SPACE){if(nexacro._enableaccessibility&&this._accessibility_index> -1){var _m=this._get_contents_rows();if(_m[this._accessibility_index]._control_pseudo=="focused"){_m[this._accessibility_index]._stat_change("notfocus","normal");}if(this._changeIndex(this._accessibility_index)){this.on_apply_index();}}}this.on_apply_style_itemborder(this.currentstyle.itemborder);};_pListBox.on_notify_item_onlbuttondown=function(_a,_b){if(this.readonly){return false;}_a._keep_selecting=true;_a._stat_change("select","selected");var _c=this._shiftKey=_b.shiftKey;this._ctrlKey=_b.ctrlKey;this._altKey=_b.altKey;this._selectinfo.obj=_a;this._selectinfo.index=_a.index;this._selectinfo.text=_a.text;this._selectinfo.value=_a.value;if(nexacro.isTouchInteraction||nexacro.SupportTouch){this._selectinfo_list[this._selectinfo_list.length]=this._selectinfo;}if(!_c){this._shift_select_base_index=_a.index;}this._lbtnDownIdx=_a.index;};_pListBox.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(!this._is_alive||this.readonly){return false;}return nexacro.Component.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pListBox.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(!this._is_alive||this.readonly){return false;}return nexacro.Component.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pListBox.on_fire_sys_ontouchend=function(_a,_b,_c,_d){if(_d&&(_d instanceof nexacro.ScrollBarCtrl||(_d.parent&&_d.parent instanceof nexacro.ScrollBarCtrl))){return;}var _e=this._selectinfo_list;var _f=nexacro.Component.prototype.on_fire_sys_ontouchend.call(this,_a,_b,_c,_d);while(_e.length){var _g=_e[0].obj;if(_g){_g._keep_selecting=false;var _h=this._get_contents_rows();var _i;var _j=_a[0];var _k=_j.canvasX;var _l=_j.canvasY;var _m=this.getElement();if(_m){var _n=this.currentstyle.border;var _o=_n?_n._left_width:0;var _p=_n?_n._top_width:0;_k=_k-((_m.scroll_left?_m.scroll_left:0)-_o);_l=_l-((_m.scroll_top?_m.scroll_top:0)-_p);if(_k<0){_k=_o;}if(_l<0){_l=_p;}}var _q=this._getClientXY(_k,_l);this.on_fire_onitemclick(this,_g.index,_g.text,_g.value,_j._current_state,this._altKey,this._ctrlKey,this._shiftKey,_j.screenX,_j.screenY,_k,_l,_q[0],_q[1]);_i=_g;var _r=_i.index;if(this.multiselect){if(this._shiftKey==true||this._ctrlKey==true){this._select_withmouseevent(_r);}else{this._do_select(_r,false);}}else{if(this._changeIndex(_r)){this.on_apply_index();}else{if(!_g.selected){_g._stat_change("notselect","normal");}}}}_e.shift();}return _f;};_pListBox.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(_l&&(_l instanceof nexacro.ScrollBarCtrl||(_l.parent&&_l.parent instanceof nexacro.ScrollBarCtrl))){return;}var _n=this._selectinfo;var _o=nexacro.Component.prototype.on_fire_sys_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);var _p=_n.obj;if(_p){_p._keep_selecting=false;var _q=this._get_contents_rows();var _r;this.on_fire_onitemclick(this,_p.index,_p.text,_p.value,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);if(nexacro._enableaccessibility){if(this._accessibility_index> -1){var _s=this._get_rowobj_byrow(this._accessibility_index);if(_n.index!=this._accessibility_index&&_s&&_s._selected==true){this._deselect_all(true);_s._stat_change("notselect","normal");}}}_r=_p;var _t=_r.index;if(this.multiselect){if(this._shiftKey==true||this._ctrlKey==true){this._select_withmouseevent(_t);}else{this._do_select(_t,false);}}else{if(this._changeIndex(_t)){this.on_apply_index();}else{if(!_p.selected){_p._stat_change("notselect","normal");}}}}return _o;};_pListBox.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);if(this.selectscrollmode=="select"&&this.multiselect){if(this._innerdataset){var _k= -1;if(_c[0]._elem&&_c[0]._elem.parent){_k=_c[0]._elem.parent.index;}if(this._lbtnDownIdx> -1&&_k> -1){this._deselect_all(true);var _l=this._lbtnDownIdx;var _m=_k;var _n=_k;if(!nexacro._isNumber(_l)){_l=0;}if(!nexacro._isNumber(_m)){_m=this._get_rowcount();}if(_l>_m){var _o=_m;_m=_l;_l=_o;_n=_o;}var _p=[];for(i=_l;i<=_m;i++ ){_p.push(i);}this._do_multi_select(_p,true);this._changeIndex(_n);}}return true;}return _j;};_pListBox.on_notify_item_onmouseenter=function(_a,_b){this._overeditemindex=_a.index;return false;};_pListBox.on_notify_item_onmouseleave=function(_a,_b){var _c=this._get_contents_rows();_a=this._getItemByRealIdx(_c,this._overeditemindex).obj;if(_a){if(!_a.selected){this._overeditemindex= -1;}}};_pListBox.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.readonly){return false;}if(this.onitemclick&&this.onitemclick._has_handlers){var _o=new nexacro.ItemClickEventInfo(_a,"onitemclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);var _p=this.onitemclick._fireEvent(this,_o);_o=null;return nexacro._toBoolean(_p);}return false;};_pListBox.on_fire_canitemchange=function(_a,_b,_c,_d,_e,_f,_g){if(this.canitemchange&&this.canitemchange._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"canitemchange",_b,_c,_d,_e,_f,_g);var _i=this.canitemchange._fireCheckEvent(this,_h);_h=null;return nexacro._toBoolean(_i);}return true;};_pListBox._onItemchanged=function(_a,_b,_c,_d,_e,_f,_g){this.applyto_bindSource("value",_a.value);this.on_fire_onitemchanged(this,_b,_c,_d,_e,_f,_g);return true;};_pListBox.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(!this._selectinfo){return false;}this._selectinfo.obj=null;this._selectinfo.index=_a.index;this._selectinfo.text=_a.text;this._selectinfo.value=_a.value;var _h=this._selectinfo;_h.index=_e;_h.text=_f;_h.value=_g;if(this.onitemchanged&&this.onitemchanged._has_handlers){var _i=new nexacro.ItemChangeEventInfo(this,"onitemchanged",_b,_c,_d,_e,_f,_g);var _j=this.onitemchanged._fireEvent(this,_i);return nexacro._toBoolean(_j);}return false;};_pListBox.on_notify_item_ondblclick=function(_a,_b){if(this.readonly||!this.enableevent){return false;}_b.canvasX+=_a._adjust_left-_a._scroll_left||0;_b.canvasY+=_a._adjust_top-_a._scroll_top||0;var _c=_a.currentstyle;if(_c&&_c.padding){_b.canvasX+=_c.padding.left;_b.canvasY+=_c.padding.top;}var _d=this._getClientXY(_b.canvasX,_b.canvasY);_b.clientX=_d[0];_b.clientY=_d[1];return this.on_fire_onitemdblclick(this,this.index,this.text,this.value,_b.button,_b.altKey,_b.ctrlKey,_b.shiftKey,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY);};_pListBox.on_fire_onitemdblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.readonly){return false;}if(this.onitemdblclick&&this.onitemdblclick._has_handlers){var _o=new nexacro.ItemClickEventInfo(_a,"onitemdblclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);var _p=this.onitemdblclick._fireEvent(this,_o);return nexacro._toBoolean(_p);}return false;};_pListBox._adjustScrollRows_callback=function(_a){this._adjustScrollRows_proc(_a);this._clearHiddenPage();};_pListBox._adjustScrollRows_proc=function(_a){var _b=this.vscrollbar.pos;if(_a){this._scroll_vpos_queue=[];}else{this._scroll_vpos_queue.pop();if(this._scroll_vpos_queue.length>0){this._aniframe_rowscroll.start();}}var _c=this._get_first_visible_row();var _d=this._get_last_visible_row(true);this._draw_contents(_c,_d);this._control_element.setElementVScrollPos(_b);};_pListBox.on_vscroll=function(_a,_b){if(this.onvscroll&&this.onvscroll._has_handlers){_b.fromobject=this;this.onvscroll._fireEvent(this,_b);}if(_b.type=="trackstart"||_b.type=="tracklastover"||_b.type=="trackfirstover"){return;}if(nexacro.Browser=="Runtime"||(navigator.userAgent.indexOf("Android 4.1")> -1||navigator.userAgent.indexOf("Android 4.2")> -1||navigator.userAgent.indexOf("Android 4.3")> -1)){this._adjustScrollRows_callback(true);}else{if(_b._evtkind=="fling"||_b._evtkind=="slide"||_b.type=="track"){if(!this._aniframe_rowscroll){var _c=this;this._scroll_vpos_queue=[];this._aniframe_rowscroll=new nexacro.AnimationFrame(this,function(){_c._adjustScrollRows_callback();});}var _d=this._scroll_vpos_queue.push(_b.pos);if(_d==1){this._aniframe_rowscroll.start();}}else{this._adjustScrollRows_callback(true);}}return true;};_pListBox.on_hscroll=function(_a,_b){if(this.onhscroll&&this.onhscroll._has_handlers){_b.fromobject=this;this.onhscroll._fireEvent(this,_b);}var _c=this._control_element;if(_c){_c.setElementHScrollPos(_b.pos);_c=null;}return true;};_pListBox.on_fire_onsize=function(_a,_b){if(this._is_redraw==false){this._recreate_data();this._is_redraw=true;}return nexacro.Component.prototype.on_fire_onsize.call(this,_a,_b);};_pListBox.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=false;var _e=this._get_contents_rows();if(_e&&_e.length>0){var _f=null;if(_a>0){this._overeditemindex++ ;}else{this._overeditemindex-- ;}_f=this._getItemByRealIdx(_e,this._overeditemindex).obj;if(_f){_d=true;_f._setAccessibilityNotifyEvent();}}return _d;};_pListBox._create_item=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return new nexacro.ListItemCtrl(_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pListBox._create_row=function(_a,_b,_c,_d,_e){var _f=this._innerdataset;var _g=this.datacolumn?this.datacolumn:this._datacolumn;var _h=this.codecolumn?this.codecolumn:this._codecolumn;var _i=_f.getColumn(_a,_g);var _j=_f.getColumn(_a,_h);var _k=this._create_item("item","absolute",_b,_c,_d-_b,_e-_c,null,null,this);_k.set_value(_j);_k.set_text(_i);_k.set_index(_a);_k.set_selected(false);_k._setRtlDirection(this._rtldirection);_k._setEventHandler("onlbuttondown",this.on_notify_item_onlbuttondown,this);_k._setEventHandler("ontouchstart",this.on_notify_item_onlbuttondown,this);_k._setEventHandler("ondblclick",this.on_notify_item_ondblclick,this);_k._setEventHandler("onmouseenter",this.on_notify_item_onmouseenter,this);_k._setEventHandler("onmouseleave",this.on_notify_item_onmouseleave,this);_k.createComponent();if(!this._is_created){this._refresh_rows[this._refresh_rows.length]=_k;}if(this.multiselect==true){var _l=this._select_multi.items;var _m=this._select_multi.length;for(var _n=0;_n<_m;_n++ ){if(_a==_l[_n]){_k.set_selected(true);break;}}}else{if(this.index==_a){_k.set_selected(true);this._set_last_selectfocused(_a);}}return _k;};_pListBox._refresh_scroll=function(){this._contents_maxwidth=null;this._contents_maxheight=null;this._set_scroll_max_size();this._refresh_size(false);};_pListBox._refresh_row=function(_a,_b,_c){var _d=this._get_rowobj_byrow(_a);switch(_b){case "value":if(_d){_d.set_value(_c);}break;case "text":if(_d){_d.set_text(_c);}var _e=this._set_scroll_max_width(_a);if(_e){this._refresh_size(true);}break;case "index":if(_d){_d.set_index(_c);}break;case "select":if(_d){_d.set_selected(_c);}break;}};_pListBox._get_rowcount=function(){var _a=this._innerdataset;if(_a&&(this.datacolumn||this.codecolumn)){return _a.getRowCount();}else{return 0;}};_pListBox._getMaxTextSize=function(){var _a=this._innerdataset;var _b=this.datacolumn||this.codecolumn;if(!_a||!_b){return false;}var _c=this.on_find_CurrentStyle_font(this._pseudo)||nexacro.Component._default_font;var _d=this.on_find_CurrentStyle_letterspace(this._pseudo);var _e=this.currentstyle.itempadding?this.currentstyle.itempadding.left+this.currentstyle.itempadding.right:0;_e+=this.currentstyle.itemborder?this.currentstyle.itemborder._left_width+this.currentstyle.itemborder._right_width:0;var _f;var _g=_a.getRowCount();var _h=0;if(_g>0){for(i=0;i<_g;i++ ){_f=nexacro._getTextSize2(_d,_a.getColumn(i,_b),_c,null,null,null,this._rtldirection)[0];if(_h<_f){_h=_f;}}_h+=_e;if(nexacro.Browser=="IE"&&nexacro.BrowserVersion<=8){return _h;}else{_h=Math.max(this._contents_maxwidth,_h);return _h;}}else{return 0;}};_pListBox._get_rowheight=function(){var _a=this.currentstyle.itemheight;return _a?nexacro._parseInt(_a.value,20):20;};_pListBox._get_select_mode=function(){if(this.multiselect){return "multi";}else{return "single";}};_pListBox._set_scroll_max_size=function(){this._set_scroll_max_width();this._contents_maxheight=this._get_rowcount()*this._get_rowheight();if(this._temp_elem){this._temp_elem.setElementPosition(0,this._contents_maxheight-1);}};_pListBox._set_scroll_max_width=function(_a){var _b=this.currentstyle.font||this._default_font;var _c=this.on_find_CurrentStyle_letterspace(this._pseudo);var _d=this._innerdataset;var _e=this.currentstyle.itempadding?this.currentstyle.itempadding.left+this.currentstyle.itempadding.right:0;_e+=this.currentstyle.itemborder?this.currentstyle.itemborder._left_width+this.currentstyle.itemborder._right_width:0;if(_b&&_d){if(this._contents_maxwidth!==null){if(this._pos_max_width==_a){var _f=this.datacolumn;var _g=this._getMaxTextSize();var _h=false;if(this._contents_maxwidth!=_g){this._contents_maxwidth=Math.max(this._contents_maxwidth,_g);_h=true;}this._pos_max_width=_j;return _h;}else{var _i=_d.getColumn(_a,this.datacolumn);var _g=nexacro._getTextSize2(_c,_i,_b,null,null,null,this._rtldirection);if(this._contents_maxwidth<_g[0]){this._contents_maxwidth=_g[0]+_e;this._pos_max_width=_a;return true;}return false;}}else{var _f=this.datacolumn;var _j=_d.findMaxLengthRow(_f);var _g=this._getMaxTextSize();this._contents_maxwidth=_g+_e;this._pos_max_width=_j;return true;}}return false;};_pListBox._getItemByRealIdx=function(_a,_b){if(nexacro._isArray(_a)){for(var _c=0,_d=_a.length;_c<_d;_c++ ){if(_a[_c].index==_b){return {"obj":_a[_c],"index":_c};}}}return {"obj":null,"index":null};};_pListBox._clearHiddenPage=function(){var _a=this._get_first_visible_row();var _b=this._get_last_visible_row(true);var _c=this._get_page_from_rowidx(_a);var _d=this._get_page_from_rowidx(_b);var _e=100;var _f=this._get_rowcount();if(this._buffer_pages){var _g=this._buffer_pages;var _h,_i;var _j=0;for(var _k=0,_l=_g.length;_k<_l;_k++ ){if(_k>=_c&&_k<=_d){continue;}if((_f-_j)<=_e){break;}_h=_g[_k];if(_h){for(var _m=0,_n=_h.length;_m<_n;_m++ ){_i=_h[_m];if(_i){_i.destroy();}_j++ ;}_g[_k]=null;}}}};_pListBox._draw_contents=function(_a,_b,_c){if(!this._buffer_pages){this._buffer_pages=[];}var _d;var _e;var _f,_g;if(!this._has_range(_a,_b)){var _h=this._get_page_from_rowidx(_a);var _i=this._get_page_from_rowidx(_b);var _j;_f=(_h-1)*this._page_rowcount;var _k=this._get_rowcount();var _l=this._get_rowheight();var _m=this.getElement();var _n=0;var _o=this._page_rowcount;if(_m){_n=_m.container_maxwidth;}for(_j=_h;_j<=_i;_j++ ){if(!(this._buffer_pages[_j])||this._buffer_pages[_j].length<=0){_d=this._buffer_pages[_j]=[];for(var _q=0;_q<_o;_q++ ){_g=(_g===undefined)?(_f*_l):_g;_e=this._create_row(_f,0,_g,_n,_g+_l);_d.push(_e);_g=_e._adjust_top+_e._adjust_height;_f++ ;if(_k<=_f){break;}}}else{_d=this._buffer_pages[_j];var _p=_d[_d.length-1];_g=_p._adjust_top+_p._adjust_height;_f+=_d.length;}}}this._previous_start=this._cur_start;this._previous_end=this._cur_end;this._cur_start=_a;this._cur_end=_b;};_pListBox._resetDisplayInfo=function(){var _a=this.getElement();if(!_a){return;}this._page_rowcount=Math.ceil((_a.client_height)/this._get_rowheight());this._page_rowcount_min=Math.floor((_a.client_height)/this._get_rowheight());var _b=this._get_rowcount();if(_b==0){this._total_page_cnt=0;this._total_page_rowcnt=0;}else{this._total_page_cnt=Math.ceil(_b/this._page_rowcount);this._total_page_rowcnt=(this._page_rowcount*this._total_page_cnt);}};_pListBox._recreate_data=function(_a){if(!this._is_redrawing&&this._is_created_contents){var _b=this.getElement();if(!_b){return;}this._is_redrawing=true;this._clear_contents();this._resetDisplayInfo();this._refresh_scroll();var _c=this._get_rowcount();if(_c==0){this._is_redrawing=false;return;}var _d,_e;if(nexacro._enableaccessibility&&nexacro._accessibilitytype==4){_d=0;_e=_c-1;}else{if(_a){_d=this._get_first_visible_row();_e=this._get_last_visible_row(true);}else{_d=0;if(_c<=this._total_page_rowcnt){_e=_c-1;}else{_e=this._total_page_rowcnt-1;}if(this._page_rowcount<_e){_e=this._page_rowcount;}}}if(this._is_created_contents){this._refresh_size(false);}this._draw_contents(_d,_e);this._is_redrawing=false;}};_pListBox._refresh_size=function(_a){var _b=this.getElement();if(_b){var _c=this._contents_maxwidth;var _d=this._contents_maxheight;var _e=_b.container_maxwidth;var _f=_b.container_maxheight;_c=Math.max(_c,_b.client_width);_d=Math.max(_d,_b.client_height);if((_b.container_maxwidth!=_c||_b.container_maxheight!=_d)){_b.setElementScrollMaxSize(_c,_d);}if(_a){this._refresh_scroll();}this._onResetScrollBar();}};_pListBox._clear_contents=function(){if(this._vscrollTask){this._vscrollTask.stop();}if(this._buffer_pages){var _a=this._buffer_pages;var _b,_c;for(var _d=0,_e=_a.length;_d<_e;_d++ ){_b=_a[_d];if(_b){for(var _f=0,_g=_b.length;_f<_g;_f++ ){_c=_b[_f];if(_c){_c.destroy();}}_a[_d]=null;}}}this._buffer_pages=null;};_pListBox._get_first_visible_row=function(){var _a=(this.vscrollbar)?this.vscrollbar.pos:0;return Math.floor(_a/this._get_rowheight());};_pListBox._get_last_visible_row=function(_a){var _b;if(_a){_b=this._get_first_visible_row()+this._page_rowcount;}else{_b=this._get_first_visible_row()+this._page_rowcount_min;}var _c=this._get_rowcount();if(_b>=_c){_b=_c-1;}return _b;};_pListBox._get_page_from_rowidx=function(_a){return Math.floor(_a/this._page_rowcount)+1;};_pListBox._has_range=function(_a,_b){if(!this._buffer_pages){return false;}var _c=this._get_page_from_rowidx(_a),_d=this._get_page_from_rowidx(_b);for(;_c<=_d;_c++ ){if(!this._has_page(_c)){return false;}}return true;};_pListBox._has_page=function(_a){return !!this._buffer_pages[_a];};_pListBox._get_contents_rows=function(){var _a=this._buffer_pages,_b=[];if(_a){var _c,_d;for(var _e=0,_f=_a.length;_e<_f;_e++ ){_c=_a[_e];if(_c){_b=_b.concat(_c);}}}return _b;};_pListBox._get_rowobj_byrow=function(_a){var _b=this._buffer_pages;if(_b){var _c,_d;for(var _e=0,_f=_b.length;_e<_f;_e++ ){_c=_b[_e];if(_c){for(var _g=0,_h=_c.length;_g<_h;_g++ ){_d=_c[_g];if(_d&&_d.index==_a){return _d;}}}}}return null;};_pListBox._select_withmouseevent=function(_a,_b,_c){switch(this._get_select_mode()){case 'multi':if(this._shiftKey){if(!this._ctrlKey){this._deselect_all(true);}this._select_range(this._shift_select_base_index,_a,this._shiftKey);}else if(this._ctrlKey){var _d=this._get_rowobj_byrow(_a);if(_d){_d.set_selected(!_d.selected);}if(_d.selected===false){var _e,_f;var _g=this._select_multi;_f=_g?_g.length:0;for(_e=0;_e<_f;_e++ ){if(_a===_g.items[_e]){this._select_remove(_a);}}}else{this._select_add(_a);}this._set_last_selectfocused(_a);}else if(this._is_selected(_a)&&!this._shiftKey&&!this._ctrlKey&&this._get_selectcount()>1){this._do_select(_a,_c,false);}else{this._do_select(_a,false);}break;case 'single':this._do_select(_a,false);break;}};_pListBox._select_withkeyupevent=function(_a){var _b=this._select_multi.lastselected===undefined?nexacro._enableaccessibility?this._accessibility_index:this._select_multi.lastselected:this._select_multi.lastselected;if(_b>0){var _c=_b-1;if(_a.shiftKey&&_b){if(this._is_selected(_b)&&this._is_selected(_c)){this._do_deselect(_b,true);this._set_last_selectfocused(_c);if(this._isAccessibilityEnable()){var _d=this._get_contents_rows();_d[_c]._setFocus(true);}}else if(!this._is_selected(_b)){this._do_select(_b,true);this._do_select(_c,true);}else{this._do_select(_c,true);}}else{this._shift_select_base_index=null;this._deselect_all(true);this._do_select(_c);}}};_pListBox._select_withkeydownevent=function(_a){var _b=this._select_multi.lastselected===undefined?nexacro._enableaccessibility?this._accessibility_index:this._select_multi.lastselected:this._select_multi.lastselected;var _c=this._get_rowcount();if(_b+1<_c){var _d=_b+1;if(_a.shiftKey&&_b>=0){if(this._shift_select_base_index==_b){this._deselect_all(true);this._do_select(this._shift_select_base_index,true);}if(this._is_selected(_b)&&this._is_selected(_d)){this._do_deselect(_b,true);this._set_last_selectfocused(_d);}else if(!this._is_selected(_b)){this._do_select(_b,true);this._do_select(_d,true);}else{this._do_select(_d,true);}}else{this._shift_select_base_index=null;this._deselect_all(true);this._do_select(_d);}}};_pListBox._getPreCalculateWantTab=function(_a,_b){if(this._selectinfo&&this._selectinfo.index> -1){var _c=this._selectinfo.index;if(_c!= -1&&this.index==_c){return false;}}else{var _d=this._accessibility_index;if(_b){if(_d<0){return false;}}else{var _e=this._get_contents_rows().length;if(_d+1>_e){return false;}}}return this._want_tab;};_pListBox._getPreCalculateWantArrow=function(_a){if(nexacro._enableaccessibility&&(nexacro._accessibilitytype==4||nexacro._accessibilitytype==5)){return true;}else if(_a==nexacro.Event.KEY_UP){var _b=this._accessibility_index;if(_b==0&&!this._isAccessibilityEnable()){return false;}else if(this._accessibility_index== -1){var _c=this._getNextAccessibilityOrderIndex( -1);if(_c> -1){return true;}else{return false;}}}else if(_a==nexacro.Event.KEY_DOWN){if(this.index){var _d=this._get_contents_rows().length;if(this.index> -1&&this._accessibility_index== -1){return true;}else if(_b>=_d-1||this._getNextAccessibilityOrderIndex(1)>=_d||this._getNextAccessibilityOrderIndex(1)<0){return false;}}else{return true;}}return this._want_arrow;};_pListBox._getNextAccessibilityOrderIndex=function(_a){var _b=this._accessibility_index;var _c=this._get_contents_rows();if(_a>0){for(var _d=_b+_a,_e=_c.length;_d<_e;_d++ ){if(_c[_d]._isAccessibilityEnable()){return _d;}}_b= -1;}else if(_a<0){for(var _d=_b+_a;_d>=0;_d-- ){if(_c[_d]._isAccessibilityEnable()){return _d;}}_b=this._accessibility_index= -1;}return _b;};_pListBox._do_scroll=function(_a){var _b=this._get_first_visible_row();var _c=this._get_rowheight();var _d=this.vscrollbar;if(_d){var _e=_b;if(_a=="down"){_e+=1;}else{if(_d.pos<=_e*_c){_e-=1;}}_d.set_pos(_e*_c);_d=null;}};_pListBox._select_add=function(_a){if(_a<0||_a>this._innerdataset.getRowCount()-1){return;}var _b=_a+"";var _c=this._select_multi;var _d=_c.map[_b];if(typeof _d!='undefined'){return this._select_replace(_b,_a);}_c.map[_b]=_a;_c.length++ ;_c.items.push(_a);_c.keys.push(_b);this._changeIndex(_a,undefined,undefined,"_select_add");};_pListBox._select_replace=function(_a,_b){var _c=this._select_indexOfkey(_a);var _d=this._select_multi;_d.items[_c]=_b;_d.map[_a]=_b;};_pListBox._select_indexOfkey=function(_a){_a+="";return nexacro._indexOf(this._select_multi.keys,_a);};_pListBox._get_selectcount=function(){return this._select_multi.length;};_pListBox._select_remove=function(_a){var _b=this._select_indexOfkey(_a);var _c=this._select_multi;if(_b<_c.length&&_b>=0){_c.length-- ;_c.items.splice(_b,1);var _d=_c.keys[_b];if(typeof _d!='undefined'){_c.map[_d]=undefined;}_c.keys.splice(_b,1);if(!this.multiselect&&_c.length==0){this.index= -1;this.text="";this.value=undefined;}return _a;}return false;};_pListBox._select_indexOf=function(_a){if(!this.multiselect){return this._selectinfo?this._selectinfo.index==_a: -1;}else{return nexacro._indexOf(this._select_multi.items,_a);}};_pListBox._get_selection_last=function(){var _a=this._select_multi;return _a.items[_a.length-1];};_pListBox._get_select_range=function(_a,_b){var _c=this._select_multi;var _d=_c.items,_e=[],_f;if(_d.length<1){return _e;}_a=_a||0;_b=Math.min(typeof _b=='undefined'?_c.length-1:_b,_c.length-1);if(_a<=_b){for(_f=_a;_f<=_b;_f++ ){_e[_e.length]=_d[_f];}}else{for(_f=_a;_f>=_b;_f-- ){_e[_e.length]=_d[_f];}}return _e;};_pListBox._select_clear=function(){var _a=this._get_contents_rows();var _b=_a.length;if(_a){for(var _c=0;_c<_b;_c++ ){_a[_c].set_selected(false);}}this._select_multi={"items":[],"map":{},"keys":[],"length":0,"lastselected":null};};_pListBox._is_selected=function(_a){return this._select_indexOf(_a)!== -1;};_pListBox._select_range=function(_a,_b,_c,_d){if(!_c){this._deselect_all(true);}var _e=0,_f,_g,_h,_i=[],_j=_b;if(!nexacro._isNumber(_a)){_a=0;}if(!nexacro._isNumber(_b)){_b=this._get_rowcount();}if(_a>_b){_g=_b;_b=_a;_a=_g;_j=_g;}for(_f=_a;_f<=_b;_f++ ){if(this._is_selected(_f)){_e++ ;}}if(!_d){_h= -1;}else{_h=(_d=='up')?_a:_b;}for(_f=_a;_f<=_b;_f++ ){if(_e==(_b-_a+1)){if(_f!=_h){this._do_deselect(_f,true);}}else{_i.push(_f);}}this._do_multi_select(_i,true);this._changeIndex(_j);};_pListBox._deselect_all=function(_a){var _b=0,_c=this._get_rowcount();for(;_b<_c;_b++ ){this._do_deselect(_b,_a);}};_pListBox._do_select=function(_a,_b,_c){if(this.readonly){return false;}var _d;if(typeof _a==="number"){_a=[_a];}if(this._get_select_mode()=="single"&&_a){_d=_a.length?_a[0]:_a;this._do_single_select(_d,_c);}else{this._do_multi_select(_a,_b,_c);}};_pListBox._do_deselect=function(_a,_b){if(nexacro._isNumber(_a)){_a=[_a];}else if(!nexacro._isArray(_a)){_a=[_a];}var _c=_a.length;var _d,_e=0,_f=0;var _g=[0];var _h=this._select_multi;for(;_e<_c;_e++ ){_d=_a[_e];if(this._is_selected(_d)){ ++_f;this._on_select_change(_d,false,"deselect",_g,_b);}}return _g[0]===_f;};_pListBox._select_commit=function(_a,_b,_c){var _d=this._select_multi;switch(_a){case "deselect": ++(_c[0]);this._select_remove(_b);break;case "singleselect":var _e=_d.lastselected;this._select_add(_b);if(_e!=_b&&this._get_selectcount()>0&&this._do_deselect(_e)===false){return false;}_c[0]=true;break;case "multiselect":this._select_add(_b);_c[0]=true;break;}};_pListBox._do_single_select=function(_a,_b){var _c=[false];this._on_select_change(_a,true,"singleselect",_c,_b);if(_c[0]){if(!_b){this._set_last_selectfocused(_a);}}};_pListBox._do_multi_select=function(_a,_b,_c){var _d=_a[0];var _e=this._selectinfo.index;var _f=_a.length;if(!_b&&this._get_selectcount()>0){if(this._do_deselect(this._get_select_range(),_c)===false){return;}}var _g=[false];var _h=0,_i;var _j=this._select_multi;for(;_h<_f;_h++ ){_i=_a[_h];if(_b&&this._is_selected(_i)){continue;}this._on_select_change(_i,true,"multiselect",_g,_c);}this._set_last_selectfocused(_d,_c);};_pListBox._set_last_selectfocused=function(_a,_b){var _c=this._select_multi.lastselected;this._select_multi.lastselected=_a;if(_a!==_c){this._on_last_selectfocuschanged(_a,_b);}};_pListBox._on_select_change=function(_a,_b,_c,_d,_e){if(this._select_commit(_c,_a,_d)!==false){if(_b){this._refresh_row(_a,"select",true);}else{this._refresh_row(_a,"select",false);}}};_pListBox._on_last_selectfocuschanged=function(_a,_b){if(_a> -1){var _c=this.getElement();var _d=this._get_first_visible_row();var _e=this._get_last_visible_row(true);if(this.vscrollbar){if(_a<=_d){this.vscrollbar.set_pos(_a*this._get_rowheight());}else if(_a>=_e){if(_c){var _f=(_a+1)*this._get_rowheight()-_c.client_height;this.vscrollbar.set_pos(_f);}}}else{var _g=this._get_contents_rows();if(_g[_a]){var _h=_g[_a].getElement();if(_h){_h.setElementFocus();}}}}};_pListBox._search_style_obj=function(_a,_b,_c){if(_a&&_a._bindtype!=0){if(this._is_subcontrol){return nexacro._getValueForStyleBindExpr(this.parent,_a,_b,_c);}else{return nexacro._getValueForStyleBindExpr(this,_a,_b,_c);}}else{return _a;}};_pListBox._do_defocus=function(_a,_b){var _c=this._getWindow();_c._removeFromCurrentFocusPath(_a,true);if(_b){_c._removeFromCurrentFocusPath(this,true);}};_pListBox.applyto_bindSource=function(_a,_b){if(this._apply_ds_val){return true;}if(!this._bind_event){return true;}var _c={propid:_a,val:_b};var _d=this._bind_event._fireEvent(this,_c);return _d;};_pListBox._changeIndex=function(_a,_b,_c){if(this.readonly){return false;}if(_b||_a!=this.index){var _d=this._innerdataset;var _e=parseInt(_a,10)|0;var _f=this.index;var _g=this.text;var _h=this.value;var _i=(this.codecolumn||this.datacolumn);if(_d&&_i){var _j=_d.getColumn(_e,this.datacolumn||this.codecolumn);var _k=_d.getColumn(_e,this.codecolumn||this.datacolumn);var _l=_j==undefined?"":_j;var _m=_k;this._prevpos=this._vscrollpos;if(_c!=true){if(this.on_fire_canitemchange(this,_f,_g,_h,_e,_l,_m)!=false){this._accessibility_index=this.index=_e;this.text=_l;if(!this._is_value_setting){this.value=_m;}this.applyto_bindSource("value",_k);this.on_fire_onitemchanged(this,_f,_g,_h,_e,_l,_m);return true;}}else{this._accessibility_index=this.index=_e;this.text=_l;if(!this._is_value_setting){this.value=_m;}this.applyto_bindSource("value",_k);return true;}}}return false;};delete _pListBox;_pListBox=null;nexacro.ListItemCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.StaticCtrl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_subcontrol=true;this._is_reference_control=false;this._accessibility_role="listitem";this.index="";this.value=undefined;this.selected=false;this._keep_selecting=false;this.wordwrap="none";};var _pListItemCtrl=nexacro._createPrototype(nexacro.StaticCtrl,nexacro.ListItemCtrl);nexacro.ListItemCtrl.prototype=_pListItemCtrl;_pListItemCtrl.destroy=function(){this._removeEventHandler("onlbuttondown",this.parent.on_notify_item_onlbuttondown,this.parent);this._removeEventHandler("ontouchstart",this.parent.on_notify_item_onlbuttondown,this.parent);this._removeEventHandler("ondblclick",this.parent.on_notify_item_ondblclick,this.parent);this._removeEventHandler("onmouseenter",this.parent.on_notify_item_onmouseenter,this.parent);this._removeEventHandler("onmouseleave",this.parent.on_notify_item_onmouseleave,this.parent);nexacro.Component.prototype.destroy.call(this);};_pListItemCtrl.on_apply_custom_pseudo=function(_a){var _b=this.currentstyle;var _c=this.on_find_CurrentStyle_font(_a);if(_c!=_b.font){_b.font=_c;this.on_apply_style_font(_c);}_c=this.on_find_CurrentStyle_color(_a);if(_c!=_b.color){_b.color=_c;this.on_apply_style_color(_c);}_c=this.on_find_CurrentStyle_align(_a);if(_c!=_b.align){_b.align=_c;this.on_apply_style_align(_c);}_c=this.on_find_CurrentStyle_linespace(_a);if(_c!=_b.linespace){_b.linespace=_c;this.on_apply_style_linespace(_c);}_c=this.on_find_CurrentStyle_accessibility(_a);if(_c!=_b.accessibility){_b.accessibility=this._make_accessibility_value(_c);this.on_apply_style_accessibility(_b.accessibility);}_c=this.on_find_CurrentStyle_rtlimagemirroring(_a);if(_c!=_b.rtlimagemirroring){_b.rtlimagemirroring=_c;this.on_apply_style_rtlimagemirroring(_b.rtlimagemirroring);}_c=null;};_pListItemCtrl.on_find_CurrentStyle_background=function(_a){if((this._keep_selecting||this.selected)&&this.parent.enable){_a="selected";}var _b=this.parent.on_find_CurrentStyle_itembackground(_a);return this.parent._search_style_obj(_b,"background",this.index);};_pListItemCtrl.on_find_CurrentStyle_gradation=function(_a){if((this._keep_selecting||this.selected)&&this.parent.enable){_a="selected";}var _b=this.parent.on_find_CurrentStyle_itemgradation(_a);return this.parent._search_style_obj(_b,"gradation",this.index);};_pListItemCtrl.on_find_CurrentStyle_border=function(_a){if((this._keep_selecting||this.selected)&&this.parent.enable){_a="selected";}var _b=this.parent.on_find_CurrentStyle_itemborder(_a);return this.parent._search_style_obj(_b,"border",this.index);};_pListItemCtrl.on_find_CurrentStyle_bordertype=function(_a){if((this._keep_selecting||this.selected)&&this.parent.enable){_a="selected";}var _b=this.parent.on_find_CurrentStyle_itembordertype(_a);return this.parent._search_style_obj(_b,"bordertype",this.index);};_pListItemCtrl.on_find_CurrentStyle_padding=function(_a){if((this._keep_selecting||this.selected)&&this.parent.enable){_a="selected";}var _b=this.parent.on_find_CurrentStyle_itempadding(_a);return this.parent._search_style_obj(_b,"padding",this.index);};_pListItemCtrl.on_find_CurrentStyle_color=function(_a){if((this._keep_selecting||this.selected)&&this.parent.enable){_a="selected";}var _b=this.parent.on_find_CurrentStyle_color(_a);return this.parent._search_style_obj(_b,"color",this.index);};_pListItemCtrl.on_find_CurrentStyle_font=function(_a){if((this._keep_selecting||this.selected)&&this.parent.enable){_a="selected";}var _b=this.parent.on_find_CurrentStyle_font(_a);return this.parent._search_style_obj(_b,"font",this.index);};_pListItemCtrl.on_find_CurrentStyle_align=function(_a){return this.parent.on_find_CurrentStyle_align(_a);};_pListItemCtrl.on_find_CurrentStyle_accessibility=function(_a){return this.parent.on_find_CurrentStyle_itemaccessibility(_a);};_pListItemCtrl.on_find_CurrentStyle_rtlimagemirroring=function(_a){return;};_pListItemCtrl.on_find_CurrentStyle_cursor=function(_a){return this.parent.on_find_CurrentStyle_cursor(_a);};_pListItemCtrl.on_apply_custom_setfocus=function(_a){if(!this.parent._is_subcontrol&&this.parent._pseudo=="focused"){nexacro.Component.prototype.on_apply_custom_setfocus.call(this,_a);}};_pListItemCtrl.isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pListItemCtrl._getAccessibilityLabel=function(_a){var _b=this.parent._is_first_focus;var _c="";if(_b&&this._isAccessibilityEnable()){var _d=this.parent;var _e=_d.on_find_CurrentStyle_accessibility(_d._pseudo);_c=_d._getAccessibilityParentValue(_e);}_c+=" "+nexacro.Component.prototype._getAccessibilityLabel.call(this,_a);return _c;};_pListItemCtrl._getAccessibilityRole=function(_a){var _b="";if(this._isAccessibilityEnable()){var _c=this.parent;if(_c._is_first_focus){var _d=_c.on_find_CurrentStyle_accessibility(_c._pseudo);_b=_d.role?_d.role:_c._accessibility_role;}else{_b=_a.role?_a.role:this._accessibility_role;}}return _b;};_pListItemCtrl._setAccessibilityStatFocus=function(_a){var _b=this.parent;if(!_b._is_subcontrol&&_b._pseudo=="focused"){if(_b.multiselect&&_b._shift_select_base_index&&_b._shift_select_base_index!=this.index){var _c=_b._get_contents_rows()[_b._shift_select_base_index];if(_c&&_c._pseudo=="selected"){var _d=_c._getAccessibilityLabel(_c.on_find_CurrentStyle_accessibility(this._pseudo));_d+=" "+this._getAccessibilityLabel(this.on_find_CurrentStyle_accessibility(this._pseudo));this._setAccessibilityLabel(_d);}}return nexacro.Component.prototype._setAccessibilityStatFocus.call(this,_a);}};_pListItemCtrl.on_get_style_accessibility_label=function(){return this.text;};_pListItemCtrl.set_index=function(_a){if(_a!==this.index){this.index=parseInt(_a,10);}};_pListItemCtrl.set_value=function(_a){if(_a!==this.value){this.value=_a;}};_pListItemCtrl.set_selected=function(_a){if(_a!=this.selected){this.selected=_a;this.on_apply_selected();}};_pListItemCtrl.on_apply_selected=function(){this._control_pseudo="";this._contents_pseudo="";if(this.selected){this._stat_change("select","selected");}else{if(nexacro._enableaccessibility){if(this._control_pseudo=="focused"){this._stat_change("notfocus","normal");}else{this._stat_change("notselect","normal");}}else{this._stat_change("notselect","normal");}}};_pListItemCtrl.on_apply_mouseover=function(_a){if(_a){this._stat_change("notselect","mouseover");}else{if(this.selected){this._stat_change("select","selected");}else{this._stat_change("notselect","normal");}}};nexacro.ListBoxCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.ListBox.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_subcontrol=true;};var _pListBoxCtrl=nexacro.ListBoxCtrl.prototype=nexacro._createPrototype(nexacro.ListBox,nexacro.ListBoxCtrl);_pListBoxCtrl._type_name="ListBoxControl";nexacro._setForControlStyleFinder(_pListBoxCtrl);delete _pListBoxCtrl;_ListBoxCtrl=null;};