if(!nexacro.PopupMenuItem){nexacro.PopupMenuItem=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.MenuItem.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this.chkimgctrl=null;this.imgctrl=null;this.expimgelem=null;this.gap=5;this.chkwidth=0;this.textwidth=0;this.hotkeywidth=0;this.expwidth=0;this.expheight=0;this.index=0;this.datarow=0;this.itemexpand=true;this.value=false;this.expandimage="";this.checkimage="";this.id="";this.enable=true;this.icon="";this.userdata=null;this.buttonalign="";this._text_elem=null;this._hotkey_txtelem=null;this._hotkey_string="";this._accessibility_role="menuitem";};var _pPopupMenuItem=nexacro._createPrototype(nexacro.MenuItem,nexacro.PopupMenuItem);nexacro.PopupMenuItem.prototype=_pPopupMenuItem;_pPopupMenuItem._type_name="PopupMenuItem";_pPopupMenuItem.on_find_CurrentStyle_border=function(_a){return this.parent.on_find_CurrentStyle_itemborder(_a);};_pPopupMenuItem.on_find_CurrentStyle_background=function(_a){return this.parent.on_find_CurrentStyle_itembackground(_a);};_pPopupMenuItem.on_find_CurrentStyle_bordertype=function(_a){return this.parent.on_find_CurrentStyle_itembordertype(_a);};_pPopupMenuItem.on_find_CurrentStyle_gradation=function(_a){return this.parent.on_find_CurrentStyle_itemgradation(_a);};_pPopupMenuItem.on_find_CurrentStyle_padding=function(_a){return this.parent.on_find_CurrentStyle_itempadding(_a);};_pPopupMenuItem.on_find_CurrentStyle_accessibility=function(_a){return this.parent.on_find_CurrentStyle_itemaccessibility(_a);};_pPopupMenuItem.on_find_CurrentStyle_rtlimagemirroring=function(_a){return;};_pPopupMenuItem.on_apply_style_color=function(_a){if(this._text_elem){this._text_elem.setElementColor(_a);}if(this._hotkey_txtelem){this._hotkey_txtelem.setElementColor(_a);}};_pPopupMenuItem.on_apply_style_font=function(_a){if(this._text_elem){this._text_elem.setElementFont(_a);}if(this._hotkey_txtelem){this._hotkey_txtelem.setElementFont(_a);}};_pPopupMenuItem.on_apply_style_letterspace=function(_a){if(this._text_elem){this._text_elem.setElementLetterSpace(_a);}if(this._hotkey_txtelem){this._hotkey_txtelem.setElementLetterSpace(_a);}};_pPopupMenuItem.on_apply_style_accessibility=function(_a){var _b=this._control_element;if(_b&&_a){_b.setAccessibility(_a);this._updateAccessibilityLabel(this);}};_pPopupMenuItem._getWindowPosition=function(){return nexacro.Component.prototype._getWindowPosition.call(this);};_pPopupMenuItem.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.currentstyle;if(this.checkimage){var _c=this.chkimgctrl=new nexacro.ImageViewerCtrl("chkimg","absolute",0,0,0,0,null,null,this);_c.style.set_rtlimagemirroring("true");this.on_apply_checkimage();_c.createComponent();}else if(this.icon){this._load_image(this.icon,"icon");var _d=this.imgctrl=new nexacro.ImageViewerCtrl("iconimg","absolute",0,0,0,0,null,null,this);this.on_apply_icon();_d.createComponent();}if(this.text){var _e=this._text_elem=new nexacro.TextBoxElement(_a);_e.setElementFont(_b.font);_e.setElementColor(_b.color);_e.setElementLetterSpace(_b.letterspace);}if(this._hotkey_string){var _f=this._hotkey_txtelem=new nexacro.TextBoxElement(_a);_f.setElementFont(_b.font);_f.setElementColor(_b.color);_f.setElementLetterSpace(_b.letterspace);}var _g=this.expandimage;if(_g){this._load_image(_g._value);}}};_pPopupMenuItem.on_created_contents=function(){var _a=this._text_elem;var _b=this._hotkey_txtelem;var _c=this.chkimgctrl;var _d=this.imgctrl;var _e=this.expimgelem;if(_c){_c.on_created();}if(_d){_d.on_created();}if(_e){_e.create();}if(_b){this.on_apply_hotkeytext();_b.create();}if(_a){_a.create();}};_pPopupMenuItem.on_destroy_contents=function(){if(this.imgctrl){this.imgctrl.destroy();this.imgctrl=null;}if(this.chkimgctrl){this.chkimgctrl.destroy();this.chkimgctrl=null;}if(this._text_elem){this._text_elem.destroy();this._text_elem=null;}if(this._hotkey_txtelem){this._hotkey_txtelem.destroy();this._hotkey_txtelem=null;}if(this.expimgelem){this.expimgelem.destroy();this.expimgelem=null;}};_pPopupMenuItem.on_change_containerRect=function(_a,_b){var _c=this._text_elem,_d=this._hotkey_txtelem;var _e=0,_f=0;if(this.parent&&this.parent.text_height){_e=this.parent.text_height;}if(this.parent){_f=this.parent.on_find_CurrentStyle_itemheight();}};_pPopupMenuItem._setValue=function(_a){if(this.value!=_a){this.value=_a;this.on_apply_value();}};_pPopupMenuItem.on_apply_value=function(){var _a=this.parent.on_find_CurrentStyle_checkboximage(this._pseudo);this._setCheckimage(_a);};_pPopupMenuItem._setIcon=function(_a){if(this.icon!=_a){this.icon=_a;this.on_apply_icon();}};_pPopupMenuItem.on_apply_icon=function(){if(this.imgctrl){this.imgctrl.set_image(this.icon);}};_pPopupMenuItem._setExpandimage=function(_a){if(this.expandimage!=_a){this.expandimage=_a;this.on_apply_expandimage();}};_pPopupMenuItem.on_apply_expandimage=function(){var _a=this.expimgelem;var _b=this.expandimage;if(_a){if(this.itemexpand){if(_b!=""){this._load_image(_b);}else{_a=new nexacro.TextBoxElement(control_elem);this.expimgelem=_a;_a.setElementText(">");_a.setElementFont(this.currentstyle.font);if(this._is_created){_a.create();}}}}};_pPopupMenuItem._setCheckimage=function(_a){if(this.checkimage!=_a){this.checkimage=_a;this.on_apply_checkimage();}};_pPopupMenuItem.on_apply_checkimage=function(){if(this.chkimgctrl){if(this._isChecked()==true){this.chkimgctrl.set_image(this.checkimage);}else{this.chkimgctrl.set_image("");}}};_pPopupMenuItem._setText=function(_a){if(_a!=this.text){this.text=_a;this.on_apply_text();}};_pPopupMenuItem.on_apply_text=function(){var _a=this._control_element;if(_a){var _b=this._text_elem;if(!_b){_b=new nexacro.TextBoxElement(_a);this._text_elem=_b;_b.setElementSize(this._width,this._client_height);_b.setElementColor(this.currentstyle.color);_b.setElementFont(this.currentstyle.font);_b.setElementLetterSpace(this.curstyle.letterspace);if(this._is_created){_b.create();}}if(this.text||this.text===""){_b.setElementText(this.text);}}};_pPopupMenuItem._setHotkey=function(_a){if(_a!=this._hotkey_string){this._hotkey_string=_a;this.on_apply_hotkeytext();}};_pPopupMenuItem.on_apply_hotkeytext=function(){var _a=this._control_element;if(_a){var _b=this._hotkey_txtelem;if(!_b){_b=new nexacro.TextBoxElement(_a);this._hotkey_txtelem=_b;_b.setElementSize(this._width,this._client_height);_b.setElementColor(this.currentstyle.color);_b.setElementFont(this.currentstyle.font);_b.setElementLetterSpace(this.currentstyle.letterspace);if(this._is_created){_b.create();}}if(this._hotkey_string||this._hotkey_string===""){_b.setElementText(this._hotkey_string);}}};_pPopupMenuItem._setUserdata=function(_a){if(_a!=this.userdata){this.userdata=_a;}};_pPopupMenuItem.on_apply_mouseover=function(_a){if(_a){this._stat_change("normal","mouseover");}else{this._stat_change("normal","normal");}};_pPopupMenuItem.on_apply_style_rtlimagemirroring=function(_a){return;};_pPopupMenuItem.on_apply_prop_rtldirection=function(){var _a=this.getElement();var _b=this._rtldirection;var _c=this.chkimgctrl;var _d=this.imgctrl;var _e=this.expimgelem;if(_a){_a.setElementRtlDirection(_b);if(_c){_c._setRtlDirection(_b);}if(_d){_d._setRtlDirection(_b);}if(_e){_e.setElementImageMirror(null,true);}}};_pPopupMenuItem._isChecked=function(){var _a=this.value;if(!!_a||_a.toString().toLowerCase()=="true"){return true;}return false;};_pPopupMenuItem._verticalAlign=function(_a){if(this.chkimgctrl){this.chkimgctrl.set_imagealign("center "+_a.toString());}};_pPopupMenuItem._load_image=function(_a){var _b=this._control_element;if(_b){if(_a){var _c=this.expimgelem;if(!_c){_c=new nexacro.ImageElement(_b);this.expimgelem=_c;_c.setElementImageUrl(_a);_c.setElementImageMirror(null,true);if(this._is_created){_c.create();}}else{_c.setElementImageUrl(_a);}}}};_pPopupMenuItem._updateElementPositions=function(_a,_b,_c,_d){if(!this._is_created_contents){return;}var _e=this._text_elem;if(_e){var _f=this._client_width;var _g=this._adjust_height;var _h=this._client_height;var _i=this.chkwidth,_j=this.expwidth,_k=this.expheight,_l=this.iconimgwidth;var _m="left",_n="middle";var _o="lefttext",_p="middle";var _q,_r,_s,_t;var _u=0,_v=_c;var _w=this.chkimgctrl;var _x=this.expimgelem,_y=this._hotkey_txtelem;_q=_i==0?_l:_i;_r=0;_s=_i+_l+_a;_t=_s+_b;if(_w){_w.move(0,0,_i,_h,null,null);}if(this.imgctrl){this.imgctrl.move(0,0,_l,_h,null,null);}if(this.itemexpand&&_x){var _z=this._convertLeftForRtlLayout((_f-_j),_j);_x.setElementPosition(_z,((_h-_k)/2)|0,true);_x.setElementSize(_j,_k);if(_y){_y.setElementVisible(false);}}else if(_y){_y.setElementVisible(true);_y.setElementPosition(_d,0,true);_y.setElementSize(_f,_h);_y.setElementAlignXY(_m,_n);_y.setElementPaddingXY(_s,_r,0,0);}if(_h<=_c){_e.setElementPosition(0,0,true);}_e.setElementSize(_f,_h);_e.setElementAlignXY(_m,_n);_e.setElementPaddingXY(_q,_r,0,0);}};_pPopupMenuItem._getWidth=function(){var _a=this.chkwidth;if(this.textwidth>0){_a+=(this.textwidth+this.gap);}if(this.hotkeywidth>0&&this.expwidth>0){var _b=Math.max(this.hotkeywidth,this.expwidth);_a+=(_b+this.gap);}else{if(this.hotkeywidth>0){_a+=(this.hotkeywidth+this.gap);}_a+=this.expwidth;}return _a;};_pPopupMenuItem._updateAccessibilityLabel=function(_a){var _b=this._getRootComponent(this);var _c=_b._innerdataset.getRowCount();_a._setAccessibilityInfoIndex(_a.datarow+1);_a._setAccessibilityInfoCount(_c);_a._setAccessibilityFlagHasPopup(_a.itemexpand?true:false);};delete _pPopupMenuItem;}if(!nexacro.PopupMenu_Style){nexacro.PopupMenu_Style=function(_a,_b){nexacro.Style.call(this,_a,_b);if(_a){this._target=_a;}this.itemalign=null;this.itemheight=null;this.itembackground=null;this.itemborder=null;this.itembordertype=null;this.itemgradation=null;this.itempadding=null;this.checkboximage=null;this.expandimage=null;this.itemaccessibility=null;this.popuptype=null;this.buttonsize=null;this.buttonalign=null;this.autohotkey=null;};var _pPopupMenuStyle=nexacro.PopupMenu_Style.prototype=nexacro._createPrototype(nexacro.Style,nexacro.PopupMenu_Style);eval(nexacro._createAlignAttributeEvalStr("_pPopupMenuStyle","itemalign"));eval(nexacro._createValueAttributeEvalStr("_pPopupMenuStyle","itemheight"));eval(nexacro._createBackgroundAttributeEvalStr("_pPopupMenuStyle","itembackground"));eval(nexacro._createBorderAttributeEvalStr("_pPopupMenuStyle","itemborder"));eval(nexacro._createBordertypeAttributeEvalStr("_pPopupMenuStyle","itembordertype"));eval(nexacro._createGradationAttributeEvalStr("_pPopupMenuStyle","itemgradation"));eval(nexacro._createPaddingAttributeEvalStr("_pPopupMenuStyle","itempadding"));eval(nexacro._createValueAttributeEvalStr("_pPopupMenuStyle","checkboximage"));eval(nexacro._createValueAttributeEvalStr("_pPopupMenuStyle","expandimage"));eval(nexacro._createAccessibilityAttributeEvalStr("_pPopupMenuStyle","itemaccessibility"));eval(nexacro._createValueAttributeEvalStr("_pPopupMenuStyle","popuptype"));eval(nexacro._createValueAttributeEvalStr("_pPopupMenuStyle","buttonsize"));eval(nexacro._createValueAttributeEvalStr("_pPopupMenuStyle","buttonalign"));eval(nexacro._createValueAttributeEvalStr("_pPopupMenuStyle","autohotkey"));_pPopupMenuStyle.__custom_emptyObject=function(){this.itemalign=null;this.itemheight=null;this.itembackground=null;this.itemborder=null;this.itembordertype=null;this.itemgradation=null;this.itempadding=null;this.checkboximage=null;this.expandimage=null;this.itemaccessibility=null;this.popuptype=null;this.buttonsize=null;this.buttonalign=null;this.autohotkey=null;};_pPopupMenuStyle.__get_custom_style_value=function(){var _a="";var _b=this.itemalign;if(_b&&_b._value.length){_a+="itemalign:"+_b._value+"; ";}var _c=this.itemheight;if(_c&&_c._value.length){_a+="itemheight:"+_c._value+"; ";}var _d=this.itembackground;if(_d&&_d._value.length){_a+="itembackground:"+_d._value+"; ";}var _e=this.itemborder;if(_e&&_e._value.length){_a+="itemborder:"+_e._value+"; ";}var _f=this.itembordertype;if(_f&&_f._value.length){_a+="itembordertype:"+_f._value+"; ";}var _g=this.itemgradation;if(_g&&_g._value.length){_a+="itemgradation:"+_g._value+"; ";}var _h=this.itempadding;if(_h&&_h._value.length){_a+="itempadding:"+_h._value+"; ";}var _i=this.checkboximage;if(_i&&_i._value.length){_a+="checkboximage:"+_i._value+"; ";}var _j=this.expandimage;if(_j&&this.expandimage._value.length){_a+="expandimage:"+_j._value+"; ";}var _k=this.itemaccessibility;if(_k&&_k._value.length){_a+="itemaccessibility:"+_k._value+"; ";}var _l=this.popuptype;if(_l&&_l._value.length){_a+="itemaccessibility:"+_l._value+"; ";}var _m=this.buttonsize;if(_m&&_m._value.length){_a+="buttonsize:"+_m._value+"; ";}var _n=this.buttonalign;if(_n&&_n._value.length){_a+="buttonalign:"+_n._value+"; ";}var _o=this.autohotkey;if(_o&&_o._value.length){_a+="autohotkey:"+_o._value+"; ";}return _a;};nexacro.PopupMenu_CurrentStyle=function(){nexacro.CurrentStyle.call(this);this.itemalign=null;this.itemheight=null;this.itembackground=null;this.itemborder=null;this.itembordertype=null;this.itemgradation=null;this.itempadding=null;this.checkboximage=null;this.expandimage=null;this.itemaccessibility=null;this.popuptype=null;this.buttonsize=null;this.buttonalign=null;this.autohotkey=null;};var _pPopupMenuCurrentStyle=nexacro.PopupMenu_CurrentStyle.prototype=nexacro._createPrototype(nexacro.CurrentStyle,nexacro.PopupMenu_CurrentStyle);_pPopupMenuCurrentStyle.__custom_emptyObject=_pPopupMenuStyle.__custom_emptyObject;_pPopupMenuCurrentStyle.__get_custom_style_value=_pPopupMenuStyle.__get_custom_style_value;delete _pPopupMenuStyle;delete _pPopupMenuCurrentStyle;}if(!nexacro.PopupMenu){nexacro.MenuCloseUpEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"oncloseup";this.fromobject=_a;this.fromreferenceobject=_a;this.isselect=_c;};var _pMenuCloseUpEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuCloseUpEventInfo);nexacro.MenuCloseUpEventInfo.prototype=_pMenuCloseUpEventInfo;_pMenuCloseUpEventInfo._type_name="MenuCloseUpEventInfo";delete _pMenuCloseUpEventInfo;nexacro.MenuClickEventInfo=function(_a,_b,_c,_d,_e,_f){this.eventid=_b||"onmenuclick";this.id=_c;this.fromobject=this.fromreferenceobject=_a;this.index=_e;this.level=_f;this.userdata=_d;};var _pMenuClickEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuClickEventInfo);nexacro.MenuClickEventInfo.prototype=_pMenuClickEventInfo;_pMenuClickEventInfo._type_name="MenuClickEventInfo";delete _pMenuClickEventInfo;nexacro.PopupMenu=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.PopupComponent.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this.datarow=0;this.level=0;this.selfpopup=true;this.beforeindex= -1;this.innerdataset="";this.captioncolumn="";this.checkboxcolumn="";this.enablecolumn="";this.hotkeycolumn="";this.iconcolumn="";this.idcolumn="";this.levelcolumn="";this.userdatacolumn="";this._popupmenu=null;this._hot_key_list=[];this._items=[];this._attached_comp=this;this._is_subcontrol=false;this._previousitem=0;this._popupitemindex= -1;this._popupitempreviousindex= -1;this._closeflag=true;this._want_tab=true;this._selected_itemindex= -1;this._last_mouseleave_iteminfo={bindindex: -1,index: -1,level: -1};this._iconImage_width=0;this._iconImage_height=0;this._innerdataset="";this._lineItems=[];this._is_popupmenu_mouseover=false;this.spinupbutton=null;this.spindownbutton=null;this._spin_height=20;this._scrollIndex=0;this._buttonRect=[];this._buttonRect_elem=[];this._accessibility_role="menu";this._want_arrow=true;this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onmenuclick":1,"onpopup":1,"onmousedown":1,"onmouseup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"onflingstart":1,"onfling":1,"onflingend":1,"onpinchstart":1,"onpinch":1,"onpinchend":1,"onlongpress":1,"onslidestart":1,"onslide":1,"onslideend":1,"oncloseup":1};};var _pPopupMenu=nexacro._createPrototype(nexacro.PopupComponent,nexacro.PopupMenu);nexacro.PopupMenu.prototype=_pPopupMenu;_pPopupMenu._type_name="PopupMenu";nexacro.PopupMenu._default_buttonsize=nexacro._getCachedStyleObj("buttonsize", -1);nexacro.PopupMenu._default_buttonalign=nexacro._getCachedStyleObj("buttonalign","auto");_pPopupMenu.on_create_custom_style=function(){return new nexacro.PopupMenu_Style(this);};_pPopupMenu.on_create_custom_currentStyle=function(){return new nexacro.PopupMenu_CurrentStyle();};_pPopupMenu.on_apply_custom_pseudo=function(_a){var _b=this.currentstyle;var _c=this.on_find_CurrentStyle_font(_a);if(_b.font!=_c){_b.font=_c;this.on_apply_style_font(_c);}var _d=this.on_find_CurrentStyle_letterspace(_a);if(_b.letterspace!=_d){_b.letterspace=_d;this.on_apply_style_letterspace(_d);}var _e=this.on_find_CurrentStyle_color(_a);if(_b.color!=_e){_b.color=_e;this.on_apply_style_color(_e);}var _f=this.on_find_CurrentStyle_itemalign(_a);if(_f&&_b.itemalign!=_f){_b.itemalign=_f;this.on_apply_style_itemalign(_f);}var _g=this.on_find_CurrentStyle_itemheight(_a);if(_g&&_b.itemheight!=_g){_b.itemheight=_g;this.on_apply_style_itemheight(_g);}var _h=this.on_find_CurrentStyle_itemborder(_a);if(_h&&this._compareitemBorder(_b.itemborder,_h)){_b.itemborder=_h;this.on_apply_style_itemborder(_h);}var _i=this.on_find_CurrentStyle_itembordertype(_a);if(_i&&_b.itembordertype!=_i){_b.itembordertype=_i;this.on_apply_style_itembordertype(_i);}var _j=this.on_find_CurrentStyle_itemgradation(_a);if(_j&&_b.itemgradation!=_j){_b.itemgradation=_j;this.on_apply_style_itemgradation(_j);}var _k=this.on_find_CurrentStyle_itempadding(_a);if(_k&&this._compareitemPadding(_b.itempadding,_k)){_b.itempadding=_k;this.on_apply_style_itempadding(_k);}var _l=this.on_find_CurrentStyle_checkboximage(_a);if(_l&&_b.checkboximage!=_l){_b.checkboximage=_l;this.on_apply_style_checkboximage(_l);}var _m=this.on_find_CurrentStyle_expandimage(_a);if(_m&&_b.expandimage!=_m){_b.expandimage=_m;this.on_apply_style_expandimage(_m);}var _n=this.on_find_CurrentStyle_itemaccessibility(_a);if(_n&&_b.itemaccessibility!=_n){_b.itemaccessibility=_n;this.on_apply_style_itemaccessibility(_n);}var _o=this.on_find_CurrentStyle_popuptype(_a);if(_o&&_b.popuptype!=_o){_b.popuptype=_o;}var _p=this.on_find_CurrentStyle_rtlimagemirroring(_a);if(_p!=_b.rtlimagemirroring){_b.rtlimagemirroring=_p;this.on_apply_style_rtlimagemirroring(_p);}var _q=this.on_find_CurrentStyle_buttonsize(_a);if(_q!=_b.buttonsize){_b.buttonsize=_q;this.on_apply_style_buttonsize(_q);}var _r=this.on_find_CurrentStyle_buttonalign(_a);if(_r!=_b.buttonalign){_b.buttonalign=_r;this.on_apply_style_buttonalign(_r);}var _s=this.on_find_CurrentStyle_autohotkey(_a);if(_s!=_b.autohotkey){_b.autohotkey=_s;}if(this.spinupbutton){this.spinupbutton._control_pseudo="";this.spinupbutton._contents_pseudo="";this.spinupbutton.on_apply_pseudo(_a);}if(this.spindownbutton){this.spindownbutton._control_pseudo="";this.spindownbutton._contents_pseudo="";this.spindownbutton.on_apply_pseudo(_a);}};_pPopupMenu._compareitemPadding=function(_a,_b){if(!_a){return true;}if(_a.top!=_b.top||_a.left!=_b.left||_a.right!=_b.right||_a.bottom!=_b.bottom){return true;}return false;};_pPopupMenu._compareitemBorder=function(_a,_b){if(!_a){return true;}if(_a._value!=_b._value){return true;}return false;};_pPopupMenu.on_find_CurrentStyle_popuptype=function(_a){if(this.parent instanceof nexacro.Menu||this.parent instanceof nexacro.PopupMenu){return this.parent.on_find_CurrentStyle_popuptype(_a);}return this._find_pseudo_obj("popuptype",_a);};_pPopupMenu.on_find_CurrentStyle_itemalign=function(_a){if(this.parent instanceof nexacro.Menu||this.parent instanceof nexacro.PopupMenu){return this.parent.on_find_CurrentStyle_itemalign(_a);}return this._find_pseudo_obj("itemalign",_a,"align");};_pPopupMenu.on_find_CurrentStyle_itemheight=function(_a){if(this.parent instanceof nexacro.Menu){return this.parent.on_find_CurrentStyle_popupitemheight(_a);}else if(this.parent instanceof nexacro.PopupMenu){return this.parent.on_find_CurrentStyle_itemheight(_a);}return this._find_pseudo_obj("itemheight",_a);};_pPopupMenu.on_find_CurrentStyle_itembackground=function(_a){if(this.parent instanceof nexacro.Menu){return this.parent.on_find_CurrentStyle_popupitembackground(_a);}else if(this.parent instanceof nexacro.PopupMenu){return this.parent.on_find_CurrentStyle_itembackground(_a);}return itembackground=this._find_pseudo_obj("itembackground",_a,"background");};_pPopupMenu.on_find_CurrentStyle_itemborder=function(_a){if(this.parent instanceof nexacro.Menu){return this.parent.on_find_CurrentStyle_popupitemborder(_a);}else if(this.parent instanceof nexacro.PopupMenu){return this.parent.on_find_CurrentStyle_itemborder(_a);}return this._find_pseudo_obj("itemborder",_a,"border");};_pPopupMenu.on_find_CurrentStyle_itembordertype=function(_a){if(this.parent instanceof nexacro.Menu){return this.parent.on_find_CurrentStyle_popupitembordertype(_a);}else if(this.parent instanceof nexacro.PopupMenu){return this.parent.on_find_CurrentStyle_itembordertype(_a);}return this._find_pseudo_obj("itembordertype",_a,"bordertype");};_pPopupMenu.on_find_CurrentStyle_itemgradation=function(_a){if(this.parent instanceof nexacro.Menu){return this.parent.on_find_CurrentStyle_popupitemgradation(_a);}else if(this.parent instanceof nexacro.PopupMenu){return this.parent.on_find_CurrentStyle_itemgradation(_a);}return this._find_pseudo_obj("itemgradation",_a,"gradation");};_pPopupMenu.on_find_CurrentStyle_itempadding=function(_a){if(this.parent instanceof nexacro.Menu){return this.parent.on_find_CurrentStyle_popupitempadding(_a);}else if(this.parent instanceof nexacro.PopupMenu){return this.parent.on_find_CurrentStyle_itempadding(_a);}return this._find_pseudo_obj("itempadding",_a,"padding");};_pPopupMenu.on_find_CurrentStyle_checkboximage=function(_a){if(this.parent instanceof nexacro.Menu||this.parent instanceof nexacro.PopupMenu){return this.parent.on_find_CurrentStyle_checkboximage(_a);}return this._find_pseudo_obj("checkboximage",_a);};_pPopupMenu.on_find_CurrentStyle_expandimage=function(_a){if(this.parent instanceof nexacro.Menu||this.parent instanceof nexacro.PopupMenu){return this.parent.on_find_CurrentStyle_expandimage("normal");}return this._find_pseudo_obj("expandimage","normal");};_pPopupMenu.on_find_CurrentStyle_popupitembackground=function(_a){if(this.parent instanceof nexacro.PopupMenu){return this.parent.on_find_CurrentStyle_popupitembackground(_a);}return this.parent._find_pseudo_obj("popupitembackground",_a,"background");};_pPopupMenu.on_find_CurrentStyle_popupitempadding=function(_a){if(this.parent instanceof nexacro.PopupMenu){return this.parent.on_find_CurrentStyle_popupitempadding(_a);}return this.parent._find_pseudo_obj("popupitempadding",_a,"padding");};_pPopupMenu.on_find_CurrentStyle_background=function(_a){if(this.parent instanceof nexacro.Menu){return this.parent.on_find_CurrentStyle_popupbackground(_a);}else if(this.parent instanceof nexacro.PopupMenu){if(this.selfpopup){var _b=this;while(_b._is_subcontrol!=false){_b=_b.parent;}return _b._find_pseudo_obj("background",_a,"background");}else{return this._getMenuObj()._find_pseudo_obj("popupbackground",_a,"background");}}return this._find_pseudo_obj("background",_a,"background");};_pPopupMenu.on_find_CurrentStyle_font=function(_a){if(this.parent instanceof nexacro.Menu){return this.parent.on_find_CurrentStyle_popupfont(_a);}else if(this.parent instanceof nexacro.PopupMenu){if(this.selfpopup){var _b=this;while(_b._is_subcontrol!=false){_b=_b.parent;}return _b._find_inherit_pseudo_obj("font",_a,"font");}else{return this._getMenuObj()._find_pseudo_obj("popupfont",_a,"font");}}return this._find_inherit_pseudo_obj("font",_a,"font");};_pPopupMenu.on_find_CurrentStyle_letterspace=function(_a){if(this.parent instanceof nexacro.Menu){return this.parent.on_find_CurrentStyle_letterspace(_a);}else if(this.parent instanceof nexacro.PopupMenu){if(this.selfpopup){var _b=this;while(_b._is_subcontrol!=false){_b=_b.parent;}return _b._find_inherit_pseudo_obj("letterspace",_a,"letterspace");}else{return this._getMenuObj()._find_pseudo_obj("letterspace",_a,"letterspace");}}return this._find_inherit_pseudo_obj("letterspace",_a,"letterspace");};_pPopupMenu.on_find_CurrentStyle_color=function(_a){if(this.parent instanceof nexacro.Menu){return this.parent.on_find_CurrentStyle_popupcolor(_a);}else if(this.parent instanceof nexacro.PopupMenu){if(this.selfpopup){var _b=this;while(_b._is_subcontrol!=false){_b=_b.parent;}return _b._find_inherit_pseudo_obj("color",_a,"color")||this._defaultcolor;}else{return this._getMenuObj()._find_pseudo_obj("popupcolor",_a,"color")||this._defaultcolor;}}return this._find_inherit_pseudo_obj("color",_a,"color")||this._defaultcolor;};_pPopupMenu.on_find_CurrentStyle_border=function(_a){if(this.parent instanceof nexacro.Menu){return this.parent.on_find_CurrentStyle_popupborder(_a);}else if(this.parent instanceof nexacro.PopupMenu){if(this.selfpopup){var _b=this;while(_b._is_subcontrol!=false){_b=_b.parent;}return _b._find_pseudo_obj("border",_a,"border");}else{return this._getMenuObj()._find_pseudo_obj("popupborder",_a,"border");}}return this._find_pseudo_obj("border",_a,"border");};_pPopupMenu.on_find_CurrentStyle_bordertype=function(_a){if(this.parent instanceof nexacro.Menu){return this.parent.on_find_CurrentStyle_popupbordertype(_a);}else if(this.parent instanceof nexacro.PopupMenu){if(this.selfpopup){var _b=this;while(_b._is_subcontrol!=false){_b=_b.parent;}return _b._find_pseudo_obj("bordertype",_a,"bordertype");}else{return this._getMenuObj()._find_pseudo_obj("popupbordertype",_a,"bordertype");}}return this._find_pseudo_obj("bordertype",_a,"bordertype");};_pPopupMenu.on_find_CurrentStyle_padding=function(_a){if(this.parent instanceof nexacro.Menu){return this.parent.on_find_CurrentStyle_popuppadding();}else if(this.parent instanceof nexacro.PopupMenu){if(this.selfpopup){var _b=this;while(_b._is_subcontrol!=false){_b=_b.parent;}return _b._find_pseudo_obj("padding",_a,"padding");}else{return this._getMenuObj()._find_pseudo_obj("popuppadding",_a,"padding");}}return this._find_pseudo_obj("padding",_a,"padding");};_pPopupMenu.on_find_CurrentStyle_itemaccessibility=function(_a){if(this.parent instanceof nexacro.Menu||this.parent instanceof nexacro.PopupMenu){return this.parent.on_find_CurrentStyle_itemaccessibility(_a)||nexacro.Component._default_accessibility;}return this._find_pseudo_obj("itemaccessibility",_a,"accessibility")||nexacro.Component._default_accessibility;};_pPopupMenu.on_find_CurrentStyle_cusor=function(_a){return nexacro.Component.prototype.on_find_CurrentStyle_cusor.call(this._getRootComponent(this));};_pPopupMenu.on_find_CurrentStyle_opacity=function(_a){return nexacro.Component.prototype.on_find_CurrentStyle_opacity.call(this._getRootComponent(this));};_pPopupMenu.on_find_CurrentStyle_rtlimagemirroring=function(_a){return;};_pPopupMenu.on_find_CurrentStyle_buttonsize=function(_a){return this._find_pseudo_obj("buttonsize",_a)||nexacro.PopupMenu._default_buttonsize;};_pPopupMenu.on_find_CurrentStyle_buttonalign=function(_a){return this._find_pseudo_obj("buttonalign",_a)||nexacro.PopupMenu._default_buttonalign;};_pPopupMenu.on_find_CurrentStyle_autohotkey=function(_a){return this._find_pseudo_obj("autohotkey",_a)||nexacro.Menu._default_autohotkey;};_pPopupMenu.on_apply_custom_class=function(){if(this._popupmenu){this._popupmenu.on_apply_prop_class();}};_pPopupMenu.on_apply_style_color=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a=this.on_find_CurrentStyle_color(_b[_d]._pseudo);_b[_d].on_apply_style_color(_a);}}};_pPopupMenu.on_apply_style_font=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a=this.on_find_CurrentStyle_font(_b[_d]._pseudo);_b[_d].on_apply_style_font(_a);}}};_pPopupMenu.on_apply_style_letterspace=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a=this.on_find_CurrentStyle_letterspace(_b[_d]._pseudo);_b[_d].on_apply_style_letterspace(_a);}}};_pPopupMenu.on_apply_style_cursor=function(_a){var _b=this._control_element;if(_b){_b.setElementCursor(_a);}var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].on_apply_style_cursor(_a);}}};_pPopupMenu.on_apply_style_opacity=function(_a){nexacro.Component.prototype.on_apply_style_opacity.call(this);var _b=this._popupmenu;if(_b){_b.on_apply_style_opacity(_a);}};_pPopupMenu.on_apply_style_padding=function(_a){nexacro.Component.prototype.on_apply_style_padding.call(this);var _b=this._popupmenu;if(_b){_b.on_apply_style_padding(_a);}};_pPopupMenu.on_apply_style_itemalign=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a=this.on_find_CurrentStyle_itemalign(_b[_d]._pseudo);_b[_d].on_apply_style_align(_a);}}};_pPopupMenu.on_apply_style_itembackground=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a=this.on_find_CurrentStyle_itembackground(_b[_d]._pseudo);_b[_d].on_apply_style_background(_a);}}};_pPopupMenu.on_apply_style_itemborder=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a=this.on_find_CurrentStyle_itemborder(_b[_d]._pseudo);_b[_d].on_apply_style_border(_a);}}};_pPopupMenu.on_apply_style_itembordertype=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a=this.on_find_CurrentStyle_itembordertype(_b[_d]._pseudo);_b[_d].on_apply_style_bordertype(_a);}}};_pPopupMenu.on_apply_style_itemgradation=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a=this.on_find_CurrentStyle_itemgradation(_b[_d]._pseudo);_b[_d].on_apply_style_gradation(_a);}}};_pPopupMenu.on_apply_style_itempadding=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a=this.on_find_CurrentStyle_itempadding(_b[_d]._pseudo);_b[_d].on_apply_style_padding(_a);}this._reCalcSize();this._calcSpinButton();this._updateMenuItemPosition();}};_pPopupMenu.on_apply_style_itemheight=nexacro._emptyFn;_pPopupMenu.on_apply_style_checkboximage=function(_a){if(!_a){_a=this.currentstyle.checkboximage;}this._load_image(_a,"chk");var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setCheckimage(_a._value);}}if(this._popupmenu){this._popupmenu.style.set_checkboximage(_a);}this._reCalcSize();this._calcSpinButton();this._updateMenuItemPosition();};_pPopupMenu.on_apply_style_expandimage=function(_a){if(!_a){_a=this.currentstyle.expandimage;}var _b=this._load_image(_a,"exp");var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e]._setExpandimage(_b);}}if(this._popupmenu){this._popupmenu.style.set_expandimage(_a);}};_pPopupMenu.on_apply_style_itemaccessibility=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_apply_style_accessibility(_a);}}};_pPopupMenu.on_apply_style_rtlimagemirroring=function(_a){return;};_pPopupMenu.on_apply_prop_rtldirection=function(){nexacro.Component.prototype.on_apply_prop_rtldirection.call(this);var _a=this._rtldirection;var _b=this._items.length;var _c=null;for(var _e=0;_e<_b;_e++ ){_c=this._getItem(_e);_c._setRtlDirection(_a);}var _d=this._popupmenu;if(_d){_d._setRtlDirection(_a);}};_pPopupMenu.on_apply_prop_enable=function(_a){var _b=this.getElement();if(_b){var _c=this._items;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e]._setEnable(_a);}}};_pPopupMenu.on_apply_style_buttonsize=function(_a){if(_a&&_a._value!= -1){this._spin_height=parseInt(_a._value);}else{this._spin_height=20;}this._reCalcSize();this._calcSpinButton();this._updateMenuItemPosition();};_pPopupMenu.on_apply_style_buttonalign=function(_a){if(_a){var _b=_a._value;if(_b=="none"){this._spin_height=0;}else{var _c=this.on_find_CurrentStyle_buttonsize(this._pseudo);if(_c&&_c._value!= -1){this._spin_height=parseInt(_c._value);}else{this._spin_height=20;}}}this._reCalcSize();this._calcSpinButton();this._updateMenuItemPosition();};_pPopupMenu.on_apply_style_autohotkey=nexacro._emptyFn;_pPopupMenu.on_update_style_color=function(){if(!this._is_subcontrol){this.currentstyle.color=this.on_find_CurrentStyle_color(this._pseudo);}var _a=this._items;if(_a){var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].on_update_style_color();}}if(this._popupmenu){this._popupmenu.on_update_style_color();}};_pPopupMenu.on_update_style_font=function(){if(!this._is_subcontrol){this.currentstyle.font=this.on_find_CurrentStyle_font(this._pseudo);}var _a=this._items;if(_a){var _b=_a.length;for(var _d=0;_d<_b;_d++ ){_a[_d].on_update_style_font();}}var _c=this._popupmenu;if(_c){_c.on_update_style_font();}};_pPopupMenu.on_update_style_align=function(){if(!this._is_subcontrol){this.currentstyle.align=this.on_find_CurrentStyle_align(this._pseudo);}var _a=this._items;if(_a){var _b=_a.length;for(var _d=0;_d<_b;_d++ ){_a[_d].on_update_style_align();}}var _c=this._popupmenu;if(_c){_c.on_update_style_align();}};_pPopupMenu.on_update_style_border=function(){this.on_apply_style_border(this.currentstyle.border=this.on_find_CurrentStyle_border(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_border();}};_pPopupMenu.on_update_style_bordertype=function(){this.on_apply_style_bordertype(this.currentstyle.bordertype=this.on_find_CurrentStyle_bordertype(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_bordertype();}};_pPopupMenu.on_update_style_background=function(){this.on_apply_style_background(this.currentstyle.background=this.on_find_CurrentStyle_background(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_background();}};_pPopupMenu.on_update_style_gradation=function(){this.on_apply_style_gradation(this.currentstyle.gradation=this.on_find_CurrentStyle_gradation(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_gradation();}};_pPopupMenu.on_update_style_opacity=function(){this.on_apply_style_opacity(this.currentstyle.opacity=this.on_find_CurrentStyle_opacity(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_opacity();}};_pPopupMenu.on_update_style_shadow=function(){this.on_apply_style_shadow(this.currentstyle.shadow=this.on_find_CurrentStyle_shadow(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_shadow();}};_pPopupMenu.on_update_style_cursor=function(){this.on_apply_style_cursor(this.currentstyle.cursor=this.on_find_CurrentStyle_cursor(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_cursor();}};_pPopupMenu.on_update_style_padding=function(){nexacro.Component.prototype.on_update_style_padding.call(this);var _a=this._popupmenu;if(_a){_a.on_update_style_padding();}};_pPopupMenu.on_update_style_popuptype=function(){this.currentstyle.popuptype=this.on_find_CurrentStyle_popuptype(this._pseudo);var _a=this._popupmenu;if(_a){_a.on_update_style_popuptype();}};_pPopupMenu.on_update_style_itemalign=function(){this.on_apply_style_itemalign(this.currentstyle.itemalign=this.on_find_CurrentStyle_itemalign(this._pseudo));};_pPopupMenu.on_update_style_itemheight=function(){this.on_apply_style_itemheight(this.currentstyle.itemheight=this.on_find_CurrentStyle_itemheight(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_itemheight();}};_pPopupMenu.on_update_style_itembackground=function(){this.on_apply_style_itembackground(this.currentstyle.itembackground=this.on_find_CurrentStyle_itembackground(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_itembackground();}};_pPopupMenu.on_update_style_itemborder=function(){this.on_apply_style_itemborder(this.currentstyle.itemborder=this.on_find_CurrentStyle_itemborder(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_itemborder();}};_pPopupMenu.on_update_style_itembordertype=function(){this.on_apply_style_itembordertype(this.currentstyle.itembordertype=this.on_find_CurrentStyle_itembordertype(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_itembordertype();}};_pPopupMenu.on_update_style_itemgradation=function(){this.on_apply_style_itemgradation(this.currentstyle.itemgradation=this.on_find_CurrentStyle_itemgradation(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_itemgradation();}};_pPopupMenu.on_update_style_itempadding=function(){this.on_apply_style_itempadding(this.currentstyle.itempadding=this.on_find_CurrentStyle_itempadding(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_itempadding();}};_pPopupMenu.on_update_style_checkboximage=function(){this.on_apply_style_checkboximage(this.currentstyle.checkboximage=this.on_find_CurrentStyle_checkboximage(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_checkboximage();}};_pPopupMenu.on_update_style_expandimage=function(){this.on_apply_style_expandimage(this.currentstyle.expandimage=this.on_find_CurrentStyle_expandimage(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_expandimage();}};_pPopupMenu.on_update_style_itemaccessibility=function(){this.on_apply_style_itemaccessibility(this.currentstyle.itemaccessibility=this.on_find_CurrentStyle_itemaccessibility(this._pseudo));var _a=this._popupmenu;if(_a){_a.on_update_style_itemaccessibility();}};_pPopupMenu.on_update_style_buttonsize=function(){this.on_apply_style_buttonsize(this.currentstyle.buttonsize=this.on_find_CurrentStyle_buttonsize(this._pseudo));};_pPopupMenu.on_update_style_buttonalign=function(){this.on_apply_style_buttonalign(this.currentstyle.buttonalign=this.on_find_CurrentStyle_buttonalign(this._pseudo));};_pPopupMenu.on_update_style_autohotkey=function(){this.on_apply_style_autohotkey(this.currentstyle.autohotkey=this.on_find_CurrentStyle_autohotkey(this._pseudo));};_pPopupMenu.on_create_contents=function(){var _a=this.getElement();if(_a){this._createPopupMenu();}if(!this._is_subcontrol){var _b=this.currentstyle;if(_b.checkboximage){this._load_image(_b.checkboximage,"chk");}if(_b.expandimage){this._load_image(_b.expandimage,"exp");}}if(this._innerdataset&&this.enablecolumn){this.on_apply_enablecolumn();}};_pPopupMenu.on_created_contents=function(){var _a=this.getElement();if(_a){if(!this._innerdataset&&this.innerdataset){this._innerdataset=this._findDataset(this.innerdataset);this.on_apply_innerdataset();}var _b=this._lineItems;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_created();}}if(nexacro._enableaccessibility){this.on_apply_style_itemaccessibility(this.on_find_CurrentStyle_itemaccessibility(this._pseudo));this._setAccessibilityInfoLevel(this.level);}this.on_apply_prop_rtldirection();}};_pPopupMenu.on_destroy_contents=function(){this._deletePopupMenu();if(this._innerdataset){this._innerdataset._removeEventHandler("onrowposchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("oncolumnchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._callbackFromDataset,this);this._innerdataset=null;this.innerdataset=null;}this._hot_key_list=[];this._attached_comp=null;};_pPopupMenu.set_captioncolumn=function(_a){if(_a!=this.captioncolumn){this.captioncolumn=_a;var _b=this._popupmenu;if(_b){_b.set_captioncolumn(_a);}this.on_apply_captioncolumn();}};_pPopupMenu.on_apply_captioncolumn=function(){var _a=this._innerdataset;if(_a){this._createPopupMenu();var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setText(_a.getColumn(_b[_d].datarow,this.captioncolumn)||"");}}}};_pPopupMenu.set_checkboxcolumn=function(_a){if(_a!=this.checkboxcolumn){this.checkboxcolumn=_a;var _b=this._popupmenu;if(_b){_b.set_checkboxcolumn(_a);}this.on_apply_checkboxcolumn();}};_pPopupMenu.on_apply_checkboxcolumn=function(){var _a=this._innerdataset;if(_a){this._createPopupMenu();var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setValue(_a.getColumn(_b[_d].datarow,this.checkboxcolumn)||false);}}}};_pPopupMenu.set_enablecolumn=function(_a){if(_a!=this.enablecolumn){this.enablecolumn=_a;var _b=this._popupmenu;if(_b){_b.set_enablecolumn(_a);}this.on_apply_enablecolumn();}};_pPopupMenu.on_apply_enablecolumn=function(){var _a=this._innerdataset;if(_a){this._createPopupMenu();var _b=this._items;if(_b){var _c=_b.length;for(var _e=0;_e<_c;_e++ ){var _d=_a.getColumn(_b[_e].datarow,this.enablecolumn);_d=_d==false||_d=="false"?false:true;_b[_e].set_enable(_d);}}}};_pPopupMenu.set_hotkeycolumn=function(_a){if(_a!=this.hotkeycolumn){this.hotkeycolumn=_a;var _b=this._popupmenu;if(_b){_b.set_hotkeycolumn(_a);}this.on_apply_hotkeycolumn();}};_pPopupMenu.on_apply_hotkeycolumn=function(){var _a=this._innerdataset;if(_a){this._createPopupMenu();var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setHotkey(_a.getColumn(_b[_d].datarow,this.hotkeycolumn)||"");}}}};_pPopupMenu.set_iconcolumn=function(_a){if(_a!=this.iconcolumn){this.iconcolumn=_a;if(this._popupmenu){this._popupmenu.set_iconcolumn(_a);}this.on_apply_iconcolumn();}};_pPopupMenu.on_apply_iconcolumn=function(){var _a=this._innerdataset;if(_a){this._createPopupMenu();var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setIcon(_a.getColumn(_b[_d].datarow,this.iconcolumn)||"");}}}};_pPopupMenu.set_idcolumn=function(_a){if(_a!=this.idcolumn){this.idcolumn=_a;if(this._popupmenu){this._popupmenu.set_idcolumn(_a);}this.on_apply_idcolumn();}};_pPopupMenu.on_apply_idcolumn=function(){var _a=this._innerdataset;if(_a){this._createPopupMenu();var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].id=_a.getColumn(_b[_d].datarow,this.idcolumn)||"";}}}};_pPopupMenu.set_levelcolumn=function(_a){if(_a!=this.levelcolumn){this.levelcolumn=_a;this.on_apply_levelcolumn();}};_pPopupMenu.on_apply_levelcolumn=function(){var _a=this._innerdataset;if(_a){this._createPopupMenu();var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].level=_a.getColumn(_b[_d].datarow,this.levelcolumn)|| -1;}}}};_pPopupMenu.set_userdatacolumn=function(_a){if(_a!=this.userdatacolumn){this.userdatacolumn=_a;var _b=this._popupmenu;if(_b){_b.set_userdatacolumn(_a);}this.on_apply_userdatacolumn();}};_pPopupMenu.on_apply_userdatacolumn=function(){var _a=this._innerdataset;if(_a){this._createPopupMenu();var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].userdata=_a.getColumn(_b[_d].datarow,this.userdatacolumn)||null;}}}};_pPopupMenu.setInnerDataset=function(_a){if(!_a){this._innerdataset=null;this.innerdataset="";this.on_apply_innerdataset();}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this.innerdataset=_a.id;this.on_apply_innerdataset();}};_pPopupMenu._setInnerDatasetStr=function(_a){if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}};_pPopupMenu.getInnerDataset=function(){return this._innerdataset;};_pPopupMenu.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(_a!=this.innerdataset){if(!_a){this._innerdataset=null;this.innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this.innerdataset=_a;}this.on_apply_innerdataset();}else if(this.innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this.innerdataset);this.on_apply_innerdataset();}};_pPopupMenu.on_apply_innerdataset=function(){var _a=this._innerdataset;if(_a){var _b=this._callbackFromDataset;_a._setEventHandler("onrowposchanged",_b,this);_a._setEventHandler("oncolumnchanged",_b,this);_a._setEventHandler("onrowsetchanged",_b,this);}this._createPopupMenu();this.beforeindex= -1;this.beforevalue="";this.beforeText="";};_pPopupMenu.on_mouseleave_basic_action=function(_a){if(_a){if(this._apply_pushed_pseudo&&this._is_push){this._stat_change("notpush","normal");this._is_pushed_area=false;}else if(!this._isSelected()){var _b=this;var _c=true;while(_b){if(_b._is_alive==false){_c=false;break;}_b=_b.parent;}if(_c){this._stat_change("","normal");}var _d=this._items&&(this._previousitem!= -1)&&(this._previousitem<this._items.length);var _e=_d?this._items[this._previousitem]:null;var _f=this._getRootComponent(this)._menuitemonmouseenter;if(_e&&_f){if(_e!=_f){while(_f){if(this==_f){_e._stat_change("enable","mouseover");break;}_f=_f.parent;}}else if(_f.parent._popupmenu){var _g=_f.parent._popupmenu._items;var _h=_f.parent._popupmenu._previousitem;_d=_g&&(_h!= -1)&&(_h<_g.length);if(_d&&_g[_h]&&(_g[_h]._pseudo=="mouseover")){_e._stat_change("enable","mouseover");}else if(_f.parent._popupmenu&&_f.parent._popupmenu._is_popup()){_e._stat_change("enable","mouseover");}_g=null;_h=null;}}_e=null;_f=null;_d=null;}}else{if(this._apply_pushed_pseudo&&this._is_push){this._stat_change("notpush","normal");this._is_pushed_area=false;}else if(this._isSelected()){this._stat_change("select","selected");}else{if(this._is_form){this._stat_change("","normal");}else{if(this._find_lastFocused(this)==this){this._stat_change("","normal");}else{this._stat_change("notfocus","normal");}}}}};_pPopupMenu.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var _m=_l._overedobj||_l;var _n=new nexacro.MenuMouseEventInfo(this,"onlbuttondown",_m.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m.parent.level,_m.index,_m._bindindex);return this.onlbuttondown._fireUserEvent(this,_n);}return false;};_pPopupMenu.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _m=_l._overedobj||_l;var _n=new nexacro.MenuMouseEventInfo(_a,"onlbuttonup",_m.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m.parent.level,_m.index,_m._bindindex);return this.onlbuttonup._fireUserEvent(this,_n);}return false;};_pPopupMenu.on_fire_user_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onmousedown&&this.onmousedown._has_handlers){var _m=_l._overedobj||_l;var _n=new nexacro.MenuMouseEventInfo(this,"onmousedown",_m.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m.parent.level,_m.index,_m._bindindex);return this.onmousedown._fireUserEvent(this,_n);}return false;};_pPopupMenu.on_fire_user_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onmouseup&&this.onmouseup._has_handlers){var _m=_l._overedobj||_l;var _n=new nexacro.MenuMouseEventInfo(this,"onmouseup",_m.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m.parent.level,_m.index,_m._bindindex);return this.onmouseup._fireUserEvent(this,_n);}return false;};_pPopupMenu.on_fire_user_onmouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onmouseenter&&this.onmouseenter._has_handlers){var _m=_l._overedobj||_l;var _n=new nexacro.MenuMouseEventInfo(this,"onmouseenter",_m.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m.parent.level,_m.index,_m._bindindex);return this.onmouseenter._fireUserEvent(this,_n);}};_pPopupMenu.on_fire_user_onmouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onmouseleave&&this.onmouseleave._has_handlers){var _m=this._last_mouseleave_iteminfo;var _n=_l._overedobj||_l;var _o=new nexacro.MenuMouseEventInfo(this,"onmouseleave",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m.level,_m.index,_m.bindindex);return this.onmouseleave._fireUserEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_onmousemove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){var _m=this._getRootComponent(this);if(_m._menuitemonmouseenter&&(_m._menuitemonmouseenter!=_l)&&(_l instanceof nexacro.PopupMenuItem)){this._process_mousemove(_l);}_m=null;if(this.onmousemove&&this.onmousemove._has_handlers){var _n=_l._overedobj||_l;var _o=new nexacro.MenuMouseEventInfo(this,"onmousemove",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_k.parent.level,_n.index,_n._bindindex);return this.onmousemove._fireUserEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_ondrag=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.ondrag&&this.ondrag._has_handlers){var _n=this._getDragData();var _o=_m._overedobj||_m;var _p=new nexacro.MenuDragEventInfo(this,"ondrag",_l.id,_n,null,this,_m,_k,_l,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_m.parent.level,_o.index,_o._bindindex);return [this.ondrag._fireUserEvent(this,_p),this,_m,_n,_p.userdata];}return [false];};_pPopupMenu.on_fire_user_ondrop=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(this.ondrop&&this.ondrop._has_handlers){var _q=_p._overedobj||_p;var _r=new nexacro.MenuDragEventInfo(this,"ondrop",_q.id,_c,_d,_a,_b,_o,_p,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_p.parent.level,_q.index,_q._bindindex);return this.ondrop._fireUserEvent(this,_r);}return false;};_pPopupMenu.on_fire_user_ondragenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(this.ondragenter&&this.ondragenter._has_handlers){var _q=_p._overedobj||_p;var _r=new nexacro.MenuDragEventInfo(this,"ondragenter",_q.id,_c,_d,_a,_b,_o,_p,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_p.parent.level,_q.index,_q._bindindex);return this.ondragenter._fireUserEvent(this,_r);}return false;};_pPopupMenu.on_fire_user_ondragleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(this.ondragleave&&this.ondragleave._has_handlers){var _q=this._last_mouseleave_iteminfo;var _r=new nexacro.MenuDragEventInfo(this,"ondragleave",refer_comp.id,_c,_d,_a,_b,_o,_p,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_q.level,_q.index,_q.bindindex);return this.ondragleave._fireUserEvent(this,_r);}return false;};_pPopupMenu.on_fire_user_ondragmove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(this.ondragmove&&this.ondragmove._has_handlers){var _q=_p._overedobj||_p;var _r=new nexacro.MenuDragEventInfo(this,"ondragmove",_q.id,_c,_d,_a,_b,_o,_p,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_p.parent.level,_q.index,_q._bindindex);return this.ondragmove._fireUserEvent(this,_r);}return false;};_pPopupMenu.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f){var _g=this._popupmenu_find(this);var _h=this._item_find(_g);var _i=this._popupmenu_visible(this);var _j=_h.length-1;var _k,_l=this._popupitemindex;var _m=this._getPopupType();var _n=this._getRootComponent(this);var _o=nexacro.Event;switch(_a){case _o.KEY_TAB:if(!_i){if(!_d&&this._popupitemindex==_j||_d&&this._popupitemindex<0){this._want_tab=false;this._closePopup();}else{if(_d==false){this._popupitemindex++ ;}else{this._popupitemindex-- ;}if(_h[this._popupitemindex]){_n._menuitemonmouseenter=_h[this._popupitemindex];this._item_focus(_h[this._popupitemindex],true);}else{this._do_defocus(this._last_focused,true);this._on_focus(true);}}this.parent._getWindow()._keydown_element._event_stop=true;break;}else{if(!_d&&_g._popupitemindex==_j||_d&&_g._popupitemindex==0){_g._closePopup();var _g=this._popupmenu_find(this);var _h=this._item_find(_g);_g._item_focus(_h[_g._previousitem],true);_g._popupitemindex=_g._previousitem;}else{if(_d){_g._popupitemindex-- ;}else{_g._popupitemindex++ ;}_n._menuitemonmouseenter=_h[_g._popupitemindex];_g._item_focus(_h[_g._popupitemindex],true);}this.parent._getWindow()._keydown_element._event_stop=true;break;}default:break;}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f);};_pPopupMenu.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f){if(this._is_subcontrol==false){var _g=this._popupmenu_find(this);var _h=this._item_find(_g);var _i=_h.length-1;var _j,_k=this._popupitemindex;var _l=this._getPopupType();var _m=this._getRootComponent(this);var _n=nexacro.Event;switch(_a){case _n.KEY_UP:if(_g._is_spin_visible){this._do_scroll(_a,_g);}this._popupitemindex=_m._popupitemindex;if(this._popupitemindex== -1){this._popupitemindex=0;}else{this._popupitemindex-- ;}if(this._popupitemindex<0){this._popupitemindex=_i;}_m._menuitemonmouseenter=_h[this._popupitemindex];_g._previousitem=this._popupitemindex;_g._item_focus(_h[this._popupitemindex],true);break;case _n.KEY_DOWN:if(_g._is_spin_visible){this._do_scroll(_a,_g);}this._popupitemindex=_m._popupitemindex;this._popupitemindex++ ;if(this._popupitemindex>_i){this._popupitemindex=0;}_m._menuitemonmouseenter=_h[this._popupitemindex];_g._previousitem=this._popupitemindex;_g._item_focus(_h[this._popupitemindex],true);break;case _n.KEY_LEFT:if((_g.parent instanceof nexacro.PopupMenu)==false){break;}else{_g._closePopup();this._popupitemindex=_g.parent._previousitem;var _h=this._item_find(_g.parent);_m._menuitemonmouseenter=_h[this._popupitemindex];_h[this._popupitemindex].parent._item_focus(_h[this._popupitemindex],true);_h[this._popupitemindex].parent._popupitemindex=this._popupitemindex;}break;case _n.KEY_RIGHT:if(_l=="none"){break;}this._popupitemindex=_m._popupitemindex;var _o=_h[this._popupitemindex];var _p=_o?this._popupmenuitem_extend(_o):null;var _q=_m._menuitemonmouseenter?_m._menuitemonmouseenter.parent:null;if(_q){if(_q._is_popupmenu_mouseover){var _r=this._popupmenuitem_mouseover(_a,_g,_h);if(_r){_g=_r.pThis;_p=_r.popupexpand;_h=_r.item;_o=_h[this._popupitemindex];}_r=null;}_q._is_popupmenu_mouseover=false;}_q=null;if(_p==true&&_o&&_o.enable){_g._previousitem=this._popupitemindex;_g.on_notify_menuitem_onmouseenter(_o);_g._is_popupmenu_mouseover=false;this._item_focus(_o,true);this._popupitemindex=0;_h=this._item_find(_g);_o=_h[this._popupitemindex];_m._menuitemonmouseenter=_o;_g._item_focus(_o,true);_g._popupitemindex=this._popupitemindex;}break;case _n.KEY_ENTER:if(_l=="none"){break;}var _o=_m._menuitemonmouseenter;var _q=_m._menuitemonmouseenter?_m._menuitemonmouseenter.parent:null;if(_o&&_q){if(_q._is_popupmenu_mouseover){_g=this._popupmenuitem_mouseover(_a,_g,_h);_h=this._item_find(_g);}_q._is_popupmenu_mouseover=false;if(_g instanceof nexacro.Menu){_g.on_notify_menuitem_onlbuttondown(_o);}else if(_o.enable){_g._previousitem=this._popupitemindex;if(!_o.itemexpand){_g.on_notify_menuitem_onclick(_o);}else{_g.on_notify_menuitem_onlbuttondown(_o);}_g._is_popupmenu_mouseover=false;this._popupitemindex=0;_g=this._popupmenu_find(this);_h=this._item_find(_g);_o=_h[this._popupitemindex];_m._menuitemonmouseenter=_o;_g._item_focus(_o,true);_g._popupitemindex=this._popupitemindex;this._popupitempreviousindex=this._popupitemindex;}}break;default:break;}return nexacro.Component.prototype.on_fire_sys_onkeydown.call(this,_a,_b,_c,_d,_e,_f);}};_pPopupMenu._do_defocus=function(_a,_b){var _c=this._getWindow();_c._removeFromCurrentFocusPath(_a,true);if(_b){_c._removeFromCurrentFocusPath(this,false);}};_pPopupMenu._do_scroll=function(_a,_b){var _c=this._item_find(_b);var _d=_c?_c.length: -1;if(_d>0){var _e=nexacro.Event;switch(_a){case _e.KEY_UP:if(this._popupitemindex==0){var _f=this._getViewItemQty(_b,_d);_b._scrollIndex=_d-_f;if(_b._scrollIndex> -1){_b._reCalcSize();_b._calcSpinButton();_b._updateMenuItemPosition();}_f=null;}else if(this._popupitemindex==_b._scrollIndex){_b._spinup();}break;case _e.KEY_DOWN:var _f=this._getViewItemQty(_b,_d);if(this._popupitemindex==(_d-1)){_b._scrollIndex=0;_b._reCalcSize();_b._calcSpinButton();_b._updateMenuItemPosition();}else if(_f==(this._popupitemindex-_b._scrollIndex+1)){_b._spindown();}_f=null;break;default:break;}}_d=null;_c=null;};_pPopupMenu.on_notify_menuitem_onclick=function(_a,_b){var _c=this._getPopupType();this._previousitem=_a.index;if(_a.enable==false||_c=="none"){return;}if(_a.parent){_a.parent._is_popupmenu_mouseover=true;}if(_a.itemexpand==false){if(this.parent&&this.parent.enable==true){if(this.parent instanceof nexacro.Menu){{this.parent.on_notify_menuitem_onclick(_a,_b);}}else if(!(this.parent instanceof nexacro.PopupMenu)){if(this.onmenuclick&&this.onmenuclick._has_handlers){var _d=this._getRootComponent(_a);this.on_fire_onitemclick(_d,"onmenuclick",_a.id,_a.userdata,_a.index,_a.parent.level);this._popupitemindex= -1;}}else{this.parent.on_notify_menuitem_onclick(_a,_b);}this._closeAllPopup();}}};_pPopupMenu.on_notify_menuitem_onmouseenter=function(_a,_b){if(_a.parent){_a.parent._is_popupmenu_mouseover=true;}var _c=this._popupmenu;var _d=this._getRootComponent(_a);_d._popupitemindex=_a.index;_d._menuitemonmouseenter=_a;if(_c&&_c._is_popup()){if(this.beforeindex!=_a.index){_c.cancelPopup();this._closeflag=true;this._showPopup(_a);}}else{if(this._getPopupType()!="none"){this._closeflag=true;this._showPopup(_a);}}this.beforeindex=_a.index;if(!nexacro._enableaccessibility){var _e=this._items;var _f=this.parent._items;this._item_focus(_e[_a.index],true);if(this._popupitempreviousindex== -1||this._popupitemindex== -1){this._popupitempreviousindex=0;this._popupitemindex=0;}if(_e.length<=this._popupitemindex){this._popupitemindex=_e.length-1;this._popupitempreviousindex=this._popupitemindex;}if(_f&&_f[this.parent._previousitem]){this._item_focus(_f[this.parent._previousitem],true);}if(_c&&_c._is_popup()==true){this._popupitemindex= -1;}else{this._popupitemindex=_a.index;}this._previousitem=_a.index;var _g=this._getRootComponent(this);if(_g instanceof nexacro.Menu){var _h=_g._items;if(_h[_g._menuitemindex]){_h[_g._menuitemindex].selected=true;this._item_focus(_h[_g._menuitemindex],true);}}}};_pPopupMenu.on_notify_menuitem_onmouseleave=function(_a,_b){if(this._popupmenu&&this._popupmenu._isVisible()){this._item_focus(_a,true);}var _c=this._getRootComponent(this);_c._last_mouseleave_iteminfo.index=_a.index;_c._last_mouseleave_iteminfo.bindindex=_a._bindindex;_c._last_mouseleave_iteminfo.level=_a.parent.level;};_pPopupMenu.on_notify_menuitem_onlbuttondown=function(_a,_b){this._menuitemonmouseenter=_a;this._previousitem=_a.index;var _c=this._popupmenu;if(_c){if(_c._is_popup()){if(this.beforeindex!=_a.index){this.beforeindex=_a.index;}_c.cancelPopup();this._menuitemindex=_a.index;this._popupitemindex= -1;}}if(_a.itemexpand){this._closeflag=true;this._showPopup(_a);if(this._getRootComponent(_a) instanceof nexacro.Menu){this._getRootComponent(_a)._popupitemindex=_a.index;}}this._item_focus(_a,true);};_pPopupMenu.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f){this._selected_itemindex=_e;var _g=new nexacro.MenuClickEventInfo(_a,_b,_c,_d,_e,_f);this.onmenuclick._fireEvent(this,_g);};_pPopupMenu._on_bubble_mousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(!this._is_alive){return;}if(_l===undefined){if(!_n){_n=this;if(!_n._is_reference_control){_n=this._getReferenceComponent(_n);}}if(this.visible&&this._isEnable()){var _p=this._getClientXY(_h,_i);_l=this.on_fire_user_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_p[0],_p[0],this,_n);var _q=this._getFromComponent(this);if(_l!==true){if(!_q.onmousewheel||(_q.onmousewheel&&!_q.onmousewheel.defaultprevented)){var _r=this.on_fire_sys_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_p[0],_p[0],this,_n);if(_r){return false;}if(this.vscrollbar&&this.vscrollbar.enable){var _s=this.vscrollbar;var _t=_s._pos;this._setVScrollDefaultAction(_s,_c);var _u=_s._pos;if(_t!=_u){return false;}}if(nexacro.OSVersion=="Mac OS"){if(this.hscrollbar&&this.hscrollbar.enable){var _v=this.hscrollbar;var _w=_v._pos;this._setHScrollDefaultAction(_v,_b);var _x=_v._pos;if(_w!=_x){return false;}}}return;}if(_l===false){_l=undefined;}if(!_q.onmousewheel||(_q.onmousewheel&&!_q.onmousewheel.stoppropagation)){if(this.parent&&!this.parent._is_application){var _y=this._getRecalcCanvasXY(_a,_h,_i);_h=_y[0];_i=_y[1];if(this._is_subcontrol){return this.parent._on_bubble_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,null,_n,_o);}else{return this.parent._on_bubble_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,false,this,_n,_o);}}}}}}else{if(this.visible&&this._isEnable()){var _p=this._getClientXY(_h,_i);_l=this.on_fire_user_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_p[0],_p[0],_m,_n);var _q=this._getFromComponent(this);if(_l!==true){if(!_q.onmousewheel||(_q.onmousewheel&&!_q.onmousewheel.defaultprevented)){var _r=this.on_fire_sys_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_p[0],_p[0],_m,_n);if(_r){return false;}if(this._isWheelScrollable(_c)&&this.vscrollbar&&this.vscrollbar.enable){var _s=this.vscrollbar;var _t=_s._pos;this._setVScrollDefaultAction(_s,_c);var _u=_s._pos;if(_t!=_u){return false;}}if(nexacro.OSVersion=="Mac OS"){if(this._isWheelScrollable(_b)&&this.hscrollbar&&this.hscrollbar.enable){var _v=this.hscrollbar;var _w=_v._pos;this._setHScrollDefaultAction(_v,_b);var _x=_v._pos;if(_w!=_x){return false;}}}return;}if(!_q.onmousewheel||(_q.onmousewheel&&!_q.onmousewheel.stoppropagation)){if(this.parent&&!this.parent._is_application){_h+=this._adjust_left-this._scroll_left||0;_i+=this._adjust_top-this._scroll_top||0;return this.parent._on_bubble_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,false,_m,_n,_o);}}}}}};_pPopupMenu.cancelPopup=function(){var _a=this.beforeindex;this._closePopup();if(this._items[_a]&&this._items[_a].notexpand&&(nexacro._enableaccessibility==false)){var _b=this._getRootComponent(this);if(_b instanceof nexacro.Menu){var _c=_b._items;for(var _d=0,_e=_c.length;_d<_e;_d++ ){_c[_d].selected=false;this._item_focus(_c[_d],false);}}}};_pPopupMenu.isPopup=function(){return this._is_popup();};_pPopupMenu.trackPopup=function(_a,_b,_c,_d){if(this.isPopup()){return;}this._selected_itemindex= -1;this._track_capture=_d===false?false:true;this._destroySpinButton();this._createSpinbutton();var _e=this._getAlignPosition(_a,_b,_c);if(!this._is_root_comp_menu()){this._adjust_left=_e[0];this._adjust_top=_e[1];}this._reCalcSize();this.on_created();{var _f=0;var _g=this._getRootForm();if(_g&&_g.vscrollbar){_f=_g.vscrollbar.pos;}_b-=_f;}this._adjustPopupPosition( +_a, +_b,_c);this._calcSpinButton();this._updateMenuItemPosition();this._closeflag=true;this.setFocus();};_pPopupMenu.trackPopupByComponent=function(_a,_b,_c,_d,_e){if(this.isPopup()){return;}this._selected_itemindex= -1;this._track_capture=_e===false?false:true;this._destroySpinButton();this._createSpinbutton();this._reCalcSize();this.on_created();this._track_on=true;var _f=this._getAlignPosition(_b,_c,_d);this._calcSpinButton();this._updateMenuItemPosition();var _g=_f[0]<0?0:_f[0];var _h=_f[1]<0?0:_f[1];var _i=_h;var _j=this._width;var _k=this._height;var _l=_g+_j;var _m=_i+_k+(_a._adjust_top);{var _n=0;var _o=this._getRootForm();if(_o&&_o.vscrollbar){_n=_o.vscrollbar.pos;}_m-=_n;}var _p=this._getWindow();var _q=_p.clientWidth;var _r=_p.clientHeight;var _s=application.mainframe;var _t=0;var _u=0;if(_s&&nexacro.Browser=="Runtime"){var _v=_s.currentstyle.border;var _w=_v?(_v._top_width+_v._bottom_width):0;_t=_s.statusbar?_s.statusbar._client_height:0;_u=_s.titlebar?_s.titlebar._client_height:0;_r=_r-(_u+_t)-_w;}var _x=_l-_q;if(_l>_q&&_g>_x){_g=_g-_x;}if(_m>_r){var _o=this._getRootForm();var _n=_o.vscrollbar?_o.vscrollbar.pos:0;var _y=_o.vscrollbar?_o.vscrollbar.max:0;_i=(_r-_a._adjust_top-_a._adjust_height)-_k+_i+_n;if(_i<0){var _z=nexacro._getElementPositionInFrame(_a.getElement());if(_y>0){_i=(_r-_k-_z.y)+_t;if(nexacro.Browser=="Runtime"){_i+=_u+_w;}}else{_i= -(_h+_k)+(_r-_a._adjust_top);}}}this._track_on=true;var _aa=this._getCumulativeZoomFactor()/100.0;var _ab=this.getElement();if(_ab.setZoom){_ab.setZoom(_aa*100);}else if(nexacro.ScrollableContainerElement.prototype.setZoom){nexacro.ScrollableContainerElement.prototype.setZoom.call(_ab,_aa*100);}this._popupBy(_a,_g,_i,this._width,this._height);this._closeflag=true;this.setFocus();};_pPopupMenu.on_change_containerRect=function(){};_pPopupMenu._getDlgCode=function(_a,_b,_c,_d){var _e=this._want_arrow;var _f=this._want_tab;this._want_tab=true;return {want_tab:_f,want_return:true,want_escape:false,want_chars:false,want_arrows:_e};};_pPopupMenu._get_apply_padding_size=function(){var _a=this.on_find_CurrentStyle_padding(this._pseudo);var _b=0,_c=0,_d=0,_e=0;if(_a){_b=_a.left;_c=_a.right;_d=_a.bottom;_e=_a.top;}var _f=this._width+(_b+_c);var _g=this._height+(_e+_d);return {width:_f,height:_g};};_pPopupMenu._loaded_expImage=function(_a,_b,_c){this._expImage_width=_b;this._expImage_height=_c;if(this._is_popup()){var _d=this.getElement();if(_d){this._reCalcSize();this._updateMenuItemPosition();var _e=this._get_apply_padding_size();_d.setElementSize(_e.width,_e.height);}}};_pPopupMenu._loaded_chkImage=function(_a,_b,_c){this._chkImage_width=_b;this._chkImage_height=_c;if(this._is_popup()){var _d=this.getElement();if(_d){this._reCalcSize();this._updateMenuItemPosition();var _e=this._get_apply_padding_size();_d.setElementSize(_e.width,_e.height);}}};_pPopupMenu._loaded_iconImage=function(_a,_b,_c){this._iconImage_width=_b;this._iconImage_height=_c;if(this._is_popup()){var _d=this.getElement();if(_d){this._reCalcSize();this._updateMenuItemPosition();var _e=this._get_apply_padding_size();_d.setElementSize(_e.width,_e.height);}}};_pPopupMenu._load_image=function(_a,_b){var _c=this._control_element;if(_c){var _d=(_a&&_a!="")?_a._value:"";if(_d){_d=nexacro._getURIValue(_d);_d=nexacro._getImageLocation(_d,this._getRefFormBaseUrl());var _e;if(_b=="exp"){_e=nexacro._getImageSize(_d,this._loaded_expImage,this,undefined,(_a?_a._value:""));if(_e){this._expImage_width=_e.width;this._expImage_height=_e.height;}}else if(_b=="chk"){_e=nexacro._getImageSize(_d,this._loaded_chkImage,this,undefined,(_a?_a._value:""));if(_e){this._chkImage_width=_e.width;this._chkImage_height=_e.height;}}else if(_b=="icon"){_e=nexacro._getImageSize(_d,this._loaded_iconImage,this,undefined,(_a?_a._value:""));if(_e){this._iconImage_width=_e.width;this._iconImage_height=_e.height;}}return _d;}}};_pPopupMenu._getMaxTextSize=function(_a){var _b=[];_b[0]=0;_b[1]=0;var _c=this._innerdataset;if(_c){var _d=this._items;if(_d){var _e=_d.length;var _f=this.on_find_CurrentStyle_font(this._pseudo);var _g=this.on_find_CurrentStyle_letterspace(this._pseudo);for(var _j=0;_j<_e;_j++ ){var _h=_c.getColumn(_d[_j].datarow,_a);if(_h===undefined){break;}var _i=nexacro._getTextSize2(_g,_h,_f,null,null,null,_d[_j]._rtldirection);_b[0]=_i[0]>_b[0]?_i[0]:_b[0];_b[1]=_i[1]>_b[1]?_i[1]:_b[1];}}}return _b;};_pPopupMenu._getItem=function(_a){var _b=this._items;var _c=_b.length;if(_a>=0&&_b.length>0){return _b[_a];}return null;};_pPopupMenu._getViewItemQty=function(_a,_b){if(!_a){return;}var _c=0;var _d=0;var _e=this.height-this._spin_height-this._spin_height;for(i=_a._scrollIndex;i<_b;i++ ){_d+=_a._buttonRect[i].height;_c=i-_a._scrollIndex;if(_d>_e){break;}}_e=null;_d=null;return _c;};_pPopupMenu._createPopupMenu=function(){var _a=this.getElement();if(_a){this._deletePopupMenu();var _b=this._innerdataset;if(_b&&this.levelcolumn&&this.captioncolumn&&this.idcolumn){var _c=0;var _d=0;if(this.currentstyle.itemheight&&this.currentstyle.itemheight._value!=""){_d=parseInt(this.currentstyle.itemheight._value,10)|0;}var _e=0,_f=_b.getRowCount();var _g=this.datarow;for(var _t=_g;_t<_f;_t++ ){var _h=_b.getColumn(_t,this.levelcolumn);var _i=_b.getColumn(_t,this.idcolumn);var _j=_b.getColumn(_t,this.hotkeycolumn);if(!this._is_subcontrol&&_j){if(_t==_f-1||_h>=_b.getColumn(_t+1,this.levelcolumn)){this._set_hotkey(_i,_j);}}if(_h==this.level){var _k=_b.getColumn(_t,this.captioncolumn);if(_k=="-"){var _l=new nexacro.StaticCtrl("-","absolute",0,_c,0,1,null,null,this);_l.style.set_background("black");_l.createComponent();_l._bLine=true;_c+=1;this._lineItems.push(_l);continue;}var _m=new nexacro.PopupMenuItem("popup","absolute",0,_c,0,_d,null,null,this);_m._is_subcontrol=true;_c+=_d;_m._bindindex=_t;_m.index=_e++ ;_m.datarow=_t;_m.level=_h;var _n=_b.getColumn(_t,this.enablecolumn);_m.set_enable(_n==false||_n=="false"?false:true);if(_k){_m._setText(_k);}var _o=_b.getColumn(_t,this.checkboxcolumn);if(_o){_m._setValue(nexacro._toBoolean(_o));}if(_i){_m.id=_i;}if(_j){_m._setHotkey(_j);}var _p=_b.getColumn(_t,this.userdatacolumn);_m.userdata=_p;if(_p){_m._setUserdata(_p);}var _q=_b.getColumn(_t,this.iconcolumn);if(_q){if(!nexacro._toBoolean(_o)&&!_m.imgctrl){var _r=_m.imgctrl=new nexacro.ImageViewerCtrl("imgctrl","absolute",0,0,0,0,null,null,_m);_m._setIcon(_q);_m.imgctrl.createComponent();}}if(_t==_b.getRowCount()-1){_m.itemexpand=false;}else{_h=_b.getColumn(_t+1,this.levelcolumn);if(_h<=this.level){_m.itemexpand=false;}else{_m._setExpandimage(this.on_find_CurrentStyle_expandimage(this._pseudo));}}_m._setEventHandler("onlbuttonup",this.on_notify_menuitem_onclick,this);_m._setEventHandler("onlbuttondown",this.on_notify_menuitem_onlbuttondown,this);if(!(nexacro.isTouchInteraction&&nexacro.SupportTouch)){_m._setEventHandler("onmouseenter",this.on_notify_menuitem_onmouseenter,this);var _s=this._getRootComponent(this);if(_s.onmouseleave||_s instanceof nexacro.PopupMenu){_m._setEventHandler("onmouseleave",this.on_notify_menuitem_onmouseleave,this);}}_m.createComponent();this._items.push(_m);this._lineItems.push(_m);_m._real_visible=false;_m._setRtlDirection(this._rtldirection);}else if(_h<this.level){break;}}}}};_pPopupMenu._deletePopupMenu=function(){if(!this._is_subcontrol){var _a=this._hot_key_list;var _b=_a.length;var _c=this._getMainForm();for(var _f=0;_f<_b;_f++ ){nexacro._unregisterHotkeyComp(_c,this,_a[_f].key);}this._hot_key_list=[];}var _d=this._items;if(_d){var _b=_d.length;for(var _f=0;_f<_b;_f++ ){_d[_f].destroyComponent();_d[_f]=null;}this._items=[];}var _e=this._lineItems;if(_e){var _b=_e.length;for(var _f=0;_f<_b;_f++ ){_e[_f].destroyComponent();_e[_f]=null;}this._lineItems=[];}if(this._popupmenu){this._popupmenu.destroyComponent();this._popupmenu=null;}this._buttonRect=[];this._buttonRect_elem=[];this._scrollIndex=0;this._is_spin_visible=false;};_pPopupMenu._createSpinbutton=function(){if(!this.spinupbutton){this.spinupbutton=new nexacro.ImageButtonCtrl("spinupbutton",this.position,0,0,0,0,null,null,this);this.spinupbutton.createComponent();this.spinupbutton.set_visible(false);this.spinupbutton._setEventHandler("onclick",this.on_notify_spinup_onclick,this);this.spinupbutton.on_created();this.spinupbutton._is_focus_accept=false;}if(!this.spindownbutton){this.spindownbutton=new nexacro.ImageButtonCtrl("spindownbutton",this.position,0,0,0,0,null,null,this);this.spindownbutton.createComponent();this.spindownbutton.set_visible(false);this.spindownbutton._setEventHandler("onclick",this.on_notify_spindown_onclick,this);this.spindownbutton.on_created();this.spindownbutton._is_focus_accept=false;}this._is_spin_visible=false;this._scrollIndex=0;};_pPopupMenu._destroySpinButton=function(){if(this.spinupbutton){this.spinupbutton.destroy();this.spinupbutton=null;}if(this.spindownbutton){this.spindownbutton.destroy();this.spindownbutton=null;}};_pPopupMenu._showPopup=function(_a){if(this._getPopupType()=="none"){return;}if(this._innerdataset&&this.levelcolumn&&this.captioncolumn&&this.idcolumn&&_a.itemexpand==true&&this.visible){var _b=this._popupmenu;if(!_b){_b=this._popupmenu=new nexacro.PopupMenuCtrl("popup","absolute",0,0,0,0,null,null,this);_b._scrollIndex=0;_b.level=this.level+1;_b.datarow=_a.datarow+1;_b.selfpopup=this.selfpopup;_b._closeflag=this._closeflag;_b._is_subcontrol=true;_b._track_capture=false;_b.parentPopupMenu=this;_b._is_loading=true;_b.setInnerDataset(this._innerdataset);_b.set_captioncolumn(this.captioncolumn);_b.set_checkboxcolumn(this.checkboxcolumn);_b.set_hotkeycolumn(this.hotkeycolumn);_b.set_idcolumn(this.idcolumn);_b.set_levelcolumn(this.levelcolumn);_b.set_userdatacolumn(this.userdatacolumn);_b.set_enablecolumn(this.enablecolumn);_b.set_iconcolumn(this.iconcolumn);_b._is_loading=true;if(this.currentstyle.checkboximage){_b.style.set_checkboximage(this.currentstyle.checkboximage._value);}if(this.currentstyle.expandimage){_b.style.set_expandimage(this.currentstyle.expandimage._value);}_b.createComponent();_b.currentstyle.popuptype=this.currentstyle.popuptype;_b._setRtlDirection(this._rtldirection);_b._trackPopup(_a,"horizontal");}else{_b.datarow=_a.datarow+1;if(this.selfpopup==true){_b.style=this.style;_b.currentstyle=this.currentstyle;}if(this._closeflag){_b._trackPopup(_a,"horizontal");}}}};_pPopupMenu._set_hotkey=function(_a,_b){var _c=this.hotkey;var _d=this._hotkey;this._hotkey=null;this.set_hotkey(_b);var _e=this._hotkey;this.hotkey=_c?_c:null;this._hotkey=_d?_d:null;var _f={id:_a,key:_e};this._hot_key_list.push(_f);};_pPopupMenu._processHotkey=function(_a,_b,_c,_d,_e){var _f=this.on_find_CurrentStyle_autohotkey(this.pseudo);if(_f&&nexacro._toBoolean(_f._value)){var _g=this._hot_key_list;var _h=_g.length;var _i=null;var _j=null;for(var _k=0;_k<_h;_k++ ){_i=_g[_k].key;if(_i._keycode==_a){_j=_i._modifierkey;if(_b==((_j&0x02)==0x02)&&_c==((_j&0x01)==0x01)&&_d==((_j&0x04)==0x04)){this.on_fire_onitemclick(this,"onmenuclick",_g[_k].id,"",_g[_k].index,_g.level);return;}}}}nexacro.Component.prototype._processHotkey.call(this,_a,_b,_c,_d,_e);};_pPopupMenu._adjustPopupPosition=function(_a,_b,_c,_d){var _e=this._getAlignPosition(_a,_b,_c);var _f=_e[0]<0?0:_e[0];var _g=_e[1]<0?0:_e[1];var _h=this._width;var _i=this._height;var _j=_f+_h;var _k=_g+_i;var _l=this._getWindow();var _m=_l.clientWidth;var _n=_l.clientHeight;var _o=_j-_m;if(_j>_m&&_f>_o){_f=_f-_o;}if(_k>_n){_g=_n-_i;}this._track_on=true;var _p=this._getCumulativeZoomFactor()/100.0;var _q=this.getElement();if(_q.setZoom){_q.setZoom(_p*100);}else if(nexacro.ScrollableContainerElement.prototype.setZoom){nexacro.ScrollableContainerElement.prototype.setZoom.call(_q,_p*100);}this._popup(_f,_g,_h,_i);};_pPopupMenu._callbackFromDataset=function(_a,_b){this._createPopupMenu();};_pPopupMenu._getMainFrame=function(){var _a=this;while(_a&&!_a._is_main){_a=_a.parent;}return _a;};_pPopupMenu._trackPopup=function(_a,_b,_c,_d){this._createPopupMenu();this._reCalcSize();this.on_created();var _e,_f,_g,_h;var _i=this.parent;var _j=this._getMainFrame();var _k=nexacro._getElementPositionInFrame(_j.getElement());var _l=this.on_find_CurrentStyle_padding(this._pseudo);var _m=0,_n=0,_o=0,_p=0;if(_l){_m=_l.left;_n=_l.right;_o=_l.bottom;_p=_l.top;}var _q=this._getCumulativeZoomFactor()/100.0;var _r,_s,_t;var _u=this._width;var _v=this._height;var _w=_j;if(!_w){var _x=this._getWindow();var _y=_x.frame;var _z=_y;if(_y instanceof nexacro.MainFrame){_z=_y.frame;}if(!_z){_z=_y;}_w=_z;}var _aa=_k.x+_w._adjust_width;var _ab=_k.y+_w._adjust_height;_g=_u+_m+_n;_h=_v+_o+_p;if(_b=="horizontal"){_t=nexacro._getElementPositionInFrame(_i.getElement());var _j=this.getMainframe();if(_j){var _ac=_j._control_element;if(this._attached_comp._isRtl()){_t.x=_ac.client_width-_i._width-_t.x;}}_r=_i._client_width;_s=_i._client_height;_e=_r;_f=0;if(!_d){var _ad=_t.y+_a._adjust_top+_v;if(_ad>_ab){_f=_ab-_ad;}_f=_f*_q;}else{_f=_d;}if(!_c){var _ae=_t.x;var _af=_ae+_r;if(_af+_u>_aa){if(_ae-_u>0){_e= -_u;}}_e=_e*_q;}else{_e=_c;}}else{_t=nexacro._getElementPositionInFrame(_a.getElement());var _j=this.getMainframe();if(_j){var _ac=_j._control_element;if(this._attached_comp._isRtl()){_t.x=_ac.client_width-_i._width-_t.x;}}_r=0;_s=_a._adjust_height;_e=0,_f=_s;if(!_d){var _ad=_t.y+_s+_v;if(_ad>_ab){if(_k.y<(_t.y-_v)){_f= -_v;}else{_f=10;}}_f=_f*_q;}else{_f=_d;}if(!_c){var _ae=_t.x;if(_ae+_u>_aa){_e=_aa-_ae-_u;}else if(_ae<0){_e-=_ae;}_e=_e*_q;}else{_e=_c;}}var _ag=this.getElement();if(_ag.setZoom){_ag.setZoom(_q*100);}else if(nexacro.ScrollableContainerElement.prototype.setZoom){nexacro.ScrollableContainerElement.prototype.setZoom.call(_ag,_q*100);}if(this._getPopupType()=="center"){var _ah=(_w._adjust_width/2)-(_g/2);var _ai=(_w._adjust_height/2)-(_h/2);this._adjustPopupPosition(_ah,_ai);}else{this._track_on=true;this._popupBy(_a,_e,_f,_g,_h);}this._destroySpinButton();this._createSpinbutton();this._calcSpinButton();this._updateMenuItemPosition();this.on_apply_pseudo();};_pPopupMenu._getMenuObj=function(){var _a=this.parent;while(!(_a instanceof nexacro.Menu)){_a=_a.parent;}return _a;};_pPopupMenu.iconimgwidth=0;_pPopupMenu._is_root_comp_menu=function(){var _a=false;var _b=this.parent;while(_b){if(_b instanceof nexacro.Menu||_b instanceof nexacro.Form){if(_b instanceof nexacro.Menu){_a=true;}break;}_b=_b.parent;}return _a;};_pPopupMenu._reCalcSize=function(){var _a=this._innerdataset;if(_a&&this.captioncolumn){var _b=this._items;if(!_b||_b.length==0){return;}var _c=_b.length;var _d=this._getMaxTextSize(this.captioncolumn);this.text_height=_d[1];var _e=_d[0];var _f=0;var _g=this._getRootComponent(this);var _h=0,_i=0,_j=0,_k=0;var _l=this.currentstyle;var _m=this.on_find_CurrentStyle_itemheight(this._pseudo);var _n=_m?parseInt(_m._value,10):20;var _o=_g.on_find_CurrentStyle_expandimage(this._pseudo);if(_o){_i=_g._expImage_width?_g._expImage_width:_n;_j=_g._expImage_height?_g._expImage_height:_n;if(_i==undefined){_i=0;}if(_j==undefined){_j=0;}}if(this.hotkeycolumn){_d=this._getMaxTextSize(this.hotkeycolumn);_f=_d[0];}for(var _av=0;_av<_c;_av++ ){if(_b[_av].value){if(_l.checkboximage){_h=_n;}break;}}for(var _av=0;_av<_c;_av++ ){if(_b[_av].icon){_k=_n;break;}}var _p=this.on_find_CurrentStyle_itempadding(this._pseudo);var _q=this.on_find_CurrentStyle_border(this._pseudo);var _r=0,_s=0;if(_p){_r=_p.left;_s=_p.right;}var _t=0,_u=0,_v=0,_w=0;if(_q){_t=_q._left_width;_u=_q._top_width;_v=_q._right_width;_w=_q._bottom_width;}var _x=20;var _y=_r+_h+_k+_e+(_f==0?0:_x+_f)+_n+_i+_s;var _z=0;for(var _av=0,_aw=this._lineItems.length;_av<_aw;_av++ ){var _aa=this._lineItems[_av];if(_aa._bLine){_z++ ;}}var _ab=(_n*_c)+_z;var _ac=this._getMainFrame();var _ad=_ac;if(!_ad){var _ae=this._getWindow();var _af=_ae.frame;var _ag=_af;if(_af instanceof nexacro.MainFrame){_ag=_af.frame;}if(!_ag){_ag=_af;}_ad=_ag;}var _ah=_ad._adjust_height;var _ai=_ab+_u+_w;var _aj=0;var _ak=this.parent;var _al=_ak._getForm();var _am=0;while(_al){if(_al._is_form){_am+=_al._adjust_top;}_al=_al.parent;if(_al instanceof nexacro.ChildFrame||_al instanceof nexacro.MainFrame){break;}}var _an=false;while(_ak){if(_ak instanceof nexacro.Menu||_ak instanceof nexacro.Form){if(_ak instanceof nexacro.Menu){_an=true;}_aj=_am+_ak._adjust_top+_ak._adjust_height;break;}_ak=_ak.parent;}if(!_an){_aj=_ai;if(_aj>_ah){_ai=_ah;}}else{if(_ai>(_ah-_aj)){if(_am+_ak._adjust_top<(_ah-_aj)){_ai=_ah-_aj;}else{if(_am+_ak._adjust_top<_ai){_ai=_am+_ak._adjust_top;}}}}this._width=_y+_t+_v;if(!this.visible){this.resize(this._width,_ai);}var _ao=0;var _ap=this._buttonRect;var _aq=this._buttonRect_elem;var _ar=this._buttonRect_line;if(_ap[0]){for(var _av=0;_av<this._scrollIndex;_av++ ){if(_ap[_av]){_ao-=_ap[_av].height;}}if(this._is_spin_visible){if(this._scrollIndex==0){_ao=this._spin_height;}else{_ao+=this._spin_height;}}}var _as=false;for(var _av=0,_aw=this._lineItems.length;_av<_aw;_av++ ){var _aa=this._lineItems[_av];if(_aa._bLine){var _at={left:0,top:0,right:0,bottom:0,width:0,height:0};_at.left=0;_at.top=_ao;_at.right=this._width;_at.bottom=_ao+1;_at.width=this._width;_at.height=1;_ap[_av]=_at;var _au={textWidth:0,hotkeyWidth:0,itemHeight:0,defaultGap:0};_au.textWidth=_e;_au.hotkeyWidth=_f;_au.itemHeight=_n;_au.defaultGap=_x;_aq[_av]=_au;_ao+=1;}else{_aa.chkwidth=_h;_aa.iconimgwidth=_k;_aa.textwidth=_e;_aa.hotkeywidth=_f;_aa.expwidth=_i;_aa.expheight=_j;var _at={left:0,top:0,right:0,bottom:0,width:0,height:0};_at.left=0;_at.top=_ao;_at.right=this._width;_at.bottom=_ao+_n;_at.width=this._width;_at.height=_n;_ap[_av]=_at;var _au={textWidth:0,hotkeyWidth:0,itemHeight:0,defaultGap:0};_au.textWidth=_e;_au.hotkeyWidth=_f;_au.itemHeight=_n;_au.defaultGap=_x;_aq[_av]=_au;if(nexacro._enableaccessibility){_aa._updateAccessibilityLabel(_aa);}_ao+=_n;if(!_as&&this._scrollIndex>0&&_ao>=0){_as=true;}}}}};_pPopupMenu._calcSpinButton=function(){if(!this.spindownbutton&&!this.spinupbutton){return;}var _a=this.on_find_CurrentStyle_itempadding(this._pseudo);var _b=this.on_find_CurrentStyle_border(this._pseudo);var _c=(_a?_a.bottom:0)+(_b?_b._bottom_width:0);var _d=this._buttonRect;var _e=_d.length;if(this._spin_height>0&&_e>0&&_d[_e-1].bottom-_c>this._adjust_height||this._is_spin_visible){this.spinupbutton.set_visible(true);this.spinupbutton.move(0,0,this._client_width,this._spin_height);var _f=0;var _g=0;var _h=this._spin_height;var _i=this._lineItems;var _e=_i?_i.length:0;if(this._is_spin_visible){_h=0;}for(var _k=0;_k<_e;_k++ ){var _j=_d[_k];if(_j.bottom>this._adjust_height-this._spin_height*(_h==0?1:2)){if(_f==0){_f=this._adjust_height;}}if(_f==0){_j.top+=_h;_j.bottom+=_h;}else{_j.top=_f;_j.bottom=_f+_h;}}this.spindownbutton.set_visible(true);this.spindownbutton.move(0,this._adjust_height-this._spin_height-_c,this._client_width,this._spin_height);this._is_spin_visible=true;}else{this._is_spin_visible=false;this.spinupbutton.set_visible(false);this.spindownbutton.set_visible(false);}};_pPopupMenu._updateMenuItemPosition=function(){var _a=this._buttonRect;var _b=this._buttonRect_elem;var _c=this._lineItems;var _d=_c?_c.length:0;for(var _h=0;_h<_d;_h++ ){var _e=_c[_h];var _f=_a[_h];_e.move(_f.left,_f.top,_f.width,_f.height);var _g=_b[_h];if(_e instanceof nexacro.PopupMenuItem){_e._updateElementPositions(_g.textWidth,_g.hotkeyWidth,_g.itemHeight,_g.defaultGap);}}};_pPopupMenu._getAlignPosition=function(_a,_b,_c){if(_c){var _d=this._width;var _e=this._height;var _f=_c.split(/\s+/);var _g=_f.length;var _h=parseInt(_a,10)|0;var _i=parseInt(_b,10)|0;switch(_g){case 0:break;case 1:if(_f[0]=="left"){_a=_h-_d;}else if(_f[0]=="center"){_a=_h-(_d/2);}else if(_f[0]=="top"){_b=_i-_e;}else if(_f[0]=="middle"){_b=_i-(_e/2);}break;case 2:if(_f[0]=="left"||_f[0]=="center"||_f[0]=="right"){if(_f[0]=="left"){_a=_h-_d;}else if(_f[0]=="center"){_a=_h-(_d/2);}}else if(_f[0]=="top"||_f[0]=="middle"||_f[0]=="bottom"){if(_f[0]=="top"){_b=_i-_e;}else if(_f[0]=="middle"){_b=_i-(_e/2);}}if(_f[1]=="left"||_f[1]=="center"||_f[1]=="right"){if(_f[1]=="left"){_a=_h-_d;}else if(_f[1]=="center"){_a=_h-(_d/2);}}else if(_f[1]=="top"||_f[1]=="middle"||_f[1]=="bottom"){if(_f[1]=="top"){_b=_i-_e;}else if(_f[1]=="middle"){_b=_i-(_e/2);}}break;default:break;}}return [_a,_b];};_pPopupMenu.set_visible=function(_a){if(this._track_on){nexacro.PopupComponent.prototype.set_visible.apply(this,arguments);}};_pPopupMenu._process_mousemove=function(_a,_b){if(_a&&_a.enable){this.on_notify_menuitem_onmouseenter(_a,_b);}};_pPopupMenu._closePopup=function(){var _a=this._popupmenu;if(_a){_a._closePopup();_a._destroySpinButton();}var _b=this._getWindow();if(_b&&this._track_capture){_b._releaseCaptureLock(this);}var _c=this._item_find(this);if(nexacro._enableaccessibility){this._item_focus(_c[this._popupitemindex],false);this._popupitemindex= -1;}else{var _d=_c.length;for(var _e=0;_e<_d;_e++ ){this._item_focus(_c[_e],false);}this._popupitemindex= -1;}this.set_visible(false);this._track_on=false;this._closeflag=false;};_pPopupMenu.closePopup=_pPopupMenu._closePopup;_pPopupMenu._closeAllPopup=function(){this._closePopup();var _a=this.parent;if(_a){if(_a instanceof nexacro.Menu){if(_a._is_menu_click){_a._is_menu_click=false;}}}};_pPopupMenu.on_fire_oncloseup=function(_a){if(this.oncloseup&&this.oncloseup._has_handlers){var _b=new nexacro.MenuCloseUpEventInfo(_a,"oncloseup",(this._selected_itemindex>=0));_b.eventid="oncloseup";return this.oncloseup._fireEvent(this,_b);}return false;};_pPopupMenu.on_notify_spinup_onclick=function(_a,_b){this._spinup();};_pPopupMenu.on_notify_spindown_onclick=function(_a,_b){this._spindown();};_pPopupMenu._spinup=function(){if(this._scrollIndex>0){if(this._popupmenu){this._popupmenu._closePopup();}this._scrollIndex-- ;this._reCalcSize();this._calcSpinButton();this._updateMenuItemPosition();}};_pPopupMenu._spindown=function(){var _a=this._buttonRect;var _b=_a?_a.length:0;if(_b==0){return;}if(_a[_b-1].bottom>this._client_height){if(this._popupmenu){this._popupmenu._closePopup();}this._scrollIndex++ ;this._reCalcSize();this._calcSpinButton();this._updateMenuItemPosition();}};_pPopupMenu._item_focus=function(_a,_b){if(_a){if(nexacro._enableaccessibility){if(_b){if(_a instanceof nexacro.PopupMenuItem){_a._on_focus(false);}else{_a._on_focus(true);}}else{var _c=this._getWindow();if(_c){_c._removeFromCurrentFocusPath(_a,true);}}}if(_a.on_apply_mouseover){var _d=_a.parent?_a.parent._items:null;var _e=_d?_d.length: -1;for(i=0;i<_e;i++ ){_d[i].on_apply_mouseover(false);}_e=null;_d=null;_a.on_apply_mouseover(_b);}}};_pPopupMenu._popupmenu_visible=function(_a){if(_a._popupmenu==null||_a._popupmenu.visible==false){return false;}return true;};_pPopupMenu._item_find=function(_a){if(_a._popupmenu==null||_a._popupmenu.visible==false){return _a._items;}return _a._popupmenu._items;};_pPopupMenu._popupmenu_find=function(_a){var _b=_a;while(_b){if(_b._popupmenu===null||_b._popupmenu.visible==false){break;}var _b=_b._popupmenu;}return _b;};_pPopupMenu._popupmenuitem_extend=function(_a){return _a.itemexpand;};_pPopupMenu._popupmenuitem_find=function(_a){var _b=_a._overedobj;while(_b){if(_b._overedobj===null){break;}var _b=_b._overedobj;}return _b;};_pPopupMenu._popupmenuitem_mouseover=function(_a,_b,_c){var _d=this._getRootComponent(this);var _e=_d._menuitemonmouseenter;var _f=_e?(_e._pseudo!="mouseover")||(_e!=_c[_d._popupitemindex]):false;var _g=nexacro.Event;if(_e&&_f&&!(_b.parent instanceof nexacro.FormBase)){var _h;if(!(_b.parent instanceof nexacro.Menu)){_b=_b.parent;_b._popupmenu=null;_c=_d._item_find(_b);var _i=_c?_c.length: -1;for(i=0;i<_i;i++ ){if(_c[i]._pseudo=="mouseover"){_d._popupitemindex=i;break;}}_i=null;if(_c[_d._popupitemindex]&&(_a==_g.KEY_RIGHT)){_h=_d._popupmenuitem_extend(_c[_d._popupitemindex]);}}else{_h=false;}if(_a==_g.KEY_RIGHT){return {pThis:_b,popupexpand:_h,item:_c};}_h=null;}_f=null;_e=null;if(_a==_g.KEY_ENTER){return _b;}};delete _pPopupMenu;nexacro.PopupMenuCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.PopupMenu.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_subcontrol=true;this.level=1;this._previousitem=0;};var _pPopupMenuCtrl=nexacro.PopupMenuCtrl.prototype=nexacro._createPrototype(nexacro.PopupMenu,nexacro.PopupMenuCtrl);nexacro._setForControlStyleFinder(_pPopupMenuCtrl);delete _pPopupMenuCtrl;}