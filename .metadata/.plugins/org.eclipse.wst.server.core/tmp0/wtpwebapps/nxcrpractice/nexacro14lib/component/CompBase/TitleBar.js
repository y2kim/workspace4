if(!nexacro.TitleBar){nexacro.TitleBar_Style=function(_a){this.icon=null;this._target=_a||null;};var _pTitleBarStyle=nexacro._createPrototype(nexacro.Style,nexacro.TitleBar_Style);nexacro.TitleBar_Style.prototype=_pTitleBarStyle;eval(nexacro._createValueAttributeEvalStr("_pTitleBarStyle","icon"));_pTitleBarStyle.__custom_emptyObject=function(){this.icon=null;};_pTitleBarStyle.__get_custom_style_value=function(){var _a="";if(this.icon&&!this.icon._is_empty){_a+="icon:"+this.icon._value+"; ";}return _a;};nexacro.TitleBar_CurrentStyle=function(){this.icon=null;};var _pTitleBarCurrentStyle=nexacro._createPrototype(nexacro.CurrentStyle,nexacro.TitleBar_CurrentStyle);nexacro.TitleBar_CurrentStyle.prototype=_pTitleBarCurrentStyle;_pTitleBarCurrentStyle.__custom_emptyObject=_pTitleBarStyle.__custom_emptyObject;_pTitleBarCurrentStyle.__get_custom_style_value=_pTitleBarStyle.__get_custom_style_value;delete _pTitleBarStyle;delete _pTitleBarCurrentStyle;nexacro.TitleBar=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Form.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this.minbutton=null;this.normalbutton=null;this.maxbutton=null;this.closebutton=null;this._state_openstatus=0;if(_i&&_i._is_frame&&_i._is_window){this._is_track=false;}else{this._is_track=true;}this._icon_elem=null;this._text_elem=null;this._titletext="";this._is_verticalmin=false;this._absolute_style=0;this._iconwidth=0;this._iconheight=0;this._is_scrollable=false;this._is_nc_control=true;this._is_focus_accept=false;};var _pTitleBar=nexacro._createPrototype(nexacro.Form,nexacro.TitleBar);nexacro.TitleBar.prototype=_pTitleBar;_pTitleBar._type_name="TitleBar";nexacro.TitleBar._default_align=nexacro.Component._default_left_align;nexacro.TitleBar._default_icon=null;_pTitleBar.on_create_custom_style=function(){return new nexacro.TitleBar_Style(this);};_pTitleBar.on_create_custom_currentStyle=function(){return new nexacro.TitleBar_CurrentStyle();};_pTitleBar.on_apply_custom_pseudo=function(_a){var _b=this.currentstyle;var _c=this.on_find_CurrentStyle_font(_a);if(_b.font!=_c){_b.font=_c;this.on_apply_style_font(_c);}var _d=this.on_find_CurrentStyle_letterspace(_a);if(_b.letterspace!=_d){_b.letterspace=_d;this.on_apply_style_letterspace(_d);}var _e=this.on_find_CurrentStyle_color(_a);if(_b.color!=_e){_b.color=_e;this.on_apply_style_color(_e);}var _f=this.on_find_CurrentStyle_icon(_a);if(_f!=_b.icon){_b.icon=_f;this.on_apply_style_icon(_f);}var _g=this.on_find_CurrentStyle_padding(_a);if(_b.padding!=_g){_b.padding=_g;this.on_apply_style_padding(_g);}var _h=this.on_find_CurrentStyle_rtlimagemirroring(_a);if(_h!=_b.rtlimagemirroring){_b.rtlimagemirroring=_h;this.on_apply_style_rtlimagemirroring(_h);}};_pTitleBar.on_find_CurrentStyle_icon=function(_a){var _b=this._find_pseudo_obj("icon",_a,"value");return _b?_b:nexacro.TitleBar._default_icon;};_pTitleBar.on_update_style_icon=function(){this.on_apply_style_icon(this.currentstyle.icon=this.on_find_CurrentStyle_icon(this._pseudo));};_pTitleBar.on_update_style_padding=function(){var _a=this.currentstyle.padding=this.on_find_CurrentStyle_padding(this._pseudo);if(this._control_element){this._control_element.setElementPadding(_a);this._updateClientSize(this._control_element);}};_pTitleBar.on_apply_style_padding=function(_a){if(this._control_element){this._control_element.setElementPadding(_a);}};_pTitleBar.on_apply_style_icon=function(_a){if(this._icon_elem){var _b=this.getOwnerFrame();if(_b&&_b.currentstyle.icon&&!_b.currentstyle.icon._is_empty){_a=_b.currentstyle.icon;}if(_a==null){_a=this.currentstyle.icon;}var _c=nexacro._getImageSize(_a.value,this._on_loadicon,this,this._getRefFormBaseUrl(),undefined,_a.value);if(_c){if((_c.width>0)&&(_c.height>0)){this._iconwidth=_c.width;this._iconheight=_c.height;}}if(_b.showtitleicon==false){this._icon_elem.setElementImageUrl("");}else{this._icon_elem.setElementImageUrl(_a.value);}this._updateControlPosition();}};_pTitleBar.on_apply_style_font=function(_a){if(this._text_elem){this._text_elem.setElementFont(_a);}};_pTitleBar.on_apply_style_color=function(_a){if(this._text_elem){this._text_elem.setElementColor(_a);}};_pTitleBar.on_apply_style_align=function(_a){if(this._text_elem){this._text_elem.setElementAlign(_a);}};_pTitleBar.on_apply_style_rtlimagemirroring=function(_a){return;};_pTitleBar.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.getOwnerFrame();var _c=this.currentstyle;var _d=this._icon_elem=new nexacro.AlignImageElement(_a);_d.setElementAlignXY("center","middle");var _e=this._text_elem=new nexacro.TextBoxElement(_a);if(this._titletext){_e.setElementText(this._titletext);}_e.setElementAlign(_c.align?_c.align:nexacro.TitleBar._default_align);_e.setElementFont(_c.font);_e.setElementColor(_c.color);_e.setElementLetterSpace(_c.letterspace);var _f=this.minbutton=new nexacro.ImageButtonCtrl("minbutton","absolute",0,0,0,0,null,null,this);var _g=this.maxbutton=new nexacro.ImageButtonCtrl("maxbutton","absolute",0,0,0,0,null,null,this);var _h=this.normalbutton=new nexacro.ImageButtonCtrl("normalbutton","absolute",0,0,0,0,null,null,this);var _i=this.closebutton=new nexacro.ImageButtonCtrl("closebutton","absolute",0,0,0,0,null,null,this);_h.set_visible(false);if(_b){_f._setEventHandler("onclick",_b.on_minbutton_click,_b);_g._setEventHandler("onclick",_b.on_maxbutton_click,_b);_h._setEventHandler("onclick",_b.on_normalbutton_click,_b);_i._setEventHandler("onclick",_b.on_closebutton_click,_b);this._setEventHandler("ondblclick",_b._on_titlebar_dblclick,_b);}var _j;if(_b&&_b.currentstyle.icon&&!_b.currentstyle.icon._is_empty){_j=_b.currentstyle.icon;}else{_j=this.currentstyle.icon;}if(_j){var _k=nexacro._getURIValue(_j._value);_k=nexacro._getImageLocation(_k,this._getRefFormBaseUrl());var _l=nexacro._getImageSize(_k,this._on_loadicon,this,this._getRefFormBaseUrl(),_j._value);if(_l){if((_l.width>0)&&(_l.height>0)){this._iconwidth=_l.width;this._iconheight=_l.height;if(_b&&_b.showtitleicon!=false){_d.setElementImageUrl(_k);}if(_d){this._updateControlPosition(this._client_width,this._client_height);}var _m=this.parent;if(_m&&_m._is_window){var _n=_m._getWindow();if(_n){nexacro._setWindowHandleIcon(_n._handle,_k);}}}}}this._updateControlPosition(this._client_width,this._client_height);_f.createComponent();_g.createComponent();_h.createComponent();_i.createComponent();}};_pTitleBar.on_created_contents=function(){this._icon_elem.create();this._text_elem.create();this.minbutton.on_created();this.maxbutton.on_created();this.normalbutton.on_created();this.closebutton.on_created();if(this._pseudo){var _a=this.on_find_CurrentStyle_rtlimagemirroring(this._pseudo);this.on_apply_style_rtlimagemirroring(_a);}this.on_apply_prop_rtldirection();};_pTitleBar.on_destroy_contents=function(){var _a=this._icon_elem;var _b=this._text_elem;var _c=this.minbutton;var _d=this.maxbutton;var _e=this.normalbutton;var _f=this.closebutton;if(_a){_a.destroy();this._icon_elem=null;}if(_b){_b.destroy();this._text_elem=null;}if(_c){_c.destroy();this.minbutton=null;}if(_d){_d.destroy();this.maxbutton=null;}if(_e){_e.destroy();this.normalbutton=null;}if(_f){_f.destroy();this.closebutton=null;}};_pTitleBar.on_change_containerRect=function(_a,_b){this._updateControlPosition(_a,_b);};_pTitleBar.set_titletext=function(_a){this._titletext=_a;if(this._text_elem){this._text_elem.setElementText(_a);}};_pTitleBar.on_minbutton_click=function(_a,_b){var _c=this.getOwnerFrame();if(_c){_c.on_minbutton_click(_a,_b);}};_pTitleBar.on_maxbutton_click=function(_a,_b){var _c=this.getOwnerFrame();if(_c){_c.on_maxbutton_click(_a,_b);}};_pTitleBar.on_normalbutton_click=function(_a,_b){var _c=this.getOwnerFrame();if(_c){_c.on_normalbutton_click(_a,_b);}};_pTitleBar.on_closebutton_click=function(_a,_b){var _c=this.getOwnerFrame();if(_c){_c.on_closebutton_click(_a,_b);}};_pTitleBar._on_starttrack=function(){if(!this._is_alive){return;}var _a=this.getOwnerFrame();if(_a){_a._on_titlebar_starttrack();}};_pTitleBar._on_endtrack=function(_a,_b,_c){if(!this._is_alive){return;}var _d=this.getOwnerFrame();if(_d){_d._on_titlebar_endtrack(_a,_b,_c);}};_pTitleBar._on_movetrack=function(_a,_b,_c,_d,_e){if(!this._is_alive){return;}var _f=this.getOwnerFrame();if(_f){_f._on_titlebar_movetrack(_a,_b,_c,_d,_e);}};_pTitleBar._on_loadicon=function(_a,_b,_c){if((_b<1)||(_c<1)){return;}var _d=this.getOwnerFrame();if(_d&&_d.showtitleicon!=false){this._icon_elem.setElementImageUrl(_a);}this._iconwidth=_b;this._iconheight=_c;if(this._icon_elem){this._updateControlPosition(this._client_width,this._client_height);}var _e=this.parent;if(_e&&_e._is_window){var _f=_e._getWindow();if(_f){nexacro._setWindowHandleIcon(_f._handle,_a);}}};_pTitleBar._updateControlPosition=function(_a,_b){if(!_a||!_b){_a=this._client_width;_b=this._client_height;}var _c=10;var _d=6;var _e=22;var _f=20;var _g=1;var _h=2;var _i=((this._state_openstatus==2)||this._is_verticalmin);if(!this._is_verticalmin){var _j=24;var _k=((_b-_f)/2)|0;if(_k<0){_k=0;}var _l=_a-(_h);_l-=_e;this.closebutton.move(_l,_k,_e,_f);_l-=_g;_l-=_e;this.maxbutton.move(_l,_k,_e,_f);if(!_i){this.normalbutton.move(_l,_k,_e,_f);}_l-=_g;_l-=_e;this.minbutton.move(_l,_k,_e,_f);if(_i){this.normalbutton.move(_l,_k,_e,_f);}var _m=_l;_l=_c;var _n=this._icon_elem;var _o=this._iconwidth;var _p=this._iconheight;_k=((_b-_p)/2)|0;var _q=this._convertLeftForRtlLayout(_l,_o);var _r=false;if(this._isRtl()&&_n.left==_q&&_n.top==_k&&_n.width==_o&&_n.height==_p){_r=true;}_n.setElementPosition(_q,_k);_n.setElementSize(_o,_p);_l+=_o;_l+=_d;var _s=(_m-_l);if(_s<0){_s=0;}var _t=_j;_k=((_b-_t)/2)|0;_q=this._convertLeftForRtlLayout(_l,_s);if(_r){if(this._text_elem.width!=_s){_r=true;}else{_r=false;}}this._text_elem.setElementPosition(_q,_k);this._text_elem.setElementSize(_s,_t);if(_n){_n.setElementPosition(_n.left,_n.top,_r||_n._isRtl());}}else{var _j=24;var _u=((_a-_e)/2)|0;if(_u<0){_u=0;}var _v=_b-(_h);_v-=_e;this.closebutton.move(_u,_v,_e,_f);_v-=_g;_v-=_e;this.maxbutton.move(_u,_v,_e,_f);if(!_i){this.normalbutton.move(_u,_v,_e,_f);}_v-=_g;_v-=_e;this.minbutton.move(_u,_v,_e,_f);if(_i){this.normalbutton.move(_u,_v,_e,_f);}var _w=_v;_v=_c;var _n=this._icon_elem;var _o=this._iconwidth;var _p=this._iconheight;_u=((_a-_o)/2)|0;var _q=this._convertLeftForRtlLayout(_u,_o);_n.setElementPosition(_q,_v);_n.setElementSize(_o,_p);_v+=_o;_v+=_d;var _s=(_w-_v);if(_s<0){_s=0;}var _t=_j;_u=((_a-_t)/2)|0;_q=this._convertLeftForRtlLayout(_u,_s);this._text_elem.setElementPosition(_q,_v);this._text_elem.setElementSize(_s,_t);}};_pTitleBar._change_state_OpenStatus=function(_a){var _b=this._prestate_openstatus=this._state_openstatus;this._state_openstatus=_a;if(this._is_verticalmin){_a=2;}if(_b!=_a){switch(_a){case 0:if((this._absolute_style&0x0001)==0){this.minbutton.set_visible(true);}if((this._absolute_style&0x0002)==0){this.maxbutton.set_visible(true);}if((this._absolute_style&0x0008)==0){this.closebutton.set_visible(true);}this.normalbutton.set_visible(false);break;case 1:break;case 2:this.minbutton.set_visible(false);if((this._absolute_style&0x0002)==0){this.maxbutton.set_visible(true);}if((this._absolute_style&0x0008)==0){this.closebutton.set_visible(true);}if((this._absolute_style&0x0004)==0){this.normalbutton.set_visible(true);}break;case 3:if((this._absolute_style&0x0001)==0){this.minbutton.set_visible(true);}this.maxbutton.set_visible(false);if((this._absolute_style&0x0008)==0){this.closebutton.set_visible(true);}if((this._absolute_style&0x0004)==0){this.normalbutton.set_visible(true);}break;}var _c=this.getElement();if(_c){this.on_change_containerRect(_c.client_width,_c.client_height);}}};_pTitleBar._setVerticalMin=function(_a){if(this._is_verticalmin==_a){return;}var _b= -1;if(_a==false){_b=2;}this._is_verticalmin=_a;var _c=this._state_openstatus;if(_b!=( -1)){this._state_openstatus=_b;}this._change_state_OpenStatus(_c);if(this._control_element){this._updateControlPosition();}};_pTitleBar._setDragMove=function(_a,_b){this._is_track=_a;if(_a&&_b){this._hittest_type="caption";}else{this._hittest_type="none";}if(this._control_element){this._control_element.setElementHittestType(this._hittest_type);}};_pTitleBar._setAbsoluteStyle=function(_a,_b,_c){this._absolute_style&=~(_b);this._absolute_style|=_a;if(_c==undefined||_c==true){this._applyAbsoluteStyle();}};_pTitleBar.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(this.minbutton&&!((this._absolute_style&0x0010)>0)){this.minbutton._setEnable(_a);}};_pTitleBar._applyAbsoluteStyle=function(){if(this.minbutton){if((this._absolute_style&0x0001)>0){this.minbutton.set_visible(false);}else if((this._absolute_style&0x0100)>0){this.minbutton.set_visible(true);}if((this._absolute_style&0x0010)>0){this.minbutton.set_enable(false);}else if((this._absolute_style&0x1000)>0){this.minbutton.set_enable(true);}}if(this.maxbutton){if((this._absolute_style&0x0002)>0){this.maxbutton.set_visible(false);}else if((this._absolute_style&0x0200)>0){this.maxbutton.set_visible(true);}if((this._absolute_style&0x0020)>0){this.maxbutton.set_enable(false);}else if((this._absolute_style&0x2000)>0){this.maxbutton.set_enable(true);}}if(this.normalbutton){if((this._absolute_style&0x0004)>0){this.normalbutton.set_visible(false);}else if((this._absolute_style&0x0400)>0){this.normalbutton.set_visible(true);}if((this._absolute_style&0x0040)>0){this.normalbutton.set_enable(false);}else if((this._absolute_style&0x4000)>0){this.normalbutton.set_enable(true);}}if(this.closebutton){if((this._absolute_style&0x0008)>0){this.closebutton.set_visible(false);}else if((this._absolute_style&0x08)>0){this.closebutton.set_visible(true);}if((this._absolute_style&0x0080)>0){this.closebutton.set_enable(false);}else if((this._absolute_style&0x8000)>0){this.closebutton.set_enable(true);}}};_pTitleBar.on_apply_prop_rtldirection=function(){nexacro.Component.prototype.on_apply_prop_rtldirection.call(this);var _a=this._rtldirection;var _b=this._control_element;if(_b){this._updateControlPosition(_b.client_width,_b.client_height);var _c=this._pseudo;var _d=this.on_find_CurrentStyle_align(_c);this.on_apply_style_align(_d);}var _e=this._text_elem;if(_e){_e.setElementRtlDirection(_a);_e.setElementPosition(_e.left,_e.top,true);}if(this.minbutton){this.minbutton.on_apply_prop_rtldirection();}if(this.maxbutton){this.maxbutton.on_apply_prop_rtldirection();}if(this.normalbutton){this.normalbutton.on_apply_prop_rtldirection();}if(this.closebutton){this.closebutton.on_apply_prop_rtldirection();}var _f=this._icon_elem;if(_f){_f.setElementPosition(_f.left,_f.top,true);}};_pTitleBar.on_apply_custom_class=function(){if(this.minbutton){this.minbutton.on_apply_prop_class();}if(this.maxbutton){this.maxbutton.on_apply_prop_class();}if(this.normalbutton){this.normalbutton.on_apply_prop_class();}if(this.closebutton){this.closebutton.on_apply_prop_class();}};delete _pTitleBar;nexacro.TitleBarCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.TitleBar.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_subcontrol=true;};var _pTitleBarCtrl=nexacro._createPrototype(nexacro.TitleBar,nexacro.TitleBarCtrl);nexacro.TitleBarCtrl.prototype=_pTitleBarCtrl;_pTitleBarCtrl._type_name="TitleBarControl";nexacro._setForTypedControlStyleFinder(_pTitleBarCtrl);delete _pTitleBarCtrl;}