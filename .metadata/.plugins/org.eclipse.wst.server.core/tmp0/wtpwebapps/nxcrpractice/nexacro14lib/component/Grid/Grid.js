if(!nexacro.Grid){nexacro.GridLongPressEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.LongPressEventInfo.call(this,_a,_b,_c,_d,_e);this.cell=_f;this.col=_g;this.row=_h;this.subrow=_i;this.pivotindex=_j;this.mergecell=_k;this.mergecol=_l;this.mergerow=_m;};var _pGridLongPressEventInfo=nexacro._createPrototype(nexacro.LongPressEventInfo,nexacro.GridLongPressEventInfo);nexacro.GridLongPressEventInfo.prototype=_pGridLongPressEventInfo;_pGridLongPressEventInfo._type_name="GridLongPressEventInfo";delete _pGridLongPressEventInfo;nexacro.GridDragEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x,_y,_z){nexacro.DragEventInfo.call(this,_a,_b||"ongriddrag",_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r);this.cell=_s;this.col=_t;this.row=_y;this.subrow=_z;this.pivotindex=_x;this.mergecell=_u;this.mergecol=_v;this.mergerow=_w;};var _pGridDragEventInfo=nexacro._createPrototype(nexacro.DragEventInfo,nexacro.GridDragEventInfo);nexacro.GridDragEventInfo.prototype=_pGridDragEventInfo;_pGridDragEventInfo._type_name="GridDragEvent";delete _pGridDragEventInfo;nexacro.GridClickEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v){nexacro.ClickEventInfo.call(this,_a,_b||"ongridclick",_m,_n,_o,_p,_q,_r,_s,_t,_u,_v);this.cell=_h;this.col=_i;this.row=_j;this.subrow=_k;this.pivotindex=_l;this.oldcell=_c;this.oldcol=_d;this.oldrow=_e;this.oldsubrow=_f;this.oldpivotindex=_g;};var _pGridClickEventInfo=nexacro._createPrototype(nexacro.ClickEventInfo,nexacro.GridClickEventInfo);nexacro.GridClickEventInfo.prototype=_pGridClickEventInfo;_pGridClickEventInfo._type_name="GridClickEvent";_pGridClickEventInfo._is_event=true;delete _pGridClickEventInfo;nexacro.GridEditEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h){this.id=this.eventid=_b||"ongridedit";this.fromobject=this.fromreferenceobject=_a;this.cell=_c;this.col=_d;this.row=_f;this.subrow=_g;this.pivotindex=_e;this.value=_h;};var _pGridEditEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridEditEventInfo);nexacro.GridEditEventInfo.prototype=_pGridEditEventInfo;_pGridEditEventInfo._type_name="GridEditEvent";delete _pGridEditEventInfo;nexacro.GridEditCharEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){this.id=this.eventid=_b||"onchar";this.fromobject=this.fromreferenceobject=_a;this.cell=_c;this.chartext=_d;this.col=_e;this.pivotindex=_f;this.posttext=_g;this.pretext=_h;this.row=_i;this.subrow=_j;};var _pGridEditCharEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridEditCharEventInfo);nexacro.GridEditCharEventInfo.prototype=_pGridEditCharEventInfo;_pGridEditCharEventInfo._type_name="GridEditCharEventInfo";_pGridEditCharEventInfo.set_chartext=function(_a){this.chartext=_a;};delete _pGridEditCharEventInfo;nexacro.GridTextChangeEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){this.id=this.eventid=_b||"ontextchange";this.fromobject=this.fromreferenceobject=_a;this.cell=_c;this.chartext=_d;this.col=_e;this.pivotindex=_f;this.postimetext=_g;this.posttext=_h;this.preimetext=_i;this.pretext=_j;this.row=_k;this.subrow=_l;};var _pGridTextChangeEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridTextChangeEventInfo);nexacro.GridTextChangeEventInfo.prototype=_pGridTextChangeEventInfo;_pGridTextChangeEventInfo._type_name="GridTextChangeEvent";_pGridTextChangeEventInfo.set_chartext=function(_a){this.chartext=_a;};_pGridTextChangeEventInfo.set_postimetext=function(_a){this.postimetext=_a;};delete _pGridTextChangeEventInfo;nexacro.GridTextChangedEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this.id=this.eventid=_b||"ontextchanged";this.fromobject=this.fromreferenceobject=_a;this.cell=_c;this.col=_d;this.pivotindex=_e;this.posttext=_f;this.pretext=_g;this.row=_h;this.subrow=_i;};var _pGridTextChangedEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridTextChangedEventInfo);nexacro.GridTextChangedEventInfo.prototype=_pGridTextChangedEventInfo;_pGridTextChangedEventInfo._type_name="GridTextChangedEvent";_pGridTextChangedEventInfo._is_event=true;delete _pGridTextChangedEventInfo;nexacro.GridFormatChangedEventInfo=function(_a,_b,_c,_d,_e){this.id=this.eventid=_b||"ongridformatchanged";this.fromobject=this.fromreferenceobject=_a;this.newvalue=_c;this.oldvalue=_d;this.reason=_e;};var _pGridFormatChangedEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridFormatChangedEventInfo);nexacro.GridFormatChangedEventInfo.prototype=_pGridFormatChangedEventInfo;_pGridFormatChangedEventInfo._type_name="GridFormatChangedEvent";delete _pGridFormatChangedEventInfo;nexacro.GridSelectEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t){this.id=this.eventid=_b||"ongridselect";this.fromobject=this.fromreferenceobject=_a;this.cell=_c;this.col=_d;this.row=_e;this.subrow=_f;this.pivotindex=_g;this.oldcell=_h;this.oldcol=_i;this.oldrow=_j;this.oldpivotindex=_l;this.oldsubrow=_k;this.selectendcol=_m;this.selectendpivot=_n;this.selectendrow=_o;this.selectendsubrow=_p;this.selectstartcol=_q;this.selectstartpivot=_r;this.selectstartrow=_s;this.selectstartsubrow=_t;};var _pGridSelectEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridSelectEventInfo);nexacro.GridSelectEventInfo.prototype=_pGridSelectEventInfo;_pGridSelectEventInfo._type_name="GridSelectEvent";delete _pGridSelectEventInfo;nexacro.GridTreeStatusEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"ongridtreestatus";this.fromobject=this.fromreferenceobject=_a;this.cell=_c;this.realrow=_d;this.row=_e;this.reason=_f;};var _pGridTreeStatusEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridTreeStatusEventInfo);nexacro.GridTreeStatusEventInfo.prototype=_pGridTreeStatusEventInfo;_pGridTreeStatusEventInfo._type_name="GridTreeStatusEvent";delete _pGridTreeStatusEventInfo;nexacro.GridMouseEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t){nexacro.MouseEventInfo.call(this,_a,_b||"ongridmouse",_k,_l,_m,_n,_o,_p,_q,_r,_s,_t);this.cell=_c;this.col=_d;this.mergecell=_e;this.mergecol=_f;this.mergerow=_g;this.pivotindex=_h;this.row=_i;this.subrow=_j;};var _pGridMouseEventInfo=nexacro._createPrototype(nexacro.MouseEventInfo,nexacro.GridMouseEventInfo);nexacro.GridMouseEventInfo.prototype=_pGridMouseEventInfo;_pGridMouseEventInfo._type_name="GridMouseEvent";delete _pGridMouseEventInfo;nexacro.GridSizeChangedEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.eventid=_a;this.formatindex=_b;this.index=_c;this.newvalue=_d;this.oldvalue=_e;this.reason=_f;this.subindex=_g;};var _pGridSizeChangedEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GridSizeChangedEventInfo);nexacro.GridSizeChangedEventInfo.prototype=_pGridSizeChangedEventInfo;_pGridSizeChangedEventInfo._type_name="GridSizeChangedEventInfo";delete _pGridSizeChangedEventInfo;nexacro.GridCell=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.call(this,_a,"absolute",_b,_c,_d,_e,null,null,_f);this.tabstop=false;this.subcells=[];this.parentcell=null;this.style=_g.style;this._is_subcontrol=true;this._refobj=_g;this._grid=this._refobj?this._refobj.grid:null;this._rowidx=_h;this._cellidx=_i;this._styles=_g._styles;this._expand_width=0;this._subComp=null;this.selected=false;this._text_elem=null;this._curDisplayType="";this._curEditDisplay="";this._expandCtrl=null;this._isSubCell=false;this._disp_show=true;this._band=_f._band;this._fakecell=false;this._hideInner=false;this._is_real_upelem=null;this._clickcall=false;this._is_clickproc=false;this._accessibility_role="gridcell";this._status_changing=false;this._refresh_display=false;};var _pGridCell=nexacro._createPrototype(nexacro.Component,nexacro.GridCell);nexacro.GridCell.prototype=_pGridCell;_pGridCell._type_name="GridCell";_pGridCell.on_change_status=function(_a,_b){this._status_changing=true;nexacro.Component.prototype.on_change_status.call(this,_a,_b);this._status_changing=false;};_pGridCell.on_apply_custom_pseudo=function(_a){var _b=this.getElement();var _c=this._grid;if(!_b){return;}if(!_a){_a=this._pseudo;}var _d=this.currentstyle;var _e=this.on_find_CurrentStyle_font(_a);if(_d.font!=_e){_d.font=_e;this.on_apply_style_font(_e);}var _f=this.on_find_CurrentStyle_letterspace(_a);if(_d.letterspace!=_f){_d.letterspace=_f;this.on_apply_style_letterspace(_f);}var _g=this.on_find_CurrentStyle_color(_a);if(_d.color!=_g){_d.color=_g;this.on_apply_style_color(_g);}var _h=this.on_find_CurrentStyle_align(_a);if(_d.align!=_h){_d.align=_h;this.on_apply_style_align(_h);}var _i=this.on_find_CurrentStyle_rtlimagemirroring(_a);if(_d.rtlimagemirroring!=_i){_d.rtlimagemirroring=_i;this.on_apply_style_rtlimagemirroring(_i);}this.on_apply_prop_tooltip();var _j=this._subComp;if(_j&&this._ReasonRefresh!=1){_j._control_pseudo="";_j._contents_pseudo="";var _k=this._refobj;var _l=_k.style;var _m=true;if(_l.controlbackground&&_l.controlbackground._bindtype>0){_m=false;}else if(_l.controlborder&&_l.controlborder._bindtype>0){_m=false;}else if(_l.controlbordertype&&_l.controlbordertype._bindtype>0){_m=false;}else if(_l.controlgradation&&_l.controlgradation._bindtype>0){_m=false;}_j._updateAll(_m);}if(this._expandCtrl){this._expandCtrl._updateAll();}this._applyRowCellsStyle(_a);};_pGridCell._applyRowCellsStyle=function(_a,_b){var _c=this._grid;if(this._is_created&&(this._status_changing==true||_b)){if(!_c._ReasonRefresh){_c.on_apply_cell_pseudo(this,_a);}}};_pGridCell.on_create_custom_style=function(){return null;};_pGridCell.on_create_custom_currentStyle=function(){return new nexacro.GridCell_CurrentStyle();};_pGridCell.on_find_CurrentStyle_accessibility=function(_a){if(this._refobj&&!this._isSubCell){var _b=this._grid,_c=_b._getDataRow(this._rowidx);return this._refobj._query_pseudo_accessibility(_c,_a);}return null;};_pGridCell.on_find_CurrentStyle_background=function(_a){if(this._refobj&&!this._isSubCell){var _b=(this._rowidx>=0)?(this._rowidx%2):false,_c=this._grid,_d=_c._getDataRow(this._rowidx);return this._refobj._query_pseudo_background(_d,_b,this._is_Selected(),_a);}return null;};_pGridCell.on_find_CurrentStyle_border=function(_a){var _b=this;if(this._refobj&&!this._isSubCell){var _c=_b._getSuppressInfo();var _d=(_c)?_c.border_proc:0;if(this._getDisplayRowIdx()==this._grid._getDispRowCnt()-1){_d=0;}var _e=this._grid,_f=_e._getDataRow(this._rowidx);var _g=this._refobj._query_pseudo_border(_f,this._is_Selected(),_a,_d);var _h=_e._checkFakeMerge(this._refobj,_f);if(_h){var _i=_g.clone();if(_h.indexOf("right")>=0){_i.set_right("0px none transparent");}else if(_h.indexOf("left")>=0){_i.set_left("0px none transparent");}if(_h.indexOf("bottom")>=0){_i.set_bottom("0px none transparent");}else if(_h.indexOf("top")>=0){_i.set_top("0px none transparent");}return _i;}return _g;}return null;};_pGridCell.on_find_CurrentStyle_bordertype=function(_a){return null;};_pGridCell.on_find_CurrentStyle_gradation=function(_a){if(this._refobj&&!this._isSubCell){var _b=(this._rowidx>=0)?(this._rowidx%2):false,_c=this._grid,_d=_c._getDataRow(this._rowidx);return this._refobj._query_pseudo_gradation(_d,_b,this._is_Selected(),_a);}return null;};_pGridCell.on_find_CurrentStyle_padding=function(_a){if(this._refobj){if(this.subcells.length>0){return nexacro.Component._default_padding;}var _b=this._grid,_c=_b._getDataRow(this._rowidx);return this._refobj._query_pseudo_padding(_c,_a);}return null;};_pGridCell.on_find_CurrentStyle_opacity=function(_a){return null;};_pGridCell.on_find_CurrentStyle_cursor=function(_a){if(this._isSubCell){return this.parent.on_find_CurrentStyle_cursor(_a);}if(this._refobj){var _b=this._grid,_c=_b._getDataRow(this._rowidx);if(_b._global_cursor){return _b._global_cursor;}return this._refobj._query_pseudo_cursor(_c,_a);}return null;};_pGridCell.on_find_CurrentStyle_shadow=function(_a){return null;};_pGridCell.on_find_CurrentStyle_font=function(_a){if(this._refobj){var _b=this._grid,_c=_b._getDataRow(this._rowidx);return this._refobj._query_pseudo_font(_c,this._is_Selected(),_a);}return null;};_pGridCell.on_find_CurrentStyle_letterspace=function(_a){if(this._refobj){var _b=this._grid,_c=_b._getDataRow(this._rowidx);return this._refobj._query_pseudo_letterspace(_c,this._is_Selected(),_a);}return null;};_pGridCell.on_find_CurrentStyle_color=function(_a){var _b=this;if(this._isSubCell){_b=this.parentcell;}if(this._refobj){var _c=(this._rowidx>=0)?(this._rowidx%2):false;var _d=this._grid;var _e=_d._getDataRow(this._rowidx);return this._refobj._query_pseudo_color(_e,_c,_b.selected,_a);}return null;};_pGridCell.on_find_CurrentStyle_align=function(_a){if(this._refobj){var _b=this._curDisplayType;var _c=this._grid;var _d=_c._getDataRow(this._rowidx);if(_b==""){_b=this._refobj._getAttrValue(this._refobj.displaytype,_d);}if(_b===undefined){_b="normal";}var _e=this._refobj._query_pseudo_align(_d,_b,_a);return _e;}return null;};_pGridCell.on_find_CurrentStyle_rtlimagemirroring=function(_a){return;};_pGridCell.on_create_contents=function(){this._disp_show=this._updateDisplayer();};_pGridCell.on_created_contents=function(){var _a=this.getElement();if(_a){if(this.subcells.length==0){var _b=this._subComp;if(_b){_b.on_created();_b._updateAll();}}var _c=this._expandCtrl;if(_c){_c.on_created();}var _d=this.currentstyle;if(_d&&_d.font){this.on_apply_style_font(_d.font);}if(_d&&_d.letterspace){this.on_apply_style_letterspace(_d.letterspace);}if(nexacro._enableaccessibility){var _e=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_e&&_e.enable&&!this._grid._accept_focus){this._grid._accept_focus=true;}}this.on_apply_prop_rtldirection();}};_pGridCell._destroyDisplayer=function(_a){if(this._subComp){if(_a){nexacro.OnceCallbackTimer.callonce(this,function(){if(this._subComp){this._subComp.destroy();this._subComp=null;}},10);}else{this._subComp.destroy();this._subComp=null;}}};_pGridCell.destroy=function(){if(this._tree_lbuttondown&&this._grid){if(nexacro.Browser=="IE"&&nexacro.BrowserVersion<=8){this._control_element.destroy();}this._grid._lbuttondown_treecell=this;nexacro.OnceCallbackTimer.callonce(this._grid,function(){if(this._lbuttondown_treecell){this._lbuttondown_treecell.destroy();}},10);return;}if(this._grid._lbuttondown_treecell==this){this._grid._lbuttondown_treecell=null;}nexacro.Component.prototype.destroy.call(this);};_pGridCell._delete_style=function(){this.style=null;this._styles=null;};_pGridCell.on_destroy_contents=function(){this._destroyDisplayer();if(this._expandCtrl){this._expandCtrl.destroy();this._expandCtrl=null;}var _a=this.subcells;var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].destroy();}this.subcells=this._refobj=this._grid=this.parentcell=this._band=this._text_elem=this._is_real_upelem=null;};_pGridCell.on_change_containerRect=function(_a,_b){this._updateAvailableArea();};_pGridCell.on_create_control_element=function(_a){var _b=(this._refobj._subcells.length)?"normal":"text";var _c=new nexacro.GridCellControlElement(_a,this._refobj._area,_b);_c.setLinkedControl(this);this._control_element=_c;return _c;};_pGridCell.on_apply_custom_setfocus=function(_a,_b){var _c=this._control_element;if(_a=="lbuttondown"){this._grid._focus_proc=_c;}if(_b||nexacro._enableaccessibility||!this._no_dom_focus){nexacro.Component.prototype.on_apply_custom_setfocus.call(this,_a);}if(nexacro._enableaccessibility){this._grid.currentcell=this._cellidx;this._grid._currentBand=this._band.id;}};_pGridCell.on_apply_prop_tooltip=function(){var _a=this.getElement();var _b=this._grid;var _c=_b._getDataRow(this._rowidx);this.tooltiptext=this._refobj._getTooltipText(_c);if(_a){_a.setElementToolTip(this.tooltiptext);}};_pGridCell._on_last_lbuttonup=function(){if(this.parent){this.parent._on_last_lbuttonup();}};_pGridCell._on_last_keyup=function(){if(this.parent){this.parent._on_last_keyup();}};_pGridCell._on_killfocus=function(_a,_b){if(this._status!="disable"){if(this._readonly){this._status="readonly";}else{this._status="enable";}}this._setAccessibilityStatFlag(this._status,this._pseudo);};_pGridCell._getAccessibilityLabel=function(_a,_b){var _c=nexacro.Component.prototype._getAccessibilityLabel.call(this,_a);if(!_c&&this.subcells.length>0){var _d=this.subcells;for(var _f=0,_g=_d.length;_f<_g;_f++ ){if(_d[_f]._display_text){if(_c){_c=_c+" "+_d[_f]._display_text;}else{_c=_d[_f]._display_text;}}}}if(nexacro._accessibilitytype==4&&this._is_created&&!_b){var _e=this._getAccessibilityMakeAddLabel();if(_a){if(_a._bindexpr&&_a._bindexpr.length>0){_c=this._refobj._getAttrValue(_a,this._rowidx);}}_c=_e+" "+_c;}return _c;};_pGridCell._setAccessibilityStatFocus=function(){var _a=this._grid;if(_a._currentCellEditor&&_a._showEditing){_a._currentCellEditor._setAccessibilityStatFocus();}else if(this._subComp&&this._curDisplayType!="tree"){this._subComp._setAccessibilityStatFocus();}else{var _b="";var _c=this._refobj;_b=this._getAccessibilityMakeAddLabel();_b+=" "+this._getCellAccessibilityLabel();this._setAccessibilityStatSelected(this.selected);this._setAccessibilityLabel(_b);nexacro.Component.prototype._setAccessibilityStatFocus.call(this);}};_pGridCell._getCellAccessibilityLabel=function(){var _a="";var _b=this._grid;var _c=null;var _d=this._refobj;_c=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_c){if(_c._bindexpr&&_c._bindexpr.length>0){var _e="";_d=this._refobj;_e=_d._getAttrValue(_c,this._rowidx);_c._setValue(_e);}_a=this._getAccessibilityLabel(_c,true);}if(this._subComp){var _f=this._subComp;var _g=this._curDisplayType;if(_g=="checkbox"){this._setAccessibilityStatChecked(_f.isChecked());}else if(_g=="tree"){var _h=_b.getTreeStatus(this._rowidx);var _i=_d._getTreeLevel(this._rowidx);var _j=_d._getTreeStartLevel(this._rowidx);if(nexacro._accessibilitytype!=4){if(_h==0){this._setAccessibilityStatExpanded(false);}else{this._setAccessibilityStatExpanded(true);}}this._setAccessibilityInfoLevel(_i-_j+1);}}if(_c&&nexacro._accessibilitytype==5){var _k=this._getAccessibilityDescription(_c);var _l=this._getAccessibilityAction(_c);_a=_a+" "+_l+" "+_k;}return _a;};_pGridCell._getAccessibilityMakeAddLabel=function(){var _a="",_b=this._grid,_c=this._refobj;if(_b._first_focus&&_b._control_element&&nexacro._accessibilitytype!=5){_a=_b._getAccessibilityLabel(_b.on_find_CurrentStyle_accessibility(_b._pseudo));}if(_c.celltype=="body"||_c.celltype=="summary"){var _d=_b._headBand;var _e="",_f=null,_g=null,_h=null,_i="",_j="";if(this.parentcell){_f=this.parentcell.parent._cells;}else{_f=this.parent._cells;}for(var _l=0,_m=_f.length;_l<_m;_l++ ){_h=_f[_l]._refobj;_g=_f[_l].on_find_CurrentStyle_accessibility(this._pseudo);if(_g&&_h._area=="left"){if(_g._bindexpr&&_g._bindexpr.length>0){_i=_h._getAttrValue(_g,this._rowidx);_g._setValue(_i);}_e=_f[_l]._getAccessibilityLabel(_g,true);if(_h._row<=_c._row&&_c._row<=(_h._row+_h._rowspan-1)){if(_i){_i+=" "+_e;}else{_i=_e;}}}else{break;}}if(_d){var _k=_d._get_rows();_f=_k[0]._cells;for(var _l=0,_m=_f.length;_l<_m;_l++ ){_h=_f[_l]._refobj;_g=_f[_l].on_find_CurrentStyle_accessibility(this._pseudo);if(_g){if(_g._bindexpr&&_g._bindexpr.length>0){_d=_h._getAttrValue(_g,this._rowidx);_g._setValue(_d);}_e=_f[_l]._getAccessibilityLabel(_g,true);if(_h._col<=_c._col&&_c._col<=(_h._colspan+_h._col-1)){if(_j){_j=_j+" "+_e;}else{_j=_e;}}}}}if(_c._area=="left"){if(_j){_a+=" "+_j;}}else{if(_b.accessibilityreadbandlabel){_a+=" "+_i+" "+_j;}else{if(_i&&_b._beforegridrowpos!=_b.currentrow){_a+=" "+_i;}if(_b._beforegridcolpos!=_b.currentcol||(_b._is_first_bodycell&&(_b.currentcell==0||_b.currentrow==_b.rowcount-1))){if(_j){if(_a){_a=_a+" "+_j;}else{_a=_j;}}}}}}return _a;};_pGridCell._getAccessibilityRole=function(_a){var _b=_a.role;if(!_b){var _c=this._refobj;_b=this._accessibility_role;if(_c.celltype=="head"){_b="columnheader";}else if(_c.celltype=="body"&&_c._area=="left"){_b="rowheader";}if(this._curDisplayType=="tree"){_b="treeitem";}else if(this._subComp){_a=this._subComp.on_find_CurrentStyle_accessibility(this._pseudo);_b=this._subComp._getAccessibilityRole(_a);}}return _b;};_pGridCell.on_get_style_accessibility_label=function(){return this._display_text;};_pGridCell._setAccessibilityNotifyEvent=function(_a){var _b=this._getAccessibilityMakeAddLabel();_b+=" "+this._getCellAccessibilityLabel();this._setAccessibilityLabel(_b);return nexacro.Component.prototype._setAccessibilityNotifyEvent.call(this,(_a&&_a>0)?0:1);};_pGridCell._resetScrollPos=function(_a,_b,_c,_d,_e,_f){var _g=this._grid;if(_g){_g._hideEditor();this.parent._showfull(this);if(nexacro._enableaccessibility&&nexacro._accessibilitytype==5&&_g._scrollbars==0){var _h=this.parent;if(_h){_c=_h._adjust_top;}_e=_c+this._adjust_height;nexacro.Component.prototype._resetScrollPos.call(this,_a,_b,_c,_d,_e,_f);}}};_pGridCell.on_apply_text=function(){var _a=this._text_elem;if(_a){var _b=this._refobj;var _c=this._grid._getDataRow(this._rowidx);var _d=_b._getAttrValue(_b.displaytype,_c);var _e=nexacro._toString(this._display_text);if(_e&&_e.indexOf("\r")!= -1){_e=_e.replace(/\r/g,"");}if(_d=="decoratetext"){_a.setElementDecorateText(_e);}else{if(_a.decoration!=""){_a.decoration="";_a.text=null;}_a.setElementText(_e);}}};_pGridCell.on_apply_wordwrap=function(){var _a=this._grid;var _b=_a._getDataRow(this._rowidx);var _c=this._refobj._getWordwrap(_b);var _d=this._text_elem;if(_d){_d.setElementWordWrap(_c);}};_pGridCell.on_apply_style_font=function(_a){var _b=this._text_elem;if(_b){_b.setElementFont(_a);}};_pGridCell.on_apply_style_letterspace=function(_a){var _b=this._text_elem;if(_b){_b.setElementLetterSpace(_a);}};_pGridCell.on_apply_style_color=function(_a){var _b=this._text_elem;if(_b){_b.setElementColor(_a);}};_pGridCell.on_apply_style_align=function(_a){var _b=this._text_elem;if(_b){var _c=_a.halign==""?"center":_a.halign;var _d=_a.valign==""?"middle":_a.valign;_b.setElementAlignXY(_c,_d);}if(this._subComp&&this._subComp._setAlign){this._subComp._setAlign(_a.halign,_a.valign);}};_pGridCell.on_apply_style_ctrlAlign=function(_a,_b){var _c=this._subComp._adjust_width;var _d=this._subComp._adjust_height;var _e=this._getAvailableRect();var _f=_e.width;var _g=_e.height;var _h=0,_i=0;switch(_a){case "left":break;case "right":_h=_f-_c;break;default:_h=Math.round((_f-_c)/2);break;}switch(_b){case "top":break;case "bottom":_i=_g-_d;break;default:_i=Math.round((_g-_d)/2);break;}this._subComp.move(_h,_i,this._subComp._adjust_width,this._subComp._adjust_height);};_pGridCell._common_lbuttonup=function(_a,_b,_c,_d,_e){if(_a){var _f=nexacro._getFirstTouchInfo(_a);if(_f){_b=_f._elem;_c=_f.canvasX;_d=_f.canvasY;_e=_b;}}if(_b!=_e){var _g=this._is_real_upelem=_e;var _h=this._grid;var _i=false;while(_g){if(_g._type_name=="GridCell"){_h._lastmouseentercell=_g;}if(_g._type_name=="Grid"){_i=true;break;}_g=_g.parent;}if(!_g){this._is_real_upelem=_g;}if((nexacro.Browser=="Edge"||nexacro.Browser=="IE")&&!_i){if(_h._showEditing&&_c>=0&&_c<this._adjust_width&&_d>=0&&_d<this._adjust_height){_h._lastmouseentercell=this;this._clickcall=true;}}}return true;};_pGridCell._on_touchend=function(_a,_b,_c,_d,_e,_f){if(this._common_lbuttonup(_c,null,null,null,null)){nexacro.Component.prototype._on_touchend.call(this,_a,_b,_c,_d,_e,_f);}};_pGridCell._on_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._common_lbuttonup(null,_a,_f,_g,_m)){nexacro.Component.prototype._on_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}return true;};_pGridCell._on_dragenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q){if(this._grid._movingcell){this._updateCursor();}return nexacro.Component.prototype._on_dragenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q);};_pGridCell._common_mouseenter=function(_a){if(!this._is_alive){return false;}var _b=this._grid;var _c=_b._getDataRow(this._rowidx);if(_b._isFakeCell(_c)){return false;}if(_a!=this){if(this.parentcell){_b._mouseovercell=this.parentcell;}else{_b._mouseovercell=this;}if(this._isEnable()&&(nexacro.Browser=="Edge"||nexacro.Browser=="IE")){this.on_apply_custom_pseudo("mouseover");}_b._lastmouseentercell=_b._mouseovercell;return true;}return true;};_pGridCell._on_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._common_mouseenter(_b)){return nexacro.Component.prototype._on_mouseenter.call(this._grid._lastmouseentercell,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}};_pGridCell._common_mouseleave=function(_a){if(!this._is_alive){return false;}var _b=this._grid;var _c=_b._getDataRow(this._rowidx);if(_b._isFakeCell(_c)){return false;}if(_a!=this){var _d=this;if(_b._mouseovercell){_d=_b._mouseovercell;_b._mouseovercell=null;}return true;}return false;};_pGridCell._on_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._common_mouseleave(_b)){if(!this._grid._lastmouseentercell){this._grid._lastmouseentercell=this;}this._contents_pseudo="";return nexacro.Component.prototype._on_mouseleave.call(this._grid._lastmouseentercell,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}};_pGridCell._common_fire_lbuttondown=function(_a){var _b=this._grid;var _c=_b._getDataRow(this._rowidx);this._is_clickproc=false;this._clickcall=false;_b._lastmouseentercell=this;if(!_b||_b._isFakeCell(_c)){return false;}if(this._refobj._isSubCell){return this.parent._common_fire_lbuttondown(_a);}if(this._band.id=="body"){var _d=false;if((_c!=_b._selectinfo.curdsrow)||(this._cellidx!=_b._selectinfo.curcell)){if(_b.autoenter=="select"){_d=true;}}else{if(!_b._showEditing){_d=true;}}if(_d){_b._showEditorCell=true;_b._showEditRowIdx=_c;_b._showEditCellIdx=this._cellidx;}}else{if((_c!=_b._selectinfo.curdsrow)||(this._cellidx!=_b._selectinfo.curcell)){if(_b._showEditing){_b._hideEditor();}}}};_pGridCell.on_fire_user_ontouchstart=function(_a,_b,_c,_d){this._common_fire_lbuttondown(_c);var _e=this._grid.parent;var _f=nexacro._getFirstTouchInfo(_b);var _g=_d;if(_f){while(_g&&_g instanceof nexacro.Component){if(_g instanceof nexacro.GridCell){break;}var _h=_g._getRecalcCanvasXY(_d._control_element,_f.canvasX,_f.canvasY);_f.canvasX=_h[0];_f.canvasY=_h[1];if(this._subComp==_g){break;}_g=_g.parent;}if(this._isSubCell){_f.canvasX+=this._adjust_left;_f.canvasY+=this._adjust_top;_f.clientX+=this._adjust_left;_f.clientY+=this._adjust_top;}if(this._subComp==_c){curstyle=this.currentstyle;if(curstyle&&curstyle.padding){_f.canvasX+=curstyle.padding.left;_f.canvasY+=curstyle.padding.top;_f.clientX+=curstyle.padding.left;_f.clientY+=curstyle.padding.top;}}}var _i=this._grid.on_fire_user_ontouchstart(_a,_b,_c,_d,true);var _j=this._grid._getRecalcCanvasXY(_d._control_element,_f.canvasX,_f.canvasY);_f.canvasX=_j[0];_f.canvasY=_j[1];var _k=this._getClientXY(_f.clientX,_f.clientY);_f.clientX=_k[0];_f.clientY=_k[1];if(!_i){while(_e){if(_e.on_fire_user_ontouchstart){_i=_e.on_fire_user_ontouchstart(_a,_b,_c,_d);if(_i){break;}}_e=_e.parent;}}return true;};_pGridCell.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){var _m=_l;while(_m&&_m instanceof nexacro.Component){if(_m instanceof nexacro.GridCell){break;}var _n=_m._getRecalcCanvasXY(_l._control_element,_g,_h);_g=_n[0];_h=_n[1];if(this._subComp==_m){break;}_m=_m.parent;}this._common_fire_lbuttondown(_k);var _o=this._grid.parent;if(this._isSubCell){_g+=this._adjust_left;_h+=this._adjust_top;_i+=this._adjust_left;_j+=this._adjust_top;}if(this._subComp==_k){curstyle=this.currentstyle;if(curstyle&&curstyle.padding){_g+=curstyle.padding.left;_h+=curstyle.padding.top;_i+=curstyle.padding.left;_j+=curstyle.padding.top;}}var _p=this._grid.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,true);var _q=this._grid._getRecalcCanvasXY(_l._control_element,_g,_h);_g=_q[0];_h=_q[1];var _r=this._getClientXY(_g,_j);_i=_r[0];_j=_r[1];if(!_p){while(_o){if(_o.on_fire_user_onlbuttondown){_p=_o.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);if(_p){break;}}_o=_o.parent;}}return true;};_pGridCell._common_fire_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=false;var _q=this._getWindow();var _r=this;if(this._is_real_upelem){_r=_q.findComponent(this._is_real_upelem);}var _s=_n;while(_s&&_s instanceof nexacro.Component){if(_s instanceof nexacro.GridCell||_s instanceof nexacro.Grid){break;}var _t=_s._getRecalcCanvasXY(_n._control_element,_i,_j);_i=_t[0];_j=_t[1];if(this._subComp==_s){break;}_s=_s.parent;}if(_b){var _u=nexacro._getFirstTouchInfo(_b);if(!_u){return false;}if(this._isSubCell){_u.canvasX+=this._adjust_left;_u.canvasY+=this._adjust_top;_u.clientX+=this._adjust_left;_u.clientY+=this._adjust_top;}if(this._subComp==_m){curstyle=this.currentstyle;if(curstyle&&curstyle.padding){_u.canvasX+=curstyle.padding.left;_u.canvasY+=curstyle.padding.top;_u.clientX+=curstyle.padding.left;_u.clientY+=curstyle.padding.top;}}var _v=this._grid.parent;_p=this._grid.on_fire_user_ontouchend(_a,_b,_r,_r,true);if(!this._is_alive){return true;}var _w=this._grid._getRecalcCanvasXY(_n._control_element,_u.canvasX,_u.canvasY);_u.canvasX=_w[0];_u.canvasY=_w[1];var _x=this._getClientXY(_u.clientX,_u.clientY);_u.clientX=_x[0];_u.clientY=_x[1];if(!_p){while(_v){if(_v.on_fire_user_ontouchend){_p=_v.on_fire_user_ontouchend(_a,_b,_m,_n);if(_p){break;}}_v=_v.parent;}}}else{if(this._isSubCell){_i+=this._adjust_left;_j+=this._adjust_top;_k+=this._adjust_left;_l+=this._adjust_top;}if(this._subComp==_m){curstyle=this.currentstyle;if(curstyle&&curstyle.padding){_i+=curstyle.padding.left;_j+=curstyle.padding.top;_k+=curstyle.padding.left;_l+=curstyle.padding.top;}}var _v=this._grid.parent;_p=this._grid.on_fire_user_onlbuttonup(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_r,_r,_o,true);if(!this._is_alive){return true;}var _w=this._grid._getRecalcCanvasXY(_n._control_element,_i,_j);_i=_w[0];_j=_w[1];var _x=this._getClientXY(_i,_l);_k=_x[0];_l=_x[1];if(!_p){while(_v){if(_v.on_fire_user_onlbuttonup){_p=_v.on_fire_user_onlbuttonup(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);if(_p){break;}}_v=_v.parent;}}}var _y=this._grid;var _z=_y._getDataRow(this._rowidx);var _aa=this._is_real_upelem;var _ab=this._is_clickproc;var _ac=this._clickcall;this._is_real_upelem=null;this._is_clickproc=false;this._clickcall=false;if(_y._isFakeCell(_z)){return false;}var _ad=(this.parentcell)?this.parentcell:this;var _ae=_ad._refobj;var _af=_y._treetarget;if(!_ab){if(_af&&_af.row==_z&&_af.cell==_ae._cellidx){_ad.on_fire_onclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,"treebutton",true);}else{if(_y._lastmouseentercell==_ad){if((_z==_y._selectinfo.curdsrow)&&(_ad._cellidx==_y._selectinfo.curcell)){if(_y._showEditing){var _ag=_y._currentCellEditor;if(_ag){if(_aa instanceof nexacro.InputElement){_aa.setElementFocus();if(_ag.getCaretPos){var _ah=_ag.getSelect();if(_ah[0]==_ah[1]){var _ai=_ag.getCaretPos();_ag._setFocus(false);if(_ag.setCaretPos){_ag.setCaretPos(_ai);}}}else{_ag._setFocus(false);}}else{_ag._setFocus(false);}}if(_aa){var _aj=false;var _ak=_aa;while(_ak){if(_ak._cellobj==_m){_aj=true;break;}_ak=_ak.parent;}if(!_aj){_aj=_ac;}if(_aj){_ad.on_fire_onclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,"",true);}}}else{if(_aa){var _al=(_m.parentcell)?_m.parentcell:_m;var _aj=false;var _ak=_aa;while(_ak){if(_ak==_al){_aj=true;break;}_ak=_ak.parent;}if(_aj){_ad.on_fire_onclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,"",true);}}}}}}}this._editshowing=false;};_pGridCell.on_fire_user_ontouchend=function(_a,_b,_c,_d){this._common_fire_lbuttonup(_a,_b,"",false,false,false, -1, -1, -1, -1, -1, -1,_c,_d,null);return true;};_pGridCell.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){this._common_fire_lbuttonup(null,null,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridCell._getClickItem=function(_a,_b,_c,_d,_e,_f){if(!_e){return "";}var _g="";var _h=nexacro._getTextSize2(_f.currentstyle.letterspace,_e,_f.currentstyle.font,null,null,null,this._rtldirection);var _i=_f._getClientXY(_c,_d);var _a,_b;var _j=false;if(_a=="left"){if(_i[0]<=_h[0]){_j=true;}}else if(_a=="center"){var _k=(_f._client_width-_h[0])/2;var _l=_k+_h[0];if(_i[0]>=_k&&_i[0]<=_l){_j=true;}}else{if(_i[0]>=_f._client_width-_h[0]){_j=true;}}if(_j){if(_b=="top"){if(_i[1]<=_h[1]){_g="text";}}else if(_b=="middle"){var _m=(_f._client_height-_h[1])/2;var _n=_m+_h[1];if(_i[1]>=_m&&_i[1]<=_n){_g="text";}}else{if(_i[1]>=_f._client_height-_h[1]){_g="text";}}}return _g;};_pGridCell._clickitem="";_pGridCell._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(!this._hideInner){if(_a instanceof nexacro.ControlElement){this._clickitem="border";}else if(_a instanceof nexacro.TextBoxElement){var _j,_k;if(_a.align){_j=_a.align._halign;_k=_a.align._valign;}else if(_a.halign&&_a.valign){_j=_a.halign;_k=_a.valign;}this._clickitem=this._getClickItem(_j,_k,_f,_g,_a.text,this);}}var _l=nexacro.Component.prototype._on_click.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._clickitem="";return _l;};_pGridCell.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(!_n){var _o=_l;while(_o&&_o instanceof nexacro.Component){if(_o instanceof nexacro.GridCell){break;}var _p=_o._getRecalcCanvasXY(_l._control_element,_g,_h);_g=_p[0];_h=_p[1];if(this._subComp==_o){break;}_o=_o.parent;}}if(this._isSubCell){_g+=this._adjust_left;_h+=this._adjust_top;_i+=this._adjust_left;_j+=this._adjust_top;}if(this._subComp==_k){curstyle=this.currentstyle;if(curstyle&&curstyle.padding){_g+=curstyle.padding.left;_h+=curstyle.padding.top;_i+=curstyle.padding.left;_j+=curstyle.padding.top;}}if(this._band){this._is_clickproc=true;if(nexacro.Browser=="Edge"||nexacro.Browser=="IE"){if(!(this._grid.onlbuttondown&&this._grid.onlbuttondown.defaultprevented==true)||(this._grid.onlbuttonup&&this._grid.onlbuttonup.defaultprevented==true)){if(!this._grid._showEditing){this._setFocus(false);}}}if(_m==undefined){_m=this._clickitem;}if(this._grid._scrollpixel=="all"){this._showfull(this);}else{this.parent._showfull(this);}if(this._band.id=="body"){this._grid.on_fire_cellclick(this,_m,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);}else if(this._band.id=="head"){this._grid.on_fire_headclick(this,_m,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);}else if(this._band.id=="summ"){this._grid.on_fire_summclick(this,_m,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);}this._needToggle("onclick",_k);}return true;};_pGridCell.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=_l;while(_n&&_n instanceof nexacro.Component){if(_n instanceof nexacro.GridCell){break;}var _o=_n._getRecalcCanvasXY(_l._control_element,_g,_h);_g=_o[0];_h=_o[1];if(this._subComp==_n){break;}_n=_n.parent;}if(this._isSubCell){_g+=this._adjust_left;_h+=this._adjust_top;_i+=this._adjust_left;_j+=this._adjust_top;}if(this._subComp==_k){curstyle=this.currentstyle;if(curstyle&&curstyle.padding){_g+=curstyle.padding.left;_h+=curstyle.padding.top;_i+=curstyle.padding.left;_j+=curstyle.padding.top;}}if(this._band){nexacro._fireBeforeDblclick(_l,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);if(_m==undefined){_m="";}if(this._band.id=="body"){return this._grid.on_fire_celldblclick(this,_m,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);}else if(this._band.id=="head"){return this._grid.on_fire_headdblclick(this,_m,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);}else if(this._band.id=="summ"){return this._grid.on_fire_summdblclick(this,_m,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);}if(!this._is_alive){return;}}return true;};_pGridCell.on_fire_onsize=function(_a,_b){var _c=this._grid._currentCellEditor;var _d=this._grid;var _e=_d._getDataRow(this._rowidx);if(_c){if(_d._currentCellCell==this._cellidx&&this._grid._currentCellRow==_e){var _f=this._setPositionInGrid(_c);}}return false;};_pGridCell.on_fire_onmove=function(_a,_b){var _c=this._grid._currentCellEditor;var _d=this._grid;var _e=_d._getDataRow(this._rowidx);if(_c){if(_d._currentCellCell==this._cellidx&&this._grid._currentCellRow==_e){var _f=this._setPositionInGrid(_c);}}return false;};_pGridCell._applyMouseLeaveEvent=function(){if(this._is_created&&this._pseudo=="mouseover"){var _a=this.parent;var _b=this._grid;if(_b._isSelectRowType()){_a._updateAll("normal");}else{this._updateAll("normal");}}};_pGridCell._applyMouseOverEvent=function(){if(this._is_created&&this._pseudo=="normal"){var _a=this.parent;var _b=this._grid;if(this._grid._isSelectRowType()){_a._updateAll("mouseover");}else{this._updateAll("mouseover");}}};_pGridCell._hideInnerElement=function(){this.getElement().setContainerVisible(false);this._hideInner=true;this.__showExpand(false);if(this._curDisplayType=="tree"){this._subComp._treeline_visible(false);}};_pGridCell._showInnerElement=function(){this.getElement().setContainerVisible(true);this._hideInner=false;this.__showExpand(true);if(this._curDisplayType=="tree"){this._subComp._treeline_visible(true);}};_pGridCell.__showExpand=function(_a){if(!this._expandCtrl){return;}if(this._fakecell||this._is_fakemerge){this._expandCtrl.set_visible(false);return;}var _b=this._grid;var _c=this._refobj;var _d=_b._getDataRow(this._rowidx);var _e=_c._getAttrValue(_c.expandshow,_d);if(_e=="show"){if(_a==false){if(_c.suppressalign.indexOf("over")>0){this._expandCtrl.set_visible(true);}else{this._expandCtrl.set_visible(this.selected);}}else{this._expandCtrl.set_visible(true);}}else{this._expandCtrl.set_visible(false);}};_pGridCell._createDisplayer=function(_a){var _b="";var _c=this._grid;var _d=this._refobj;var _e=_c._getDataRow(this._rowidx);switch(_a){case "button":this._createButtonDisplayer();break;case "checkbox":this._createCheckboxDisplayer();break;case "image":this._createImageDisplayer();break;case "tree":this._createTreeDisplayer();_c._setTreeCellinfo(_d);break;case "combo":_b=_d._getAttrValue(_d.combodisplay,_e);if(_b=="display"){this._createComboDisplayer();}else{this._createTextDisplayer();}break;case "date":_b=_d._getAttrValue(_d.calendardisplay,_e);if(_b=="display"){this._createCalendarDisplayer();}else{this._createTextDisplayer();}break;case "text":case "decoratetext":case "normal":_b=_d._getAttrValue(_d.editdisplay,_e);var _f=_d._getEdittype(_e);if(_b=="display"){if(_f=="textarea"||_f=="readonly"){this._createTextAreaDisplayer();}else{this._createEditDisplayer();}}else{this._createTextDisplayer();}break;case "number":case "exponent":case "currency":_b=_d._getAttrValue(_d.editdisplay,_e);if(_b=="display"){this._createEditDisplayer();}else{this._createTextDisplayer();}break;case "bar":this._createBarDisplayer();break;}this._curDisplayType=_a;this._curEditDisplay=_b;};_pGridCell._isChangeDisplayer=function(_a,_b){var _c=this._grid;var _d=this._curDisplayType;if((_a!=_d)||_c._changeDisplayer){return true;}var _e="";var _f=this._refobj;if(_d=="combo"){_e=_f._getAttrValue(_f.combodisplay,_b);}else if(_d=="date"){_e=_f._getAttrValue(_f.calendardisplay,_b);}else if(_d=="text"||_d=="decoratetext"||_d=="normal"||_d=="number"||_d=="exponent"||_d=="currency"){_e=_f._getAttrValue(_f.editdisplay,_b);}if(_e!=this._curEditDisplay){return true;}return false;};_pGridCell._updateDisplayer=function(){var _a=this._grid;var _b=this._refobj;var _c=_a._getDataRow(this._rowidx);var _d=_b._getAttrValue(_b.displaytype,_c);var _e=true;var _f=this._band;if(_d===undefined){_d="normal";}if(this._isChangeDisplayer(_d,_c)==true){if(this._curDisplayType!=""){this._destroyDisplayer(_a._lbuttondown_proc);}this._createDisplayer(_d);if(this._subComp&&!this._subComp._is_created){this._subComp.on_created();}}else{this.on_apply_wordwrap();}var _g=_b._getAttrValue(_b.expandshow,_c);var _h=_b._getAttrValue(_b.expandsize,_c);if(_g=="show"){if(!this._expandCtrl){this._createExpandDisplayer();}else{if(this._expand_width!=_h){this._expandCtrl.destroy();this._expandCtrl=null;this._createExpandDisplayer();}else{this._changeClientmode("expand");}}this._control_element._updateClientSize();this._updateClientSize(this._control_element);}else{if(this._expandCtrl){this._expand_width=0;this._expandCtrl.destroy();this._expandCtrl=null;this._control_element._setExpandControl(null,0);this._updateClientSize(this._control_element);if(this._control_element._mode=="expandtext"){this._changeClientmode("text");}}}var _i=_a._isFakeCell(_c);if(_i){if(_a.fillareatype=="datarow"){if(!this._isDisplayDataType(_d)){if(_d!="date"){_e=false;if(_i!=this._fakecell||_a._resetfillarea){this._hideInnerElement();this._fakecell=_i;}}}}else if(_a.fillareatype=="linerow"){_e=false;if(_i!=this._fakecell||_a._resetfillarea){this._hideInnerElement();this._fakecell=_i;}}else if(_a.fillareatype=="controlrow"){if(this._isDisplayDataType(_d)){_e=false;if(_i!=this._fakecell||_a._resetfillarea){this._hideInnerElement();this._fakecell=_i;}}}}else{if(_i!=this._fakecell){this._showInnerElement();this._fakecell=_i;}}return _e;};_pGridCell._isUpdateArea=function(){if(this._isSubCell){return true;}var _a=this.parent,_b=_a.getElement(),_c=_b.scroll_left,_d=_c+this._grid._adjust_width;var _e=this._refobj;if(_e._area!="body"||(_c<=this._getPosRight()&&_d>=this._adjust_left)){return true;}return false;};_pGridCell._updateAll=function(_a,_b){if(!this._is_alive){return;}this._rowidx=this.parent._rowidx;var _c=this.getElement();if(_c){if(this._isUpdateArea()==false){return;}var _d=this._grid;var _e=this._disp_show=this._updateDisplayer();var _f=this._refobj;var _g=_d._getDataRow(this._rowidx);if(_d._currentCellRow>=0){var _h=this._text_elem;if(_h){var _i=this.parentcell?this.parentcell._cellidx:this._cellidx;if(_d._currentCellCell==_i&&_d._currentCellRow==_g){_h.setElementTextVisible(false);}else{_h.setElementTextVisible(true);}}var _j=this._subComp;if(_j){var _i=this.parentcell?this.parentcell._cellidx:this._cellidx;if(_d._currentCellCell==_i&&_d._currentCellRow==_g){_j.set_visible(false);}else{_j.set_visible(true);}if(_d._isSelectRowType()){_j.on_apply_pseudo();}}}this._display_text=this._getDisplayText();this.on_apply_text();this._control_pseudo="";this._contents_pseudo="";_a=_a===undefined?"normal":_a;if(_d._ReasonRefresh){this._status=_d._ReasonRefresh._status;}this.on_apply_pseudo(_a,_b);if(this.subcells.length>0){for(var _m=0,_n=this.subcells.length;_m<_n;_m++ ){this.subcells[_m]._updateAll(_a);}}else{if(_f._getSuppress(_g)!=0){if(this._band.id=="body"&&_f.suppressalign.indexOf("over")>0){this._hideInnerElement();}else{if(_e){var _k=this._getSuppressInfo();if(_k){if(_k.text_proc!=0){this._hideInnerElement();}else{this._showInnerElement();}}}}}else{if(_e&&this._hideInner){this._showInnerElement();}}}if(_c._mode=="text"){this._changeClientmode("text");}if(_d._isFakeCell(_g)==false){if(_f._getSuppress(_g)==0){var _l=this._is_fakemerge=_d._checkFakeMerge(_f,_g);if(_l){this._hideInnerElement();}else{this._showInnerElement();}}}}};_pGridCell._getSuppressInfo=function(){var _a=this._grid;var _b;if(_a._fixed_rowcnt>0){if(_a._fixed_endrow>=this._rowidx){_b=_a._fixed_startrow;}else{_b=_a._toprowpos[0]-(_a._fixed_rowcnt-_a._fixed_startrow);}}else{_b=_a._toprowpos[0];}var _c=this._rowidx-_b;if(this._rowidx>=0&&_c<0){return null;}return this._refobj._getSuppressInfo(_c);};_pGridCell._getAvailableRect=function(){var _a=this._grid;var _b=_a._getAvailableRect(this);return _b;};_pGridCell._changeClientmode=function(_a){var _b=this.getElement();var _c=null;if(_b){var _d=this.currentstyle.padding;if(this._refobj._subcells.length){_a="normal";}else if(_a=="expand"){if(_b._mode!="normal"){_a="expandtext";}else{_a="normal";}}else if(_a=="text"){if(this._expandCtrl){_a="expandtext";}else if(_d){_a=(_d.right>0||_d.bottom>0)?"expandtext":"text";}}_c=_b._changeMode(_a,this.currentstyle.padding);if(_a=="text"||_a=="expandtext"){this._text_elem=_c;}else{this._text_elem=null;}}};_pGridCell._createExpandDisplayer=function(){var _a=this.getElement();if(_a){this._changeClientmode("expand");var _b=this._grid._getDataRow(this._rowidx);this._expand_width=this._refobj._getAttrValue(this._refobj.expandsize,_b);var _c=this.on_find_CurrentStyle_border(this._pseudo);var _d=this._adjust_width-this._expand_width-((_c)?_c._right_width:0);var _e=0;var _f=_d+this._expand_width;var _g=this._adjust_height-((_c)?_c._bottom_width:0);if(_d<0){_d=0;_f=this._adjust_width;}var _h=this._expandCtrl=new nexacro.GridExpand(this,_d,_e,_f,_g);_h.createComponent();this._control_element._setExpandControl(this._expandCtrl,this._expand_width);}};_pGridCell._createTextDisplayer=function(){var _a=this.getElement();if(_a){var _b=this._getAvailableRect();this._changeClientmode("text");var _c=this._text_elem;if(_c){this.on_apply_wordwrap();}this.currentstyle._empty();}};_pGridCell._createButtonDisplayer=function(_a,_b){var _c=this.getElement();if(_c){var _d=this._getAvailableRect();var _e=_d.width;var _f=_d.height;this._changeClientmode("normal");var _g=new nexacro.GridControlButton("controlbutton",0,0,_e,_f,this,true);_g._is_subcontrol=true;_g.createComponent(true);this._subComp=_g;var _h=this._grid;var _i=_h._getDataRow(this._rowidx);var _j=this._refobj._getWordwrap(_i);_g.set_wordwrap(_j);this.currentstyle._empty();}};_pGridCell._createCheckboxDisplayer=function(_a,_b){var _c=this.getElement();if(_c){this._changeClientmode("normal");var _d=new nexacro.GridControlCheckbox("controlcheckbox",0,0,0,0,this,true);_d._is_subcontrol=true;_d.createComponent(true);this._subComp=_d;this.currentstyle._empty();}};_pGridCell._createImageDisplayer=function(_a,_b){var _c=this.getElement();if(_c){var _d=this._getAvailableRect();var _e=_d.width;var _f=_d.height;var _g=16;var _h=Math.round((_e-_g)/2);var _i=Math.round((_f-_g)/2);var _j=_h+_g;var _k=_i+_g;this._changeClientmode("normal");var _l=new nexacro.GridControlImage("controlimage",_h,_i,_g,_g,this);_l._is_subcontrol=true;_l.createComponent(true);this._subComp=_l;this.currentstyle._empty();}};_pGridCell._createTreeDisplayer=function(_a,_b){var _c=this.getElement();if(_c){var _d=this._getAvailableRect();var _e=_d.width;var _f=_d.height;this._changeClientmode("normal");var _g=this._subComp=new nexacro.GridControlTree("controltree",0,0,_e,_f,this);_g._is_subcontrol=true;_g.createComponent(true);this._subComp=_g;this.currentstyle._empty();}};_pGridCell._createComboDisplayer=function(_a,_b){var _c=this.getElement();if(_c){var _d=this._getAvailableRect();var _e=_d.width;var _f=_d.height;this._changeClientmode("normal");var _g=new nexacro.GridControlCombo("controlcombo",0,0,_e,_f,this,true);_g._cellinfo=this._refobj;_g._is_subcontrol=true;_g.createComponent(true);_g.comboedit._input_element._isUseDelCaret=true;this._subComp=_g;this.currentstyle._empty();}};_pGridCell._createCalendarDisplayer=function(_a,_b){var _c=this.getElement();if(_c){var _d=this._getAvailableRect();var _e=_d.width;var _f=_d.height;this._changeClientmode("normal");var _g=this._subComp=new nexacro.GridControlCalendar("controlcalendar",0,0,_e,_f,this,true);_g._cellinfo=this._refobj;_g._is_subcontrol=true;_g.createComponent(true);_g.calendaredit._input_element._isUseDelCaret=true;this._subComp=_g;this.currentstyle._empty();}};_pGridCell._createEditDisplayer=function(_a,_b){var _c=this.getElement();if(_c){var _d=this._getAvailableRect();var _e=_d.width;var _f=_d.height;this._changeClientmode("normal");var _g=this._subComp=new nexacro.GridControlEdit("controledit",0,0,_e,_f,this,true);_g._is_subcontrol=true;_g.createComponent(true);_g._input_element._isUseDelCaret=true;this._subComp=_g;this.currentstyle._empty();}};_pGridCell._createTextAreaDisplayer=function(_a,_b){var _c=this.getElement();if(_c){var _d=this._getAvailableRect();var _e=_d.width;var _f=_d.height;this._changeClientmode("normal");var _g=this._subComp=new nexacro.GridControlTextArea("controltextarea",0,0,_e,_f,this,true);_g._isSubControl=true;_g.createComponent(true);_g._input_element._isUseDelCaret=true;this._subComp=_g;var _h=this._grid;var _i=_h._getDataRow(this._rowidx);var _j=this._refobj._getWordwrap(_i);_g.set_wordwrap(_j);this.currentstyle._empty();}};_pGridCell._createBarDisplayer=function(_a,_b){var _c=this.getElement();if(_c){var _d=this._getAvailableRect();var _e=_d.width;var _f=_d.height;this._changeClientmode("normal");var _g=this._subComp=new nexacro.GridControlBar("controlprogressbar",0,0,_e,_f,this,true);_g._is_subcontrol=true;_g.createComponent(true);this._subComp=_g;this.currentstyle._empty();}};_pGridCell._updateAvailableArea=function(){var _a=this._getAvailableRect();var _b=this._subComp;if(_b){var _c=_a.width;var _d=_a.height;if(this._curDisplayType=="checkbox"||this._curDisplayType=="image"){var _e=this.currentstyle.align;if(_e&&!_e._is_empty){this.on_apply_style_ctrlAlign(_e.halign,_e.valign);}}else{_b.move(0,0,_c,_d);}}var _f=this._expandCtrl;if(_f){var _g=_f.left;var _h=0;var _i=_f.width;var _j=this._adjust_height;_f._applysetPosition(_g,_h,_i,_j);}};_pGridCell._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridCell._getDisplayRowIdx=function(){return this._rowidx-this._grid._getBodyBegRowPos(this._rowidx);};_pGridCell._is_Selected=function(){return (this.selected&&this._grid.useselcolor);};_pGridCell._getResultPseudo=function(_a,_b){_b=nexacro.Component._status_table[_a+"_"+_b];var _c=this._grid;if(_b=="mouseover"){_c._mouseRowPos=_c._getDataRow(this._rowidx);_c._mouseCellPos=this._cellidx;}else{_c._mouseRowPos= -9;_c._mouseCellPos= -1;}var _d=_c._getDataRow(this._rowidx);if((_c._isFakeCell(_d)&&_b!="disabled")||nexacro._cur_track_info||nexacro.isTouchInteraction){_b="normal";}else{var _e=_c._mouseRowPos;if(_e==_d&&_b=="normal"){_b="mouseover";}}return _b;};_pGridCell._getDisplayText=function(){if(this._refobj){var _a=this._grid;var _b=_a._getDataRow(this._rowidx);return this._refobj._getDisplayText(_b);}return "";};_pGridCell._setDisplayText=function(){this._display_text=this._getDisplayText();this.on_apply_text();};_pGridCell.__updateCustomStyles=function(){this.on_apply_wordwrap();};_pGridCell._isDisplayDataType=function(_a){if(_a=="number"||_a=="exponent"||_a=="currency"||_a=="normal"||_a=="text"||_a=="decoratetext"){return true;}return false;};_pGridCell._showfull=function(_a){if(this._isSubCell){return this.parent._showfull();}var _b=this._band;var _c=this._grid._getScrollLeft();var _d=this._grid._getScrollTop();var _e=_b._control_element;var _f=this.parent._adjust_top;var _g=this._adjust_left;var _h=this._adjust_top+_f;var _i=this._adjust_width;var _j=this._adjust_height;var _k=_g+_i;var _l=_h+_j;_g-=_c;_k-=_c;_h-=_d;_l-=_d;var _m=this._grid;var _n=this.parent;var _o=_m.hscrollbar;var _p=_m.vscrollbar;var _q=this._refobj;var _r=_n._getAreaRect(_q._area);if(_o&&_q._area=="body"){if(_i<_r.width){if(_g<0){if(_o._isEnable()){_o.set_pos(_o.pos+_g);}}else if(_k>_r.width){var _s=_k-_r.width;if(_o._isEnable()){_o.set_pos(_o.pos+_s);}}}}if(_b.id=="body"){if(_p&&_a&&!_n._fixed){if(_j<_b._client_height){if(_h<0){if(_p._isEnable()){_p._set_pixelpos(_p._pos+_h);}}else if(_l>_b._client_height){var _t=_l-_b._client_height;if(_p._isEnable()){_p._set_pixelpos(_p._pos+_t);}}}}}};_pGridCell._needToggle=function(_a,_b){if(!this._is_alive){return;}var _c=this._grid;var _d=_c._getDataRow(this._rowidx);var _e=this._refobj._getEdittype(_d);if(_c.selectchangetype=="down"&&_a=="onclick"){return;}else if(_c.selectchangetype=="up"&&_a=="onlbuttondown"){return;}if(_e=="checkbox"&&nexacro._toBoolean(_c.readonly)==false){if(this._curDisplayType!="checkbox"){_c._toggleVal(_d,this._refobj);}else{if(_a=="onclick"||_a=="onlbuttondown"){if(this._grid.cellclickbound=="cell"&&_b==this){if(this._subComp&&this._subComp._toggleCheck){this._subComp._toggleCheck();}}}else{if(this._subComp&&this._subComp._toggleCheck){this._subComp._toggleCheck();}}}}};_pGridCell._setPositionInGrid=function(_a,_b,_c){var _d=(this._isSubCell)?this.parent.parent:this.parent;var _e=this._band;var _f=this._grid;var _g=this._refobj;var _h=_d._getAreaRect(_g._area);var _i=_h.left;var _j=_h.left+_h.width;var _k=(_e.id=="body"&&_d._fixed);var _l=_e._adjust_top+((_e.id=="body"&&_k==false)?_f._fixed_height:0);var _m=_e._getPosBottom();var _n=this._adjust_left+_i;var _o=_d._adjust_top+this._adjust_top+_l;if(!_b){var _p=(_k)?0:_f._getScrollTop();var _q=_f._getScrollLeft();if(_g._area=="body"){_n-=(_q>=0)?_q:0;}if(_e.id=="body"){_o-=(_p>=0)?_p:0;}}if(_e._refobj._noborder==true&&_g._row==0&&this._getDisplayRowIdx()<=0){_o+=(this.currentstyle.border)?this.currentstyle.border._bottom_width:0;}var _r=this._getAvailableRect();if(!_c){var _s=this.currentstyle.padding;_n+=(_s)?_s.left:0;_o+=(_s)?_s.top:0;}var _t=_n+_r.width;var _u=_o+_r.height;var _v=_o,_w=_n;if(_o<_l){_o=_l;}if(_u>_m){_u=_m;}if(_n<_i){_n=_i;}if(_t>_j){_t=_j;}var _x=_t-_n;var _y=_u-_o;if(_x<0){_x=0;}if(_y<0){_y=0;}if(_a){if(_x==0||_y==0){_a.move(0, -10,0,0);}else{_a.move(_n,_o,_x,_y);}}return {left:_n,top:_o,right:_t,bottom:_u,width:_x,height:_y,orgt:_v,orgl:_w};};_pGridCell._showEditor=function(_a,_b,_c){var _d=this._text_elem;var _e=this._refobj;var _f=this._grid;var _g=_f._getDataRow(this._rowidx);var _h;_f._currentCellCell=this._cellidx;_f._currentCellRow=_g;_f._currentCellCol=_e._col;_f._currentCellSubRow=_e._row;if(!_a){if(_c){this._showfull();}if(_f._showEditing){_f._hideEditor();}if(_d){_d.setElementTextVisible(false);}if(this._subComp){this._subComp.set_visible(false);}_h=_f._createEditor(this);this._setPositionInGrid(_h);_h._EditUpdateAll(_e,this);_h.set_visible(true);_h._setRtlDirection(this._rtldirection);if(nexacro.isTouchInteraction||_f.selectchangetype=="up"){_h._setFocus(false);}if(_f.autoenter=="select"&&_f._lbuttondown_proc){_h._user_push=true;_h._stat_change("focus","pushed");_h._is_pushed_area=true;_h._is_push=true;}else{_h._stat_change("focus","focused");}}else{if(this._subComp){this._subComp.set_visible(false);}_h=_f._currentCellEditor;if(_h){_h._cellinfo=_e;_h._cellobj=this;this._setPositionInGrid(_h);if(_b==true){_h._setFocus(false);}}}};_pGridCell._hideEditor=function(){var _a=this._text_elem;if(_a){_a.setElementTextVisible(true);}this._grid._currentCellCell= -1;this._grid._currentCellRow= -1;this._grid._currentCellCol= -1;this._grid._currentCellSubRow= -1;if(this._subComp){if(this._subComp._displaymode){this._grid._changeDisplayer=true;this._updateDisplayer();this._subComp._updateAll();this._grid._changeDisplayer=false;}else{if(nexacro.Browser=="Runtime"&&this._subComp.setCaretPos){this._subComp.setCaretPos(0);}this._subComp.set_visible(true);}}};_pGridCell._hasEditor=function(){var _a=this._refobj;var _b=this._grid;var _c=_b._getDataRow(this._rowidx);var _d=_a._getEdittype(_c);switch(_d){case "none":return false;case "normal":case "text":case "combo":case "date":case "mask":case "masknumber":case "textarea":case "button":case "readonly":return true;}return false;};_pGridCell.on_apply_prop_rtldirection=function(){nexacro.Component.prototype.on_apply_prop_rtldirection.call(this);var _a=this._text_elem;if(_a){_a.setElementRtlDirection(this._rtldirection);}if(this._subComp){this._subComp._setRtlDirection(this._rtldirection);}};delete _pGridCell;nexacro.GridExpand=function(_a,_b,_c,_d,_e,_f){nexacro.Component.call(this,"controlexpand","absolute",_b,_c,_d-_b,_e-_c,null,null,_a);this.tabstop=false;this.parent=_a;this._is_subcontrol=true;this._is_nc_control=true;this._controlmode=(_f)?true:false;if(_a._refobj){this._grid=_a._grid;this._cellobj=_a;this._cellinfo=_a._refobj;}else{this._grid=_a;}this._text="";this._imagetext="";};var _pGridExpand=nexacro._createPrototype(nexacro.Component,nexacro.GridExpand);nexacro.GridExpand.prototype=_pGridExpand;_pGridExpand._type_name="GridExpand";_pGridExpand._text_elem=null;_pGridExpand._img_elem=null;_pGridExpand._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridExpand.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.currentstyle;if(this._text){var _c=this._text_elem=new nexacro.TextBoxElement(_a);var _d=_b.align.halign==""?"center":_b.align._halign;var _e=_b.align.valign==""?"middle":_b.align._valign;_c.setElementFont(_b.font);_c.setElementColor(_b.color);_c.setElementAlignXY(_d,_e);_c.setElementLetterSpace(_b.letterspace);}if(this._imagetext){this._setExpandImg(this._imagetext);}}};_pGridExpand.on_created_contents=function(){var _a=this._text_elem;var _b=this._img_elem;if(_b){_b.create();}if(_a){_a.create();}};_pGridExpand.on_destroy_contents=function(){var _a=this.getElement();if(_a){if(this._text_elem){this._text_elem.destroy();this._text_elem=null;}if(this._img_elem){this._img_elem.destroy();this._img_elem=null;}}this._grid=null;this._cellobj=null;this._cellinfo=null;};_pGridExpand.on_change_containerRect=function(_a,_b){};_pGridExpand._setAccessibilityStatFocus=function(){var _a=this._cellobj;var _b=_a._getAccessibilityMakeAddLabel();var _c="";var _d=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_d){if(_d._bindexpr&&_d._bindexpr.length>0){_c=this._cellinfo._getAttrValue(_d,this._rowidx);_d._setValue(_c);}_c=this._getAccessibilityLabel(_d);}else{_c=_a._getCellAccessibilityLabel();}_b+=" "+_c;this._setAccessibilityLabel(_b);nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pGridExpand._find_pseudo_obj=function(_a,_b,_c,_d){if(!_d){return nexacro.Component.prototype._find_pseudo_obj.call(this,_a,_b,_c);}var _e=this._cellinfo;var _f=this._grid;var _g=_f._getDataRow(this._cellobj._rowidx);if(this._cellobj&&this._grid._isFakeCell(_g)&&_b!="disabled"){_b="normal";}_g=_f._getDataRow(this._cellobj._rowidx);var _h="control"+_a;var _i=_e._query_pseudo_control(this,_g,_h,_a,_b,_c);return _i;};_pGridExpand.on_find_CurrentStyle_background=function(_a){return this._find_pseudo_obj("background",_a,"background",true);};_pGridExpand.on_find_CurrentStyle_color=function(_a){var _b=this._find_pseudo_obj("color",_a,"color",true);if(!_b){_b=this._cellobj.on_find_CurrentStyle_color(this._cellobj._pseudo);}return (_b)?_b:nexacro.Component._default_color;};_pGridExpand.on_find_CurrentStyle_font=function(_a){var _b=this._find_pseudo_obj("font",_a,"font",true);if(!_b){_b=this._cellobj.on_find_CurrentStyle_font(this._cellobj._pseudo);}return (_b)?_b:nexacro.Component._default_font;};_pGridExpand.on_find_CurrentStyle_cursor=function(_a){var _b=this._find_pseudo_obj("cursor",_a,"cursor",true);if(!_b){_b=this._cellobj.on_find_CurrentStyle_cursor(this._cellobj._pseudo);}return _b;};_pGridExpand.on_find_CurrentStyle_letterspace=function(_a){var _b=this._find_pseudo_obj("letterspace",_a,"letterspace");if(!_b){_b=this._cellobj.on_find_CurrentStyle_letterspace(this._cellobj._pseudo);}return (_b)?_b:nexacro.Component._default_letterspace;};_pGridExpand.on_get_style_accessibility_description=function(){if(this._cellobj){this._cellobj.tooltiptext;}};_pGridExpand.on_get_style_accessibility_label=function(){return this.text;};_pGridExpand._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseenter();}if(_o){nexacro.Component.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridExpand._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseleave();}if(_o){nexacro.Component.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridExpand.on_fire_user_ontouchstart=function(_a,_b,_c,_d){this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);var _e=nexacro._getFirstTouchInfo(_b);if(_e){this._grid.on_fire_onexpanddown("",false,false,false,_e.screenX,_e.screenY,_e.canvasX,_e.canvasY,_e.clientX,_e.clientY,_c,_d);}return true;};_pGridExpand.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._grid.on_fire_onexpanddown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);return true;};_pGridExpand.on_fire_user_ontouchend=function(_a,_b,_c,_d){this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);var _e=nexacro._getFirstTouchInfo(_b);if(_e){this._grid.on_fire_onexpandup("",false,false,false,_e.screenX,_e.screenY,_e.canvasX,_e.canvasY,_e.clientX,_e.clientY,_c,_d);return true;}};_pGridExpand.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._grid.on_fire_onexpandup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridExpand.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pGridExpand.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pGridExpand._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridExpand._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridExpand._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridExpand._setPositionEx=function(){var _a=this._text_elem;if(_a){_a.setElementPosition(0,0);var _b=this._grid._getAvailableRect(this);_a.setElementSize(_b.width,_b.height);}_a=this._img_elem;if(_a){this._imgAdjustAlign(this._image_width,this._image_height);}};_pGridExpand._imgAdjustAlign=function(_a,_b){var _c=this._grid._getAvailableRect(this);var _d=this._img_elem;if(_d){var _e=0;var _f=0;var _g=_c.height;var _h=_c.width;if(_a>_h){_e=_e-((_a-_h)/2);}else{_e=(_h-_a)/2;}if(_b>_g){_f=_f-((_b-_g)/2);}else{_f=(_g-_b)/2;}_d.setElementPosition(_e,_f);_d.setElementSize(_a,_b);}};_pGridExpand._on_loadImg=function(_a,_b,_c){if(!this._is_alive||!this._img_elem){return;}this._img_elem.setElementImageUrl(_a);this._imgAdjustAlign(_b,_c);};_pGridExpand.on_apply_custom_pseudo=function(_a){if(!this._is_created){return;}var _b=this.getElement();if(!_b){return;}if(!_a){_a=this._pseudo;}};_pGridExpand._updateAll=function(){var _a=this.getElement();if(_a){var _b=this._grid;var _c=_b._getDataRow(this._cellobj._rowidx);this._control_pseudo="";this._contents_pseudo="";this.on_apply_pseudo(this._cellobj._pseudo);if(this._cellobj){var _d=this._cellinfo._getAttrValue(this._cellinfo.expandimage,_c);this._setExpandImg(_d);_d=this._cellinfo._getAttrValue(this._cellinfo.expandchar,_c);this._setExpandText(_d);_d=this.on_find_CurrentStyle_font(this._cellobj._pseudo);this._setFont(_d);_d=this.on_find_CurrentStyle_color(this._cellobj._pseudo);this._setColor(_d);this._setAlign("center","middle");this._setPositionEx();}}};_pGridExpand._setExpandImg=function(_a){var _b=this.getElement();if(_b){var _c=(_a)?_a.toString():null;if(_c){var _d=this._img_elem;if(!_d){_d=new nexacro.ImageElement(_b);this._img_elem=_d;_d.create();}_c=nexacro._getURIValue(_c);_c=nexacro._getImageLocation(_c,this._getRefFormBaseUrl());var _e=nexacro._getImageSize(_c,this._on_loadImg,this,undefined,_a);if(_e){this._image_width=_e.width;this._image_height=_e.height;_d.setElementImageUrl(_c);}}else{if(this._img_elem){this._img_elem.destroy();this._img_elem=null;if(this._text_elem){var _f=this.currentstyle.align;if(_f){var _g=_f.halign==""?"center":_f._halign;var _h=_f.valign==""?"middle":_f._valign;this._text_elem.setElementAlignXY(_g,_h);}}}}}};_pGridExpand._setExpandText=function(_a){var _b=this.getElement();if(_b){if(this._text!=_a){this._text=_a;var _c=this._text_elem;var _d=this.currentstyle;if(!_c){_c=this._text_elem=new nexacro.TextBoxElement(_b);var _e=(!_d.align||_d.align.halign=="")?"center":_d.align.halign;var _f=(!_d.align||_d.align.valign=="")?"middle":_d.align.valign;_c.setElementFont(_d.font);_c.setElementColor(_d.color);_c.setElementAlignXY(_e,_f);_c.setElementLetterSpace(_d.letterspace);_c.create();}_c.setElementText(_a);}}};_pGridExpand._setFont=function(_a){var _b=this._text_elem;if(_b){_b.setElementFont(_a);}};_pGridExpand._setColor=function(_a){var _b=this._text_elem;if(_b){_b.setElementColor(_a);}};_pGridExpand._setAlign=function(_a,_b){var _c=this._text_elem;if(_c){_c.setElementAlignXY(_a,_b);}};delete _pGridExpand;nexacro.GridControlButton=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.ButtonCtrl.call(this,_a,"absolute",_b,_c,_d,_e,null,null,_f);this.tabstop=false;this._displaymode=(_g)?true:false;this._controlmode=(_h)?true:false;this._clickevt_able=true;if(_f._refobj){this._grid=_f._refobj.grid;this._cellinfo=_f._refobj;this._cellobj=_f;}else{this._grid=_f;this._cellinfo=null;this._cellobj=null;}};var _pGridButton=nexacro._createPrototype(nexacro.ButtonCtrl,nexacro.GridControlButton);nexacro.GridControlButton.prototype=_pGridButton;_pGridButton.on_find_CurrentStyle_align=function(_a){var _b=this._cellobj;if(_b){var _c=this._find_pseudo_obj("align",_a,"align");return _c;}return null;};_pGridButton.on_find_CurrentStyle_accessibility=function(_a){var _b=this._cellobj;if(_b){var _c=this._find_pseudo_obj("accessibility",_a,"accessibility");if(!_c){_c=_b.on_find_CurrentStyle_accessibility(_a);}return _c;}return null;};_pGridButton.on_find_CurrentStyle_background=function(_a){var _b=this._find_pseudo_obj("background",_a,"background");return _b;};_pGridButton.on_find_CurrentStyle_border=function(_a){var _b=this._find_pseudo_obj("border",_a,"border");return _b;};_pGridButton.on_find_CurrentStyle_bordertype=function(_a){var _b=this._find_pseudo_obj("bordertype",_a,"bordertype");return _b;};_pGridButton.on_find_CurrentStyle_color=function(_a){var _b=this._cellobj;if(_b){var _c=this._find_pseudo_obj("color",_a,"color");if(!_c){_c=_b.on_find_CurrentStyle_color(_a);}return _c;}return null;};_pGridButton.on_find_CurrentStyle_font=function(_a){var _b=this._cellobj;if(_b){var _c=this._find_pseudo_obj("font",_a,"font");if(!_c){_c=_b.on_find_CurrentStyle_font(_a);}return _c;}return null;};_pGridButton.on_find_CurrentStyle_letterspace=function(_a){var _b=this._cellobj;if(_b){var _c=this._find_pseudo_obj("letterspace",_a,"letterspace");if(!_c){_c=_b.on_find_CurrentStyle_letterspace(_a);}return _c;}return null;};_pGridButton.on_find_CurrentStyle_gradation=function(_a){var _b=this._find_pseudo_obj("gradation",_a,"gradation");return _b;};_pGridButton.on_find_CurrentStyle_cursor=function(_a){var _b=this._grid;if(_b._global_cursor){return _b._global_cursor;}var _c=this._cellobj;if(_c){var _d=this._find_pseudo_obj("cursor",_a)||_c.on_find_CurrentStyle_cursor(_a);return (_d)?_d:nexacro.Component._default_cursor;}return null;};_pGridButton._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridButton._find_pseudo_obj=function(_a,_b,_c){var _d=this._cellinfo;var _e=this._grid;var _f=_e._getDataRow(this._cellobj._rowidx);if(this._cellobj&&this._grid._isFakeCell(_f)&&_b!="disabled"){_b="normal";}_f=_e._getDataRow(this._cellobj._rowidx);var _g="control"+_a;var _h=_d._query_pseudo_control(this,_f,_g,_a,_b,_c);return _h;};_pGridButton.on_destroy_contents=function(){nexacro.ButtonCtrl.prototype.on_destroy_contents.call(this);this._grid=null;this._cellinfo=null;this._cellobj=null;};_pGridButton._setAccessibilityStatFocus=function(){var _a=this._cellobj;var _b=_a._getAccessibilityMakeAddLabel();var _c="";var _d=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_d){if(_d._bindexpr&&_d._bindexpr.length>0){_c=this._cellinfo._getAttrValue(_d,this._rowidx);_d._setValue(_c);}_c=this._getAccessibilityLabel(_d);}else{_c=_a._getCellAccessibilityLabel();}_b+=" "+_c;this._setAccessibilityLabel(_b);nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pGridButton.on_apply_custom_setfocus=function(_a){if(!this._displaymode){nexacro.ButtonCtrl.prototype.on_apply_custom_setfocus.call(this,_a);}};_pGridButton.on_get_style_accessibility_description=function(){if(this._cellobj){return this._cellobj.tooltiptext;}};_pGridButton.on_get_style_accessibility_label=function(){return this.text;};_pGridButton.on_fire_user_onkeyup=function(_a,_b,_c,_d,_e,_f){var _g=nexacro.Component.prototype.on_fire_user_onkeyup.call(this,_a,_b,_c,_d,_e,_f);if(_a==13||_a==32){this.click();}return _g;};_pGridButton._on_bubble_touchend=function(_a,_b,_c,_d,_e,_f,_g){var _h=true;if(_g){_h=this._cellobj._common_lbuttonup(_c,null,null,null,null);}if(_h){nexacro.ButtonCtrl.prototype._on_bubble_touchend.call(this,_a,_b,_c,_d,_e,_f,_g);}return true;};_pGridButton._on_bubble_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_lbuttonup(null,_a,_f,_g,_m);}if(_o){nexacro.ButtonCtrl.prototype._on_bubble_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridButton._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseenter();}if(_o){nexacro.ButtonCtrl.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridButton._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseleave();}if(_o){nexacro.ButtonCtrl.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridButton.on_fire_user_ontouchstart=function(_a,_b,_c,_d){nexacro.ButtonCtrl.prototype.on_fire_user_ontouchstart.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);return true;};_pGridButton.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.ButtonCtrl.prototype.on_fire_user_onlbuttondown.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);return true;};_pGridButton.on_fire_user_ontouchend=function(_a,_b,_c,_d){nexacro.ButtonCtrl.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridButton.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.ButtonCtrl.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridButton.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.ButtonCtrl.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,"control");return true;};_pGridButton.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.ButtonCtrl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,"control");return true;};_pGridButton._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridButton._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridButton._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(!this._is_alive){return;}var _j=this.visible;if(this._displaymode&&this._grid.selectchangetype=="up"){_j=true;}if(_j&&this._isEnable()&&this.enableevent){var _k=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_k[0],_k[1],this,this);}};_pGridButton._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridButton._EditUpdateAll=function(_a,_b){if(this.getElement()){this._cellinfo=_a;this._cellobj=_b;this._setProperty();this._control_pseudo="";this._contents_pseudo="";this.on_apply_pseudo(this._pseudo);var _c=this._grid;var _d=_c._getDataRow(_b._rowidx);var _e=_a._getWordwrap(_d);this.set_wordwrap(_e);}};_pGridButton._setDataset=function(_a){};_pGridButton._setProperty=function(){var _a=this._cellinfo;var _b=this._cellobj;var _c=this._grid;var _d=_c._getDataRow(_b._rowidx);var _e;if(this._displaymode==true){_e=_a._getDisplayText(_d);}else{_e=_a._getValue(_d);}_e=nexacro._toString(_e);if(_e!=null){this.set_text(_e);}else{this.set_text("");}};_pGridButton._updateAll=function(_a){this.on_apply_pseudo(this._cellobj._pseudo,_a);this._setProperty();};delete _pGridButton;nexacro.GridControlBar=function(_a,_b,_c,_d,_e,_f,_g){nexacro.ProgressBarCtrl.call(this,_a,"absolute",_b,_c,_d,_e,null,null,_f);this.tabstop=false;this.max=100;this.min=0;this.blockgap=0;this.step=1;this._controlmode=(_g)?true:false;if(_f._refobj){this._grid=_f._refobj.grid;this._cellinfo=_f._refobj;this._cellobj=_f;}else{this._grid=_f;}};var _pGridBar=nexacro.GridControlBar.prototype=nexacro._createPrototype(nexacro.ProgressBarCtrl,nexacro.GridControlBar);_pGridBar.on_find_CurrentStyle_align=function(_a){var _b=this._cellobj;if(_b){var _c=this._find_pseudo_obj("align",_a,"align");return _c;}return null;};_pGridBar.on_find_CurrentStyle_font=function(_a){var _b=this._cellobj;if(_b){var _c=this._find_inherit_pseudo_obj("font",_a,"font");if(!_c){_c=_b.on_find_CurrentStyle_font(_a);}return _c;}return null;};_pGridBar.on_find_CurrentStyle_letterspace=function(_a){var _b=this._cellobj;if(_b){var _c=this._find_inherit_pseudo_obj("letterspace",_a,"letterspace");if(!_c){_c=_b.on_find_CurrentStyle_letterspace(_a);}return _c;}return null;};_pGridBar.on_find_CurrentStyle_color=function(_a){var _b=this._cellobj;if(_b){var _c=this._find_inherit_pseudo_obj("color",_a,"color");if(!_c){_c=_b.on_find_CurrentStyle_color(_a);}return _c;}return null;};_pGridBar.on_find_CurrentStyle_cursor=function(_a){var _b=this._grid;if(_b._global_cursor){return _b._global_cursor;}var _c=this._cellobj;if(_c){var _d=this._find_pseudo_obj("cursor",_a)||_c.on_find_CurrentStyle_cursor(_a);return (_d)?_d:nexacro.Component._default_cursor;}return null;};_pGridBar.on_find_CurrentStyle_accessibility=function(_a){var _b=this._cellobj;if(_b){var _c=this._find_pseudo_obj("accessibility",_a,"accessibility");if(!_c){_c=_b.on_find_CurrentStyle_accessibility(_a);}return _c;}return null;};_pGridBar.on_find_CurrentStyle_background=function(_a){var _b=this._find_pseudo_obj("background",_a,"background");return _b;};_pGridBar.on_find_CurrentStyle_border=function(_a){var _b=this._find_pseudo_obj("border",_a,"border");return _b;};_pGridBar.on_find_CurrentStyle_bordertype=function(_a){var _b=this._find_pseudo_obj("bordertype",_a,"bordertype");return _b;};_pGridBar.on_find_CurrentStyle_gradation=function(_a){var _b=this._find_pseudo_obj("gradation",_a,"gradation");return _b;};_pGridBar._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridBar._find_pseudo_obj=function(_a,_b,_c){var _d=this._cellobj;if(_d){var _e=this._cellinfo;var _f="control"+_a;var _g=this._grid;var _h=_g._getDataRow(_d._rowidx);if(_d&&this._grid._isFakeCell(_h)&&_b!="disabled"){_b="normal";}if(_a=="barcolor"||_a=="bardirection"||_a=="bargradation"){_f="";}else if(_a=="padding"){return null;}var _i=_e._query_pseudo_control(this,_h,_f,_a,_b,_c);return _i;}return null;};_pGridBar.on_destroy_contents=function(){nexacro.ProgressBarCtrl.prototype.on_destroy_contents.call(this);this._grid=null;this._cellinfo=null;this._cellobj=null;};_pGridBar._setAccessibilityStatFocus=function(){var _a=this._cellobj;var _b=_a._getAccessibilityMakeAddLabel();var _c="";var _d=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_d){if(_d._bindexpr&&_d._bindexpr.length>0){_c=this._cellinfo._getAttrValue(_d,this._rowidx);_d._setValue(_c);}_c=this._getAccessibilityLabel(_d);}else{_c=_a._getCellAccessibilityLabel();}_b+=" "+_c;this._setAccessibilityLabel(_b);nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pGridBar.on_get_style_accessibility_description=function(){if(this._cellobj){return this._cellobj.tooltiptext;}};_pGridBar.set_text=function(_a){var _b=nexacro.Component.prototype.set_text.call(this,_a);this.set_pos(parseInt(this._display_text));return _b;};_pGridBar.on_apply_text=function(){var _a=this.getElement();if(_a){var _b=this._text_elem;var _c=this.currentstyle.align;if(!_c){this.on_apply_custom_pseudo(this._pseudo);_c=this.currentstyle.align;}if(!_b){_b=new nexacro.TextBoxElement(_a);this._text_elem=_b;var _d=this._grid._getAvailableRect(this);_b.setElementSize(_d.width,_d.height);if(this._is_created){var _e=(!_c||_c.halign=="")?"center":_c._halign;var _f=(!_c||_c.valign=="")?"middle":_c._valign;_b.setElementColor(this.currentstyle.color);_b.setElementFont(this.currentstyle.font);_b.setElementAlignXY(_e,_f);_b.setElementLetterSpace(this.currentstyle.letterspace);_b.create();}}else{var _e=(!_c||_c.halign=="")?"center":_c._halign;var _f=(!_c||_c.valign=="")?"middle":_c._valign;_b.setElementColor(this.currentstyle.color);_b.setElementFont(this.currentstyle.font);_b.setElementLetterSpace(this.currentstyle.letterspace);_b.setElementAlignXY(_e,_f);}this._text_elem.setElementText(this._display_text);}};_pGridBar.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,"control");};_pGridBar.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,"control");};_pGridBar._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridBar._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridBar._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridBar._getDisplayText=function(){if(this.parent){return this.parent._getDisplayText();}return "";};_pGridBar._updateAll=function(_a){if(this.getElement()){this.on_apply_pseudo(this._cellobj._pseudo,_a);this._setProperty();}};_pGridBar._setProperty=function(){var _a=this._cellinfo;var _b=this._cellobj;var _c=this._grid;var _d=_c._getDataRow(_b._rowidx);var _e=_a._getDisplayText(_d);_e=nexacro._toString(_e);if(_e!=null){this.set_text(_e);}else{this.set_text("");}};delete _pGridBar;nexacro.GridControlEdit=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.EditCtrl.call(this,_a,"absolute",_b,_c,_d,_e,null,null,_f);this.tabstop=false;this.editfilter="none";if(_g){this._displaymode=true;this.readonly=true;}else{this._displaymode=false;}this._controlmode=(_h)?true:false;if(_f._refobj){this._grid=_f._refobj.grid;this._cellinfo=_f._refobj;this._cellobj=_f;}else{this._grid=_f;}this._absolutelyValue=false;};var _pGridEdit=nexacro._createPrototype(nexacro.EditCtrl,nexacro.GridControlEdit);nexacro.GridControlEdit.prototype=_pGridEdit;_pGridEdit._displaymode=false;_pGridEdit.on_find_CurrentStyle_align=function(_a){var _b=this._cellobj;if(_b){if(this._displaymode){if(_a!="disabled"){_a="normal";}}var _c=this._find_pseudo_obj("align",_a,"align");return _c;}return null;};_pGridEdit.on_find_CurrentStyle_font=function(_a){var _b=this._cellobj;if(_b){if(this._displaymode){if(_a!="disabled"){_a="normal";}}var _c=this._find_inherit_pseudo_obj("font",_a);if(!_c){_c=_b.on_find_CurrentStyle_font(_a);}return _c;}return null;};_pGridEdit.on_find_CurrentStyle_letterspace=function(_a){var _b=this._cellobj;if(_b){if(this._displaymode){if(_a!="disabled"){_a="normal";}}var _c=this._find_inherit_pseudo_obj("letterspace",_a);if(!_c){_c=_b.on_find_CurrentStyle_letterspace(_a);}return _c;}return null;};_pGridEdit.on_find_CurrentStyle_color=function(_a){var _b=this._cellobj;if(_b){if(this._displaymode){if(_a!="disabled"){_a="normal";}}var _c=this._find_inherit_pseudo_obj("color",_a);if(!_c){_c=_b.on_find_CurrentStyle_color(_a);}return _c;}return null;};_pGridEdit.on_find_CurrentStyle_accessibility=function(_a){var _b=this._cellobj;if(_b){var _c=this._find_pseudo_obj("accessibility",_a,"accessibility");if(!_c){_c=_b.on_find_CurrentStyle_accessibility(_a);}return _c;}return null;};_pGridEdit.on_find_CurrentStyle_background=function(_a){var _b=this._find_pseudo_obj("background",_a,"background");return _b;};_pGridEdit.on_find_CurrentStyle_border=function(_a){var _b=this._find_pseudo_obj("border",_a,"border");return _b;};_pGridEdit.on_find_CurrentStyle_bordertype=function(_a){var _b=this._find_pseudo_obj("bordertype",_a,"bordertype");return _b;};_pGridEdit.on_find_CurrentStyle_gradation=function(_a){var _b=this._find_pseudo_obj("gradation",_a,"gradation");return _b;};_pGridEdit._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridEdit._find_pseudo_obj=function(_a,_b,_c){var _d=this._cellinfo;var _e=this._grid;var _f=_e._getDataRow(this._cellobj._rowidx);if(this._cellobj&&this._grid._isFakeCell(_f)&&_b!="disabled"){_b="normal";}var _g="control"+_a;var _h=_d._query_pseudo_control(this,_f,_g,_a,_b,_c);return _h;};_pGridEdit.on_destroy_contents=function(){nexacro.EditCtrl.prototype.on_destroy_contents.call(this);this._grid=null;this._cellinfo=null;this._cellobj=null;};_pGridEdit.on_apply_custom_setfocus=function(_a,_b){if(this._grid._onceTime_focus&&!_b){nexacro.OnceCallbackTimer.callonce(this,function(){this.on_apply_custom_setfocus(_a,true);},0);return;}return nexacro.EditCtrl.prototype.on_apply_custom_setfocus.call(this,_a);};_pGridEdit._setAccessibilityStatFocus=function(){var _a=this._cellobj;var _b=_a._getAccessibilityMakeAddLabel();var _c="";var _d=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_d){if(_d._bindexpr&&_d._bindexpr.length>0){_c=this._cellinfo._getAttrValue(_d,this._rowidx);_d._setValue(_c);}_c=this._getAccessibilityLabel(_d);}else{_c=_a._getCellAccessibilityLabel();}_b+=" "+_c;this._setAccessibilityLabel(_b);nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pGridEdit.on_get_style_accessibility_description=function(){if(this._cellobj){return this._cellobj.tooltiptext;}};_pGridEdit.on_apply_autoskip=function(){this._grid._moveToCell("next",true);};_pGridEdit.on_apply_editfilter=function(_a){switch(_a){case 'alpha':case 'alpha,number':case 'digit':case 'number':case 'alpha,digit':this.set_inputfilter("none");this.set_inputtype(_a);break;case 'lower':case 'upper':this.set_inputfilter("none");this.set_inputtype("alpha");break;case 'lower,digit':case 'upper,digit':this.set_inputfilter("none");this.set_inputtype("alpha,digit");break;case 'lower,number':case 'upper,number':this.set_inputfilter("none");this.set_inputtype("alpha,number");break;case 'none':this.set_inputfilter("none");this.set_inputtype("normal");break;case 'alpha,number,nosign':case 'lower,number,nosign':case 'upper,number,nosign':this.set_inputfilter("sign");this.set_inputtype("alpha,number");break;case 'char':case 'lower,char':case 'upper,char':this.set_inputfilter("comma,symbol,sign,digit,dot");this.set_inputtype("normal");break;case 'integer':this.set_inputfilter("dot");this.set_inputtype("number");break;case 'digit,char':case 'lower,digit,char':case 'upper,digit,char':this.set_inputfilter("comma,symbol,sign,dot");this.set_inputtype("normal");break;case 'number,char':case 'lower,number,char':case 'upper,number,char':this.set_inputfilter("comma,symbol");this.set_inputtype("normal");break;}if(_a.indexOf("upper")>=0){this.set_inputmode("upper");}else if(_a.indexOf("lower")>=0){this.set_inputmode("lower");}else{this.set_inputmode("normal");}};_pGridEdit.set_editfilter=function(_a){if(this.editfilter!=_a){this.editfilter=_a;this.on_apply_editfilter(_a);}return _a;};_pGridEdit._on_bubble_touchend=function(_a,_b,_c,_d,_e,_f,_g){var _h=true;if(_g){_h=this._cellobj._common_lbuttonup(_c,null,null,null,null);}if(_h){nexacro.EditCtrl.prototype._on_bubble_touchend.call(this,_a,_b,_c,_d,_e,_f,_g);}return true;};_pGridEdit._on_bubble_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_lbuttonup(null,_a,_f,_g,_m);}if(_o){nexacro.EditCtrl.prototype._on_bubble_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridEdit._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseenter();}if(_o){nexacro.EditCtrl.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridEdit._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseleave();}if(_o){nexacro.EditCtrl.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridEdit.on_fire_onkillfocus=function(_a,_b){return this._cellobj.on_fire_onkillfocus(_a,_b);};_pGridEdit.on_fire_onchar=function(_a,_b){if(this._absolutelyValue==true){return true;}if(!_b){var _c={evt:null};nexacro.EditCtrl.prototype.on_fire_onchar.call(this,_a,_c);_b=_c.evt;}else{nexacro.EditCtrl.prototype.on_fire_onchar.call(this,_a,_b);}return this._grid.on_fire_onchar(this,_a.chartext,_a.prechareventtext,_a.posttext,_b);};_pGridEdit.on_fire_ontextchange=function(_a,_b){if(this._absolutelyValue==true){return true;}if(!_b){var _c={evt:null};nexacro.EditCtrl.prototype.on_fire_ontextchange.call(this,_a,_c);_b=_c.evt;}else{nexacro.EditCtrl.prototype.on_fire_ontextchange.call(this,_a,_b);}return this._grid.on_fire_ontextchange(this,_a.chartext,_a.pretext,_a.posttext,_a.preimetext,_a.postimetext,_b);};_pGridEdit.on_fire_ontextchanged=function(_a,_b,_c){return this._grid.on_fire_ontextchanged(_a,_b,_c);};_pGridEdit.on_fire_user_ontouchend=function(_a,_b,_c,_d){nexacro.EditCtrl.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridEdit.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.EditCtrl.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridEdit.on_fire_user_ontouchstart=function(_a,_b,_c,_d){nexacro.EditCtrl.prototype.on_fire_user_ontouchstart.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);return true;};_pGridEdit.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.EditCtrl.prototype.on_fire_user_onlbuttondown.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);return true;};_pGridEdit.on_fire_oneditclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro.EditCtrl.prototype.on_fire_oneditclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);this._cellobj.on_fire_onclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);return true;};_pGridEdit.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this._displaymode){this.setSelect(0,0);}nexacro.EditCtrl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,"control");return true;};if(nexacro.Browser=="Gecko"||nexacro.Browser=="Opera"){_pGridEdit._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(!this._is_alive){return;}var _j=this.visible;if(this._displaymode){_j=true;}var _k="";if(_a instanceof nexacro.InputElement){var _l,_m;if(_a.align){_l=_a.align._halign;_m=_a.align._valign;}else if(_a.halign&&_a.valign){_l=_a.halign;_m=_a.valign;}_k=this._cellobj._getClickItem(_l,_m,_f,_g,_a.text,this);}if(!_k){_k="control";}if(_j&&this._isEnable()&&this.enableevent){var _n=this.getCaretPos();var _o=this._getClientXY(_f,_g);this.on_fire_oneditclick(this,_n,_b,_c,_d,_e,_h,_i,_f,_g,_o[0],_o[1],this,this,_k);}};}else{_pGridEdit._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(!this._is_alive){return;}var _j=this.visible;if(this._displaymode&&this._grid.selectchangetype=="up"){_j=true;}var _k="";if(_a instanceof nexacro.InputElement){var _l,_m;if(_a.align){_l=_a.align._halign;_m=_a.align._valign;}else if(_a.halign&&_a.valign){_l=_a.halign;_m=_a.valign;}_k=this._cellobj._getClickItem(_l,_m,_f,_g,_a.text,this);}if(!_k){_k="control";}if(_j&&this._isEnable()&&this.enableevent){var _n=this.getCaretPos();var _o=this._getClientXY(_f,_g);this.on_fire_oneditclick(this,_n,_b,_c,_d,_e,_h,_i,_f,_g,_o[0],_o[1],this,this,_k);}};}_pGridEdit._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridEdit._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridEdit.on_getBindableProperties=function(){if(!this._displaymode){return "value";}};_pGridEdit._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridEdit._set_absolutelyValue=function(_a){this._absolutelyValue=true;this.set_value(_a);this._absolutelyValue=false;};_pGridEdit._updateAll=function(_a){if(this.getElement()){this.on_apply_pseudo(this._cellobj._pseudo,_a);this._setProperty();}};_pGridEdit._setProperty=function(){var _a=this._cellinfo;var _b=this._cellobj;var _c=this._grid;var _d=_c._getDataRow(_b._rowidx);var _e;if(this._displaymode==true){_e=_a._getDisplayText(_d);}else{_e=_a._getValue(_d);}this._set_absolutelyValue(_e);_e=_a._getAttrValue(_a.editautoselect,_d);if(_e!=null){this.set_autoselect(_e);}_e=_a._getAttrValue(_a.editautoskip,_d);if(_e!=null){this.set_autoskip(_e);}_e=_a._getAttrValue(_a.editfilter,_d);if(_e!=null){this.set_editfilter(_e);}_e=_a._getAttrValue(_a.editimemode,_d);if(_e!=null){this.set_imemode(_e);}_e=_a._getAttrValue(_a.edituseime,_d);if(_e!=null){this.set_useime(_e);}_e=_a._getAttrValue(_a.editlengthunit,_d);if(_e!=null){this.set_lengthunit(_e);}this.set_usesoftkeyboard(_c.usesoftkeyboard);};_pGridEdit._EditUpdateAll=function(_a,_b){if(this.getElement()){this._cellinfo=_a;this._cellobj=_b;this._setProperty();this._control_pseudo="";this._contents_pseudo="";this.on_apply_pseudo(this._pseudo);}};_pGridEdit._setDataset=function(_a,_b){var _c=this._cellobj;var _d=this._cellinfo;var _e=this._grid;var _f=_e._getDataRow(_c._rowidx);var _g=this._edit_base_api;if(_g){if(_g._is_composition()){var _h=_g._stat_composition.getCurrentStatus();var _i=_g._stat_composition.getData();var _j=_g._on_input_compositionend(_i);if(!_j){_g._fire_text_event(_i);}if(nexacro.Browser=="Safari"){if(_h==nexacro.EditBase.Status.CompositionStart){_g._on_input_compositionstart(_i);}else if(_h==nexacro.EditBase.Status.CompositionUpdate){_g._on_input_compositionupdate(_i);}}}}var _k=this.value;if(_b!=undefined){_f=_b;}var _l=true;if(_d.text._bindtype==1){_e._is_async_recreate=_a;_e._dsEventOccured=true;var _m={status:""};_d.grid._binddataset._setColumn(_f,_d.text._bindexpr,_k,_m);if(_m.status=="cancolumnchange"){_l=false;}_e._is_async_recreate=false;_e._dsEventOccured=false;}return _l;};_pGridEdit._on_input_blur=function(_a,_b){var _c=this._grid;var _d=this._edit_base_api;if(_d){var _e=_d._stat_composition.getCurrentStatus();var _f=_d._stat_composition.getData();_c._currentCompositionStatus=_e;_c._currentCompositionData=_f;_d._on_input_blur(_a,_b);}};delete _pGridEdit;nexacro.GridControlTextArea=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.TextAreaCtrl.call(this,_a,"absolute",_b,_c,_d,_e,null,null,_f);this.tabstop=false;this.editfilter="none";if(_g){this._displaymode=true;this.readonly=true;}else{this._displaymode=false;}this._controlmode=(_h)?true:false;if(_f._refobj){this._grid=_f._refobj.grid;this._cellinfo=_f._refobj;this._cellobj=_f;}else{this._grid=_f;}this._absolutelyValue=false;this._is_use_ex_enter=true;};var _pGridTextArea=nexacro._createPrototype(nexacro.TextAreaCtrl,nexacro.GridControlTextArea);nexacro.GridControlTextArea.prototype=_pGridTextArea;_pGridTextArea.on_find_CurrentStyle_align=function(_a){var _b=this._cellobj;if(_b){if(this._displaymode){if(_a!="disabled"){_a="normal";}}var _c=this._find_pseudo_obj("align",_a,"align");return _c;}return null;};_pGridTextArea.on_find_CurrentStyle_color=function(_a){var _b=this._cellobj;if(_b){if(this._displaymode){if(_a!="disabled"){_a="normal";}}var _c=this._find_inherit_pseudo_obj("font",_a);if(!_c){_c=_b.on_find_CurrentStyle_font(_a);}return _c;}return null;};_pGridTextArea.on_find_CurrentStyle_color=function(_a){var _b=this._cellobj;if(_b){if(this._displaymode){if(_a!="disabled"){_a="normal";}}var _c=this._find_inherit_pseudo_obj("color",_a);if(!_c){_c=_b.on_find_CurrentStyle_color(_a);}return _c;}return null;};_pGridTextArea.on_find_CurrentStyle_accessibility=function(_a){var _b=this._cellobj;if(_b){var _c=this._find_pseudo_obj("accessibility",_a,"accessibility");if(!_c){_c=_b.on_find_CurrentStyle_accessibility(_a);}return _c;}return null;};_pGridTextArea.on_find_CurrentStyle_background=function(_a){var _b=this._find_pseudo_obj("background",_a,"background");return _b;};_pGridTextArea.on_find_CurrentStyle_border=function(_a){var _b=this._find_pseudo_obj("border",_a,"border");return _b;};_pGridTextArea.on_find_CurrentStyle_bordertype=function(_a){var _b=this._find_pseudo_obj("bordertype",_a,"bordertype");return _b;};_pGridTextArea.on_find_CurrentStyle_gradation=function(_a){var _b=this._find_pseudo_obj("gradation",_a,"gradation");return _b;};_pGridTextArea._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridTextArea._find_pseudo_obj=function(_a,_b,_c){var _d=this._cellinfo;var _e=this._grid;var _f=_e._getDataRow(this._cellobj._rowidx);if(this._cellobj&&this._grid._isFakeCell(_f)&&_b!="disabled"){_b="normal";}_f=_e._getDataRow(this._cellobj._rowidx);var _g="control"+_a;var _h=_d._query_pseudo_control(this,_f,_g,_a,_b,_c);return _h;};_pGridTextArea.on_destroy_contents=function(){nexacro.TextAreaCtrl.prototype.on_destroy_contents.call(this);this._grid=null;this._cellinfo=null;this._cellobj=null;};_pGridTextArea.on_apply_custom_setfocus=function(_a,_b){if(this._grid._onceTime_focus&&!_b){nexacro.OnceCallbackTimer.callonce(this,function(){this.on_apply_custom_setfocus(_a,true);},0);return;}return nexacro.TextAreaCtrl.prototype.on_apply_custom_setfocus.call(this,_a);};_pGridTextArea._setAccessibilityStatFocus=function(){var _a=this._cellobj;var _b=_a._getAccessibilityMakeAddLabel();var _c="";var _d=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_d){if(_d._bindexpr&&_d._bindexpr.length>0){_c=this._cellinfo._getAttrValue(_d,this._rowidx);_d._setValue(_c);}_c=this._getAccessibilityLabel(_d);}else{_c=_a._getCellAccessibilityLabel();}_b+=" "+_c;this._setAccessibilityLabel(_b);nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pGridTextArea.on_get_style_accessibility_description=function(){if(this._cellobj){return this._cellobj.tooltiptext;}};_pGridTextArea.set_editfilter=function(_a){if(this.editfilter!=_a){this.editfilter=_a;this.on_apply_editfilter(_a);}return _a;};_pGridTextArea.on_apply_editfilter=function(_a){switch(_a){case 'alpha':case 'alpha,number':case 'digit':case 'number':case 'alpha,digit':this.set_inputfilter("none");this.set_inputtype(_a);break;case 'lower':case 'upper':this.set_inputfilter("none");this.set_inputtype("alpha");break;case 'lower,digit':case 'upper,digit':this.set_inputfilter("none");this.set_inputtype("alpha,digit");break;case 'lower,number':case 'upper,number':this.set_inputfilter("none");this.set_inputtype("alpha,number");break;case 'none':this.set_inputfilter("none");this.set_inputtype("normal");break;case 'alpha,number,nosign':case 'lower,number,nosign':case 'upper,number,nosign':this.set_inputfilter("sign");this.set_inputtype("alpha,number");break;case 'char':case 'lower,char':case 'upper,char':this.set_inputfilter("comma,symbol,sign,digit,dot");this.set_inputtype("normal");break;case 'integer':this.set_inputfilter("dot");this.set_inputtype("number");break;case 'digit,char':case 'lower,digit,char':case 'upper,digit,char':this.set_inputfilter("comma,symbol,sign,dot");this.set_inputtype("normal");break;case 'number,char':case 'lower,number,char':case 'upper,number,char':this.set_inputfilter("comma,symbol");this.set_inputtype("normal");break;}if(_a.indexOf("upper")>=0){this.set_inputmode("upper");}else if(_a.indexOf("lower")>=0){this.set_inputmode("lower");}else{this.set_inputmode("normal");}};_pGridTextArea._on_bubble_touchend=function(_a,_b,_c,_d,_e,_f,_g){var _h=true;if(_g){_h=this._cellobj._common_lbuttonup(_c,null,null,null,null);}if(_h){nexacro.TextAreaCtrl.prototype._on_bubble_touchend.call(this,_a,_b,_c,_d,_e,_f,_g);}return true;};_pGridTextArea._on_bubble_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_lbuttonup(null,_a,_f,_g,_m);}if(_o){nexacro.TextAreaCtrl.prototype._on_bubble_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridTextArea._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseenter();}if(_o){nexacro.TextAreaCtrl.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridTextArea._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseleave();}if(_o){nexacro.TextAreaCtrl.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridTextArea.on_fire_onchar=function(_a,_b){if(this._absolutelyValue==true){return true;}if(!_b){var _c={evt:null};nexacro.TextAreaCtrl.prototype.on_fire_onchar.call(this,_a,_c);_b=_c.evt;}else{nexacro.TextAreaCtrl.prototype.on_fire_onchar.call(this,_a,_b);}return this._grid.on_fire_onchar(this,_a.chartext,_a.prechareventtext,_a.posttext,_b);};_pGridTextArea.on_fire_ontextchange=function(_a,_b){if(this._absolutelyValue==true){return true;}if(!_b){var _c={evt:null};nexacro.TextAreaCtrl.prototype.on_fire_ontextchange.call(this,_a,_c);_b=_c.evt;}else{nexacro.TextAreaCtrl.prototype.on_fire_ontextchange.call(this,_a,_b);}return this._grid.on_fire_ontextchange(this,_a.chartext,_a.pretext,_a.posttext,_a.preimetext,_a.postimetext,_b);};_pGridTextArea.on_fire_ontextchanged=function(_a,_b,_c){return this._grid.on_fire_ontextchanged(_a,_b,_c);};_pGridTextArea.on_fire_user_ontouchend=function(_a,_b,_c,_d){nexacro.TextAreaCtrl.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridTextArea.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.TextAreaCtrl.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridTextArea.on_fire_user_ontouchstart=function(_a,_b,_c,_d){nexacro.TextAreaCtrl.prototype.on_fire_user_ontouchstart.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);return true;};_pGridTextArea.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.TextAreaCtrl.prototype.on_fire_user_onlbuttondown.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);return true;};_pGridTextArea.on_fire_oneditclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro.TextAreaCtrl.prototype.on_fire_oneditclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);this._cellobj.on_fire_onclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);return true;};_pGridTextArea.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this._displaymode){this.setSelect(0,0);}nexacro.TextAreaCtrl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,"control");return true;};if(nexacro.Browser=="Gecko"||nexacro.Browser=="Opera"){_pGridTextArea._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(!this._is_alive){return;}var _j=this.visible;if(this._displaymode){_j=true;}var _k="";if(_a instanceof nexacro.InputElement){var _l,_m;if(_a.align){_l=_a.align._halign;_m=_a.align._valign;}else if(_a.halign&&_a.valign){_l=_a.halign;_m=_a.valign;}_k=this._cellobj._getClickItem(_l,_m,_f,_g,_a.text,this);}if(!_k){_k="control";}if(_j&&this._isEnable()&&this.enableevent){var _n=this.getCaretPos();var _o=this._getClientXY(_f,_g);this.on_fire_oneditclick(this,_n,_b,_c,_d,_e,_h,_i,_f,_g,_o[0],_o[1],this,this,_k);}};}else{_pGridTextArea._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(!this._is_alive){return;}var _j=this.visible;if(this._displaymode&&this._grid.selectchangetype=="up"){_j=true;}var _k="";if(_a instanceof nexacro.InputElement){var _l,_m;if(_a.align){_l=_a.align._halign;_m=_a.align._valign;}else if(_a.halign&&_a.valign){_l=_a.halign;_m=_a.valign;}_k=this._cellobj._getClickItem(_l,_m,_f,_g,_a.text,this);}if(!_k){_k="control";}if(_j&&this._isEnable()&&this.enableevent){var _n=this.getCaretPos();var _o=this._getClientXY(_f,_g);this.on_fire_oneditclick(this,_n,_b,_c,_d,_e,_h,_i,_f,_g,_o[0],_o[1],this,this,_k);}};}_pGridTextArea._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridTextArea._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridTextArea._on_input_blur=function(_a,_b){var _c=this._grid;var _d=this._edit_base_api;if(_d){var _e=_d._stat_composition.getCurrentStatus();var _f=_d._stat_composition.getData();_c._currentCompositionStatus=_e;_c._currentCompositionData=_f;_d._on_input_blur(_a,_b);}};_pGridTextArea.on_getBindableProperties=function(){if(!this._displaymode){return "value";}};_pGridTextArea._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridTextArea._set_absolutelyValue=function(_a){this._absolutelyValue=true;this.set_value(_a);this._absolutelyValue=false;};_pGridTextArea._updateAll=function(_a){if(this.getElement()){this.on_apply_pseudo(this._cellobj._pseudo,_a);this._setProperty();}};_pGridTextArea._setProperty=function(){var _a=this._cellinfo;var _b=this._cellobj;var _c=this._grid;var _d=_c._getDataRow(_b._rowidx);var _e;if(this._displaymode==true||this.readonly){_e=_a._getDisplayText(_d);}else{_e=_a._getValue(_d);}this._set_absolutelyValue(_e);_e=_a._getAttrValue(_a.editautoselect,_d);if(_e!=null){this.set_autoselect(_e);}_e=_a._getAttrValue(_a.editautoskip,_d);if(_e!=null){this.set_autoskip(_e);}_e=_a._getAttrValue(_a.editfilter,_d);if(_e!=null){this.set_editfilter(_e);}_e=_a._getAttrValue(_a.editimemode,_d);if(_e!=null){this.set_imemode(_e);}_e=_a._getAttrValue(_a.edituseime,_d);if(_e!=null){this.set_useime(_e);}_e=_a._getAttrValue(_a.editlengthunit,_d);if(_e!=null){this.set_lengthunit(_e);}_e=_a._getAttrValue(_a.editscrollbar,_d);if(_e!=null){this.set_scrollbars(_e);}else{this.set_scrollbars("none");}this.set_usesoftkeyboard(_c.usesoftkeyboard);};_pGridTextArea._EditUpdateAll=function(_a,_b){if(this.getElement()){this._cellinfo=_a;this._cellobj=_b;var _c=this._grid;var _d=_c._getDataRow(_b._rowidx);this._control_pseudo="";this._contents_pseudo="";this.on_apply_pseudo(this._pseudo);this._setProperty();var _e=_a._getWordwrap(_d);this.set_wordwrap(_e);}};_pGridTextArea._setDataset=function(_a,_b){var _c=this._cellobj;var _d=this._cellinfo;var _e=this._grid;var _f=_e._getDataRow(_c._rowidx);if(_b!=undefined){_f=_b;}var _g=this._edit_base_api;if(_g){if(_g._is_composition()){var _h=_g._stat_composition.getCurrentStatus();var _i=_g._stat_composition.getData();var _j=_g._on_input_compositionend(_i);if(!_j){_g._fire_text_event(_i);}if(nexacro.Browser=="Safari"){if(_h==nexacro.EditBase.Status.CompositionStart){_g._on_input_compositionstart(_i);}else if(_h==nexacro.EditBase.Status.CompositionUpdate){_g._on_input_compositionupdate(_i);}}}}var _k=this.value;var _l=true;if(_d.text._bindtype==1&&!this.readonly){_e._is_async_recreate=_a;_e._dsEventOccured=true;var _m={status:""};_d.grid._binddataset._setColumn(_f,_d.text._bindexpr,_k,_m);if(_m.status=="cancolumnchange"){_l=false;}_e._is_async_recreate=false;_e._dsEventOccured=false;}return _l;};delete _pGridTextArea;nexacro.GridControlMaskEdit=function(_a,_b,_c,_d,_e,_f,_g){nexacro.MaskEditCtrl.call(this,_a,"absolute",_b,_c,_d,_e,null,null,_f);this.tabstop=false;this._controlmode=(_g)?true:false;if(_f._refobj){this._grid=_f._refobj.grid;this._cellinfo=_f._refobj;this._cellobj=_f;}else{this._grid=_f;}this._absolutelyValue=false;};var _pGridMaskEdit=nexacro._createPrototype(nexacro.MaskEditCtrl,nexacro.GridControlMaskEdit);nexacro.GridControlMaskEdit.prototype=_pGridMaskEdit;_pGridMaskEdit.on_find_CurrentStyle_align=function(_a){var _b=this._cellobj;if(_b){if(this._displaymode){if(_a!="disabled"){_a="normal";}}var _c=this._find_pseudo_obj("align",_a,"align");return _c;}return null;};_pGridMaskEdit.set_mask=function(_a,_b){if(!this._displaymode){_a=_a.replace(/0|9/g,"#");return nexacro.MaskEditCtrl.prototype.set_mask.call(this,_a,_b);}return nexacro.MaskEditCtrl.prototype.set_mask.call(this,_a,_b);};_pGridMaskEdit.on_find_CurrentStyle_font=function(_a){var _b=this._cellobj;if(_b){if(this._displaymode){if(_a!="disabled"){_a="normal";}}var _c=this._find_inherit_pseudo_obj("font",_a);if(!_c){_c=_b.on_find_CurrentStyle_font(_a);}return _c;}return null;};_pGridMaskEdit.on_find_CurrentStyle_letterspace=function(_a){var _b=this._cellobj;if(_b){if(this._displaymode){if(_a!="disabled"){_a="normal";}}var _c=this._find_inherit_pseudo_obj("letterspace",_a);if(!_c){_c=_b.on_find_CurrentStyle_letterspace(_a);}return _c;}return null;};_pGridMaskEdit.on_find_CurrentStyle_color=function(_a){var _b=this._cellobj;if(_b){if(this._displaymode){if(_a!="disabled"){_a="normal";}}var _c=this._find_inherit_pseudo_obj("color",_a);if(!_c){_c=_b.on_find_CurrentStyle_color(_a);}return _c;}return null;};_pGridMaskEdit.on_find_CurrentStyle_accessibility=function(_a){var _b=this._cellobj;if(_b){var _c=this._find_pseudo_obj("accessibility",_a,"accessibility");if(!_c){_c=_b.on_find_CurrentStyle_accessibility(_a);}return _c;}return null;};_pGridMaskEdit.on_find_CurrentStyle_background=function(_a){var _b=this._find_pseudo_obj("background",_a,"background");return _b;};_pGridMaskEdit.on_find_CurrentStyle_border=function(_a){var _b=this._find_pseudo_obj("border",_a,"border");return _b;};_pGridMaskEdit.on_find_CurrentStyle_bordertype=function(_a){var _b=this._find_pseudo_obj("bordertype",_a,"bordertype");return _b;};_pGridMaskEdit.on_find_CurrentStyle_gradation=function(_a){var _b=this._find_pseudo_obj("gradation",_a,"gradation");return _b;};_pGridMaskEdit._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridMaskEdit._find_pseudo_obj=function(_a,_b,_c){var _d=this._cellinfo;var _e=this._grid;var _f=_e._getDataRow(this._cellobj._rowidx);if(this._cellobj&&this._grid._isFakeCell(_f)&&_b!="disabled"){_b="normal";}_f=_e._getDataRow(this._cellobj._rowidx);var _g="control"+_a;var _h=_d._query_pseudo_control(this,_f,_g,_a,_b,_c);return _h;};_pGridMaskEdit.on_destroy_contents=function(){nexacro.MaskEditCtrl.prototype.on_destroy_contents.call(this);this._grid=null;this._cellinfo=null;this._cellobj=null;};_pGridMaskEdit.on_apply_custom_setfocus=function(_a,_b){if(this._grid._onceTime_focus&&!_b){nexacro.OnceCallbackTimer.callonce(this,function(){this.on_apply_custom_setfocus(_a,true);},0);return;}return nexacro.MaskEditCtrl.prototype.on_apply_custom_setfocus.call(this,_a);};_pGridMaskEdit._setAccessibilityStatFocus=function(){var _a=this._cellobj;var _b=_a._getAccessibilityMakeAddLabel();var _c="";var _d=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_d){if(_d._bindexpr&&_d._bindexpr.length>0){_c=this._cellinfo._getAttrValue(_d,this._rowidx);_d._setValue(_c);}_c=this._getAccessibilityLabel(_d);}else{_c=_a._getCellAccessibilityLabel();}_b+=" "+_c;this._setAccessibilityLabel(_b);nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pGridMaskEdit.on_get_style_accessibility_description=function(){if(this._cellobj){return this._cellobj.tooltiptext;}};_pGridMaskEdit.on_apply_autoskip=function(){this._grid._moveToCell("next",true);};_pGridMaskEdit._on_bubble_touchend=function(_a,_b,_c,_d,_e,_f,_g){var _h=true;if(_g){_h=this._cellobj._common_lbuttonup(_c,null,null,null,null);}if(_h){nexacro.MaskEditCtrl.prototype._on_bubble_touchend.call(this,_a,_b,_c,_d,_e,_f,_g);}return true;};_pGridMaskEdit._on_bubble_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_lbuttonup(null,_a,_f,_g,_m);}if(_o){nexacro.MaskEditCtrl.prototype._on_bubble_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridMaskEdit._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseenter();}if(_o){nexacro.MaskEditCtrl.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridMaskEdit._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseleave();}if(_o){nexacro.MaskEditCtrl.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridMaskEdit.on_fire_onchar=function(_a){if(this._absolutelyValue==true){return true;}var _b={evt:null};nexacro.MaskEditCtrl.prototype.on_fire_onchar.call(this,_a,_b);return this._grid.on_fire_onchar(this,_a.chartext,_a.prechareventtext,_a.posttext,_b.evt);};_pGridMaskEdit.on_fire_ontextchange=function(_a){if(this._absolutelyValue==true){return true;}var _b={evt:null};nexacro.MaskEditCtrl.prototype.on_fire_ontextchange.call(this,_a,_b);return this._grid.on_fire_ontextchange(this,_a.chartext,_a.pretext,_a.posttext,_a.preimetext,_a.postimetext,_b.evt);};_pGridMaskEdit.on_fire_ontextchanged=function(_a,_b,_c){return this._grid.on_fire_ontextchanged(_a,_b,_c);};_pGridMaskEdit.on_fire_user_ontouchend=function(_a,_b,_c,_d){nexacro.MaskEditCtrl.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridMaskEdit.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.MaskEditCtrl.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridMaskEdit.on_fire_user_ontouchstart=function(_a,_b,_c,_d){nexacro.MaskEditCtrl.prototype.on_fire_user_ontouchstart.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);return true;};_pGridMaskEdit.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.MaskEditCtrl.prototype.on_fire_user_onlbuttondown.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);return true;};_pGridMaskEdit.on_fire_oneditclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro.MaskEditCtrl.prototype.on_fire_oneditclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);this._cellobj.on_fire_onclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);return true;};_pGridMaskEdit.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this._displaymode){this.setSelect(0,0);}nexacro.MaskEditCtrl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,"control");return true;};if(nexacro.Browser=="Gecko"||nexacro.Browser=="Opera"){_pGridMaskEdit._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(!this._is_alive){return;}var _j=this.visible;if(this._displaymode){_j=true;}var _k="";if(_a instanceof nexacro.InputElement){var _l,_m;if(_a.align){_l=_a.align._halign;_m=_a.align._valign;}else if(_a.halign&&_a.valign){_l=_a.halign;_m=_a.valign;}_k=this._cellobj._getClickItem(_l,_m,_f,_g,_a.text,this);}if(!_k){_k="control";}if(_j&&this._isEnable()&&this.enableevent){var _n=this.getCaretPos();var _o=this._getClientXY(_f,_g);this.on_fire_oneditclick(this,_n,_b,_c,_d,_e,_h,_i,_f,_g,_o[0],_o[1],this,this,_k);}};}else{_pGridMaskEdit._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(!this._is_alive){return;}var _j=this.visible;if(this._displaymode&&this._grid.selectchangetype=="up"){_j=true;}var _k="";if(_a instanceof nexacro.InputElement){var _l,_m;if(_a.align){_l=_a.align._halign;_m=_a.align._valign;}else if(_a.halign&&_a.valign){_l=_a.halign;_m=_a.valign;}_k=this._cellobj._getClickItem(_l,_m,_f,_g,_a.text,this);}if(!_k){_k="control";}if(_j&&this._isEnable()&&this.enableevent){var _n=this.getCaretPos();var _o=this._getClientXY(_f,_g);this.on_fire_oneditclick(this,_n,_b,_c,_d,_e,_h,_i,_f,_g,_o[0],_o[1],this,this,_k);}};}_pGridMaskEdit._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridMaskEdit._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridMaskEdit._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridMaskEdit._set_absolutelyValue=function(_a){this._absolutelyValue=true;this.set_value(_a);this._absolutelyValue=false;};_pGridMaskEdit._updateAll=function(_a){if(this.getElement()){this._setProperty();this.on_apply_pseudo(this._cellobj._pseudo,_a);}};_pGridMaskEdit._setProperty=function(){var _a=this._cellinfo;var _b=this._cellobj;var _c=this._grid;var _d=_c._getDataRow(_b._rowidx);var _e=_a._getEdittype(_d);var _f=_a._getDisplaytype(_d);var _g=_a._getAttrValue(_a.edittype,_d);var _h=_a._getValue(_d);_h=nexacro._toString(_h);if(_e=="masknumber"){this.set_type("number");this._set_absolutelyValue(_h);}else{if(_g=="normal"){if(_f=="number"){this.set_type("number");}else{this.set_type("string");}}else{this.set_type("string");}this._set_absolutelyValue(_h);}if(_e=="masknumber"||_e=="mask"){_h=_a._getAttrValue(_a.mask,_d);if(_h!=null){this.set_mask(_h);}}_h=_a.maskchar;if(_h!=null){this.set_maskchar(_h);}_h=_a._getAttrValue(_a.editautoselect,_d);if(_h!=null){this.set_autoselect(_h);}_h=_a._getAttrValue(_a.editautoskip,_d);if(_h!=null){this.set_autoskip(_h);}_h=_a._getAttrValue(_a.editclipmode,_d);if(_h!=null){this.set_clipmode(_h);}_h=_a._getAttrValue(_a.editlimitbymask,_d);if(_h!=null){this.set_limitbymask(_h);}_h=_a._getAttrValue(_a.edittrimtype,_d);if(_h!=null){this.set_trimtype(_h);}this.set_usesoftkeyboard(_c.usesoftkeyboard);};_pGridMaskEdit._EditUpdateAll=function(_a,_b){if(this.getElement()){this._cellinfo=_a;this._cellobj=_b;this._control_pseudo="";this._contents_pseudo="";this.on_apply_pseudo(this._pseudo);this._setProperty();}};_pGridMaskEdit._setDataset=function(_a,_b){var _c=this._cellobj;var _d=this._cellinfo;var _e=this._grid;var _f=_e._getDataRow(_c._rowidx);var _g=this.value;if(_b!=undefined){_f=_b;}var _h=true;if(_d.text._bindtype==1){_e._is_async_recreate=_a;_e._dsEventOccured=true;var _i={status:""};_d.grid._binddataset._setColumn(_f,_d.text._bindexpr,_g,_i);if(_i.status=="cancolumnchange"){_h=false;}_e._is_async_recreate=false;_e._dsEventOccured=false;}return _h;};delete _pGridMaskEdit;nexacro.GridControlCalendar=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.CalendarCtrl.call(this,_a,"absolute",_b,_c,_d,_e,null,null,_f);this.tabstop=false;this.ondropdown="grid";this._displaymode=(_g)?true:false;this._controlmode=(_h)?true:false;if(_f._refobj){this._grid=_f._refobj.grid;this._cellinfo=_f._refobj;this._cellobj=_f;}else{this._grid=_f;}};var _pGridCalendar=nexacro._createPrototype(nexacro.CalendarCtrl,nexacro.GridControlCalendar);nexacro.GridControlCalendar.prototype=_pGridCalendar;nexacro.GridControlCalendar._defaultButtonsize=nexacro._getCachedStyleObj("buttonsize",24);_pGridCalendar.on_find_CurrentStyle_buttonsize=function(_a){var _b=nexacro.CalendarCtrl.prototype.on_find_CurrentStyle_buttonsize.call(this,_a);if(_b<0||_b==null){return nexacro.GridControlCalendar._defaultButtonsize;}else{return _b;}};_pGridCalendar.on_find_CurrentStyle_align=function(_a,_b){var _c=this._cellobj;if(_c){if(this._displaymode){if(_a!="disabled"){_a="normal";}}var _d=this._find_pseudo_obj("align",_a,"align",this.calendaredit);return _d;}return null;};_pGridCalendar.on_find_CurrentStyle_font=function(_a,_b){var _c=this._cellobj;if(_c){var _d=this._find_pseudo_obj("font",_a,"font",this.calendaredit);if(!_d){_d=_c.on_find_CurrentStyle_font(_a);}return _d;}return null;};_pGridCalendar.on_find_CurrentStyle_letterspace=function(_a,_b){var _c=this._cellobj;if(_c){var _d=this._find_pseudo_obj("letterspace",_a,"letterspace",this.calendaredit);if(!_d){_d=_c.on_find_CurrentStyle_letterspace(_a);}return _d;}return null;};_pGridCalendar.on_find_CurrentStyle_color=function(_a,_b){var _c=this._cellobj;if(_c){var _d=this._find_pseudo_obj("color",_a,"color",this.calendaredit);if(!_d){_d=_c.on_find_CurrentStyle_color(_a);}return _d;}return null;};_pGridCalendar.on_find_CurrentStyle_accessibility=function(_a,_b){var _c=this._cellobj;if(_c){var _d=this._find_pseudo_obj("accessibility",_a,"accessibility",_b);if(!_d){_d=_c.on_find_CurrentStyle_accessibility(_a);}return _d;}return null;};_pGridCalendar._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridCalendar._find_pseudo_obj=function(_a,_b,_c,_d){var _e=this._cellinfo;var _f;if(_a=="dayborder"||_a=="daybordertype"||_a=="daybackground"||_a=="daycolor"||_a=="dayfont"||_a=="daygradation"){_f=nexacro.CalendarCtrl.prototype._find_pseudo_obj.call(this,_a,_b,_c);if(_f){return _f;}}var _g=this._grid;var _h=_g._getDataRow(this._cellobj._rowidx);var _i="control"+_a;var _f=_e._query_pseudo_control(this,_h,_i,_a,_b,_c,_d);return _f;};_pGridCalendar.on_created_contents=function(){nexacro.CalendarCtrl.prototype.on_created_contents.call(this);if(this._displaymode){this.calendaredit._input_element.setElementReadonly(true);}};_pGridCalendar.on_destroy_contents=function(){nexacro.CalendarCtrl.prototype.on_destroy_contents.call(this);this._grid=null;this._cellinfo=null;this._cellobj=null;};_pGridCalendar._setAccessibilityStatFocus=function(){var _a=this._cellobj;var _b=_a._getAccessibilityMakeAddLabel();var _c="";var _d=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_d){if(_d._bindexpr&&_d._bindexpr.length>0){_c=this._cellinfo._getAttrValue(_d,this._rowidx);_d._setValue(_c);}_c=this._getAccessibilityLabel(_d);}else{_c=_a._getCellAccessibilityLabel();}_c=(_c!=_a._display_text)?_c:"";_b+=" "+_c;this._setAccessibilityLabel(_b);nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pGridCalendar.on_get_style_accessibility_description=function(){if(this._cellobj){return this._cellobj.tooltiptext;}};_pGridCalendar.set_innerdataset=function(_a){var _b=nexacro.CalendarCtrl.prototype.set_innerdataset.call(this,_a);if(this._controlmode){var _c=this._grid;if(_c){for(var _d=0;_d<_c.getCellCount("body");_d++ ){_c.setCellProperty("body",_d,"calendarinnerdataset",_a);}}}return _b;};_pGridCalendar.set_backgroundcolumn=function(_a){nexacro.CalendarCtrl.prototype.set_backgroundcolumn.call(this,_a);if(this._controlmode){var _b=this._grid;if(_b){for(var _c=0;_c<_b.getCellCount("body");_c++ ){_b.setCellProperty("body",_c,"calendarbackgroundcolumn",_a);}}}};_pGridCalendar.set_bordercolumn=function(_a){nexacro.CalendarCtrl.prototype.set_bordercolumn.call(this,_a);if(this._controlmode){var _b=this._grid;if(_b){for(var _c=0;_c<_b.getCellCount("body");_c++ ){_b.setCellProperty("body",_c,"calendarbordercolumn",_a);}}}};_pGridCalendar.set_datecolumn=function(_a){nexacro.CalendarCtrl.prototype.set_datecolumn.call(this,_a);if(this._controlmode){var _b=this._grid;if(_b){for(var _c=0;_c<_b.getCellCount("body");_c++ ){_b.setCellProperty("body",_c,"calendardatecolumn",_a);}}}};_pGridCalendar.set_textcolorcolumn=function(_a){nexacro.CalendarCtrl.prototype.set_textcolorcolumn.call(this,_a);if(this._controlmode){var _b=this._grid;if(_b){var _c=null;for(var _d=0;_d<_b.getCellCount("body");_d++ ){_b.setCellProperty("body",_d,"calendartextcolorcolumn",_a);}}}};_pGridCalendar.on_apply_custom_setfocus=function(_a){if(!this._displaymode){return nexacro.Calendar.prototype.on_apply_custom_setfocus.call(this,_a);}};_pGridCalendar._on_bubble_touchend=function(_a,_b,_c,_d,_e,_f,_g){var _h=true;if(_g){_h=this._cellobj._common_lbuttonup(_c,null,null,null,null);}if(_h){nexacro.CalendarCtrl.prototype._on_bubble_touchend.call(this,_a,_b,_c,_d,_e,_f,_g);}return true;};_pGridCalendar._on_bubble_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_lbuttonup(null,_a,_f,_g,_m);}if(_o){nexacro.CalendarCtrl.prototype._on_bubble_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridCalendar._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseenter();}if(_o){nexacro.CalendarCtrl.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridCalendar._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseleave();}if(_o){nexacro.CalendarCtrl.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridCalendar.on_notify_ondropdown=function(_a,_b){if(!this._displaymode){var _c=this._grid;var _d=nexacro.CalendarCtrl.prototype.on_notify_ondropdown.call(this,_a,_b);if(this._isPopupVisible()){_c._is_editor_keyaction=false;}else{_c._is_editor_keyaction=true;}return _d;}};_pGridCalendar.on_notify_mobile_ondropdown=function(_a,_b){if(!this._displaymode){var _c=this._grid;var _d=nexacro.CalendarCtrl.prototype.on_notify_mobile_ondropdown.call(this,_a,_b);if(this._isPopupVisible()){_c._is_editor_keyaction=false;}else{_c._is_editor_keyaction=true;}return _d;}};_pGridCalendar.on_notify_onkeydown=function(_a,_b){var _c=this._grid;if(_b.keycode==nexacro.Event.KEY_DOWN&&_b.altKey){_c._is_editor_keyaction=false;}if(!_a._displaymode){return (nexacro.CalendarCtrl.prototype.on_notify_onkeydown.call(this,_a,_b));}};_pGridCalendar.on_fire_onchar=function(_a,_b,_c,_d){nexacro.CalendarCtrl.prototype.on_fire_onchar.call(this,_a,_b,_c,_d);var _e=new nexacro.CharEventInfo(this,"onchar",_b,_c,_d);return this._grid.on_fire_onchar(_a,_b,_c,_d,_e);};_pGridCalendar.on_notify_onlbuttondown=function(_a,_b){if(!this._displaymode){return nexacro.CalendarCtrl.prototype.on_notify_onlbuttondown.call(this,_a,_b);}};_pGridCalendar.on_fire_ontextchange=function(_a,_b,_c,_d,_e,_f){var _g=new nexacro.TextChangeEventInfo(this,"ontextchange",_b,_c,_d,_e,_f);return this._grid.on_fire_ontextchange(this,_b,_c,_d,_e,_f,_g);};_pGridCalendar.on_fire_ontextchanged=function(_a,_b,_c){return this._grid.on_fire_ontextchanged(_a,_b,_c);};_pGridCalendar.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(!_a._displaymode){if(this._grid.autoupdatetype=="dateselect"||this._grid.autoupdatetype=="itemselect"){this._setDataset(true,undefined,false,_c);}return (nexacro.CalendarCtrl.prototype.on_fire_onchanged.call(this,_a,_b,_c,_d,_e));}};_pGridCalendar.on_fire_oncloseup=function(_a,_b,_c,_d,_e,_f){this._grid.on_fire_oncloseup(_a,_b,_c,_d,_e,_f);};_pGridCalendar.on_fire_ondropdown=function(_a){this._grid.on_fire_ondropdown(_a);};_pGridCalendar.on_fire_user_ontouchend=function(_a,_b,_c,_d){var _e=nexacro._getFirstTouchInfo(_b);if(this._isSubCell&&_e){_e.canvasX-=_d._adjust_left;_e.canvasY-=_d._adjust_top;_e.clientX-=_d._adjust_left;_e.clientY-=_d._adjust_top;}nexacro.CalendarCtrl.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridCalendar.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(_l!=this){_g-=_l._adjust_left;_i-=_l._adjust_left;_h-=_l._adjust_top;_j-=_l._adjust_top;}nexacro.CalendarCtrl.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridCalendar.on_fire_user_ontouchstart=function(_a,_b,_c,_d){var _e=nexacro._getFirstTouchInfo(_b);if(this._isSubCell&&_e){_e.canvasX-=_d._adjust_left;_e.canvasY-=_d._adjust_top;_e.clientX-=_d._adjust_left;_e.clientY-=_d._adjust_top;}nexacro.CalendarCtrl.prototype.on_fire_user_ontouchstart.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);return true;};_pGridCalendar.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(_l!=this){_g-=_l._adjust_left;_i-=_l._adjust_left;_h-=_l._adjust_top;_j-=_l._adjust_top;}nexacro.CalendarCtrl.prototype.on_fire_user_onlbuttondown.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);return true;};_pGridCalendar.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f){var _g=nexacro.CalendarCtrl.prototype.on_fire_sys_onkeydown.call(this,_a,_b,_c,_d,_e,_f);if(this._isPopupVisible()){this._grid._is_editor_keyaction=false;}else{this._grid._is_editor_keyaction=true;}return _g;};_pGridCalendar.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.CalendarCtrl.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,"control");return true;};_pGridCalendar.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this._displaymode){this.setSelect(0,0);}nexacro.CalendarCtrl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,"control");return true;};_pGridCalendar.on_notify_oneditclick=function(_a,_b){var _c="";if(_b.fromobject instanceof nexacro.CalendarEditCtrl){var _d=_b.fromobject._input_element;var _e,_f;if(_d.align){_e=_d.align._halign;_f=_d.align._valign;}else if(_d.halign&&_d.valign){_e=_d.halign;_f=_d.valign;}_c=this._cellobj._getClickItem(_e,_f,_b.canvasX,_b.canvasY,_d.text,_b.fromobject);}if(!_c){_c="control";}var _g=this._cellobj.currentstyle.padding;var _h=_b.canvasX+(_g?_g.left:0);var _i=_b.canvasY+(_g?_g.top:0);var _j=this._getClientXY(_h,_i);return this._cellobj.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_h,_i,_j[0],_j[1],_b.fromobject,_b.fromreferenceobject,_c);};_pGridCalendar._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(!this._is_alive){return;}var _j=this.visible;if(this._displaymode&&this._grid.selectchangetype=="up"){_j=true;}if(_j&&this._isEnable()&&this.enableevent){var _k=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_k[0],_k[1],this,this,"control");}};_pGridCalendar._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridCalendar._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridCalendar.on_getBindableProperties=function(){if(!this._displaymode){return "value";}};_pGridCalendar._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridCalendar._getDisplayText=function(){if(this.parent){return this.parent._getDisplayText();}return "";};_pGridCalendar._updateAll=function(_a){if(this.getElement()){this.on_apply_pseudo(this._cellobj._pseudo,_a);this._setProperty();}};_pGridCalendar._setProperty=function(){var _a=this._cellinfo;var _b=this._cellobj;var _c=this._grid;var _d=_c._getDataRow(_b._rowidx);var _e=_a._getAttrValue(_a.mask,_d);if(!_e||_e.length==0){_e="yyyy-MM-dd";}if(_e!=null){this.set_editformat(_e);this.set_dateformat(_e);}var _e=org_v=_a._getValue(_d);if(this._displaymode==true&&!_e){_e=_a._getDisplayText(_d);_e=this._makeNormalValue1(_e);}_e=this._toValueStr(_e);this.set_value(_e,true);_e=_a._getAttrValue(_a.editautoselect,_d);if(_e!=null){this.set_autoselect(_e);}if(this._isTimeMask()==true){this.set_type("spin");}else{this.set_type("normal");}if(_c.locale){this.set_locale(_c.locale);}var _f=_a._getAttrValue(_a.calendardisplay,_d);if(_f=="display"){_e=_a._getAttrValue(_a.calendardisplaynulltext,_d);if(_e!=null){this.set_displaynulltext(_e);}}var _g=_a._getAttrValue(_a.calendardisplaynulltype,_d);if(_g!="default"&&(nexacro._isNull(org_v)||org_v==="")){if(_g=="nulltext"){this.set_dateformat("");}else{if(_g=="nullmask"){_e=this._toValueStr(null);this.set_value(_e,true);}else{this.set_dateformat("");}this.set_displaynulltext("");}}this.set_usesoftkeyboard(_c.usesoftkeyboard);var _h=_a._getAttrValue(_a.calendarinnerdataset,_d);if(_h){this.set_innerdataset(_h);}var _i=_a._getAttrValue(_a.calendarbackgroundcolumn,_d);if(_i){this.set_backgroundcolumn(_i);}var _j=_a._getAttrValue(_a.calendarbordercolumn,_d);if(_j){this.set_bordercolumn(_j);}var _k=_a._getAttrValue(_a.calendardatecolumn,_d);if(_k){this.set_datecolumn(_k);}var _l=_a._getAttrValue(_a.calendartextcolorcolumn,_d);if(_l){this.set_textcolorcolumn(_l);}};_pGridCalendar._EditUpdateAll=function(_a,_b){if(this.getElement()){this._cellinfo=_a;this._cellobj=_b;this._setProperty();this._control_pseudo="";this._contents_pseudo="";this.on_apply_pseudo(this._pseudo);}};_pGridCalendar._setDataset=function(_a,_b,_c,_d){var _e=this._cellobj;var _f=this._cellinfo;var _g=this._grid;var _h=_g._getDataRow(_e._rowidx);if(_c==undefined){_c=true;}this._setValueCtrl(_c);var _i=this.value;if(_b!=undefined){_h=_b;}var _j=true;if(_f.text._bindtype==1){_g._is_async_recreate=_a;_g._dsEventOccured=true;var _k={status:""};_f.grid._binddataset._setColumn(_h,_f.text._bindexpr,_i,_k);if(_k.status=="cancolumnchange"){this._setValue(_d);_j=false;}_g._is_async_recreate=false;_g._dsEventOccured=false;}return _j;};_pGridCalendar._getDlgCode=function(_a,_b,_c,_d){var _e=this._want_arrows;this._is_first_focus=false;return {want_tab:this._grid._acceptstab,want_return:false,want_escape:false,want_chars:false,want_arrows:_e};};delete _pGridCalendar;nexacro.GridControlCombo=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.ComboCtrl.call(this,_a,"absolute",_b,_c,_d,_e,null,null,_f);this.tabstop=false;if(_g){this._displaymode=true;this.readonly=true;}else{this._displaymode=false;}this._controlmode=(_h)?true:false;if(_f._refobj){this._grid=_f._refobj.grid;this._cellinfo=_f._refobj;this._cellobj=_f;}else{this._grid=_f;}};var _pGridCombo=nexacro._createPrototype(nexacro.ComboCtrl,nexacro.GridControlCombo);nexacro.GridControlCombo.prototype=_pGridCombo;_pGridCombo.on_find_CurrentStyle_align=function(_a,_b){var _c=this._cellobj;if(_c){if(this._displaymode){if(_a!="disabled"){_a="normal";}}var _d=this._find_pseudo_obj("align",_a,"align",this.comboedit);return _d;}return null;};_pGridCombo.on_find_CurrentStyle_font=function(_a,_b){var _c=this._cellobj;if(_c){var _d=this._find_pseudo_obj("font",_a,"font",this.comboedit);if(!_d){_d=_c.on_find_CurrentStyle_font(_a);}return _d;}return null;};_pGridCombo.on_find_CurrentStyle_letterspace=function(_a,_b){var _c=this._cellobj;if(_c){var _d=this._find_pseudo_obj("letterspace",_a,"letterspace",this.comboedit);if(!_d){_d=_c.on_find_CurrentStyle_letterspace(_a);}return _d;}return null;};_pGridCombo.on_find_CurrentStyle_color=function(_a,_b){var _c=this._cellobj;if(_c){if(this._displaymode&&_a=="normal"){_a="readonly";}var _d=this._find_pseudo_obj("color",_a,"color",this.comboedit);if(!_d){_d=_c.on_find_CurrentStyle_color(_a);}return _d;}return null;};_pGridCombo.on_find_CurrentStyle_accessibility=function(_a,_b){var _c=this._cellobj;if(_c){var _d=this._find_pseudo_obj("accessibility",_a,"accessibility",_b);if(!_d){_d=_c.on_find_CurrentStyle_accessibility(_a);}return _d;}return null;};_pGridCombo.on_find_CurrentStyle_background=function(_a,_b){var _c=this._find_pseudo_obj("background",_a,"background",_b);return _c;};_pGridCombo.on_find_CurrentStyle_bordertype=function(_a,_b){var _c=this._find_pseudo_obj("bordertype",_a,"bordertype",_b);return _c;};_pGridCombo.on_find_CurrentStyle_gradation=function(_a,_b){var _c=this._find_pseudo_obj("gradation",_a,"gradation",_b);return _c;};_pGridCombo._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridCombo._find_pseudo_obj=function(_a,_b,_c,_d){var _e=this._cellinfo;var _f=this._grid;var _g=_f._getDataRow(this._cellobj._rowidx);if(this._cellobj&&this._grid._isFakeCell(_g)&&_b!="disabled"){_b="normal";}var _h="control"+_a;var _i=_e._query_pseudo_control(this,_g,_h,_a,_b,_c,_d);return _i;};_pGridCombo.on_destroy_contents=function(){nexacro.ComboCtrl.prototype.on_destroy_contents.call(this);this._grid=null;this._cellinfo=null;this._cellobj=null;};_pGridCombo._setAccessibilityStatFocus=function(){var _a=this._cellobj;var _b=_a._getAccessibilityMakeAddLabel();var _c="";var _d=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_d){if(_d._bindexpr&&_d._bindexpr.length>0){_c=this._cellinfo._getAttrValue(_d,this._rowidx);_d._setValue(_c);}_c=this._getAccessibilityLabel(_d);}else{_c=_a._getCellAccessibilityLabel();}_c=(_c!=_a._display_text)?_c:"";_b+=" "+_c;this._setAccessibilityLabel(_b);nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pGridCombo.on_get_style_accessibility_description=function(){if(this._cellobj){return this._cellobj.tooltiptext;}};_pGridCombo._on_bubble_touchend=function(_a,_b,_c,_d,_e,_f,_g){var _h=true;if(_g){_h=this._cellobj._common_lbuttonup(_c,null,null,null,null);}if(_h){nexacro.ComboCtrl.prototype._on_bubble_touchend.call(this,_a,_b,_c,_d,_e,_f,_g);}return true;};_pGridCombo._on_bubble_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_lbuttonup(null,_a,_f,_g,_m);}if(_o){nexacro.ComboCtrl.prototype._on_bubble_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridCombo._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseenter();}if(_o){nexacro.ComboCtrl.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridCombo._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseleave();}if(_o){nexacro.ComboCtrl.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridCombo.on_fire_oncloseup=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.ComboCtrl.prototype.on_fire_oncloseup.call(this,_a,_b,_c,_d,_e,_f,_g,_h);this._grid.on_fire_oncloseup(_a,_c,_f,_d,_g,_h);};_pGridCombo.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f){var _g=this._grid;if(_a==nexacro.Event.KEY_DOWN||_a==nexacro.Event.KEY_UP||(_a==nexacro.Event.KEY_DOWN&&_b)){_g._is_editor_keyaction=false;}nexacro.ComboCtrl.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f);if(!this._displaymode){return this._cellobj.on_fire_user_onkeydown(_a,_b,_c,_d,_e,_f);}};_pGridCombo.on_fire_sys_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(!this._displaymode){return nexacro.ComboCtrl.prototype.on_fire_sys_onmousewheel.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};};_pGridCombo.on_fire_ondropdown=function(_a){return this._grid.on_fire_ondropdown(_a);};_pGridCombo.on_fire_user_ontouchend=function(_a,_b,_c,_d){var _e=nexacro._getFirstTouchInfo(_b);if(this._isSubCell&&_e){_e.canvasX-=_d._adjust_left;_e.canvasY-=_d._adjust_top;_e.clientX-=_d._adjust_left;_e.clientY-=_d._adjust_top;}nexacro.ComboCtrl.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridCombo.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(_l!=this){_g-=_l._adjust_left;_i-=_l._adjust_left;_h-=_l._adjust_top;_j-=_l._adjust_top;}nexacro.ComboCtrl.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridCombo.on_fire_user_ontouchstart=function(_a,_b,_c,_d){var _e=nexacro._getFirstTouchInfo(_b);if(this._isSubCell&&_e){_e.canvasX-=_d._adjust_left;_e.canvasY-=_d._adjust_top;_e.clientX-=_d._adjust_left;_e.clientY-=_d._adjust_top;}nexacro.ComboCtrl.prototype.on_fire_user_ontouchstart.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);return true;};_pGridCombo.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(_l!=this){_g-=_l._adjust_left;_i-=_l._adjust_left;_h-=_l._adjust_top;_j-=_l._adjust_top;}nexacro.ComboCtrl.prototype.on_fire_user_onlbuttondown.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);return true;};_pGridCombo.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.ComboCtrl.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,"control");return true;};_pGridCombo.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this._displaymode){this.setSelect(0,0);}nexacro.ComboCtrl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,"control");return true;};_pGridCombo.on_fire_ontextchange=function(_a,_b){if(_b.pretext!=_b.posttext){this._text_change=true;}return this._grid.on_fire_ontextchange(this,_b.chartext,_b.pretext,_b.posttext,_b.preimetext,_b.postimetext,_b);};_pGridCombo.on_fire_ontextchanged=function(_a,_b){this.on_combo_text_changed(_b.pretext,_b.posttext);return this._grid.on_fire_ontextchanged(_a,_b.pretext,_b.posttext);};_pGridCombo.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(!_a._displaymode){if(this._grid.autoupdatetype=="comboselect"||this._grid.autoupdatetype=="itemselect"){this._setDataset(true);}return (nexacro.ComboCtrl.prototype.on_fire_onitemchanged.call(this,_a,_b,_c,_d,_e,_f,_g));}};_pGridCombo.on_notify_edit_oneditclick=function(_a,_b){var _c="";if(_b.fromobject instanceof nexacro.ComboEditCtrl){if(nexacro.isTouchInteraction||nexacro.SupportTouch){var _d=new nexacro.EventInfo(this,"oneditclick");if((nexacro.Browser=="Runtime"&&(_b.button=="lbutton"||_b.button=="touch"))||(nexacro.Browser!="Runtime"&&(nexacro.isTouchInteraction&&_b.button=="touch"||(!nexacro.isTouchInteraction&&application.enabletouchevent&&((nexacro._pointerType=="pen"&&_b.button=="touch")||_b.button=="lbutton"))||(nexacro.Browser!="IE"&&!application.enabletouchevent&&_b.button=="lbutton")||(nexacro.Browser=="IE"&&!application.enabletouchevent)))){this.on_notify_edit_onlbuttondown(this,_d);}}var _e=_b.fromobject._input_element;var _f,_g;if(_e.align){_f=_e.align._halign;_g=_e.align._valign;}else if(_e.halign&&_e.valign){_f=_e.halign;_g=_e.valign;}_c=this._cellobj._getClickItem(_f,_g,_b.canvasX,_b.canvasY,_e.text,_b.fromobject);}if(!_c){_c="control";}var _h=this._cellobj.currentstyle.padding;var _i=_b.canvasX+(_h?_h.left:0);var _j=_b.canvasY+(_h?_h.top:0);var _k=this._getClientXY(_i,_j);return this._cellobj.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_i,_j,_k[0],_k[1],_b.fromobject,_b.fromreferenceobject,_c);};_pGridCombo.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=nexacro.Component.prototype.on_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);if(this._isPopupVisible()&&this==_l){this._closePopup();}return _n;};_pGridCombo._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(!this._is_alive){return;}var _j=this.visible;if(this._displaymode&&this._grid.selectchangetype=="up"){_j=true;}if(_j&&this._isEnable()&&this.enableevent){var _k=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_k[0],_k[1],this,this);}};_pGridCombo._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridCombo._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridCombo._callback_onvaluechanged=function(_a,_b){if(!this._displaymode){this._recheckValue();this._is_recheck=true;}};_pGridCombo.on_getBindableProperties=function(){if(!this._displaymode){return "value";}};_pGridCombo._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridCombo._updateAll=function(_a){if(this.getElement()){this.on_apply_pseudo(this._cellobj._pseudo,_a);this._setProperty();}};_pGridCombo._setProperty=function(){var _a=this._cellinfo,_b=this._cellobj,_c=this._grid;var _d=_c._getDataRow(_b._rowidx);var _e=_a._getEdittype(_d);var _f=_a._getAttrValue(_a.combodataset,_d);if(_f&&_f.length){this.set_innerdataset(_f);}var _g=_a._getAttrValue(_a.combodatacol,_d);if(_g&&_g.length){this.set_datacolumn(_g);}var _h=_a._getAttrValue(_a.combocodecol,_d);if(_h&&_h.length){this.set_codecolumn(_h);}var _i=_a._getAttrValue(_a.combodisplayrowcount,_d);if(_i){this.set_displayrowcount(_i);}var _j=_a._getAttrValue(_a.combotype,_d);if(_j){this.set_type(_j);}var _k=_a._getAttrValue(_a.editimemode,_d);if(_k){this.set_imemode(_k);}var _l;if(this._displaymode==true){_l=_a._getDisplayText(_d);this.set_text(_l);}else{_l=_a._getValue(_d);this.set_value(_l);}_l=_a._getAttrValue(_a.editautoselect,_d);if(_l!=null){this.set_autoselect(_l);}var _m=_a._getAttrValue(_a.combodisplay,_d);if(_m=="display"){_l=_a._getAttrValue(_a.combodisplaynulltext,_d);if(_l!=null){this.set_displaynulltext(_l);}}this.set_usesoftkeyboard(_c.usesoftkeyboard);};_pGridCombo._EditUpdateAll=function(_a,_b){if(this.getElement()){this._cellinfo=_a;this._cellobj=_b;this._control_pseudo="";this._contents_pseudo="";this.on_apply_pseudo(this._pseudo);this._setProperty();}};_pGridCombo._setDataset=function(_a,_b){var _c=this._cellobj;var _d=this._cellinfo;var _e=this._grid;var _f=_e._getDataRow(_c._rowidx);var _g=this.value;if(_b!=undefined){_f=_b;}var _h=true;if(_d.text._bindtype==1){if(this._prevalue!==this.value){_e._is_async_recreate=_a;_e._dsEventOccured=true;var _i={status:""};_d.grid._binddataset._setColumn(_f,_d.text._bindexpr,_g,_i);if(_i.status=="cancolumnchange"){this.set_value(this._prevalue);_h=false;}_e._is_async_recreate=false;_e._dsEventOccured=false;}}return _h;};_pGridCombo._getDlgCode=function(_a,_b,_c,_d){var _e=this._want_arrows;this._is_first_focus=false;return {want_tab:this._grid._acceptstab,want_return:false,want_escape:false,want_chars:false,want_arrows:_e};};delete _pGridCombo;nexacro.GridCellCheckbox=function(_a,_b,_c,_d,_e,_f){nexacro.CheckBoxCtrl.call(this,_a,"absolute",_b,_c,_d,_e,null,null,_f);this.tabstop=false;this._is_usetextbox=false;var _g=_f;while(_g){if(_g._type_name=="GridCell"){this._cellobj=_g;this._cellinfo=_g._refobj;this._grid=_g._refobj.grid;break;}_g=_g.parent;}this.checked=false;};var _pGridCellCheckbox=nexacro._createPrototype(nexacro.CheckBoxCtrl,nexacro.GridCellCheckbox);nexacro.GridCellCheckbox.prototype=_pGridCellCheckbox;_pGridCellCheckbox.on_find_CurrentStyle_font=function(){};_pGridCellCheckbox.on_find_CurrentStyle_letterspace=function(){};_pGridCellCheckbox.on_find_CurrentStyle_color=function(){};_pGridCellCheckbox.on_find_CurrentStyle_align=function(){};_pGridCellCheckbox.on_find_CurrentStyle_border=function(){};_pGridCellCheckbox.on_find_CurrentStyle_bordertype=function(){};_pGridCellCheckbox.on_find_CurrentStyle_background=function(){};_pGridCellCheckbox.on_find_CurrentStyle_gradation=function(){};_pGridCellCheckbox.on_find_CurrentStyle_padding=function(){};_pGridCellCheckbox.on_find_CurrentStyle_focusborder=function(){};_pGridCellCheckbox.on_find_CurrentStyle_moveeffect=function(){};_pGridCellCheckbox.on_find_CurrentStyle_shadow=function(){};_pGridCellCheckbox.on_find_CurrentStyle_textpadding=function(){};_pGridCellCheckbox.on_update_style_background=function(){};_pGridCellCheckbox.on_update_style_border=function(){};_pGridCellCheckbox.on_update_style_bordertype=function(){};_pGridCellCheckbox.on_update_style_gradation=function(){};_pGridCellCheckbox.on_update_style_font=function(){};_pGridCellCheckbox.on_update_style_letterspace=function(){};_pGridCellCheckbox.on_update_style_padding=function(){};_pGridCellCheckbox.on_update_style_shadow=function(){};_pGridCellCheckbox.on_update_style_padding=function(){};_pGridCellCheckbox.on_update_style_align=function(){};_pGridCellCheckbox.on_update_style_cursor=function(){};_pGridCellCheckbox.on_update_style_color=function(){};_pGridCellCheckbox.on_create_contents=function(){nexacro.CheckBoxCtrl.prototype.on_create_contents.call(this);this.chkimg.on_apply_custom_setfocus=function(){};this.chkimg._on_last_lbuttonup=function(){this.parent._on_last_lbuttonup();};this.chkimg._on_last_keyup=function(){this.parent._on_last_keyup();};};_pGridCellCheckbox.on_apply_custom_setfocus=function(_a,_b){};_pGridCellCheckbox.on_apply_style_buttonalign=function(){var _a;if(this.currentstyle.buttonsize==null){_a=14;}else{_a=parseInt(this.currentstyle.buttonsize._value,10);}this.resize(_a,_a);};_pGridCellCheckbox._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridCellCheckbox._styleProp=[["buttonbackground","background"],["buttonborder","border"],["buttonbordertype","bordertype"],["buttongradation","gradation"],["buttonimage","image"]];_pGridCellCheckbox._getStyleProp=function(_a){var _b=this._styleProp;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d][0]==_a){return _b[_d][1];}}return _a;};_pGridCellCheckbox.on_get_style_accessibility_label=function(){return "";};_pGridCellCheckbox.on_find_CurrentStyle_cursor=function(_a){var _b=this._grid;if(_b._global_cursor){return _b._global_cursor;}var _c=this._find_pseudo_obj("cursor",_a)||this._cellobj.on_find_CurrentStyle_cursor(_a);return (_c)?_c:nexacro.Component._default_cursor;};_pGridCellCheckbox._find_pseudo_obj=function(_a,_b,_c){var _d=this._cellinfo;var _e=this._grid;var _f=_e._getDataRow(this._cellobj._rowidx);if(this._cellobj&&this._grid._isFakeCell(_f)&&_b!="disabled"){_b="normal";}var _g="control"+this._getStyleProp(_a);var _h=_d._query_pseudo_control(this,_f,_g,_a,_b,_c);return _h;};_pGridCellCheckbox.on_created_contents=function(){nexacro.CheckBoxCtrl.prototype.on_created_contents.call(this);var _a=this._cellobj.currentstyle.align;if(_a){this._setAlign(_a.halign,_a.valign);}};_pGridCellCheckbox.on_destroy_contents=function(){nexacro.CheckBoxCtrl.prototype.on_destroy_contents.call(this);this._grid=null;this._cellinfo=null;this._cellobj=null;};_pGridCellCheckbox.on_change_containerRect=function(){var _a=this._grid._getAvailableRect(this);var _b=_a.height;this.chkimg.move(0,0,_b,_b);};_pGridCellCheckbox._setAccessibilityStatFocus=function(){var _a=this._cellobj;var _b=_a._getAccessibilityMakeAddLabel();var _c="";var _d=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_d){if(_d._bindexpr&&_d._bindexpr.length>0){_c=this._cellinfo._getAttrValue(_d,this._rowidx);_d._setValue(_c);}_c=this._getAccessibilityLabel(_d);}else{_c=_a._getCellAccessibilityLabel();}_b+=" "+_c;this._setAccessibilityLabel(_b);this._setAccessibilityStatChecked(this.isChecked());_a._setAccessibilityStatChecked(this.isChecked());nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pGridCellCheckbox.on_get_style_accessibility_description=function(){if(this._cellobj){return this._cellobj.tooltiptext;}};_pGridCellCheckbox.on_notify_checkbox_onkeydown=function(_a,_b){};_pGridCellCheckbox.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this.parent.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,"control");};_pGridCellCheckbox.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this.parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,"control");};_pGridCellCheckbox._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridCellCheckbox._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridCellCheckbox._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridCellCheckbox._setAlign=function(_a,_b){var _c=this._grid._getAvailableRect(this.parent);var _d=_c.right;var _e=_c.bottom;var _f=_c.width;var _g=_c.height;var _h;if(this.currentstyle.buttonsize==null){_h=14;}else{_h=parseInt(this.currentstyle.buttonsize._value,10);}if(!_a){_a="center";}if(!_b){_b="middle";}var _i=0;var _j=0;if(_a=="center"){_i=Math.round((_f-_h)/2);}else if(_a=="right"){_i=_d-_h;}if(_b=="middle"){_j=Math.round((_g-_h)/2);}else if(_b=="bottom"){_j=_e-_h;}this.move(_i,_j,_h,_h);};_pGridCellCheckbox._updateAll=function(_a){if(this.getElement()){this._setProperty();this.on_apply_pseudo(this._cellobj._pseudo,_a);this.set_value(this.checked);}};_pGridCellCheckbox._setProperty=function(){var _a=this._cellinfo;var _b=this._cellobj;var _c=this._grid;var _d=_c._getDataRow(_b._rowidx);var _e=_a._getDisplayText(_d);_e=nexacro._toString(_e);if(_e!=null){this._display_text=_e;this.set_text(_e);}else{this._display_text="";this.set_text("");}_b._setAccessibilityStatChecked(this.checked);};delete _pGridCellCheckbox;nexacro.GridControlCheckbox=function(_a,_b,_c,_d,_e,_f,_g){nexacro.GridCellCheckbox.call(this,_a,_b,_c,_d,_e,_f);this._controlmode=(_g)?true:false;};var _pGridCheckbox=nexacro._createPrototype(nexacro.GridCellCheckbox,nexacro.GridControlCheckbox);nexacro.GridControlCheckbox.prototype=_pGridCheckbox;_pGridCheckbox.on_apply_text=function(){var _a=this._display_text;this.checked=(_a==null)?false:nexacro._toBoolean(_a);};_pGridCheckbox._common_fire_lbuttondown=function(_a){var _b=this._grid;if(_b){var _c=_b._getDataRow(this._cellobj._rowidx);if(_b._isFakeCell(_c)){return false;}}};_pGridCheckbox.on_fire_user_ontouchstart=function(_a,_b,_c,_d){this._common_fire_lbuttondown();return this._cellobj.on_fire_user_ontouchstart(_a,_b,_c,_d);};_pGridCheckbox.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){this._common_fire_lbuttondown();return this._cellobj.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pGridCheckbox.on_fire_user_ontouchend=function(_a,_b,_c,_d){nexacro.GridCellCheckbox.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);this._cellobj.on_fire_user_ontouchend(_a,_b,_c,_d);return true;};_pGridCheckbox.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.GridCellCheckbox.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return true;};_pGridCheckbox.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){var _m=this._grid;if(_m){var _n=_m._getDataRow(this._cellobj._rowidx);if(_m._isFakeCell(_n)){return false;}}if(_m.selectchangetype!="down"){if(nexacro._toBoolean(_m.readonly)==false){this._toggleCheck();}}if(!this._is_alive){return;}return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,"control");};_pGridCheckbox.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){var _m=this._grid;if(_m){var _n=_m._getDataRow(this._cellobj._rowidx);if(_m._isFakeCell(_n)){return false;}}return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,"control");};_pGridCheckbox._toggleCheck=function(){var _a=this._cellobj;var _b=this._cellinfo;var _c=this._grid;var _d=_c._getDataRow(_a._rowidx);var _e=_b._getEdittype(_d);if(_e=="checkbox"){var _f=nexacro._toBoolean(this.value);_f=(_f)?0:1;if(_b.text._bindtype==1){_c._dsEventOccured=true;if(_b.grid._binddataset.setColumn(_d,_b.text._bindexpr,_f)){_f=this._getDisplayText();this.set_value(_f);}if(_c){_c._dsEventOccured=false;}}}};_pGridCheckbox._getDisplayText=function(){if(this.parent){return this.parent._getDisplayText();}return "";};_pGridCheckbox._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseenter();}if(_o){nexacro.GridCellCheckbox.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridCheckbox._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseleave();}if(_o){nexacro.GridCellCheckbox.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};delete _pGridCheckbox;nexacro.GridControlImage=function(_a,_b,_c,_d,_e,_f){nexacro.Component.call(this,_a,"absolute",_b,_c,_d,_e,null,null,_f);this.tabstop=false;this._is_subcontrol=true;if(_f._refobj){this._grid=_f._refobj.grid;this._cellinfo=_f._refobj;this._cellobj=_f;}this._img_elem=null;this._img_type="url";this._accessibility_role="image";};var _pGridImage=nexacro._createPrototype(nexacro.Component,nexacro.GridControlImage);nexacro.GridControlImage.prototype=_pGridImage;_pGridImage._type_name="GridControlImage";_pGridImage.imagewidth=0;_pGridImage.imageheight=0;_pGridImage.on_find_CurrentStyle_accessibility=function(_a){var _b=this._cellinfo;var _c=this._cellobj;if(_b&&_c){var _d=this._find_pseudo_obj("accessibility",_a,"accessibility");var _e=this._grid;var _f=_e._getDataRow(_c._rowidx);if(!_d){_d=_b._query_pseudo_accessibility(_f,_a);}return _d;}return null;};_pGridImage.on_find_CurrentStyle_background=function(_a){return this._find_pseudo_obj("background",_a,"background");};_pGridImage.on_find_CurrentStyle_border=function(_a){return this._find_pseudo_obj("border",_a,"border");};_pGridImage.on_find_CurrentStyle_bordertype=function(_a){return this._find_pseudo_obj("bordertype",_a,"bordertype");};_pGridImage.on_find_CurrentStyle_gradation=function(_a){return this._find_pseudo_obj("gradation",_a,"gradation");};_pGridImage.on_find_CurrentStyle_padding=function(_a){return this._find_pseudo_obj("padding",_a,"padding");};_pGridImage.on_find_CurrentStyle_opacity=function(_a){return this._find_pseudo_obj("opacity",_a);};_pGridImage.on_find_CurrentStyle_cursor=function(_a){var _b=this._grid;if(_b._global_cursor){return _b._global_cursor;}var _c=this._find_pseudo_obj("cursor",_a)||this._cellobj.on_find_CurrentStyle_cursor(_a);return (_c)?_c:nexacro.Component._default_cursor;};_pGridImage.on_find_CurrentStyle_shadow=function(_a){return null;};_pGridImage.on_find_CurrentStyle_font=function(_a){return this._find_inherit_pseudo_obj("font",_a,"font");};_pGridImage.on_find_CurrentStyle_letterspace=function(_a){return this._find_inherit_pseudo_obj("letterspace",_a,"letterspace");};_pGridImage.on_find_CurrentStyle_color=function(_a){return this._find_inherit_pseudo_obj("color",_a,"color");};_pGridImage.on_find_CurrentStyle_align=function(_a){return this.parent.on_find_CurrentStyle_align(_a);};_pGridImage._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridImage._find_pseudo_obj=function(_a,_b,_c){var _d=this._cellinfo;var _e=this._grid;var _f=_e._getDataRow(this._cellobj._rowidx);if(this._cellobj&&this._grid._isFakeCell(_f)&&_b!="disabled"){_b="normal";}_f=_e._getDataRow(this._cellobj._rowidx);var _g="control"+_a;var _h=_d._query_pseudo_control(this,_f,_g,_a,_b,_c);return _h;};_pGridImage.on_created_contents=function(){if(this._img_elem){this._img_elem.create();}};_pGridImage.on_destroy_contents=function(){this._grid=null;this._cellinfo=null;this._cellobj=null;if(this._img_elem){this._img_elem.destroy();this._img_elem=null;}};_pGridImage._setAccessibilityStatFocus=function(){var _a=this._cellobj;var _b=_a._getAccessibilityMakeAddLabel();var _c="";var _d=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_d){if(_d._bindexpr&&_d._bindexpr.length>0){_c=this._cellinfo._getAttrValue(_d,this._rowidx);_d._setValue(_c);}_c=this._getAccessibilityLabel(_d);}else{_c=_a._getCellAccessibilityLabel();}_b+=" "+_c;this._setAccessibilityLabel(_b);nexacro.Component.prototype._setAccessibilityStatFocus.call(this);};_pGridImage.on_get_style_accessibility_label=function(){return (this.text)?this.text:this.id;};_pGridImage.on_get_style_accessibility_description=function(){if(this._cellobj){return this._cellobj.tooltiptext;}};_pGridImage.on_apply_text=function(){this._load_image(this._display_text);};_pGridImage.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this.parent.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,"image");};_pGridImage.on_fire_user_ontouchstart=function(_a,_b,_c,_d){return this.parent.on_fire_user_ontouchstart(_a,_b,this,_d);};_pGridImage.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this.parent.on_fire_user_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l);};_pGridImage.on_fire_user_ontouchend=function(_a,_b,_c,_d){return this.parent.on_fire_user_ontouchend(_a,_b,this,_d);};_pGridImage.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this.parent.on_fire_user_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m);};_pGridImage.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f){return this.parent.on_fire_user_onkeydown(_a,_b,_c,_d,this,_f);};_pGridImage.on_fire_user_onkeyup=function(_a,_b,_c,_d,_e,_f){return this.parent.on_fire_user_onkeyup(_a,_b,_c,_d,this,_f);};_pGridImage.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this.parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,"image");};_pGridImage.on_fire_onsize=function(_a,_b){if(this._complete){this.__apply_text();}return nexacro.Component.prototype.on_fire_onsize.call(this,_a,_b);};_pGridImage._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridImage._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridImage._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridImage._getDisplayText=function(){if(this.parent){return this.parent._getDisplayText();}return "";};_pGridImage._updateAll=function(_a){this.on_apply_pseudo(this._cellobj._pseudo,_a);this._setProperty();};_pGridImage._setProperty=function(){var _a=this._cellinfo;var _b=this._cellobj;var _c=this._grid;var _d=_c._getDataRow(_b._rowidx);var _e=_a._getDisplayText(_d);_e=nexacro._toString(_e);if(_e!=null){this.set_text(_e);}else{this.set_text("");}};_pGridImage._adjustAlign=function(_a,_b){if(!_a){_a="center";}if(!_b){_b="middle";}var _c=this._grid._getAvailableRect(this.parent);var _d=_c.width;var _e=_c.height;var _f=_c.right;var _g=_c.bottom;var _h=0;var _i=0;var _j=this._img_elem;var _k=this.imagewidth;var _l=this.imageheight;if(_a=="center"){_h=Math.round((_d-_k)/2);}else if(_a=="right"){_h=_f-_k;}if(_b=="middle"){_i=Math.round((_e-_l)/2);}else if(_b=="bottom"){_i=_g-_l;}this.move(_h,_i,_k,_l);if(_j){_j.setElementSize(_k,_l);}};_pGridImage._on_loadImg=function(_a,_b,_c){if(!this._is_alive||!this._img_elem){return;}if(this._img_type=="url"){this._img_elem.setElementImageUrl(_a);}else{this._img_elem.setElementImageBase64(_a);}this.imagewidth=_b;this.imageheight=_c;var _d=this.on_find_CurrentStyle_align(this._pseudo);if(_d){this._adjustAlign(_d.halign,_d.valign);}else{this._adjustAlign();}};_pGridImage._load_image=function(_a){var _b=this.getElement();var _c="";var _d="url";if(_a){_c=_a.toString();var _e=nexacro._checkBase64String(_c);if(_e){_d="base64";if(_c.substring(0,10).toLowerCase()=="data:image"){if(_c.substring(0,17).toLowerCase()!="data:image;base64"){var _f=_c.indexOf(",");if(_f> -1){var _g=_c.slice(_f+1,_c.legnth);_c="data:image;base64,"+_g;}}}else{_c="data:image;base64,"+_c;}}}if(_c&&_b){var _h=this._img_elem;var _i=false;if(!_h){this._img_elem=_h=new nexacro.ImageElement(_b);_i=true;}if(!_h._handle){_h.create();}if(_d=="url"){_c=nexacro._getURIValue(_c);_c=nexacro._getImageLocation(_c,this._getRefFormBaseUrl());}this._img_type=_d;var _j=nexacro._getImageSize(_c,this._on_loadImg,this,undefined,_a.toString());if(_j){this.imagewidth=_j.width;this.imageheight=_j.height;if(_d=="url"){_h.setElementImageUrl(_c);}else{_h.setElementImageBase64(_c);}}else{_h.setElementVisible(true);}var _k=this.on_find_CurrentStyle_align(this._pseudo);this._adjustAlign(_k.halign,_k.valign);if(_i){if(this._is_created){_h.create();}}if(this.imagewidth>0&&this.imageheight>0){_h.setElementVisible(true);_h.setElementSize(this.imagewidth,this.imageheight);}}else{if(this._img_elem){this._img_elem.setElementVisible(false);this.imagewidth=0;this.imageheight=0;}}};delete _pGridImage;nexacro.GridSelectorButtonCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){nexacro.TrackImageButtonCtrl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_j);this._parent=_i;this._band=_i._band;this._grid=_j;this._idx=_k;this._point={x:0,y:0,w:0,h:0};this._minibox=null;this._minibox_size=8;this._minibox_wgap=0;this._minibox_hgap=0;};var _pGridSelectorButtonCtrl=nexacro.GridSelectorButtonCtrl.prototype=nexacro._createPrototype(nexacro.TrackImageButtonCtrl,nexacro.GridSelectorButtonCtrl);_pGridSelectorButtonCtrl._type_name="GridSelectorButtonControl";_pGridSelectorButtonCtrl.on_find_CurrentStyle_background=function(_a){};_pGridSelectorButtonCtrl.on_find_CurrentStyle_border=function(_a){};_pGridSelectorButtonCtrl.on_find_CurrentStyle_image=function(_a){return this._grid.on_find_CurrentStyle_selectpointimage(_a);};_pGridSelectorButtonCtrl.on_apply_style_image=function(_a){nexacro.TrackImageButtonCtrl.prototype.on_apply_style_image.call(this);this._updateMiniBox();};_pGridSelectorButtonCtrl._on_loadImg=function(_a,_b,_c){if(!this._is_alive){return;}this._image_width=_b;this._image_height=_c;this._updateMiniBox();};_pGridSelectorButtonCtrl._load_image=function(_a){var _b=_a?_a._value:"";if(_b){if(_b.substring(0,4).toLowerCase()=="url("){_b=_b.substring(5,_b.length-2);}_b=nexacro._getImageLocation(_b,this._getRefFormBaseUrl());var _c=nexacro._getImageSize(_b,this._on_loadImg,this,undefined,(_a?_a._value:""));if(_c){this._on_loadImg(_b,_c.width,_c.height);}}var _d=nexacro.TrackImageButtonCtrl.prototype._load_image.call(this,_a);return _d;};_pGridSelectorButtonCtrl._updateMiniBox=function(){if(!this.currentstyle.image||!this._image_width||!this._image_height){var _a=(this._adjust_height-this._minibox_size)/2;this._minibox_wgap=_a;this._minibox_hgap=_a;if(!this._minibox){this._minibox=new nexacro.Component("minibox","absolute",_a,_a,this._minibox_size,this._minibox_size,null,null,this);this._minibox._is_simple_control=true;this._minibox._is_track=true;this._minibox._on_starttrack=function(){return this.parent._on_starttrack();};this._minibox._on_movetrack=function(_a,_b,_c){return this.parent._on_movetrack(_a,_b,_c);};this._minibox._on_endtrack=function(_a,_b,_c){return this.parent._on_endtrack(_a,_b,_c);};this._minibox.on_find_CurrentStyle_border=function(_b){return nexacro._getCachedStyleObj("border","1 solid black");};this._minibox.on_find_CurrentStyle_background=function(_b){return this.parent._band._find_pseudo_obj("selectbackground","normal","background","body");};this._minibox.createComponent();}else{this._minibox.move(_a,_a,this._minibox_size,this._minibox_size);}}else{if(this._minibox){this._minibox.destroy();this._minibox=null;}if(this._img_elem){this._minibox_wgap=(this._adjust_width-this._image_width)/2;this._minibox_hgap=(this._adjust_height-this._image_height)/2;if(this._minibox_wgap<0){this._minibox_wgap=0;}if(this._minibox_hgap<0){this._minibox_hgap=0;}}}};_pGridSelectorButtonCtrl.on_fire_onsize=function(_a,_b){this._updateMiniBox();};_pGridSelectorButtonCtrl.on_create_contents=function(){nexacro.TrackImageButtonCtrl.prototype.on_create_contents.call(this);this._updateMiniBox();};_pGridSelectorButtonCtrl.on_created_contents=function(){nexacro.TrackImageButtonCtrl.prototype.on_created_contents.call(this);if(this._minibox){this._minibox.on_created();}};_pGridSelectorButtonCtrl.on_destroy_contents=function(){this._parent=null;this._band=null;this._grid=null;this._minibox=null;nexacro.TrackImageButtonCtrl.prototype.on_destroy_contents.call(this);};_pGridSelectorButtonCtrl._on_starttrack=function(){var _a=this._parent;_a._is_tracking=true;_a._track_reset_scroll=false;_a._track_up_scroll=false;var _b=this._grid._getScrollTop();var _c=this._grid._getScrollLeft();this._point.hgap=0;this._point.wgap=0;this._point.scrolltop=_b;this._point.scrollleft=_c;this._point.x=_a._area_pos.l;this._point.y=_a._area_pos.t;this._point.w=_a._area_pos.w;this._point.h=_a._area_pos.h;var _d=end_row=start_col=end_col= -1;var _e=this._grid._selectinfo.area;if(_e.length>0){var _f=_e[_e.length-1];_d=_f.begrow;end_row=_f.endrow;start_col=_f.begrow;end_col=_f.endrow;if(this._idx!=_a._pre_idx){var _g=this._grid._selectinfo.areainfo;var _h=this._grid._selectinfo.ctrlpoint;var _i;if(_g){var _j=this._grid._curFormat;var _k=_j._bodyrows.length;if(this._idx==0){_i=_j._bodycells[_g.ecell];_h._set(_i,_g.erow,_k);}else if(this._idx==1){_i=_j._bodycells[_g.scell];_h._set(_i,_g.srow,_k);}else if(this._idx==2){_i=_j._bodycells[_g.ecell];_h._set(_i,_g.srow,_k);}else if(this._idx==3){_i=_j._bodycells[_g.scell];_h._set(_i,_g.erow,_k);}}}}if(this._grid._fixed_rowcnt>0){var _l=this._grid._getHeadHeight();var _m=this._grid._fixed_height;var _n=_l+_m;if(_d>=this._grid._fixed_startrow&&_d<=this._grid._fixed_endrow){this._point.y=_a._area_pos.t+=this._point.scrolltop;if(end_row>this._grid._fixed_endrow&&_b>0){if(_a._end_scroll_top>=0){this._point.h=_a._area_pos.h-=_b;}}}}_a.set_visible(true);_a._trackbar[0].set_visible(false);_a._trackbar[1].set_visible(false);_a._trackbar[2].set_visible(false);_a._trackbar[3].set_visible(false);_a._start_begarea=this._grid._selectinfo.arearect.barea;_a._start_endarea=this._grid._selectinfo.arearect.earea;if(this._idx==0){this._area=_a._start_begarea;}else{this._area=_a._start_endarea;}this._grid._track_mode="areaselect";_a._callback_start.call(this._grid,_a._area_pos,this._idx);};_pGridSelectorButtonCtrl._on_movetrack=function(_a,_b,_c){var _d=this._parent;var _e=this._grid._getScrollTop();var _f=this._grid._getScrollLeft();var _g=scroll_left_gap=0;if(_d._start_scroll_top>=0){_g=_d._start_scroll_top-_e;}if(_d._start_scroll_left>=0){scroll_left_gap=_d._start_scroll_left-_f;}var _h=this._grid._selectinfo.ctrlpoint.row;var _i=true;if(this._grid._fixed_rowcnt>0&&_h>=this._grid._fixed_startrow&&_h<=this._grid._fixed_endrow){_i=false;}if(this._idx==0){var _j=this._point.x+_a;var _k=this._point.y+_b;var _l=this._point.w-_a+scroll_left_gap;var _m=this._point.h-_b+(_i?_g:0);}else if(this._idx==1){var _j=this._point.x+scroll_left_gap;var _k=this._point.y+(_i?_g:0);var _l=this._point.w+_a-scroll_left_gap;var _m=this._point.h+_b-(_i?_g:0);}else if(this._idx==2){var _j=this._point.x+_a;var _k=this._point.y;var _l=this._point.w-_a;var _m=this._point.h+_b;}else if(this._idx==3){var _j=this._point.x;var _k=this._point.y+_b;var _l=this._point.w+_a;var _m=this._point.h-_b;}var _n=this._grid._selectinfo.area;if(this._grid._fixed_rowcnt>0&&_n.length){var _o=this._grid.currentstyle.border;var _p=(_o)?parseInt(_o.right_width,10):0;var _q=this._grid._getHeadHeight();var _r=this._grid._fixed_rowcnt;var _s=this._grid._fixed_height;var _t=_q+_s+_p;var _u=_n[_n.length-1];var _v=_u.begrow;var _w=_u.endrow;var _x=this._grid._selectinfo.ctrlpoint;var _y=_x.row;var _z=_x.col;var _o=this._grid.currentstyle.border;var _p=(_o)?parseInt(_o.right_width,10):0;var _aa=this._grid._fixed_startrow;var _ab=this._grid._fixed_endrow;var _ac=this._grid.vscrollbar;if((_k+_m)<_t){_d._track_reset_scroll=true;}if(_w>_ab){_d._track_up_scroll=true;}if(_d._track_reset_scroll&&_v<=_ab&&_e>0&&(_k+_m)>=_t){_ac.set_pos(0);_d._track_reset_scroll=false;}else if(_d._track_up_scroll&&_x.row<=_ab&&_e>0&&(_k+_m)<=(_t)){_ac.set_pos(_ac.pos-1);}else if(_x.row>_ab&&_e>0&&_k<=_t){_ac.set_pos(_ac.pos-1);}}var _ad=_d._setAreaPos(_j,_k,_l,_m,true,this._idx);var _ae=false;_d._adjust_scroll=false;if(_ad[0]!=""||_ad[1]!=""){var _af;if(_d._onlyarea){_af=_d._curarea;}var _ag=_d._area_pos.l;var _ah=_d._area_pos.t;var _ai=_d._area_pos.w;var _aj=_d._area_pos.h;_ae=_d._callback_scroll.call(this._grid,_ad,_af);_d._area_pos.l=_ag;_d._area_pos.t=_ah;_d._area_pos.w=_ai;_d._area_pos.h=_aj;}if(_ae){if(_ad[1]=="bottomover1"||_ad[1]=="topover0"){}if(_ad[0]=="rightover1"||_ad[0]=="leftover0"){}}_d._callback.call(this._grid,_d._area_pos,this._idx,true);};_pGridSelectorButtonCtrl._on_endtrack=function(_a,_b,_c){var _d=this._parent;_d._is_tracking=false;_d._adjust_scroll=true;_d.set_visible(false);_d._trackbar[0].set_visible(true);_d._trackbar[1].set_visible(true);_d._start_begarea=this._grid._selectinfo.arearect.barea;_d._start_endarea=this._grid._selectinfo.arearect.earea;if(this._idx==0){this._area=_d._start_begarea;}else{this._area=_d._start_endarea;}_d._end_scroll_top=this._grid._getScrollTop();_d._end_scroll_left=this._grid._getScrollLeft();_d._pre_idx=this._idx;var _e=this._grid._selectinfo.area;if(this._grid._fixed_rowcnt>0&&_e.length){var _f=_e[_e.length-1];var _g=_f.endrow;var _h=this._grid._fixed_endrow;if(_g>_h){_d._track_up_scroll=true;}else{_d._track_up_scroll=false;}}this._grid._track_mode="";this._grid._updateSelector();};delete _pGridSelectorButtonCtrl;nexacro.GridSelector=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_simple_control=true;this._is_subcontrol=true;this._callback_start=null;this._callback=null;this._callback_scroll=null;this._trackbar=[];this._grid=_i;this._band=_i._bodyBand;this._area_pos={l:0,t:0,w:0,h:0,empty:true};this._curarea="";this._onlyarea=false;this._start_begarea="";this._start_endarea="";this._start_scroll_top= -1;this._start_scroll_left= -1;this._end_scroll_top= -1;this._end_scroll_left= -1;this._pre_idx= -1;};var _pGridSelector=nexacro._createPrototype(nexacro.Component,nexacro.GridSelector);nexacro.GridSelector.prototype=_pGridSelector;_pGridSelector._type_name="GridSelector";_pGridSelector._trackbar_size=22;_pGridSelector.on_find_CurrentStyle_background=function(_a){return null;};_pGridSelector.on_find_CurrentStyle_border=function(_a){return null;};_pGridSelector.on_find_CurrentStyle_opacity=function(_a){return null;};_pGridSelector.on_create_contents=function(){};_pGridSelector.on_created_contents=function(){if(this._trackbar[0]){this._trackbar[0].on_created();this._trackbar[1].on_created();this._trackbar[2].on_created();this._trackbar[3].on_created();}};_pGridSelector.on_destroy_contents=function(){this._trackbar[0].destroy();this._trackbar[1].destroy();this._trackbar[0]=null;this._trackbar[1]=null;this._trackbar[2]=null;this._trackbar[3]=null;this._trackbar=null;this._band=null;this._grid=null;};_pGridSelector.on_find_CurrentStyle_border=function(_a){return null;};_pGridSelector._createButton=function(){if(!this._trackbar[0]){this._trackbar[0]=new nexacro.GridSelectorButtonCtrl("selectortrackbar1","absolute",0,0,0,0,null,null,this,this.parent,0);this._trackbar[0].createComponent();this._trackbar[1]=new nexacro.GridSelectorButtonCtrl("selectortrackbar2","absolute",0,0,0,0,null,null,this,this.parent,1);this._trackbar[1].createComponent();this._trackbar[2]=new nexacro.GridSelectorButtonCtrl("selectortrackbar3","absolute",0,0,0,0,null,null,this,this.parent,2);this._trackbar[2].createComponent();this._trackbar[3]=new nexacro.GridSelectorButtonCtrl("selectortrackbar4","absolute",0,0,0,0,null,null,this,this.parent,3);this._trackbar[3].createComponent();this._trackbar[0]._no_slide_scroll=true;this._trackbar[1]._no_slide_scroll=true;this._trackbar[2]._no_slide_scroll=true;this._trackbar[3]._no_slide_scroll=true;this._recalcarea();}};_pGridSelector._updateAll=function(){if(this._trackbar[0]){this._trackbar[0].on_apply_custom_pseudo(this._trackbar[0]._pseudo);this._trackbar[1].on_apply_custom_pseudo(this._trackbar[1]._pseudo);this._trackbar[2].on_apply_custom_pseudo(this._trackbar[2]._pseudo);this._trackbar[3].on_apply_custom_pseudo(this._trackbar[3]._pseudo);}};_pGridSelector._recalcarea=function(_a){if(!this._trackbar[0]){return;}if(this._area_pos.empty){this._trackbar[0].set_visible(false);this._trackbar[1].set_visible(false);this._trackbar[2].set_visible(false);this._trackbar[3].set_visible(false);return;}if(_a!="hscroll"&&_a!="vscroll"){this.__showbutton(false);}var _b=this._trackbar_size;var _c=_b/2;var _d=this._grid;var _e=_d._curFormat;var _f=_e.leftWidth;var _g=_d._client_width-_e.rightWidth;var _h,_i,_j,_k;var _l,_m,_n,_o;var _p;_j=this._band._adjust_top;_k=this._band._getPosBottom();_h=[];_i=[];if(this._start_begarea=="left"){_h[0]=0;_i[0]=_f;}else if(this._start_begarea=="right"){_h[0]=_g;_i[0]=_d._client_width;}else{_h[0]=_f;_i[0]=_g;}if(this._start_endarea=="left"){_h[1]=0;_i[1]=_f;}else if(this._start_endarea=="right"){_h[1]=_g;_i[1]=_d._client_width;}else{_h[1]=_f;_i[1]=_g;}var _q=this._grid.currentstyle.border;var _r=(_q)?parseInt(_q.right_width,10):0;var _s=this._grid._getHeadHeight();var _t=this._grid._fixed_height;var _u=_s+_t+_r;var _v=this._grid._fixed_startrow;var _w=this._grid._fixed_endrow;var _x=this._grid._fixed_rowcnt;var _y=[false,false,false,false];var _z=this._grid._scroll_top;if(_x){var _aa=this._grid._selectinfo.area;var _ab,_ac;if(_aa.length>0){_ab=_aa[_aa.length-1].begrow;_ac=_aa[_aa.length-1].endrow;if(_ab<=(_v+_x)){_y[0]=_y[3]=true;}if(_ac<=(_v+_x)){_y[1]=_y[2]=true;}}}_p=_y[0]?_z:0;_l=this._area_pos.l-_c;_m=this._area_pos.t-_c+_p;_n=_l+_b;_o=_m+_b;this._trackbar[0].move(_l,_m,_b,_b);var _ad=this._trackbar[0]._minibox_wgap;var _ae=this._trackbar[0]._minibox_hgap;var _af=_d._find_lastFocused();if(_af==_d){if(_n-_ad<_h[0]||_o-_ae<_j||_l+_ad>_i[0]||_m+_ae>_k||_m+_ae<_t){this._trackbar[0].visible=_y[0]||false;}else{this._trackbar[0].visible=true;}}else{this._trackbar[0].visible=false;}_p=_y[1]?_z:0;_l=this._area_pos.l+this._area_pos.w-_c;_m=this._area_pos.t+this._area_pos.h-_c+_p;_n=_l+_b;_o=_m+_b;this._trackbar[1].move(_l,_m,_b,_b);if(_af==_d){if(_n-_ad<_h[1]||_o-_ae<_j||_l+_ad>_i[1]||_m+_ae>_k||_m+_ae<_t){this._trackbar[1].visible=_y[1]||false;}else{this._trackbar[1].visible=true;}}else{this._trackbar[1].visible=false;}_p=_y[2]?_z:0;_l=this._area_pos.l-_c;_m=this._area_pos.t+this._area_pos.h-_c+_p;_n=_l+_b;_o=_m+_b;this._trackbar[2].move(_l,_m,_b,_b);if(_af==_d){if(_n-_ad<_h[0]||_o-_ae<_j||_l+_ad>_i[0]||_m+_ae>_k||_m+_ae<_t){this._trackbar[2].visible=false;}}_p=_y[3]?_z:0;_l=this._area_pos.l+this._area_pos.w-_c;_m=this._area_pos.t-_c+_p;_n=_l+_b;_o=_m+_b;this._trackbar[3].move(_l,_m,_b,_b);if(_af==_d){if(_n-_ad<_h[1]||_o-_ae<_j||_l+_ad>_i[1]||_m+_ae>_k||_m+_ae<_t){this._trackbar[3].visible=false;}}this.__showbutton(true);};if(nexacro.OS=="Android"&&(nexacro.Browser=="Safari"||nexacro.Browser=="MobileSafari")){_pGridSelector.__showbutton=function(_a){if(this._trackbar[0]){if(!_a){this._trackbar[0]._control_element.setElementVisible(false);this._trackbar[1]._control_element.setElementVisible(false);this._trackbar[2]._control_element.setElementVisible(false);this._trackbar[3]._control_element.setElementVisible(false);}else{nexacro.OnceCallbackTimer.callonce(this,function(){this._trackbar[0]._control_element.setElementVisible(this._trackbar[0].visible);this._trackbar[1]._control_element.setElementVisible(this._trackbar[1].visible);},10);}}};}else{_pGridSelector.__showbutton=function(_a){if(this._trackbar[0]){if(!_a){this._trackbar[0]._control_element.setElementVisible(false);this._trackbar[1]._control_element.setElementVisible(false);this._trackbar[2]._control_element.setElementVisible(false);this._trackbar[3]._control_element.setElementVisible(false);}else{this._trackbar[0]._control_element.setElementVisible(this._trackbar[0].visible);this._trackbar[1]._control_element.setElementVisible(this._trackbar[1].visible);}}};}_pGridSelector._trackingHScroll=function(_a,_b,_c,_d,_e,_f,_g){if(!this._adjust_scroll&&!this._grid.hscrollbar){return [0,0];}return this._grid._trackingHScroll(_a,_b,_c,this._start_begarea,this._start_endarea,_d,_e,_f,_g);};_pGridSelector._setAreaPos=function(_a,_b,_c,_d,_e,_f){var _g=["",""];var _h=this._grid;this._curarea=_h._selectinfo.ctrlpoint.area;if(_e){var _i=this._grid._getTrackType(this,_a,_b,_c,_d,_f,this._onlyarea);_a=_i.adjust_l;_b=_i.adjust_t;_c=_i.adjust_w;_d=_i.adjust_h;_g[0]=_i.type[0];_g[1]=_i.type[1];}var _j=(_h._selectinfo.area.length>0)?false:true;if(_c<=0){_c=1;}if(_d<=0){_d=1;}this._area_pos.l=_a;this._area_pos.t=_b;this._area_pos.w=_c;this._area_pos.h=_d;this._area_pos.area=this._curarea;this._area_pos.empty=_j;if(_e){this._area_pos.scrolltop=_h._getScrollTop();}return _g;};_pGridSelector.move=function(_a,_b,_c,_d,_e){if(!this._is_tracking){if(_a>this._grid._client_width){return;}this._start_begarea=this._grid._selectinfo.arearect.barea;this._start_endarea=this._grid._selectinfo.arearect.earea;this._setAreaPos(_a,_b,_c,_d);this._recalcarea(_e);}else{this._setAreaPos(_a,_b,_c,_d);}return nexacro.Component.prototype.move.call(this,_a,_b,_c,_d,undefined,undefined);};_pGridSelector._setCallbackFn=function(_a,_b,_c){this._callback_start=_a;this._callback=_b;this._callback_scroll=_c;};_pGridSelector._initTrackInfo=function(){this._start_scroll_top= -1;this._start_scroll_left= -1;this._end_scroll_top= -1;this._end_scroll_left= -1;this._pre_idx= -1;};delete _pGridSelector;nexacro.GridControlResizer=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._is_simple_control=true;this._is_track=true;this._callback=null;this._index= -1;this._direction="";this._tracksize= -1;this._is_range=false;this._movedPos=0;this._is_tracking=false;this._no_slide_scroll=true;};var _pGridResizer=nexacro._createPrototype(nexacro.Component,nexacro.GridControlResizer);nexacro.GridControlResizer.prototype=_pGridResizer;_pGridResizer.on_find_CurrentStyle_cursor=function(_a){var _b=this._direction;var _c;if(_b=="horizon"){_c=nexacro._getCachedValueObj("col-resize");}else{_c=nexacro._getCachedValueObj("row-resize");}return _c;};_pGridResizer.on_create_contents=function(){};_pGridResizer.on_created_contents=function(){this.set_visible(false);this._on_apply_tracksize();var _a=nexacro._getCachedBackgroundObj("gray");this.on_apply_style_background(_a);var _b=this._direction;var _c;if(_b=="horizon"){_c=nexacro._getCachedValueObj("col-resize");}else{_c=nexacro._getCachedValueObj("row-resize");}this.on_apply_style_cursor(_c);};_pGridResizer._setCallbackFn=function(_a){this._callback=_a;};_pGridResizer._setIndex=function(_a){this._index=_a;};_pGridResizer._setDirection=function(_a){if(this._direction!=_a){this._direction=_a;this._on_apply_direction();}};_pGridResizer._on_apply_direction=function(){var _a=this.getElement();if(_a){this._on_apply_tracksize();var _b=this._direction;var _c;if(_b=="horizon"){_c=nexacro._getCachedValueObj("col-resize");}else{_c=nexacro._getCachedValueObj("row-resize");}this.on_apply_style_cursor(_c);}};_pGridResizer._setTracksize=function(_a){if(this._tracksize!=_a){this._tracksize=_a;this._on_apply_tracksize();}};_pGridResizer._on_apply_tracksize=function(){var _a=this.getElement();if(_a){var _b=this._tracksize;var _c=this._direction;if(_c=="horizon"){this.resize(1,_b);}else if(_c=="vertical"){this.resize(_b,1);}}};_pGridResizer._moveLeftTo=function(_a){this.left=_a=_a||0;this.move(_a,this.top);};_pGridResizer._moveTopTo=function(_a){this.top=_a=_a||0;this.move(this.left,_a);};_pGridResizer._on_starttrack=function(){if(!this._is_alive){return;}this._movedPos=0;this._is_tracking=true;};_pGridResizer._on_movetrack=function(_a,_b,_c){if(!this._is_alive){return;}var _d=this.parent;if(_d.ondrag&&_d.ondrag.defaultprevented==true){return;}if(_d.ondragmove&&_d.ondragmove.defaultprevented==true){return;}if(!this.visible){this.set_visible(true);}if(this._direction=="horizon"){var _e=_a-this._movedPos;this._moveLeftTo(this.left+_e);this._movedPos=_a;}else if(this._direction=="vertical"){var _f=_b-this._movedPos;this._moveTopTo(this.top+_f);this._movedPos=_b;}};_pGridResizer._on_endtrack=function(_a,_b,_c){if(!this._is_alive){return;}var _d=this.getElement();if(_d){if(nexacro._cur_drag_info){nexacro._cur_drag_info=null;}if(this.visible){this.set_visible(false);}var _e=this.parent;if((_e.ondrag&&_e.ondrag.defaultprevented==true)||(_e.ondragmove&&_e.ondragmove.defaultprevented==true)){_e._setGlobalCursor(null,_e);}else{if(this._callback&&this._movedPos!=0){if(this._direction=="horizon"){this._callback.call(this.parent,_a,this._index);}else if(this._direction=="vertical"){this._callback.call(this.parent,_b,this._index);}}_e._setGlobalCursor(null,_e);}}this._is_tracking=false;};delete _pGridResizer;nexacro.GridControlLine_Style=function(_a,_b){nexacro.Style.call(this,_a,_b);this.border=new nexacro.Style_border(1);};var _pGridControlLineStyle=nexacro.GridControlLine_Style.prototype=nexacro._createPrototype(nexacro.Style,nexacro.GridControlLine_Style);_pGridControlLineStyle._type_name="GridControlLineStyle";nexacro.GridControlLine_CurrentStyle=function(){this.border=null;};var _pGridControlLineCurrentStyle=nexacro.GridControlLine_CurrentStyle.prototype=nexacro._createPrototype(nexacro.CurrentStyle,nexacro.GridControlLine_CurrentStyle);_pGridControlLineCurrentStyle._type_name="GridControlLineCurrentStyle";delete _pGridControlLineStyle;delete _pGridControlLineCurrentStyle;nexacro.GridControlLine=function(_a,_b,_c,_d,_e,_f){nexacro.Component.call(this,_a,"absolute",_b,_c,_d,_e,null,null,_f);this.tabstop=false;this._is_subcontrol=true;this._is_simple_control=true;this._is_nc_control=true;if(_f._refobj){this._grid=_f._refobj.grid;this._cellinfo=_f._refobj;this._cellobj=_f;}else{this._grid=_f._grid;this._cellinfo=_f._cellinfo;this._cellobj=_f._cellobj;}this._linetype={};this._depth= -1;this._showleft=false;this._showbottom=false;};var _pGridControlLine=nexacro._createPrototype(nexacro.Component,nexacro.GridControlLine);nexacro.GridControlLine.prototype=_pGridControlLine;_pGridControlLine._type_name="GridControlLine";_pGridControlLine.on_create_custom_style=function(){return new nexacro.GridControlLine_Style(this);};_pGridControlLine.on_create_custom_currentStyle=function(){return new nexacro.GridControlLine_CurrentStyle();};_pGridControlLine.on_find_CurrentStyle_border=function(_a){var _b=this._linetype.width+"px "+this._linetype.style+" "+this._linetype.color;var _c="0px none transparent, 0px none transparent, ";if(this._showbottom){_c+=_b+", ";}else{_c+="0px none transparent, ";}if(this._showleft){_c+=_b;}else{_c+="0px none transparent";}var _d=nexacro._getCachedStyleObj("border",_c);return _d;};_pGridControlLine.on_find_CurrentStyle_cursor=function(_a){var _b=this._grid;if(_b._global_cursor){return _b._global_cursor;}return this.parent.on_find_CurrentStyle_cursor(_a);};_pGridControlLine._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridControlLine.on_change_containerRect=function(_a,_b){this._control_pseudo="";this._contents_pseudo="";this.on_apply_pseudo(this._pseudo);};_pGridControlLine.on_destroy_contents=function(){this._grid=null;this._cellinfo=null;this._cellobj=null;};_pGridControlLine._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridControlLine._set_line=function(_a,_b,_c){var _d=this.getElement();if(_d&&_a){this._linetype=_a;this._showleft=_b;this._showbottom=_c;this._control_pseudo="";this._contents_pseudo="";this.on_apply_pseudo(this._pseudo);}};delete _pGridControlLine;nexacro.GridControlTree=function(_a,_b,_c,_d,_e,_f){nexacro.Component.call(this,_a,"absolute",_b,_c,_d,_e,null,null,_f);this.tabstop=false;this._is_subcontrol=true;this._grid=_f._refobj.grid;this._cellinfo=_f._refobj;this._cellobj=_f;this._linetype={};this._leftline_ctrls=[];};var _pGridTree=nexacro._createPrototype(nexacro.Component,nexacro.GridControlTree);nexacro.GridControlTree.prototype=_pGridTree;_pGridTree._type_name="GridControlTree";_pGridTree._btn_elem=null;_pGridTree._chk_ctrl=null;_pGridTree._img_elem=null;_pGridTree._text_elem=null;_pGridTree._applied_state= -1;_pGridTree._display_text="";_pGridTree._upline_ctrl=null;_pGridTree._downline_ctrl=null;_pGridTree._leftline_ctrls=null;_pGridTree._clicktarget=null;_pGridTree._btnimg_size={width:0,height:0};_pGridTree.on_change_status=function(_a,_b){this._status_changing=true;nexacro.Component.prototype.on_change_status.call(this,_a,_b);this._status_changing=false;};_pGridTree.on_apply_custom_pseudo=function(_a){if(!this._is_created){return;}var _b=this.getElement();if(!_b){return;}if(!_a){_a=this._pseudo;}var _c=this.currentstyle;var _d=this.on_find_CurrentStyle_font(_a);if(_c.font!=_d){_c.font=_d;this.on_apply_style_font(_d);}var _e=this.on_find_CurrentStyle_letterspace(_a);if(_c.letterspace!=_e){_c.letterspace=_e;this.on_apply_style_letterspace(_e);}var _f=this.on_find_CurrentStyle_color(_a);if(_c.color!=_f){_c.color=_f;this.on_apply_style_color(_f);}var _g=this.on_find_CurrentStyle_align(_a);if(_c.align!=_g){_c.align=_g;this.on_apply_style_align(_g);}if(this._status_changing){this._cellobj._applyRowCellsStyle(_a,true);}};_pGridTree.on_find_CurrentStyle_background=nexacro._emptyFn;_pGridTree.on_find_CurrentStyle_font=function(_a){return this.parent.on_find_CurrentStyle_font(_a);};_pGridTree.on_find_CurrentStyle_letterspace=function(_a){return this.parent.on_find_CurrentStyle_letterspace(_a);};_pGridTree.on_find_CurrentStyle_color=function(_a){return this.parent.on_find_CurrentStyle_color(_a);};_pGridTree.on_find_CurrentStyle_cursor=function(_a){var _b=this._grid;if(_b._global_cursor){return _b._global_cursor;}return this.parent.on_find_CurrentStyle_cursor(_a);};_pGridTree.on_find_CurrentStyle_padding=function(_a){return null;};_pGridTree._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridTree._find_pseudo_obj=function(_a,_b,_c){var _d=this._cellinfo;var _e=this._cellobj;var _f=(_e._rowidx>=0)?(_e._rowidx%2):false;var _g=this._grid;var _h=_g._getDataRow(this._cellobj._rowidx);var _i=_d._query_pseudo_control(this,_h,_a,_a,_b,_c,null,_f,_e._is_Selected());return _i;};_pGridTree.on_create_contents=function(){var _a=this.getElement();var _b=this._getLineHeight();var _c=this._grid;this._createLines(true);this._createCheckbox(true);this._createImage();this._createButton();this._text_elem=new nexacro.TextBoxElement(_a);};_pGridTree._createCheckbox=function(_a){if(!this._grid.treeusecheckbox){return;}if(!this._chk_ctrl){this._chk_ctrl=new nexacro.GridCellCheckbox("controlcheckbox",0,0,0,0,this);this._chk_ctrl._is_subcontrol=true;this._chk_ctrl.createComponent(_a);}};_pGridTree._createLines=function(_a){if(!this._grid.treeuseline){return;}if(!this._rightline_ctrl){this._rightline_ctrl=new nexacro.GridControlLine("controlrightline",0,0,0,0,this.parent);this._rightline_ctrl._is_subcontrol=true;this._rightline_ctrl.createComponent(_a);}if(!this._upline_ctrl){this._upline_ctrl=new nexacro.GridControlLine("controlupline",0,0,0,0,this.parent);this._upline_ctrl._is_subcontrol=true;this._upline_ctrl.createComponent(_a);}if(!this._downline_ctrl){this._downline_ctrl=new nexacro.GridControlLine("controldownline",0,0,0,0,this.parent);this._downline_ctrl._is_subcontrol=true;this._downline_ctrl.createComponent(_a);}};_pGridTree._createImage=function(){if(!this._grid.treeuseimage){return;}if(!this._img_elem){var _a=this.getElement();if(nexacro.Browser=="IE"&&nexacro.BrowserVersion==8){this._img_elem=new nexacro.AlignImageElement(_a);}else{this._img_elem=new nexacro.ImageElement(_a);}}};_pGridTree._createButton=function(){if(!this._btn_elem){var _a=this.getElement();if(nexacro.Browser=="IE"&&nexacro.BrowserVersion==8){this._btn_elem=new nexacro.AlignImageElement(_a);}else{this._btn_elem=new nexacro.ImageElement(_a);}}};_pGridTree.on_created_contents=function(){if(this._rightline_ctrl){this._rightline_ctrl.on_created();}if(this._upline_ctrl){this._upline_ctrl.on_created();}if(this._downline_ctrl){this._downline_ctrl.on_created();}if(this._btn_elem){this._btn_elem.create();}if(this._chk_ctrl){this._chk_ctrl.on_created();}if(this._img_elem){this._img_elem.create();}if(this._text_elem){var _a=this._grid._getAvailableRect(this);this._text_elem.setElementSize(_a.width,_a.height);this._text_elem.create();}this._is_created=true;};_pGridTree.on_destroy_contents=function(){var _a=this._leftline_ctrls;for(var _b=0,_c=_a.length;_b<_c;_b++ ){_a[_b].destroy();}this._leftline_ctrls=[];if(this._rightline_ctrl){this._rightline_ctrl.destroy();this._rightline_ctrl=null;}if(this._upline_ctrl){this._upline_ctrl.destroy();this._upline_ctrl=null;}if(this._downline_ctrl){this._downline_ctrl.destroy();this._downline_ctrl=null;}if(this._btn_elem){this._btn_elem.destroy();this._btn_elem=null;}if(this._chk_ctrl){this._chk_ctrl.destroy();this._chk_ctrl=null;}if(this._img_elem){this._img_elem.destroy();this._img_elem=null;}if(this._text_elem){this._text_elem.destroy();this._text_elem=null;}this._clicktarget=null;this._grid=null;this._cellinfo=null;this._cellobj=null;};_pGridTree._setAccessibilityStatFocus=function(_a){var _b="";var _c=this._cellobj;var _d=_c._getCellAccessibilityLabel();this._setAccessibilityLabel(_d);var _e=this._cellinfo._getTreeLevel(_c._rowidx);var _f=this._cellinfo._getTreeStartLevel(_c._rowidx);if(this._grid.getTreeStatus(_c._rowidx)==0){this._setAccessibilityStatExpanded(false);}else{this._setAccessibilityStatExpanded(true);}this._setAccessibilityInfoLevel(_e-_f+1);nexacro.Component.prototype._setAccessibilityStatFocus.call(this,_a);};_pGridTree.on_get_style_accessibility_description=function(){if(this._cellobj){return this._cellobj.tooltiptext;}};_pGridTree.on_apply_text=function(){var _a=this._text_elem;if(_a){_a.setElementText(this._display_text);}};_pGridTree.on_apply_style_font=function(_a){if(_a){if(this._text_elem){this._text_elem.setElementFont(_a);}}};_pGridTree.on_apply_style_color=function(_a){if(_a){if(this._text_elem){this._text_elem.setElementColor(_a);}}};_pGridTree.on_apply_style_align=function(_a){if(_a){if(this._text_elem){this._text_elem.setElementAlignXY("left",_a.valign);}}};_pGridTree._on_bubble_mouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseenter();}if(_o){nexacro.Component.prototype._on_bubble_mouseenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridTree._on_bubble_mouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=true;if(_n){_o=this._cellobj._common_mouseleave();}if(_o){nexacro.Component.prototype._on_bubble_mouseleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);}return true;};_pGridTree._common_lbuttondown=function(_a){var _b=this._grid;var _c=_b._getDataRow(this._cellobj._rowidx);var _d=_b._treeStates[_c];if(_a==this._btn_elem){this._clicktarget=_d;}};_pGridTree._on_touchstart=function(_a,_b,_c,_d,_e,_f){if(!this._is_alive){return;}var _g=nexacro._getFirstTouchInfo(_c);if(_g){this._common_lbuttondown(_g._elem);}return nexacro.Component.prototype._on_touchstart.call(this,_a,_b,_c,_d,_e,_f);};_pGridTree._on_lbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(!this._is_alive){return;}this._common_lbuttondown(_a);return nexacro.Component.prototype._on_lbuttondown.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pGridTree._on_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!this._is_alive){return;}var _n=this._grid;if(!this._isEditTypeTree()&&_n.autoenter=="select"){var _o=this._cellobj;_o._common_lbuttonup(null,_a,_f,_g,_m);}return nexacro.Component.prototype._on_lbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};_pGridTree._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(!this._is_alive||this._grid._treetarget){this._grid._treetarget=null;return;}if(this.visible&&this._isEnable()&&this.enableevent){var _j;if(_a instanceof nexacro.TextBoxElement){_j="text";}else if(_a instanceof nexacro.ImageElement){if(this._btn_elem==_a){_j="treebutton";}else{_j="image";}}else{_j="";}var _k=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_k[0],_k[1],this,this,_j);}};_pGridTree._on_dblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(!this._is_alive){return;}if(this.visible&&this._isEnable()&&this.enableevent){var _j;if(_a instanceof nexacro.TextBoxElement){_j="text";}else if(_a instanceof nexacro.ImageElement){_j="image";}else{_j="control";}var _k=this._getClientXY(_f,_g);this.on_fire_ondblclick(_b,_c,_d,_e,_h,_i,_f,_g,_k[0],_k[1],this,this,_j);}};_pGridTree._on_last_lbuttonup=function(){this._cellobj._on_last_lbuttonup();};_pGridTree._on_last_keyup=function(){this._cellobj._on_last_keyup();};_pGridTree._common_fire_lbuttondown=function(_a,_b){if(this._btn_elem&&this._grid.treeusebutton!="noclick"){if(this._is_elem_area(this._btn_elem,_a,_b)){if(this._isEditTypeTree()){var _c=this._grid;var _d=this._cellobj;var _e=_c._getDataRow(_d._rowidx);_d._tree_lbuttondown=true;_c._toggleTreeState(_d._rowidx,true);if(this._is_alive){_d._tree_lbuttondown=false;}var _f=_c._treeStates[_e];if(this._clicktarget!=_f&&(nexacro.Browser=="Edge"||nexacro.Browser=="IE"&&nexacro.BrowserVersion>8)){_c._treetarget={row:_e,cell:_d._cellidx};}}}}};_pGridTree.on_fire_user_ontouchstart=function(_a,_b,_c,_d){var _e=nexacro._getFirstTouchInfo(_b);if(_e){this._common_fire_lbuttondown(_e.canvasX,_e.canvasY);}};_pGridTree.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){this._common_fire_lbuttondown(_g,_h);};_pGridTree._common_fire_lbuttonup=function(){if(this._cellobj._tree_lbuttondown){this._cellobj._tree_lbuttondown=false;}};_pGridTree.on_fire_user_ontouchend=function(_a,_b,_c,_d){this._common_fire_lbuttonup();};_pGridTree.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){this._common_fire_lbuttonup();};_pGridTree._on_treecheckboxclick=function(_a,_b){if(!this._is_alive){return;}var _c=this._grid;if(_a==this._chk_ctrl){var _d=this._cellobj;var _e=this._cellinfo;var _f=_c._getDataRow(_d._rowidx);var _g=_d._getDisplayRowIdx();if(_e.treecheck._bindtype==1){var _h=_c._treeChecked[_f];var _i=_e.treecheck._bindexpr;var _j=(_h==0)?1:0;_c._binddataset.setColumn(_f,_i,_j);}else{if(_c._toggleTreeChecked(_f)){_c._refreshBodyRow(_g);}}}};_pGridTree.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};_pGridTree.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=_l;while(_n){if(_n._type_name=="CheckBoxControl"){break;}_n=_n.parent;}if(this._isEditTypeTree()){this._on_treecheckboxclick(_n);}var _o=this._grid;var _p=this._cellinfo;var _q=_o._getDataRow(this._cellobj._rowidx);if(!this._is_alive){return;}return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};_pGridTree._isEditTypeTree=function(){var _a=this._grid;var _b=this._cellobj;var _c=this._cellinfo;var _d=_a._getDataRow(_b._rowidx);var _e=_c._getEdittype(_d);if(_e=="tree"){return true;}else{return false;}};_pGridTree._is_elem_area=function(_a,_b,_c){var _d=this._getCumulativeZoomFactor()/100.0;var _e=_a.left;var _f=_a.top;var _g=_a.width*_d;var _h=_a.height*_d;if(_b>=_e&&_b<=(_e+_g)){if(_c>=_f&&_c<=(_f+_h)){return true;}else{return false;}}else{return false;}};_pGridTree._getLineHeight=function(){var _a=this.parent._adjust_height;var _b=(this.parent.currentstyle.border)?this.parent.currentstyle.border._bottom_width:0;return _a-_b;};_pGridTree._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridTree._load_image=function(_a,_b){var _c=(_b)?_b.toString():null;if(this.getElement()&&_c){_c=nexacro._getURIValue(_c);_c=nexacro._getImageLocation(_c,this._getRefFormBaseUrl());_a._load_url=_c;var _d=nexacro._getImageSize(_c,this._on_loadImage,this,undefined,_b.toString());if(_d){this._on_loadImage(_c,_d.width,_d.height);}}};_pGridTree._on_loadImage=function(_a,_b,_c){var _d=false;if(this._btn_elem&&this._btn_elem._load_url==_a){this._btn_elem.setElementImageUrl(_a);var _e=this._btn_elem.width;var _f=this._btn_elem.height;if(_e!=_b||_f!=_c){_d=true;this._btnimg_size={width:_b,height:_c};this._btn_elem.setElementSize(_b,_c);}}if(this._img_elem&&this._img_elem._load_url==_a){this._img_elem.setElementImageUrl(_a);var _e=this._img_elem.width;var _f=this._img_elem.height;if(_e!=_b||_f!=_c){_d=true;this._img_elem.setElementSize(_b,_c);}}if(_d){this._adjustSubCompAlign(this._lvl);}};_pGridTree._buttonUpdate=function(_a){if(this._grid.treeusebutton!=this._treeusebutton){if(this._grid.treeusebutton=="use"){this._btn_elem.setElementVisible(true);}else{this._btn_elem.setElementVisible(false);}this._treeusebutton=this._grid.treeusebutton;}var _b="tree";var _c="normal";if(_a==0){_b+="openbuttonimage";}else if(_a==1){_b+="closebuttonimage";}else if(_a==2||_a==3||_a== -1){this._btn_elem.setElementVisible(false);this._btn_elem.setElementSize(0,0);this._btnimg_size={width:0,height:0};return;}var _d=this._grid;var _e=_d._getDataRow(this._cellobj._rowidx);var _f=this._cellinfo._query_pseudo_treecontrol(_e,_b,_c);this._load_image(this._btn_elem,_f);};_pGridTree._checkUpdate=function(_a){if(this._grid.treeusecheckbox!=this._treeusecheckbox){if(this._chk_ctrl){this._chk_ctrl.set_visible(this._grid.treeusecheckbox);}else{this._createCheckbox();}this._treeusecheckbox=this._grid.treeusecheckbox;}if(this._chk_ctrl){this._chk_ctrl.set_value(_a);this._chk_ctrl._control_pseudo="";this._chk_ctrl._contents_pseudo="";this._chk_ctrl.on_apply_pseudo();}};_pGridTree._imageUpdate=function(_a){if(this._grid.treeuseimage!=this._treeuseimage){if(this._img_elem){this._img_elem.setElementVisible(this._grid.treeuseimage);}else{this._createImage();}this._treeuseimage=this._grid.treeuseimage;}var _b;var _c="normal";if(_a==0){_b="treecollapseimage";}else if(_a==1){_b="treeexpandimage";}else if(_a==2||_a==3){_b="treeitemimage";}var _d=this._grid;var _e=_d._getDataRow(this._cellobj._rowidx);var _f=this._cellinfo._query_pseudo_treecontrol(_e,_b,_c);if(this._img_elem){this._load_image(this._img_elem,_f);if(_f){this._img_elem.setElementVisible(this._grid.treeuseimage);}else{this._img_elem.setElementVisible(false);}}this._adjustSubCompAlign(this._lvl);};_pGridTree._lineUpdate=function(_a,_b){if(this._grid.treeuseline!=this._treeuseline){this._createLines();if(this._rightline_ctrl){this._rightline_ctrl.set_visible(this._grid.treeuseline);}if(this._upline_ctrl){this._upline_ctrl.set_visible(this._grid.treeuseline);}if(this._downline_ctrl){this._downline_ctrl.set_visible(this._grid.treeuseline);}this._treeuseline=this._grid.treeuseline;}var _c=this._grid;var _d=_c._find_pseudo_obj("treelinetype",_c._pseudo,"line");if(!_d){return;}var _e=this._cellinfo._getTreeStartLevel(_a);var _f=this._cellinfo._getTreeLevel(_a+1);var _g=(_c._hasSameNextNode[_a])?_c._hasSameNextNode[_a][1]:false;var _h=(_e>=_b)?true:false;this._createLeftLine(_a,_d);var _i;if(this._rightline_ctrl){_i=this._rightline_ctrl;_i._set_line(_d,false,true);}if(this._upline_ctrl){_i=this._upline_ctrl;_i._set_line(_d,!_h,false);}if(this._downline_ctrl&&!_h&&_g){_i=this._downline_ctrl;_i._set_line(_d,true,false);}else if(this._downline_ctrl){this._downline_ctrl.set_visible(false);}this._linetype=_d;this._treeline_visible(!this._cellobj._hideInner);};_pGridTree._getRowParentLevel=function(_a,_b){var _c;var _d=this._cellinfo;for(var _e=_b;_e>=0;_e-- ){_c=_d._getTreeLevel(_e);if(_c==_a){return _e;}else if(_c<_a){break;}}return  -9;};_pGridTree.__isNextSameLevelInSameParent=function(_a,_b){var _c=this._grid._rowcount;var _d=this._cellinfo;var _e;var _f=this._getRowParentLevel(_a,_b);if(_f>=0){var _g=this._grid._hasSameNextNode[_f];return _g[1];}else{for(var _h=_b;_h<_c;_h++ ){_e=_d._getTreeLevel(_h);if(_e<_a){break;}else if(_e==_a){return true;}}}return false;};_pGridTree._createLeftLine=function(_a,_b){var _c=this._grid;if(!_c.treeuseline){for(var _g=0,_k=this._leftline_ctrls.length;_g<_k;_g++ ){this._leftline_ctrls[_g].destroy();}this._leftline_ctrls=[];return;}var _d=this._cellinfo._getTreeLevel(_a);var _e=_d-1;var _f;var _g=0;var _h=this._leftline_ctrls;while(_c._rootlevel<_e){_f=this.__isNextSameLevelInSameParent(_e,_a);if(_f){var _i=this._getLineHeight();var _j=_h[_g];if(!_j){_j=new nexacro.GridControlLine("controlleftline",0,0,1,_i,this.parent);_j._is_subcontrol=true;_j.createComponent(true);_j.on_created();this._leftline_ctrls[_g]=_j;}else{_j.set_height(_i);}_j._set_line(_b,true,false);_j._depth=_e;_g++ ;}_e-- ;}for(;_h.length>_g;){_h[_h.length-1].destroy();_h.splice(_h.length-1,1);}};_pGridTree._toggleItem=function(_a){if(_a){if(this._btn_elem){this._btn_elem.setElementVisible(false);}if(this._rightline_ctrl){this._rightline_ctrl.set_visible(false);}if(this._upline_ctrl){this._upline_ctrl.set_visible(false);}if(this._downline_ctrl){this._downline_ctrl.set_visible(false);}if(this._chk_ctrl){this._chk_ctrl.set_visible(false);}if(this._img_elem){this._img_elem.setElementVisible(false);}if(this._text_elem){this._text_elem.setElementVisible(false);}}else{if(this._grid.treeusebutton=="use"){this._btn_elem.setElementVisible(true);}else{this._btn_elem.setElementVisible(false);}if(this._rightline_ctrl){this._rightline_ctrl.set_visible(this._grid.treeuseline);}if(this._upline_ctrl){this._upline_ctrl.set_visible(this._grid.treeuseline);}if(this._downline_ctrl){this._downline_ctrl.set_visible(this._grid.treeuseline);}if(this._chk_ctrl){this._chk_ctrl.set_visible(this._grid.treeusecheckbox);}if(this._img_elem){this._img_elem.setElementVisible(this._grid.treeuseimage);}if(this._text_elem){this._text_elem.setElementVisible(true);}}};_pGridTree.on_apply_prop_tooltip=function(){var _a=this.getElement();var _b=this._cellobj._rowidx;var _c=this._grid._getDataRow(_b);this.tooltiptext=this._cellinfo._getTooltipText(_c);if(_a){_a.setElementToolTip(this.tooltiptext);}};_pGridTree._treeline_visible=function(_a){if(_a){for(var _b=0,_c=this._leftline_ctrls.length;_b<_c;_b++ ){this._leftline_ctrls[_b]._control_element.setElementVisible(this._leftline_ctrls[_b].visible);}if(this._rightline_ctrl){this._rightline_ctrl._control_element.setElementVisible(this._rightline_ctrl.visible);}if(this._upline_ctrl){this._upline_ctrl._control_element.setElementVisible(this._upline_ctrl.visible);}if(this._downline_ctrl){this._downline_ctrl._control_element.setElementVisible(this._downline_ctrl.visible);}}else{for(var _b=0,_c=this._leftline_ctrls.length;_b<_c;_b++ ){this._leftline_ctrls[_b]._control_element.setElementVisible(false);}if(this._rightline_ctrl){this._rightline_ctrl._control_element.setElementVisible(false);}if(this._upline_ctrl){this._upline_ctrl._control_element.setElementVisible(false);}if(this._downline_ctrl){this._downline_ctrl._control_element.setElementVisible(false);}}};_pGridTree._updateAll=function(){if(!this._is_created){return;}if(this.getElement()){var _a=this._grid;var _b=_a._getDataRow(this._cellobj._rowidx);if(_b==null){this._toggleItem(true);return;}else{this._toggleItem(false);}this.on_apply_pseudo(this._cellobj._pseudo);var _c=_a._treeStates[_b];var _d=this._cellinfo._getTreeLevel(_b);this._lvl=_d;this._buttonUpdate(_c);this._lineUpdate(_b,_d);this._checkUpdate(_a._treeChecked[_b]);this._imageUpdate(_c);var _e=this.parent._getDisplayText();if(this._display_text!=_e){this._text_elem.setElementText(_e);this._display_text=_e;}this.on_apply_prop_tooltip();this._adjustSubCompAlign(_d);}};_pGridTree.on_apply_prop_rtldirection=function(){nexacro.Component.prototype.on_apply_prop_rtldirection.call(this);var _a=this._rtldirection;if(this._chk_ctrl){this._chk_ctrl._setRtlDirection(_a);}if(this._rightline_ctrl){this._rightline_ctrl._setRtlDirection(_a);}if(this._upline_ctrl){this._upline_ctrl._setRtlDirection(_a);}if(this._downline_ctrl){this._downline_ctrl._setRtlDirection(_a);}var _b=this._text_elem;if(_b){_b.setElementRtlDirection(_a);}this._updateAll();};_pGridTree._adjustSubCompAlign=function(_a){var _b=this.parent;var _c=this._cellinfo;var _d=_c.grid;var _e=this._grid._getAvailableRect(this);var _f=_e.width;var _g=_e.height;var _h=_d._getDataRow(_b._rowidx);var _i=_c._getTreeStartLevel(_h);var _j=this.getElement();var _k=9;var _l=16;var _m=_a-1;_a-=_i;if(_a<0){_a= -1;}var _n=_b._adjust_top;var _o=_b.on_find_CurrentStyle_padding();var _p=((_o)?_o.left:0);var _q=this._getLineHeight();var _r=(_a*_l)+_k;var _s=_r<0?_k:_r;var _t=_n;var _u=0;var _v=Math.round(_q/2);var _w=_v;var _x=this._leftline_ctrls;var _y=_x.length;var _z=0;for(var _aw=0;_z<_y;_aw++ ){if(_m==_x[_z]._depth){var _aa=_x[_z++ ].getElement();_aa.setElementPosition(_r-(_l*(_aw+1))+_p,_t);}if(_m-- <0){break;}}var _ab=0;var _ac=0;if(this._btn_elem){var _ad=this._btnimg_size?this._btnimg_size.width:this._btn_elem.width;if(_ad<=0){_ad=_k;}var _ae=this._btnimg_size?this._btnimg_size.height:this._btn_elem.height;if(_ae<=0){_ae=_k;}var _af=0;var _ag=_r-Math.round(_ad/2);if(_ag<0){_af=_ag;_ag=_r-Math.round(_k/2);this._btn_elem.setElementSize(_ad,_ae);}if(!this._rightline_ctrl||!this._rightline_ctrl.visible){_ag-=(Math.round(_ad/2)*_a);}var _ah=Math.round((_g-_ae)/2);if(this._btn_elem.visible){_w=Math.floor((_q-_ae)/2);_ab=_ad;_ac=_ae;_r=_ag+_ad;}else{if(this._treeuseline){_r=_s;}else{_r=_ag+_ad;}}_u=_ad+_af;this._btn_elem.setElementPosition(_ag,_ah,true);}else{_u=_k;}if(this._rightline_ctrl&&this._rightline_ctrl.visible){this._rightline_ctrl.move(_r+_p,_t,_u-(_ab/2),_v);_r=this._rightline_ctrl.left+this._rightline_ctrl.width-_p;}else{_r+=1;}if(this._upline_ctrl&&this._upline_ctrl.visible){this._upline_ctrl.move(_s+_p,_t,_u,_w);}if(this._downline_ctrl&&this._downline_ctrl.visible){var _aa=this._downline_ctrl.getElement();_t=_n+_w+_ab;var _ai=_w+_t;var _aj=_q+_n;if(_ai>_aj){_w=_aj-_t;}this._downline_ctrl.move(_s+_p,_t,_u,_w);}if(this._chk_ctrl&&this._chk_ctrl.visible){var _ak=this._chk_ctrl.width;if(_ak<=0){_ak=_k;}var _al=this._chk_ctrl.height;if(_al<=0){_al=_k;}var _am=_r;var _an=Math.round((_g-_al)/2);_r+=_ak;this._chk_ctrl.move(_am,_an,this._chk_ctrl._adjust_width,this._chk_ctrl._adjust_height);}if(this._img_elem&&this._img_elem.visible){_r+=1;var _ao=this._img_elem.width;var _ap=this._img_elem.height;if(_ao>0&&_ap>0){var _aq=_r;var _ar=Math.round((_g-_ap)/2);var _as=_aq+_ao;var _at=_ar+_ap;_r+=_ao;}else{}this._img_elem.setElementPosition(_aq,_ar,true);_r+=5;}else{_r+=4;}if(this._text_elem){var _au=_r;var _av=0;this._text_elem.setElementPosition(_au,_av,true);this._text_elem.setElementSize(_f-_r,_g);}};_pGridTree.on_change_containerRect=function(_a,_b){if(this._lvl){this._adjustSubCompAlign(this._lvl);}};delete _pGridTree;nexacro.GridRow_Style=function(_a,_b){nexacro.Style.call(this,_a,_b);this.border=new nexacro.Style_border(1);};var _pGridRowStyle=nexacro.GridRow_Style.prototype=nexacro._createPrototype(nexacro.Style,nexacro.GridRow_Style);_pGridRowStyle._type_name="GridRowStyle";nexacro.GridRow_CurrentStyle=function(){this.border=null;};var _pGridRowCurrentStyle=nexacro.GridRow_CurrentStyle.prototype=nexacro._createPrototype(nexacro.CurrentStyle,nexacro.GridRow_CurrentStyle);_pGridRowCurrentStyle._type_name="GridRowCurrentStyle";delete _pGridRowStyle;delete _pGridRowCurrentStyle;nexacro.GridRow=function(_a,_b,_c,_d,_e,_f){nexacro.Component.call(this,"gridrow_"+_f,"absolute",_b,_c,_d,_e,null,null,_a);this._is_subcontrol=true;this._grid=_a.parent;this._band=_a;this._cells=[];this._rowidx=_f;this._row_sizes=[];this._row_tops=[];this._row_bottoms=[];this._format_rows=[];this._format_cols=[];this._format_cells=[];this._noupdate_remain_cells=[];this._accessibility_role="none";this._fixed=false;};var _pGridRow=nexacro._createPrototype(nexacro.Component,nexacro.GridRow);nexacro.GridRow.prototype=_pGridRow;nexacro._setForControlStyleFinder(_pGridRow);_pGridRow._type_name="GridRow";_pGridRow.on_create_custom_style=function(){return new nexacro.GridRow_Style(this);};_pGridRow.on_create_custom_currentStyle=function(){return new nexacro.GridRow_CurrentStyle();};_pGridRow.on_find_CurrentStyle_cursor=function(_a){var _b=this._grid;if(_b._global_cursor){return _b._global_cursor;}return this.parent.on_find_CurrentStyle_cursor(_a);};_pGridRow.on_find_CurrentStyle_border=function(_a){return null;};_pGridRow.on_find_CurrentStyle_padding=function(_a){return null;};_pGridRow._makeCssRefInfo=function(){return (this._grid._makeCssRefInfoCtrl(this));};_pGridRow.on_create_contents=function(){this._init(this._grid._curFormat);if(this._grid._async_create){this._createCellComponents_async();}else{this._createCellComponents();}};_pGridRow.on_created_contents=function(){this._control_element.setElementHScrollPos(this._grid.getElement().scroll_left);if(this._grid._async_create){this._createCellElements_async();}else{this._createCellElements();}this._control_element._setContainerMaxWidth(this._grid._bodyBand._scrollWidth);this.on_apply_prop_rtldirection();};_pGridRow.on_destroy_contents=function(){var _a=this._cells,_b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].destroy();}this._grid=this._cells=this._format=this._band=this._cells=this._row_sizes=this._row_tops=this._row_bottoms=this._format_rows=this._format_cols=this._format_cells=this._noupdate_remain_cells=null;};_pGridRow.on_create_control_element=function(_a){var _b=new nexacro.GridRowControlElement(_a);var _c=this._grid._curFormat;_b.setLinkedControl(this);_b._left_width=_c.leftWidth;_b._right_width=_c.rightWidth;this._control_element=_b;return _b;};_pGridRow.on_apply_custom_setfocus=function(_a,_b){if(_b){nexacro.Component.prototype.on_apply_custom_setfocus.call(this,_a);}};_pGridRow._getAccessibilityLabel=function(_a){var _b="";var _c=this._grid;if(this._grid._isSelectRowType()){var _d="";var _e=this._cells;var _f=null;for(var _g=0,_h=_e.length;_g<_h;_g++ ){_f=_e[_g].currentstyle.accessibility;if(_f){_d=_e[_g]._getAccessibilityLabel(_f,true);if(_b){if(_d){_b+=" "+_d;}}else{_b=_d;}}}}return _b;};_pGridRow.on_apply_prop_rtldirection=function(){nexacro.Component.prototype.on_apply_prop_rtldirection.call(this);var _a=this.getElement();if(_a){var _b=this._cells;var _c=this._rtldirection;if(_b){var _d;for(var _e=0,_f=_b.length;_e<_f;_e++ ){_b[_e]._setRtlDirection(_c);}}}};_pGridRow._init=function(_a){var _b=this._grid,_c=this._control_element;_c.setArea(_a.leftWidth,_a.rightWidth);if(this._rowidx== -1){this._format_rows=_a._headrows;this._format_cells=_a._headcells;}else if(this._rowidx== -2){this._format_rows=_a._summrows;this._format_cells=_a._summcells;}else{this._format_rows=_a._bodyrows;this._format_cells=_a._bodycells;}this._format_cols=_a._cols;if(!this._format_cols){this._format_cols=[];}if(!this._format_rows){this._format_rows=[];}if(!this._format_cells){this._format_cells=[];}var _d,_e=0;if(this._rowidx== -1){_d=_b._rowHeadListSub;}else if(this._rowidx== -2){_d=_b._rowSummListSub;}else{_e=_b._getDataRow(this._rowidx);_d=_b._rowSizeListSub;}var _f=this._format_rows,_g=_f.length,_h=0,_i=0;this._row_tops=[];this._row_sizes=[];this._row_bottoms=[];if(_e>=0){var _j=_e*_g;for(var _k=0;_k<_g;_k++ ){this._row_tops.push(_i);_h=_d[_j+_k];this._row_sizes.push(_h);_i+=_h;this._row_bottoms.push(_i);}}else{for(var _k=0;_k<_g;_k++ ){this._row_tops.push(_i);_h=_f[_k].size;this._row_sizes.push(_h);_i+=_h;this._row_bottoms.push(_i);}}};_pGridRow._on_last_lbuttonup=function(){this.parent._on_last_lbuttonup();};_pGridRow._on_last_keyup=function(){this.parent._on_last_keyup();};_pGridRow._updateAll=function(_a,_b,_c,_d,_e){var _f=this._grid,_g=this._cells;if(_b){_g=this._noupdate_remain_cells;}var _h=_g.length,_i=_f._getDataRow(this._rowidx),_j,_k,_l,_m,_n,_o;this._noupdate_remain_cells=[];this.on_apply_pseudo(_a);for(var _p=0;_p<_h;_p++ ){_l=_g[_p];_m=_l._refobj;if(_e){if((_m._col+_m._colspan-1)<_e){continue;}}if(_l._refobj._area!="body"||(_l._is_created&&_l._isUpdateArea())){if(_f._isSelectRowType()){if(_n==undefined){_n=_f._isSelectedCell(_l._cellidx,_i);}}else{_n=_f._isSelectedCell(_l._cellidx,_i);}_o=false;if(_l.selected!=_n){_l.selected=_n;_c=false;_o=true;}_j=_l.subcells;_k=_j.length;for(var _q=0;_q<_k;_q++ ){_j[_q].selected=_n;}if(_d){if(_o){_l._updateAll(_a,_c);}}else{_l._updateAll(_a,_c);}}else{this._noupdate_remain_cells.push(_l);}}};_pGridRow._getAreaRect=function(_a){var _b={left:0,top:0,width:0,height:0},_c=this._grid._curFormat;_b.top=this._client_top;_b.height=this._client_height;if(_a=="left"){_b.left=this._client_left;_b.width=_c.leftWidth;}else if(_a=="right"){_b.left=this._client_width-_c.rightWidth;_b.width=_c.rightWidth;}else{_b.left=_c.leftWidth;_b.width=this._client_width-_c.leftWidth-_c.rightWidth;}return _b;};_pGridRow._changeRow=function(_a,_b){this._rowidx=_a;if(_b){this._init(this._grid._curFormat);}};_pGridRow._hideArea=function(){if(this._fixed){return "";}var _a=this._band;var _b=this._grid;var _c=_b._getScrollTop();var _d=this._adjust_top;var _e=this._adjust_height;var _f=_d+_e;_d-=_c;_f-=_c;var _g=_b._getAvailableRect(_a);var _h=_a.currentstyle.border;_f-=_h?_h._top_width:0;_f-=_h?_h._bottom_width:0;if(_f<=0){return "top";}else if(_d>=_g.bottom){return "bottom";}return "";};_pGridRow._showfull=function(_a){if(!this._fixed){var _b=this._band;var _c=this._grid;var _d=_c._getScrollTop();var _e=this._adjust_top;var _f=this._adjust_height;var _g=_e+_f;_e-=_d;_g-=_d;var _h=_c.vscrollbar;var _i=_c._getAvailableRect(_b);var _j=_b.currentstyle.border;_g-=_j?_j._top_width:0;_g-=_j?_j._bottom_width:0;if(_h){if(_f<_i.height){if(_e<0){if(_h._isEnable()){_h._set_rowpos(_c._toprowpos[0]);}}else if(_g>_i.bottom){if(_h._isEnable()){_h._set_rowpos(_c._toprowpos[0]+1);}}}}}if(_a&&_a._is_alive){_a._showfull(false);}};_pGridRow._createCellElements_async=function(){nexacro.OnceCallbackTimer.callonce(this,function(){this._createCellElements();});};_pGridRow._createCellElements=function(_a){var _b=this._cells;var _c=_b.length;if(_c==0){return;}var _d=this._grid,_e,_f,_g=false,_h=_d._getDataRow(this._rowidx),_i,_j,_k;if(this._rowidx<0||_d._is_created==true){_g=true;}for(var _l=0;_l<_c;_l++ ){_k=_b[_l]._refobj;if(_a){if((_k._col+_k._colspan-1)<_a){continue;}}if(_k._area=="body"){if(_d._isSelectRowType()){if(_i==undefined){_i=_d._isSelectedCell(_b[_l]._cellidx,_h);}}else{_i=_d._isSelectedCell(_b[_l]._cellidx,_h);}_j=_b[_l]._control_element;if(_b[_l]._isUpdateArea()){if(_b[_l]._is_created){if(_b[_l]._refresh_display==true){if(_g){_b[_l].selected=_i;_b[_l]._updateAll();}_j._setDisplay(true);_b[_l]._refresh_display=false;}}else{if(_g){_b[_l].selected=_i;_b[_l]._updateAll();}_b[_l].on_created();_e=_b[_l].subcells;_f=_e.length;for(var _m=0;_m<_f;_m++ ){if(_g){_e[_m]._updateAll();}_e[_m].on_created();}}}else{if(_b[_l]._is_created){if(_b[_l]._refresh_display==false){_b[_l]._refresh_display=true;_j._setDisplay(false);}}}}else{if(_b[_l]._is_created){continue;}if(_g){_b[_l]._updateAll();}_b[_l].on_created();_e=_b[_l].subcells;_f=_e.length;for(var _m=0;_m<_f;_m++ ){if(_g){_e[_m]._updateAll();}_e[_m].on_created();}}}};_pGridRow._createCellComponents_async=function(){nexacro.OnceCallbackTimer.callonce(this,function(){this._createCellComponents();});};_pGridRow._createCellComponents=function(){var _a=this._format_cols,_b=this._format_rows,_c=this._format_cells,_d=this._row_tops,_e=this._row_sizes,_f=this._row_bottoms,_g=(_c)?_c.length:0,_h,_i=0,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w=this._grid,_x=_w._getDataRow(this._rowidx);for(var _y=0;_y<_g;_y++ ){_h=_c[_y];_j=_a[_h._col].left;_i=_d[_h._row];_k=_a[_h._col+_h._colspan-1].right-_j;_l=_f[_h._row+_h._rowspan-1]-_i;if(_w._isSelectRowType()){if(_u==undefined){_u=_w._isSelectedCell(_h._cellidx,_x);}}else{_u=_w._isSelectedCell(_h._cellidx,_x);}_n="cell_"+this._rowidx+"_"+_h._cellidx;_m=new nexacro.GridCell(_n,_j,_i,_k,_l,this,_h,this._rowidx,_h._cellidx);_m.selected=_u;_m.createComponent(true);this._cells[_y]=_m;_o=_h._subcells;_p=_o.length;for(var _z=0;_z<_p;_z++ ){_v=_o[_z];_r=_h._col+_v._col;_s=_h._row+_v._row;_j=_a[_r].left;_i=_d[_s];_k=_a[_r+_v._colspan-1].right-_j;_l=_f[_s+_v._rowspan-1]-_i;_j-=_a[_h._col].left;_i-=_d[_h._row];_n="subcell_"+this._rowidx+"_"+_h._cellidx+"_"+_v._cellidx;_t=new nexacro.GridCell(_n,_j,_i,_k,_l,_m,_v,this._rowidx,_v._cellidx);_t._isSubCell=true;_t.selected=_u;_t.parentcell=_m;_t.createComponent(true);_m.subcells[_z]=_t;}}};_pGridRow._resetCellsSize=function(_a,_b){var _c=this._format_cols,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q;this._control_element.setArea(_a.leftWidth,_a.rightWidth);_d=this._cells;_e=_d.length;var _r=this._row_tops,_s=this._row_sizes,_t=this._row_bottoms;for(var _u=0;_u<_e;_u++ ){_f=_d[_u];_g=_f._refobj;if(_b){if((_g._col+_g._colspan-1)<_b){continue;}}if(!_c[_g._col]){continue;}_l=Math.floor(_c[_g._col].left);_n=_r[_g._row];_m=Math.floor(_c[_g._col+_g._colspan-1].right-_l);_o=_t[_g._row+_g._rowspan-1]-_n;_f.move(_l,_n,_m,_o);expand_ctrl=_f._expandCtrl;if(expand_ctrl){_l=_m-_f._expand_width;_n=expand_ctrl.top;_m=_f._expand_width;_o=expand_ctrl.height;expand_ctrl.move(_l,_n,_m,_o);}_h=_f.subcells;_i=_h.length;for(var _v=0;_v<_i;_v++ ){_j=_h[_v];_k=_j._refobj;_p=_g._col+_k._col;_q=_g._row+_k._row;_l=Math.floor(_c[_p].left);_n=_r[_q];_m=Math.floor(_c[_p+_k._colspan-1].right-_l);_o=_t[_q+_k._rowspan-1]-_n;_l-=Math.ceil(_c[_g._col].left);_n-=_r[_g._row];_j.move(_l,_n,_m,_o);expand_ctrl=_j._expandCtrl;if(expand_ctrl){_l=_m-_f._expand_width;_n=expand_ctrl.top;_m=_f._expand_width;_o=expand_ctrl.height;expand_ctrl.move(_l,_n,_m,_o);}}}};_pGridRow._isEnable=function(){if(this._grid){return this._grid._enable;}return true;};_pGridRow._get_cells=function(){return this._cells;};delete _pGridRow;nexacro.GridMatrixManager=function(_a,_b){this._width=0;this._height=0;this._grid=_a;this._isBody=_b._isBody;this._rows=[];this._band=_b;this._fixed_rows=[];};var _pGridMatrixManager=nexacro._createPrototype(nexacro.Object,nexacro.GridMatrixManager);nexacro.GridMatrixManager.prototype=_pGridMatrixManager;_pGridMatrixManager._type_name="GridMatrixManager";_pGridMatrixManager.destroy=function(){this._deleteAllRow();this._grid=this._band=this._rows=this._fixed_rows=null;};_pGridMatrixManager._init=function(){this._deleteAllRow();};_pGridMatrixManager._async_create_page=function(){return;};_pGridMatrixManager._getBodyRowTopPos=function(_a){if(_a<0){return 0;}var _b=this._grid,_c=0;if(_b._fixed_endrow>=0&&_a>=_b._fixed_startrow&&_a<=_b._fixed_endrow){if(_b._is_variable_bodyrowsize==false){_c=_b._bodyrowheight*(_a-_b._fixed_startrow);}else{var _d=_b._fixed_rowcnt;for(var _e=0;_e<_d;_e++ ){if(_b._fixed_startrow+_e==_a){break;}_c+=_b._getRowSize(_b._fixed_startrow+_e);}}}else{if(_b._is_variable_bodyrowsize==false){_c=_b._bodyrowheight*_a;}else{var _d=_b._getGridRowCount();for(var _e=0;_e<_d;_e++ ){if(_e==_a){break;}_c+=_b._getRowSize(_e);}}_c-=_b._fixedrow_height;}return _c;};_pGridMatrixManager._getAllRows=function(){var _a;if(this._isBody&&this._fixed_rows.length){_a=[];_a=_a.concat(this._fixed_rows);_a=_a.concat(this._rows);}else{_a=this._rows;}return _a;};_pGridMatrixManager._getPhysicalRow=function(_a,_b){var _c=_a.length;for(var _d=0;_d<_c;_d++ ){if(_a[_d]._rowidx==_b){return _d;}}return null;};_pGridMatrixManager._adjustTreeDisplay=function(_a,_b){var _c=[],_d=this._grid,_e=this._band,_f=this._rows,_g=_f.length,_h=0,_i=this._getPhysicalRow(this._rows,_a),_j=_f[_i],_k=false;if(!_j){_j=_f[0];_i=0;}if(_j){if(_b){for(var _n=_g-1;_n>=_i;_n-- ){if(_j._rowidx<_f[_n]._rowidx){this._subtractRow();_k=true;}else{_c[0]=_f[_n];}}}else{for(var _n=_i;_n<_g;_n++ ){if(_i==_n){_c[0]=_f[_n];}else{this._subtractRow();_k=true;}}}}if(_k){_d._setHscrollElement();_d._absolutelyResetScrollPos(true);_d._control_element.setElementHScrollPos(_d._scroll_left);_d._absolutelyResetScrollPos(false);}var _l=this._adjustRowsDisplay();_g=_f.length;_e._update_rows=_c;if(_g){_h=_f[0]._rowidx;}for(var _n=0;_n<_g;_n++ ){_f[_n]._rowidx=_h+_n;}_e._on_refresh_rows();var _m=_d._resetColSizeList();if(_m||_l){this._adjustColsDisplay(true);}else{_d._resetScrollMax();}return _m;};_pGridMatrixManager._adjustRowsDisplay=function(_a,_b){var _c=this._grid,_d=false,_e=false,_f=this._rows,_g=_f.length,_h;if(_a){var _i,_j,_k,_l,_m,_n=_c._getGridRowCount();for(var _ab=0;_ab<_f.length;_ab++ ){_i=_f[_ab];if(_i._rowidx>=_n){_i.destroy();_f[_ab]=null;_f.splice(_ab,1);_ab-- ;_e=true;}else{_j=_i._adjust_left;_k=this._getBodyRowTopPos(_i._rowidx);_l=this._band._client_width;_m=_c._getRowSize(_i._rowidx);_f[_ab].move(_j,_k,_l,_m);}}_g=_f.length;var _o=this._fixed_rows;for(_ab=0,n=_o.length;_ab<n;_ab++ ){_i=_o[_ab];_j=_i._adjust_left;_k=this._getBodyRowTopPos(_i._rowidx);_l=this._band._client_width;_m=_c._getRowSize(_i._rowidx);_o[_ab].move(_j,_k,_l,_m);}}if(this._isBody){if(_c._fixed_endrow>=0&&this._fixed_rows.length==0){var _p=_c._fixed_startrow;var _q=_c._fixed_endrow;var _r=0,_s;for(var _ab=_p;_ab<=_q;_ab++ ){_s=_c._getRowSize(_ab);if(_s<0){break;}this._addRow(_r,_s,_ab,false,true);_r+=_s;}}_c._resetDisplayInfo(_a);var _t=0;if(_c._disprowcnt>0){_h=(_c._disprowcnt%2)?1:2;_t=_c._disprowcnt+_h;}var _u=_c._getGridRowCount();var _v=_c._is_variable_bodyrowsize;if(_t<0){_t=0;}if(_u<_g){for(var _ab=_g-1;_ab>=_u;_ab-- ){this._subtractRow();_e=true;}_g=_f.length;}if(_t<_g){for(var _ab=_g-1;_ab>=_t;_ab-- ){if(!_v){this._subtractRow();_e=true;}}}else if(_t>_g){var _s=0,_r=0,_w=0,_x=_u-1;if(_g>0){_w=_f[0]._rowidx;}else{_w=_c._toprowpos[0];}var _y=_w;var _z,_aa=false;for(var _ab=_g;_ab<_t;_ab++ ){if(_u<=_ab){break;}_z=_w+_ab;if(_x<_z){_z= --_y;_aa=true;}_r=this._getBodyRowTopPos(_z);_s=_c._getRowSize(_z);if(_z<=_x&&_z>=_c._getFixRowCnt()&&_s>0){this._addRow(_r,_s,_z,_b);_d=true;}}if(_aa&&_d){_f.sort(function(_ac,_ad){return _ac._rowidx-_ad._rowidx;});}}_g=_f.length;if(_c.fillareatype!="none"&&_t>_g){var _r=0,_s=this._band._datarowsheight;if(_g){_r=_f[_g-1]._getPosBottom();}for(var _ab=_g;_ab<_t;_ab++ ){this._addRow(_r,_s,_ab,_b);_r+=_s;_d=true;}}if(_f.length>0){_c._begrowpos=_f[0]._rowidx;_c._endrowpos=_f[_f.length-1]._rowidx;}else{_c._begrowpos=0;_c._endrowpos=0;}}else{if(_g==0){var _s;if(this._band.id=="head"){_s=_c._getRowSize( -1);this._addRow(0,_s, -1);_d=true;}else if(this._band.id=="summ"){_s=_c._getRowSize( -2);this._addRow(0,_s, -2);_d=true;}}}if(_d||_e||_f.length==0){_c._setHscrollElement();_c._absolutelyResetScrollPos(true);_c._control_element.setElementHScrollPos(_c._scroll_left);_c._absolutelyResetScrollPos(false);}return _d;};_pGridMatrixManager._adjustColsDisplay=function(_a,_b,_c){if(!_b){this._grid._resetScrollMax();}var _d=this._getAllRows(),_e=_d.length;if(_a){var _f=this._grid._curFormat;for(var _g=0;_g<_e;_g++ ){_d[_g]._init(_f);_d[_g]._resetCellsSize(_f,_c);if(!_b){_d[_g]._updateAll(null,true,undefined,undefined,_c);}_d[_g]._createCellElements(_c);}}else{for(var _g=0;_g<_e;_g++ ){if(!_b){_d[_g]._updateAll(null,true,undefined,undefined,_c);}_d[_g]._createCellElements(_c);}}};_pGridMatrixManager._addRow=function(_a,_b,_c,_d,_e){var _f=this._grid._getAvailableRect(this._band),_g=new nexacro.GridRow(this._band,_f.left,_a,_f.width,_b,_c);_g._fixed=!!_e;_g.createComponent();_g._setRtlDirection(this._band._rtldirection);if(!_d){this._band._create_rows.push(_g);}if(_e){this._fixed_rows.push(_g);}else{this._rows.push(_g);}};_pGridMatrixManager._subtractRow=function(){if(this._rows.length>0){var _a=this._rows.length-1,_b=this._rows[_a],_c=this._band._create_rows,_d=_c.length;for(var _e=0;_e<_d;_e++ ){if(_c[_e]==_b){_c.splice(_e,1);break;}}_b.destroy();this._rows.splice(_a,1);}};_pGridMatrixManager._deleteAllRow=function(){var _a=this._rows;for(var _c=0,_d=_a.length;_c<_d;_c++ ){_a[_c].destroy();}var _b=this._fixed_rows;for(var _c=0,_d=_b.length;_c<_d;_c++ ){_b[_c].destroy();}this._rows=[];this._fixed_rows=[];this._grid._setHscrollElement();this._grid._is_over_scroll=0;};_pGridMatrixManager._isShowScreenRow=function(_a,_b,_c){if(_a._rowidx<0){return true;}var _d=_b,_e=_d+_c;if(_d<_a._getPosBottom()&&_e>_a._adjust_top){return true;}return false;};_pGridMatrixManager._adjustScrollRows=function(_a,_b){var _c=this._grid,_d=_c._getGridRowCount(),_e=this._rows,_f,_g,_h=_c._getFixRowCnt(),_i=_d-1,_j=_c._getBodyClientSize()[1],_k=[],_l,_m,_n,_o,_p,_q,_r=this._band,_s=_c._is_variable_bodyrowsize,_t=0,_u=0,_v=_c._last_scroll_top;if(_a>_v){_u=1;}else if(_a<_v){_u= -1;}if(_u>0){_g=_e[_e.length-1];for(var _x=0,_y=_e.length;_x<_y;_x++ ){if(this._isShowScreenRow(_e[_x],_a,_r._client_height)==true){break;}_k.push(_e[_x]);}_t=_k.length;var _w=null;if(_t>0){if(_e.length==_t){target_rowidx=_c._toprowpos[0];if(target_rowidx%2!=_k[0]._rowidx%2){_k.push(_k.shift());_e.push(_e.shift());}for(var _x=0;_x<_t;_x++ ){_l=_k[_x];_m=target_rowidx++ ;if(_m>=_c.rowcount){if(_w==null){_w=_c._toprowpos[0]-1;}_m=_w-- ;if(_m<0){break;}}_l._changeRow(_m,_s);_n=_l._adjust_left;_o=_l._adjust_width;_p=_c._getRowSize(_m);_q=this._getBodyRowTopPos(_m);_l.move(_n,_q,_o,_p);if(_s){_l._resetCellsSize(_c._curFormat);}}}else{target_rowidx=_g._rowidx+1;for(var _x=0;_x<_t;_x++ ){_l=_k[_x];_m=target_rowidx++ ;if(!_s&&_m>_i){break;}_l._changeRow(_m,_s);_n=_l._adjust_left;_o=_l._adjust_width;_p=_c._getRowSize(_m);_q=this._getBodyRowTopPos(_m);_l.move(_n,_q,_o,_p);if(_s){_l._resetCellsSize(_c._curFormat);}}_e.sort(function(_z,_aa){return _z._rowidx-_aa._rowidx;});}if(_e.length>0){if(_w!=null){_e.sort(function(_z,_aa){return _z._rowidx-_aa._rowidx;});}_c._begrowpos=_e[0]._rowidx;_c._endrowpos=_e[_e.length-1]._rowidx;}}if(_s){this._adjustRowsDisplay(false,true);}}else if(_u<0){if(_s){this._adjustRowsDisplay(false,true);}_f=_e[0];for(var _x=_e.length-1;_x>=0;_x-- ){if(this._isShowScreenRow(_e[_x],_a,_r._client_height)==true){break;}_k.push(_e[_x]);}_t=_k.length;if(_t>0){if(_e.length==_t){target_rowidx=_c._toprowpos[0];if(target_rowidx%2!=_k[_t-1]._rowidx%2){_k.push(_k.shift());_e.unshift(_e.pop());}for(var _x=_t-1;_x>=0;_x-- ){_l=_k[_x];_m=target_rowidx++ ;_l._changeRow(_m,_s);_n=_l._adjust_left;_o=_l._adjust_width;_p=_c._getRowSize(_m);_q=this._getBodyRowTopPos(_m);_l.move(_n,_q,_o,_p);if(_s){_l._resetCellsSize(_c._curFormat);}}}else{target_rowidx=_f._rowidx-1;for(var _x=0;_x<_t;_x++ ){_l=_k[_x];_m=target_rowidx-- ;if(_m<_h){break;}_l._changeRow(_m,_s);_n=_l._adjust_left;_o=_l._adjust_width;_p=_c._getRowSize(_m);_q=this._getBodyRowTopPos(_m);_l.move(_n,_q,_o,_p);if(_s){_l._resetCellsSize(_c._curFormat);}}_e.sort(function(_z,_aa){return _z._rowidx-_aa._rowidx;});}if(_e.length>0){_c._begrowpos=_e[0]._rowidx;_c._endrowpos=_e[_e.length-1]._rowidx;}}}else{if(_b){var _w=null;_c._toprowpos=_c._getScreenTopRowPos();_c._bottomrowpos=_c._getScreenBottomRowPos();target_rowidx=_c._toprowpos[0];_t=_e.length;_k=_e;for(var _x=0;_x<_t;_x++ ){_l=_k[_x];_m=target_rowidx++ ;if(_m>=_c.rowcount){if(_w==null){_w=_c._toprowpos[0]-1;}_m=_w-- ;if(_m<0){break;}}_l._changeRow(_m,_s);_n=_l._adjust_left;_o=_l._adjust_width;_p=_c._getRowSize(_m);_q=this._getBodyRowTopPos(_m);if(_p<0){continue;}_l.move(_n,_q,_o,_p);if(_s){_l._resetCellsSize(_c._curFormat);}}if(_e.length>0){if(_w!=null){_e.sort(function(_z,_aa){return _z._rowidx-_aa._rowidx;});}_c._begrowpos=_e[0]._rowidx;_c._endrowpos=_e[_e.length-1]._rowidx;}}}return _k;};delete _pGridMatrixManager;nexacro.GridBand=function(_a,_b,_c,_d,_e,_f,_g){nexacro.Component.call(this,_a,"absolute",_b,_c,_d,_e,null,null,_f);this._is_subcontrol=true;this._isBody=(_a=="body");this._refobj=_g;this._grid=_f;this._rowsizesperdatarow=null;this._datarowsheight= -1;this._colinfos=null;this._rowinfos=null;this._cellsinfo=null;this._update_rows=[];this._create_rows=[];this._text_elem=null;if(_g){_g.bandctrl=this;_g._changeStyleTarget(this);this.style=_g.style;this._styles=_g._styles;}else{this.style=new nexacro.GridBand_Style(this);}this._matrix=new nexacro.GridMatrixManager(this._grid,this);this._scrollWidth=0;this._scrollHeight=0;this._recreating=false;this._accessibility_role="none";};var _pGridBand=nexacro._createPrototype(nexacro.Component,nexacro.GridBand);nexacro.GridBand.prototype=_pGridBand;nexacro._setForControlStyleFinder(_pGridBand);_pGridBand._type_name="GridBand";nexacro.GridBand._default_accessibility=nexacro._getCachedStyleObj("accessibility","none disable all '' '' ''");_pGridBand.on_create_custom_style=function(){return null;};_pGridBand.on_create_custom_currentStyle=function(){return new nexacro.GridBand_CurrentStyle();};_pGridBand.on_update_style_opacity=function(){};_pGridBand.on_update_style_shadow=function(){};_pGridBand.on_update_style_cursor=function(){};_pGridBand.on_update_style_color=function(){};_pGridBand.on_update_style_align=function(){};_pGridBand.on_update_style_margin=function(){};_pGridBand.on_update_style_glow=function(){};_pGridBand.on_update_style_blur=function(){};_pGridBand.on_update_style_selectborder=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);this._grid._setSelectBorder();};_pGridBand.on_update_style_cellline=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_celllinetype=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_selectcolor=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_selectline=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_selectlinetype=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_border=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_cellbackground=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_cellbackground2=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_cellcolor=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_cellcolor2=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_selectbackground=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_background=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_cellfont=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_cellletterspace=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_selectfont=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_font=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_cellgradation=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_cellgradation2=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_selectgradation=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_gradation=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_cellalign=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_cellpadding=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._refresh_contents(true);};_pGridBand.on_update_style_padding=function(){this._grid._curFormat._clearCellStyleCache(this.id);this._updateClientSize(this.getElement());};_pGridBand.on_find_CurrentStyle_background=function(_a){if(!_a){_a="normal";}var _b=null;if(this._refobj){_b=this._refobj._query_pseudo_background(_a);}var _c=this._grid._getGridRowCount();if(this._isBody&&_c==0){var _d=this.parent.nodataimage;if(_d.length){var _e="transparent";if(_b){_e=_b.color;}_b=nexacro._getCachedStyleObj("background",_e+" "+_d+" center middle");}}return _b;};_pGridBand.on_find_CurrentStyle_gradation=function(_a){if(this._refobj){return this._refobj._query_pseudo_gradation(_a);}return null;};_pGridBand.on_find_CurrentStyle_padding=function(_a){return null;};_pGridBand.on_find_CurrentStyle_font=function(_a){return null;};_pGridBand.on_find_CurrentStyle_cursor=function(_a){var _b=this._grid;if(_b._global_cursor){return _b._global_cursor;}return null;};_pGridBand.on_find_CurrentStyle_shadow=function(_a){return null;};_pGridBand.on_find_CurrentStyle_opacity=function(_a){return null;};_pGridBand.on_find_CurrentStyle_align=function(_a){return null;};_pGridBand.on_find_CurrentStyle_color=function(_a){return null;};_pGridBand.on_find_CurrentStyle_accessibility=function(_a){var _b=this._find_pseudo_obj("accessibility",_a,"accessibility");if(nexacro._accessibilitytype==5&&this._grid.nodatatext){return nexacro.Component._default_accessibility;}else if(nexacro._accessibilitytype==4){return nexacro.GridBand._default_accessibility;}else{return _b?_b:nexacro.GridBand._default_accessibility;}};_pGridBand._find_pseudo_obj=function(_a,_b,_c,_d){var _e;var _f=this.id;if(_d){_f=_d;}if(_f=="summ"||_f=="summary"){_e=this._grid._find_bandcomp_pseudo_obj("summ",_a,_b,_c);if(!_e){_e=this._grid._find_bandcomp_pseudo_obj("head",_a,_b,_c);}}else if(_f=="head"){_e=this._grid._find_bandcomp_pseudo_obj("head",_a,_b,_c);}else{_e=this._grid._find_bandcomp_pseudo_obj("body",_a,_b,_c);}return _e;};_pGridBand.on_find_CurrentStyle_rtlimagemirroring=function(_a){return;};_pGridBand.on_find_CurrentStyle_selectborder=function(_a){return this._find_pseudo_obj("selectborder",_a,"border");};_pGridBand.on_create_contents=function(){var _a=this.getElement();var _b=this._grid._curFormat;if(_a&&_b){this._recreate_contents();if(this._isBody){var _c=this.currentstyle;var _d=this._text_elem=new nexacro.TextBoxElement(_a);_d.setElementSize(this._client_width,this._client_height);_d.setElementVisible(false);_d.setElementAlignXY("center","middle");_d.setElementFont(_c.font);_d.setElementLetterSpace(_c.letterspace);_d.setElementColor(_c.color);_d.setElementWordWrap("char");if(this._get_rows().length==0){var _e=this.parent.nodatatext;_d.setElementText(_e);}}}};_pGridBand.on_created_contents=function(){var _a=this.getElement();var _b=this._grid._curFormat;if(_a&&_b){var _c=this._text_elem;if(_c){_c.create();}this._on_refresh_rows();var _d=this._grid;var _e=_d._getScrollLeft();var _f=_d._getScrollTop();if(_e>0){this._matrix._adjustColsDisplay();_d._absolutelyResetScrollPos(true);_d._control_element.setElementHScrollPos(_e);_d._absolutelyResetScrollPos(false);}if(_f>0){_d._absolutelyResetScrollPos(true);_d._control_element.setElementVScrollPos(_f);_d._absolutelyResetScrollPos(false);}if(nexacro._enableaccessibility&&!_d._accept_focus){var _g=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_g&&_g.enable){_d._accept_focus=true;}}}};_pGridBand._delete_style=function(){this.style=null;this._styles=null;};_pGridBand.on_destroy_contents=function(){if(this._text_elem){this._text_elem.destroy();this._text_elem=null;}if(this._refobj){this._refobj.bandctrl=null;this._refobj=null;}this._rows=null;this._grid=null;this._matrix.destroy();this._matrix=null;this._colinfos=null;this._rowinfos=null;this._cellsinfo=null;this._update_rows=null;this._create_rows=null;this._rowsizesperdatarow=null;};_pGridBand.on_change_containerRect=function(_a,_b){if(this._recreating){return;}if(this._text_elem){var _c=this._grid._getAvailableRect(this);this._text_elem.setElementPosition(_c.left,_c.top);this._text_elem.setElementSize(_c.width,_c.height);}var _d=this._grid;if(_d._no_update_bandrect){return;}if(_d._is_changingRect){if(_d._colautofit){_d._applyAutofittype(true);if(_d.autosizingtype=="row"||_d.autosizingtype=="both"){if(_d._is_body_wordwrap||_d._is_head_wordwrap||_d._is_summ_wordwrap){_d._resetRowSizeList();_d._resetColSizeList();}}}}var _e=this._isRtl();if(this._isBody){var _f=_d._getScrollTop();if(_f<0){_f=0;}_d._last_scroll_top=_f;_d._toprowpos=_d._getScreenTopRowPos(_f);_d._bottomrowpos=_d._getScreenBottomRowPos(_f);if(_d._needUpdateExtinner()){_d._recreate_contents_all(false,false,false,true);}else{this._matrix._adjustRowsDisplay(true);this._matrix._adjustColsDisplay(_e);this._update_rows=this._matrix._adjustScrollRows(_f,true);}}else{this._matrix._adjustRowsDisplay(true);this._matrix._adjustColsDisplay(_e);}this._on_refresh_rows();_d._setSelectBorder();};_pGridBand.on_create_control_element=function(_a){var _b=new nexacro.GridBandControlElement(_a,this.id);_b.setLinkedControl(this);this._control_element=_b;return _b;};_pGridBand.on_apply_custom_setfocus=function(_a,_b){if(_b||nexacro._enableaccessibility){nexacro.Component.prototype.on_apply_custom_setfocus.call(this,_a);}if(nexacro._enableaccessibility){this._grid._currentBand=this.id;if(this.id=="head"){this._grid._currentDSrow= -1;}else if(this.id=="summ"){this._grid._currentDSrow= -2;}else{this._grid._currentDSrow=0;}}};_pGridBand.on_get_style_accessibility_label=function(){return this.id;};_pGridBand._setAccessibilityStatFocus=function(_a){var _b=this.on_find_CurrentStyle_accessibility(this._pseudo);var _c=this._getAccessibilityLabel(_b);if(this._isBody&&this._grid.rowcount<=0){_c+=(this._grid.nodatatext)?this._grid.nodatatext:"";this._setAccessibilityLabel(_c);}nexacro.Component.prototype._setAccessibilityStatFocus.call(this,_a);};_pGridBand._setAccessibilityNotifyEvent=function(_a){if(this._isBody&&this._grid.rowcount<=0&&this._grid.nodatatext){var _b=this._grid.nodatatext;this._setAccessibilityLabel(_b);return nexacro.Component.prototype._setAccessibilityNotifyEvent.call(this,_a);}};_pGridBand.on_apply_prop_class=function(){var _a=this._grid._curFormat;if(_a){_a._clearCellStyleCache(this.id);}nexacro.Component.prototype.on_apply_prop_class.call(this);this._refresh_contents(true);};_pGridBand.on_apply_wordwrap=function(){this._refresh_contents();};_pGridBand.on_apply_prop_tooltip=function(){var _a=this.getElement();this.tooltiptext=this._refobj._getTooltipText();if(_a){if(this.tooltiptext!=""){_a.setElementToolTip(this.tooltiptext);}}};_pGridBand.on_apply_text=function(){if(this._text_elem){if(this._isBody&&this._get_rows().length==0){var _a=this.parent.nodatatext;var _b=this.parent.on_find_CurrentStyle_font();var _c=this.parent.on_find_CurrentStyle_color();var _d=this.parent.on_find_CurrentStyle_letterspace();this._text_elem.setElementVisible(_a?true:false);this._text_elem.setElementText(_a);this._text_elem.setElementFont(_b);this._text_elem.setElementLetterSpace(_d);this._text_elem.setElementColor(_c);}else{this._text_elem.setElementVisible(false);}}};_pGridBand.on_apply_prop_rtldirection=function(){nexacro.Component.prototype.on_apply_prop_rtldirection.call(this);var _a=this._matrix._rows;var _b=this._rtldirection;if(_a){for(var _c=0,_d=_a.length;_c<_d;_c++ ){_a[_c]._setRtlDirection(_b);}}};_pGridBand.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.parent.onnodataareaclick&&this.parent.onnodataareaclick._has_handlers){return this.parent.on_fire_onnodataareaclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k.parent,_l);}return false;};_pGridBand.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.parent.onnodataareadblclick&&this.parent.onnodataareadblclick._has_handlers){return this.parent.on_fire_onnodataareadblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k.parent,_l);}return false;};_pGridBand._on_refresh_rows=function(_a,_b){if(this._control_element._handle){var _c=this._grid;var _d=this._update_rows;var _e=this._create_rows;var _f=this._control_element;this._on_refresh_rows_physical(_d,_e,_a,_b);this._update_rows=[];this._create_rows=[];this.on_apply_text();_c._applyResizer();_c._adjustOverlayElements(false,_c._is_use_fakemerge);_c._setSelectBorder();}};_pGridBand._on_refresh_rows_physical=function(_a,_b,_c,_d){var _e=_a.length;var _f=_b.length;if(this._isBody){var _g=this._grid;if(_g._is_created==true){var _h=this._get_rows();var _i=_h.length;if(!_d){_g._suppressUpdate();}for(var _p=0;_p<_f;_p++ ){var _j=_b[_p];if(_j._is_alive){_j._updateAll();}}var _k=false;if(_i!=_e){_k=(!_g._isUseBindExprOuterStyle("body")&&!_g._is_variable_bodyrowsize&&!_g._is_use_fakemerge);}for(var _p=0;_p<_e;_p++ ){if(_a[_p]._is_alive){_a[_p]._updateAll(undefined,undefined,_k);}}if(_g._is_use_suppress){var _l=_g._curFormat._bodycells,_m=_l?_l.length:0;var _n,_o;for(var _q=0;_q<_i;_q++ ){_n=_h[_q]._rowidx;_o=(_g._hasTree)?_g._treeIndexes[_n]:_n;for(var _p=0;_p<_m;_p++ ){if(_l[_p].suppress!=0){this._refreshRowCell(_q,_p,_g._isSelectedCell(_p,_o));}}}}}}else{for(var _p=0;_p<_f;_p++ ){_b[_p]._updateAll();}for(var _p=0;_p<_e;_p++ ){_a[_p]._updateAll();}}for(var _p=0;_p<_f;_p++ ){_b[_p].on_created();}};_pGridBand._on_last_lbuttonup=function(){this.parent._on_last_lbuttonup();};_pGridBand._on_last_keyup=function(){this.parent._on_last_keyup();};_pGridBand._refreshRowCell=function(_a,_b,_c,_d,_e){var _f=this._get_rows();var _g=_f[_a]._cells;var _h=this._grid;var _i=_g[_b];if(!_i){return;}_i.selected=_c;var _j=_i.subcells;var _k=_j.length;for(var _l=0;_l<_k;_l++ ){_j[_l].selected=_c;}_i._updateAll(_d,_e);};_pGridBand._refreshRow=function(_a,_b,_c){var _d=this._get_rows();var _e=_d[_a];_e._updateAll(_b,false,undefined,_c);};_pGridBand._refreshCelltype=function(_a,_b){var _c=this.parent._curFormat;function checktype(_d,_a){var _e=_d.length;for(var _f=0;_f<_e;_f++ ){if(_d[_f].celltype==_a){return true;}}return false;};if(_a=="head"){if(_c._bodycells){if(checktype(_c._bodycells,_a)){if(_b){this._grid._curFormat._clearCellStyleCache("body");}this.parent._refreshBody(_b);}}if(_c._summcells){if(checktype(_c._summcells,_a)){if(_b){this._grid._curFormat._clearCellStyleCache("summ");}this.parent._refreshSumm(_b);}}}else if(_a=="summary"){if(_c._bodycells){if(checktype(_c._bodycells,_a)){if(_b){this._grid._curFormat._clearCellStyleCache("body");}this.parent._refreshBody(_b);}}if(_c._headcells){if(checktype(_c._headcells,_a)){if(_b){this._grid._curFormat._clearCellStyleCache("head");}this.parent._refreshHead(_b);}}}else{if(_c._summcells){if(checktype(_c._summcells,_a)){if(_b){this._grid._curFormat._clearCellStyleCache("summ");}this.parent._refreshSumm(_b);}}if(_c._headcells){if(checktype(_c._headcells,_a)){if(_b){this._grid._curFormat._clearCellStyleCache("head");}this.parent._refreshHead(_b);}}}};_pGridBand._refresh_contents=function(_a){if(_a){var _b=this._get_rows();var _c=_b.length;var _d,_e,_f;for(var _g=0;_g<_c;_g++ ){_d=_b[_g]._cells;_e=_d.length;for(var _h=0;_h<_e;_h++ ){_f=_d[_h];_f.currentstyle._empty();}}}if(this.id=="head"){this.parent._refreshHead(_a);this._refreshCelltype("head",_a);}else if(this.id=="summ"){this.parent._refreshSumm(_a);this._refreshCelltype("summary",_a);}else{this.parent._refreshBody(_a);this._refreshCelltype("body",_a);}};_pGridBand._isEnable=function(){if(this._grid){return this._grid._isEnable();}return true;};_pGridBand._get_cols=function(_a){var _b=_a._cols,_c=_b.length,_d,_e=[],_f=[],_g=[];for(var _h=0;_h<_c;_h++ ){_d=_b[_h];if(_d._area=="left"){_e.push(_d.size);}else if(_d._area=="right"){_f.push(_d.size);}else{_g.push(_d.size);}}this._colinfos=_b;return [_g,_e,_f];};_pGridBand._recreate_contents=function(_a,_b,_c,_d,_e){var _f=this._grid,_g=_f._curFormat,_h;this._matrix._init();if(!_g){return;}this._create_rows=[];this._update_rows=[];this._rowsizesperdatarow=[];this._recreating=true;if(this.id=="head"){_h=_g._headrows;this._datarowsheight=_g.headHeight;}else if(this.id=="summ"){_h=_g._summrows;this._datarowsheight=_g.summHeight;}else{_h=_g._bodyrows;_f._rowheight=this._datarowsheight=_g._body_height;}var _i=_h?_h.length:0,_j;for(var _y=0;_y<_i;_y++ ){this._rowsizesperdatarow.push(_h[_y].size);}var _k=(_f.hscrollbar)?_f.hscrollbar.pos:0,_l=(_f.vscrollbar)?_f.vscrollbar.pos:0,_m=(_f.vscrollbar)?_f.vscrollbar._pos:0,_n=_g.bodyWidth,_o=0;if(this._isBody){this._control_element._setFixArea(_f._fixed_height);this._client_height=this._control_element.client_height;if(!_c&&!_d){_f._hideEditor();}var _p=_f._getGridRowCount();var _q=0,_r=[],_s=1,_t=_f._div_max_height;for(var _y=0;_y<_p;_y++ ){_q=_f._getRowSize(_y);_o+=_q;if(_o-_f._fixedrow_height>=_t*_s){_r.push(_o-_q);_s++ ;}}_o-=_f._fixedrow_height;_r.push(_o);this._scrollHeight=_o;this._scrollWidth=_n;var _u=_f._no_update_bandrect;_f._no_update_bandrect=true;if(_b||_f._isChangeBandSrollSizeList(_r)){_f._setScrollMaxSize(this._scrollWidth,this._scrollHeight,_r);}this._control_element._resetExtendContainer();_f._no_update_bandrect=_u;var _v=_f._control_element.vscroll_limit;if(_m<0){_m=0;}else if(_m>_v){_m=_v;}_f._toprowpos=_f._getScreenTopRowPos(_m);_f._bottomrowpos=_f._getScreenBottomRowPos(_m);if(_m==0){this._matrix._adjustRowsDisplay();this._matrix._async_create_page();}else{this._matrix._adjustRowsDisplay();}if((!_f._headBand&&!_f._summBand)||_f._hasTree){_f._setScrollMaxSize(this._scrollWidth,this._scrollHeight,_r);}if(_f._is_created&&!_f._autofiting){this._on_refresh_rows(false,_e);_f._applyAutofittype(true);}}else{this._scrollWidth=_n;this._matrix._adjustRowsDisplay();_f._setScrollMaxSize(this._scrollWidth);if(_f._is_created&&!_f._autofiting){this._on_refresh_rows(false,_e);}}var _w=_f._find_lastFocused();if(_w==_f){_f._control_element.setElementFocus();}var _x=_f._control_element.hscroll_limit;if(_k<0){_k=0;}else if(_k>_x){_k=_x;}if(this._isBody){if(_k>0){if(_b){_f.hscrollbar.set_pos(0);_f._control_element.setElementHScrollPos(0);}else{if(_f._control_element._target_hscroll_elements){this._matrix._adjustColsDisplay();_f._absolutelyResetScrollPos(true);_f._control_element.setElementHScrollPos(_k);_f._absolutelyResetScrollPos(false);}}}if(_m>0){if(_b){_f.vscrollbar.set_pos(0);this._control_element.setElementVScrollPos(0);this._is_over_scroll=0;}else{_f._absolutelyResetScrollPos(true);_f._control_element.setElementVScrollPos(_m);_f._absolutelyResetScrollPos(false);}}}else{if(_k>0){if(_b){_f.hscrollbar.set_pos(0);_f._control_element.setElementHScrollPos(0);}else{this._matrix._adjustColsDisplay();_f._absolutelyResetScrollPos(true);_f._control_element.setElementHScrollPos(_k);_f._absolutelyResetScrollPos(false);}}}this._recreating=false;};_pGridBand._get_rows=function(){return this._matrix._getAllRows();};_pGridBand._get_row=function(_a){if(!this._is_created){return null;}var _b=this._get_rows();var _c=(_b)?_b.length:0;var _d;var _e=this._grid;var _f;for(var _g=0;_g<_c;_g++ ){_f=_e._getDataRow(_b[_g]._rowidx);if(_a==_f){return _b[_g];}}return null;};_pGridBand._updateAll=function(_a){if(this.getElement()){if(_a){this.currentstyle._empty();this._control_pseudo="";this._contents_pseudo="";}this.on_apply_pseudo(this._pseudo);}};delete _pGridBand;nexacro.GridScrollBarCtrl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.ScrollBarCtrl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._grid=_i;};var _pGridScrollBarCtrl=nexacro.GridScrollBarCtrl.prototype=nexacro._createPrototype(nexacro.ScrollBarCtrl,nexacro.GridScrollBarCtrl);nexacro._setForTypedControlStyleFinder(_pGridScrollBarCtrl);_pGridScrollBarCtrl._type_name="GridScrollBarControl";_pGridScrollBarCtrl.on_destroy_contents=function(){nexacro.ScrollBarCtrl.prototype.on_destroy_contents.call(this);this._grid=null;};_pGridScrollBarCtrl._set_rowpos=function(_a,_b){var _c=this._grid;_a-=_c._getFixRowCnt();if(_c._scrollpixel=="all"){_a=this._scroll_convert_pixel(_a,true);}this._no_set_scrollinfo=true;this._setPos(_a,_b);this._no_set_scrollinfo=false;};_pGridScrollBarCtrl._set_pixelpos=function(_a,_b){var _c="none";if(_b=="mousewheel"||_b=="slide"||_b=="fling"){_c=this._getScrollInfo(_a,_b);}if(_a<this._min){_a=this._min;}if(_a>this._max){_a=this._max;}this._no_set_scrollinfo=true;if(this._pos!=_a){this.pos=this._scroll_reverse_convert(_a)[0];this._pos=_a;var _d=this._rectShaft;this._resetTrackBar(_d.left,_d.top,_d.right,_d.bottom);}this.on_fire_onscroll(this.pos,_c);this._no_set_scrollinfo=false;};_pGridScrollBarCtrl._scroll_convert_pixel=function(_a,_b){var _c=this._grid;var _d=_c._bodyBand;if(_c._scrollpixel!="all"||_b){if(this.direction=="vert"){if(_d){var _e=_c._getFixRowCnt();var _f=_a+_e;if(_c._is_variable_bodyrowsize){var _g=0,_h;for(var _i=_e;_i<_f;_i++ ){_h=_c._getDataRow(_i);_g+=_c._rowSizeList[_h];}_a=_g;}else{_a=(_f-_e)*_d._datarowsheight;}}}}return _a;};_pGridScrollBarCtrl._scroll_reverse_convert=function(_a,_b,_c){var _d=this._grid;var _e=_d._bodyBand;var _f=_a;if(_d._scrollpixel!="all"||_b){if(this.direction=="vert"){if(_e){if(_d._is_variable_bodyrowsize){var _g=_d._getFixRowCnt();var _h=_d._getGridRowCount();var _i=0,_j=0;if(_c){for(var _k=_g;_k<_h;_k++ ){_j=_d._getDataRow(_k);if(_a<=_i){_j=_k;_f=_i;break;}_i+=_d._rowSizeList[_j];}}else{for(var _k=_g;_k<_h;_k++ ){_j=_d._getDataRow(_k);if(_a<_i){_j=_k-1;if(_d._rowSizeList[_j]>_e._client_height){if(_i-_a<_e._client_height){_f=_i-_e._client_height;}}else{_f=_i-_d._rowSizeList[_j];}break;}_i+=_d._rowSizeList[_j];}}_a=_j;_a-=_g;}else{var _i=0,_j=0;if(_c){if(_a>0){_j=Math.ceil(_a/_e._datarowsheight);}_f=_j*_e._datarowsheight;}else{if(_a>0){_j=Math.floor(_a/_e._datarowsheight);}_i=_e._datarowsheight*(_j+1);if(_e._datarowsheight>_e._client_height){if(_i-_a<_e._client_height){_f=_i-_e._client_height;}}else{_f=_j*_e._datarowsheight;}}_a=_j;}}}}return [_a,_f];};_pGridScrollBarCtrl.on_incbutton_lbuttondown=function(_a){this._no_set_scrollinfo=true;nexacro.ScrollBarCtrl.prototype.on_incbutton_lbuttondown.call(this,_a);this._no_set_scrollinfo=false;};_pGridScrollBarCtrl.on_decbutton_lbuttondown=function(_a){this._no_set_scrollinfo=true;nexacro.ScrollBarCtrl.prototype.on_decbutton_lbuttondown.call(this,_a);this._no_set_scrollinfo=false;};_pGridScrollBarCtrl._getIncNewPosPixel=function(){var _a=this._grid;var _b,_c;if(this.direction=="vert"){if(_a._scrollpixel!="all"){_c=this.pos;}else{_c=this._scroll_reverse_convert(this.pos,true)[0];}_b=this._scroll_convert_pixel(_c+1,true);}return _b;};_pGridScrollBarCtrl._getDecNewPosPixel=function(){var _a=this._grid;var _b,_c;if(this.direction=="vert"){if(_a._scrollpixel!="all"){_c=this.pos;}else{_c=this._scroll_reverse_convert(this.pos,true)[0];}_b=this._scroll_convert_pixel(_c-1,true);}return _b;};_pGridScrollBarCtrl._setScrollPos=function(_a){nexacro.ScrollBarCtrl.prototype._setScrollPos.call(this,_a);var _b=this._grid;if(_b._scrollpixel!="all"){_b._is_over_scroll=0;if(this._pos>this._orgmax){_b._is_over_scroll=this._pos-this._orgmax;}}};delete _pGridScrollBarCtrl;nexacro.Grid=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._event_list={"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"ongesture":1,"onvscrolllastover":1,"onvscroll":1,"onhscroll":1,"onvtracklast":1,"oncellclick":1,"onheadclick":1,"onsummclick":1,"oncelldblclick":1,"onheaddblclick":1,"onsummdblclick":1,"onnodataareaclick":1,"onnodataareadblclick":1,"onselectchanged":1,"onselectchanged":1,"onformatchanged":1,"onenteredit":1,"onenterdown":1,"cantreestatuschange":1,"ontreestatuschanged":1,"onsubselectchanged":1,"onsubselectchanged":1,"oncolresizing":1,"onrowresizing":1,"ondropdown":1,"oncloseup":1,"onitemchanged":1,"onexpanddown":1,"onexpandup":1,"onchar":1,"ontextchange":1,"ontextchanged":1,"oncolresized":1,"onrowresized":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"onflingstart":1,"onfling":1,"onflingend":1,"onpinchstart":1,"onpinch":1,"onpinchend":1,"onlongpress":1,"onslidestart":1,"onslide":1,"onslideend":1};this._is_scrollable=true;this._formats={};this._curFormat=null;this._headBand=null;this._summBand=null;this._bodyBand=null;this._exprcache={};this._selectstartrow=[];this._selectstartcol=[];this._selectstartsubrow=[];this._selectstartpvt=[];this._selectendrow=[];this._selectendcol=[];this._selectendsubrow=[];this._selectendpvt=[];this._resizerCols=[];this._resizerRows=[];this._imgsize_cache={};this._rowSizeListSub=[];this._rowSizeList=[];this._rowHeadListSub=[];this._rowHeadList=[];this._rowSummListSub=[];this._rowSummList=[];this._begrowpos=0;this._endrowpos=0;this._toprowpos=[0,0];this._bottomrowpos= -1;this._selectinfo={rows:[],selects:[],ctrlpoint:{"cell": -1,"col": -1,"subrow": -1,"row": -9,"colspan": -1,"rowspan": -1,"_init":function(){this.cell= -1;this.col= -1;this.subrow= -1;this.row= -9;this.colspan= -1;this.rowspan= -1;this.subrowslen=0;this.area="";},"_set":function(_j,_k,_l){this.cell=_j._cellidx;this.col=_j._col;this.subrow=_j._row;this.row=_k;this.colspan=_j._colspan;this.rowspan=_j._rowspan;this.subrowslen=_l;this.area=_j._area;}},area:[],"curcell": -1,"curcol": -1,"curpvt": -9,"cursubrow": -1,"curdsrow": -1,"currow": -9,"getSelectCells":function(_j){return this.selects[_j+2];},arearect:{left:0,top:0,width:0,height:0,barea:"",earea:""}};this._text_elem=null;this._is_use_suppress=false;this._is_head_wordwrap=false;this._is_body_wordwrap=false;this._is_summ_wordwrap=false;this._recreate_contents_proc=[];this._keydown_elem=null;this._tree_load_all=null;this._image_load_all=null;this._is_editor_keyaction=true;this._focus_proc=null;this._after_recreate_contents_all=null;this._after_recreate=false;this._is_async_recreate=false;this._is_after_recreate=false;this._accessibility_role="grid";this._accept_arrow=false;this._accept_focus=false;this._first_focus=false;this._is_first_bodycell=false;this._is_band_focus=false;this._beforegridrowpos= -1;this._beforegridcolpos= -1;this.accessibilityreadbandlabel=true;this.controlbutton=new nexacro.GridControlButton("controlbutton",0,0,0,0,this,false,true);this.controlcalendar=new nexacro.GridControlCalendar("controlcalendar",0,0,0,0,this,false,true);this.controlcheckbox=new nexacro.GridControlCheckbox("controlcheckbox",0,0,0,0,this,true);this.controlcombo=new nexacro.GridControlCombo("controlcombo",0,0,0,0,this,false,true);this.controledit=new nexacro.GridControlEdit("controledit",0,0,0,0,this,false,true);this.controlmaskedit=new nexacro.GridControlMaskEdit("controlmaskedit",0,0,0,0,this,true);this.controltextarea=new nexacro.GridControlTextArea("controltextarea",0,0,0,0,this,false,true);this.controlprogressbar=new nexacro.GridControlBar("controlprogressbar",0,0,0,0,this,true);this.controlexpand=new nexacro.GridExpand(this,0,0,0,0,true);this._sizetextarea=new nexacro.TextAreaCtrl("controltextarea","absolute",0, -10,0,1,null,null,this);this._sizetextarea.set_visible(false);this._aniframe_rowscroll=null;this._aniframe_colscroll=null;this._is_use_bind_expr_prop={body:null,head:null,summ:null};this._is_use_bind_expr_style={body:false,head:false,summ:false};this._is_use_bind_expr_outerstyle={body:false,head:false,summ:false};this._is_data_enter_apply=false;this._select_ctrl=null;this._format_str=null;this._destroyeditors=[];this._track_point={x: -1,y: -1};this._track_idx= -1;this._track_start_info=null;this._track_mode="";this._overlay_elements=[];this._selectborder_elements=[];this._func_queue=[];this._recalcXY_info=null;this._fake_mergecell_arr=[];this._enable_redraw_history={};this._temphead=this._tempsumm=null;this._autofitcol_rate=[];this._org_treeStates=[];this._realrowsized_body=[];this._realrowsized_head=[];this._realrowsized_summ=[];};var _pGrid=nexacro._createPrototype(nexacro.Component,nexacro.Grid);nexacro.Grid.prototype=_pGrid;_pGrid._type_name="Grid";_pGrid._rowheight=24;_pGrid._rowcount=0;_pGrid._rowposition= -1;_pGrid._beforeheadcellpos= -1;_pGrid._beforeheadrowpos= -1;_pGrid._beforeheadcolpos= -1;_pGrid._beforeheadsubrowpos= -1;_pGrid._beforebodycellpos= -1;_pGrid._beforebodyrowpos= -1;_pGrid._beforebodycolpos= -1;_pGrid._beforebodysubrowpos= -1;_pGrid._beforepvt= -9;_pGrid._beforesummcellpos= -1;_pGrid._beforesummrowpos= -1;_pGrid._beforesummcolpos= -1;_pGrid._beforesummsubrowpos= -1;_pGrid._multiselect="none";_pGrid._bodyrowheight=0;_pGrid._mouseRowPos= -9;_pGrid._mouseovercell=null;_pGrid._mouseCellPos= -1;_pGrid._dsEventOccured=false;_pGrid._bPivotGrid=false;_pGrid._showEditorCell=false;_pGrid._showEditRowIdx= -1;_pGrid._showEditCellIdx= -1;_pGrid._dbclickPreCell= -1;_pGrid._dbclickPreCol= -1;_pGrid._dbclickPreRow= -9;_pGrid._dbclickPreSubrow= -1;_pGrid._dbclickPrePvt= -9;_pGrid._lbuttondown_proc=false;_pGrid._bDragArea=false;_pGrid._nDragRow= -1;_pGrid._nDragCell= -1;_pGrid._nDragPivot= -9;_pGrid._nDragEndRow= -1;_pGrid._nDragEndCell= -1;_pGrid._nDragEndCol= -9;_pGrid._nDragBand= -1;_pGrid._bShiftClick=false;_pGrid._selectClear=false;_pGrid._acceptstab=true;_pGrid.vscrollbar=null;_pGrid.hscrollbar=null;_pGrid.scrollbars="autoboth";_pGrid._scrollbars=3;_pGrid.body=null;_pGrid.head=null;_pGrid.summ=null;_pGrid.summary=null;_pGrid.currentcell= -1;_pGrid.currentcol= -1;_pGrid.currentpivot= -9;_pGrid.currentsubrow= -1;_pGrid.currentrow= -9;_pGrid._currentDSrow= -1;_pGrid._currentBand="body";_pGrid.selectcount=0;_pGrid.selectstartrow= -9;_pGrid.selectstartcol= -1;_pGrid.selectstartsubrow= -1;_pGrid.selectstartpivot= -9;_pGrid.selectendrow= -9;_pGrid.selectendcol= -1;_pGrid.selectendsubrow= -1;_pGrid.selectendpivot= -9;_pGrid.pagerowcount=0;_pGrid._pagerowcnt=0;_pGrid.rowcount=0;_pGrid.pivotcount=0;_pGrid._disprowcnt=0;_pGrid._displaycalendarctrl=null;_pGrid.fillareatype="none";_pGrid._resetfillarea=false;_pGrid.scrollpixel="default";_pGrid._scrollpixel=(nexacro.isTouchInteraction)?"all":"none";_pGrid._selectscrollmode=(nexacro.isTouchInteraction)?"scroll":"select";_pGrid.dragscrolltype="all";_pGrid.hideendline="none";_pGrid.userdata="";_pGrid.nodataimage="";_pGrid.nodatatext="";_pGrid.summarytype="default";_pGrid.suppresslevel="sameskip";_pGrid.useselcolor=true;_pGrid.autoupdatetype="none";_pGrid.cellclickbound="control";_pGrid.cellmovingtype="none";_pGrid.cellsizebandtype="body";_pGrid.cellsizingtype="none";_pGrid.extendsizetype="none";_pGrid.readonly=false;_pGrid.selectbandtype="default";_pGrid.selectchangetype="down";_pGrid.selecttype="row";_pGrid.wheelscrollrow=3;_pGrid.usecontrolkey=true;_pGrid.treeusebutton="use";_pGrid.treeuseline=true;_pGrid.treeusecheckbox=true;_pGrid.treeuseimage=true;_pGrid.treeuseexpandkey=false;_pGrid.treeinitstatus="collapse,null";_pGrid.treepathdelimiter=".";_pGrid.useinputpanel=false;_pGrid.usesoftkeyboard=true;_pGrid._enable=true;_pGrid._changeDisplayer=false;_pGrid._autoSizeRowProc=false;_pGrid.binddataset="";_pGrid._binddataset=null;_pGrid._userRowposChange=false;_pGrid._create_selection=null;_pGrid.formatid="";_pGrid.formats="";_pGrid.locale="";_pGrid.areaselecttype="limitband";_pGrid.autoenter="none";_pGrid.autofitbandtype="body";_pGrid.autofitminheight=100;_pGrid.autofitminwidth=100;_pGrid.autofittype="none";_pGrid.autosizingtype="none";_pGrid.autosizebandtype="body";_pGrid.selectscrollmode="default";_pGrid._colautofit=false;_pGrid._rowautofit=false;_pGrid._autofiting=false;_pGrid._bodyAutoSize=true;_pGrid._headAutoSize=false;_pGrid._summAutoSize=false;_pGrid._AutoSizeLcol=false;_pGrid._AutoSizeRcol=false;_pGrid._rowSizeEx=false;_pGrid._noInternalvscroll=false;_pGrid._is_variable_bodyrowsize=false;_pGrid._bGridCtrlLdown=false;_pGrid._locale="";_pGrid._currentCompositionStatus="none";_pGrid._currentCompositionData="";_pGrid._fixed_startrow= -9;_pGrid._fixed_endrow= -9;_pGrid._fixed_height=0;_pGrid._fixedrow_height=0;_pGrid._fixed_rowcnt=0;_pGrid._fixed_row_scrolling=false;_pGrid._accessibility_row= -1;_pGrid._accessibility_cellidx= -1;_pGrid.on_apply_custom_pseudo=function(_a){var _b=this.currentstyle;var _c=this.on_find_CurrentStyle_font(_a);if(_b.font!=_c){_b.font=_c;this.on_apply_style_font(_c);}var _d=this.on_find_CurrentStyle_letterspace(_a);if(_b.letterspace!=_d){_b.letterspace=_d;this.on_apply_style_letterspace(_d);}var _e=this.on_find_CurrentStyle_color(_a);if(_b.color!=_e){_b.color=_e;this.on_apply_style_color(_e);}var _f=this.on_find_CurrentStyle_align(_a);if(_b.align!=_f){_b.align=_f;this.on_apply_style_align(_f);}var _g=this.on_find_CurrentStyle_linetype(_a);if(_b.linetype!=_g){_b.linetype=_g;this.on_apply_style_linetype(_g);}var _h=this.on_find_CurrentStyle_line(_a);if(_b.line!=_h){_b.line=_h;this.on_apply_style_line(_h);}var _i=this.on_find_CurrentStyle_selectline(_a);if(_b.selectline!=_i){_b.selectline=_i;this.on_apply_style_selectline(_i);}var _j=this.on_find_CurrentStyle_selectlinetype(_a);if(_b.selectlinetype!=_j){_b.selectlinetype=_j;this.on_apply_style_selectline(_j);}var _k=this.on_find_CurrentStyle_treeclosebuttonimage(_a);if(_b.treeclosebuttonimage!=_k){_b.treeclosebuttonimage=_k;this.on_apply_style_treeclosebuttonimage(_k);}var _l=this.on_find_CurrentStyle_treecollapseimage(_a);if(_b.treecollapseimage!=_l){_b.treecollapseimage=_l;this.on_apply_style_treecollapseimage(_l);}var _m=this.on_find_CurrentStyle_treeexpandimage(_a);if(_b.treeexpandimage!=_m){_b.treeexpandimage=_m;this.on_apply_style_treeexpandimage(_m);}var _n=this.on_find_CurrentStyle_treeitemimage(_a);if(_b.treeitemimage!=_n){_b.treeitemimage=_n;this.on_apply_style_treeitemimage(_n);}var _o=this.on_find_CurrentStyle_treelinetype(_a);if(_b.treelinetype!=_o){_b.treelinetype=_o;this.on_apply_style_treeitemimage(_o);}var _p=this.on_find_CurrentStyle_treeopenbuttonimage(_a);if(_b.treeopenbuttonimage!=_p){_b.treeopenbuttonimage=_p;this.on_apply_style_treeopenbuttonimage(_p);}var _q=this.on_find_CurrentStyle_rtlimagemirroring(_a);if(_b.rtlimagemirroring!=_q){_b.rtlimagemirroring=_q;this.on_apply_style_rtlimagemirroring(_q);}};_pGrid.on_create_custom_style=function(){return new nexacro.Grid_Style(this);};_pGrid.on_create_custom_currentStyle=function(){return new nexacro.Grid_CurrentStyle();};_pGrid.on_find_CurrentStyle_cursor=function(_a){if(this._global_cursor){return this._global_cursor;}return nexacro.Component.prototype.on_find_CurrentStyle_cursor.call(this,_a);};_pGrid.on_find_CurrentStyle_line=function(_a){return this._find_pseudo_obj("line",_a,"line");};_pGrid.on_find_CurrentStyle_selectline=function(_a){return this._find_pseudo_obj("selectline",_a);};_pGrid.on_find_CurrentStyle_linetype=function(_a){return this._find_pseudo_obj("linetype",_a);};_pGrid.on_find_CurrentStyle_selectlinetype=function(_a){return this._find_pseudo_obj("selectlinetype",_a);};_pGrid.on_find_CurrentStyle_focusborder=function(_a){return this._find_pseudo_obj("focusborder",_a,"border");};_pGrid.on_find_CurrentStyle_treeclosebuttonimage=function(_a){return this._find_pseudo_obj("treeclosebuttonimage",_a);};_pGrid.on_find_CurrentStyle_treecollapseimage=function(_a){return this._find_pseudo_obj("treecollapseimage",_a);};_pGrid.on_find_CurrentStyle_treeexpandimage=function(_a){return this._find_pseudo_obj("treeexpandimage",_a);};_pGrid.on_find_CurrentStyle_treeitemimage=function(_a){return this._find_pseudo_obj("treeitemimage",_a);};_pGrid.on_find_CurrentStyle_treelinetype=function(_a){return this._find_pseudo_obj("treelinetype",_a,"line");};_pGrid.on_find_CurrentStyle_treeopenbuttonimage=function(_a){return this._find_pseudo_obj("treeopenbuttonimage",_a);};_pGrid.on_find_CurrentStyle_selectpointimage=function(_a){return this._find_pseudo_obj("selectpointimage",_a);};_pGrid.on_find_CurrentStyle_background=function(_a){var _b=this._getGridRowCount();var _c=nexacro.Component.prototype.on_find_CurrentStyle_background.call(this,_a);if(this.getElement()&&_b==0&&this._bodyBand==null&&this._is_created){var _d=this.nodataimage;if(_d.length){var _e="transparent";if(_c){_e=_c.color;}_c=nexacro._getCachedStyleObj("background",_e+" "+_d+" center middle");}}return _c;};_pGrid.on_find_CurrentStyle_align=function(_a){return this._find_pseudo_obj("align",_a,"align");};_pGrid.on_update_style_cursor=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_cursor(this.currentstyle.cursor=this.on_find_CurrentStyle_cursor(this._pseudo));this._refreshAll();};_pGrid.on_update_style_background=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_background(this.currentstyle.background=this.on_find_CurrentStyle_background(this._pseudo));};_pGrid.on_update_style_gradation=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_gradation(this.currentstyle.gradation=this.on_find_CurrentStyle_gradation(this._pseudo));};_pGrid.on_update_style_font=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_font(this.currentstyle.font=this.on_find_CurrentStyle_font(this._pseudo));};_pGrid.on_update_style_letterspace=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_letterspace(this.currentstyle.letterspace=this.on_find_CurrentStyle_letterspace(this._pseudo));};_pGrid.on_update_style_padding=function(){if(this._is_created){this._clearAllStyleCache();}var _a=this.currentstyle.padding=this.on_find_CurrentStyle_padding(this._pseudo);this._control_element.setElementPadding(_a);this._updateClientSize(this._control_element);};_pGrid.on_update_style_align=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_align(this.currentstyle.align=this.on_find_CurrentStyle_align(this._pseudo));};_pGrid.on_update_style_color=function(){if(this._is_created){this._clearAllStyleCache();}nexacro.Component.prototype.on_update_style_color.call(this);};_pGrid.on_update_style_line=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_line(this.currentstyle.line=this.on_find_CurrentStyle_line(this._pseudo));};_pGrid.on_update_style_linetype=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_linetype(this.currentstyle.linetype=this.on_find_CurrentStyle_linetype(this._pseudo));};_pGrid.on_update_style_selectline=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_selectline(this.currentstyle.selectline=this.on_find_CurrentStyle_selectline(this._pseudo));};_pGrid.on_update_style_selectlinetype=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_selectlinetype(this.currentstyle.selectlinetype=this.on_find_CurrentStyle_selectlinetype(this._pseudo));};_pGrid.on_update_style_treeclosebuttonimage=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_treeclosebuttonimage(this.currentstyle.treeclosebuttonimage=this.on_find_CurrentStyle_treeclosebuttonimage(this._pseudo));};_pGrid.on_update_style_treecollapseimage=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_treecollapseimage(this.currentstyle.treecollapseimage=this.on_find_CurrentStyle_treecollapseimage(this._pseudo));};_pGrid.on_update_style_treeexpandimage=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_treeexpandimage(this.currentstyle.treeexpandimage=this.on_find_CurrentStyle_treeexpandimage(this._pseudo));};_pGrid.on_update_style_treeitemimage=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_treeitemimage(this.currentstyle.treeitemimage=this.on_find_CurrentStyle_treeitemimage(this._pseudo));};_pGrid.on_update_style_treelinetype=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_treelinetype(this.currentstyle.treelinetype=this.on_find_CurrentStyle_treelinetype(this._pseudo));};_pGrid.on_update_style_treeopenbuttonimage=function(){if(this._is_created){this._clearAllStyleCache();}this.on_apply_style_treeopenbuttonimage(this.currentstyle.treeopenbuttonimage=this.on_find_CurrentStyle_treeopenbuttonimage(this._pseudo));};_pGrid.on_update_style_selectpointimage=function(){this.on_apply_style_selectpointimage(this.currentstyle.selectpointimage=this.on_find_CurrentStyle_selectpointimage(this._pseudo));};_pGrid.on_apply_style_font=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_letterspace=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_color=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_align=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_linetype=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_line=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_selectline=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_selectlinetype=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_treeclosebuttonimage=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_treecollapseimage=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_treeexpandimage=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_treeitemimage=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_treelinetype=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_treeopenbuttonimage=function(_a){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(this._is_created){this._refreshAll();}};_pGrid.on_apply_style_selectpointimage=function(_a){if(!this.enableredraw){return;}if(!this._is_created){return;}if(this._select_ctrl){this._select_ctrl._updateAll();}};_pGrid._find_bandcomp_pseudo_obj=function(_a,_b,_c,_d){var _e;var _f=this._curFormat;if(_a=="head"){_e=this._headBand;if(!_e){_e=this._temphead;if(!_e){_e=this._temphead=new nexacro.GridBand("head",0,0,0,0,this,_f._headband);}}}else if(_a=="summ"||_a=="summary"){_e=this._summBand;if(!_e){_e=this._tempsumm;if(!_e){_e=this._tempsumm=new nexacro.GridBand("summ",0,0,0,0,this,_f._summband);}}}else{_e=this._bodyBand;}var _g=null;if(_e){if(_a=="summ"||_a=="summary"){_g=nexacro.Component.prototype._find_pseudo_obj.call(_e,_b,_c,_d);if(!_g){_e.id="summary";_g=nexacro.Component.prototype._find_pseudo_obj.call(_e,_b,_c,_d);_e.id="summ";}}else{_g=nexacro.Component.prototype._find_pseudo_obj.call(_e,_b,_c,_d);}}return _g;};_pGrid.on_apply_pseudo=function(_a,_b){nexacro.Component.prototype.on_apply_pseudo.call(this,_a,_b);if(_a==""){this._recreate();}};_pGrid.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._text_elem=new nexacro.TextBoxElement(_a);_b.setElementSize(this._client_width,this._client_height);_b.setElementVisible(false);_b.setElementAlignXY("center","middle");_b.setElementWordWrap("char");this._createBandsAndAreas();this._sizetextarea.createComponent(true);}};_pGrid.on_created_contents=function(){var _a=this._text_elem;if(_a){_a.create();}var _b=this._bodyBand;if(_b){_b.on_created();}var _c=this._headBand;if(_c){_c.on_created();}var _d=this._summBand;if(_d){_d.on_created();}this._sizetextarea.on_created();var _e=this._select_ctrl;if(_e){_e.on_created();}if(_b||_c||_d){this._onResetScrollBar();this._applyAutofittype(true);}if(this._create_selection!=null&&!this._isMultiSelect()&&!this._isAreaSelect()){var _f=this._create_selection;this._resetSelect(_f.row,_f.cell,_f.col,_f.subrow,_f.pivot);}this._create_selection=null;this._is_created=true;if(this._tree_recreate==true){this._recreate_contents_all(true,true,true);this._tree_recreate=false;}else if(this._image_recreate==true){this._recreate_contents_all(true,true,true);this._image_recreate=false;}else if(this.autosizingtype!="none"){this._recreate_contents_all(true,true,true);}else{this._refreshBody();}if(nexacro._enableaccessibility&&!this._accept_focus){var _g=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_g&&_g.enable){this._accept_focus=true;}}this.on_apply_nodatatext();this.on_apply_nodataimage();if(this._control_element){this._control_element._arrangeBandOrder();}this._applyResizer();this.on_apply_prop_rtldirection();this._adjustOverlayElements(true,this._is_use_fakemerge);};_pGrid.on_destroy_contents=function(){if(this._binddataset){this._removeDSEventHandlers(this._binddataset);}if(this._aniframe_rowscroll){this._aniframe_rowscroll.destroy();}if(this._aniframe_colscroll){this._aniframe_colscroll.destroy();}var _a=this._text_elem;if(_a){_a.destroy();this._text_elem=null;}this._sizetextarea.destroy();var _b=this._formats;if(_b){for(var _d in _b){var _c=_b[_d];if(_c&&_c.destroy){_c.destroy();_b[_d]=null;}}}this._select_ctrl=null;this._destroyBands(true);if(this.controlbutton){this.controlbutton=null;}if(this.controlcalendar){this.controlcalendar=null;}if(this.controlcheckbox){this.controlcheckbox=null;}if(this.controlcombo){this.controlcombo=null;}if(this.controledit){this.controledit=null;}if(this.controlmaskedit){this.controlmaskedit=null;}if(this.controltextarea){this.controltextarea=null;}if(this.controlprogressbar){this.controlprogressbar=null;}if(this.controlexpand){this.controlexpand=null;}if(this._currentCellEditor){this._currentCellEditor.destroy();this._currentCellEditor=null;this._tempEditor=null;}this._clearDestroyEditor();if(this._displaycalendarctrl){delete this._displaycalendarctrl;this._displaycalendarctrl=null;}this._binddataset=null;if(this._tempEditor){this._tempEditor.destroy();this._tempEditor=null;}if(this._resizer_colctrl){this._resizer_colctrl.destroy();}if(this._resizer_rowctrl){this._resizer_rowctrl.destroy();}if(this._extratrack_timer){this._extratrack_timer._handle.stop();this._extratrack_timer._handle=null;this._extratrack_timer=null;}this._destroyOverlayElements();this._destroySelectBorderElements();this._curFormat=null;this._formats=null;this._mouseovercell=null;this._lastmouseentercell=null;this._prevAreaCellObj=null;this._selectstartrow=null;this._selectstartcol=null;this._selectstartsubrow=null;this._selectstartpvt=null;this._selectendrow=null;this._selectendcol=null;this._selectendsubrow=null;this._selectendpvt=null;this._resizerCols=null;this._resizerRows=null;this._imgsize_cache=null;this._rowSizeListSub=null;this._rowSizeList=null;this._rowHeadListSub=null;this._rowHeadList=null;this._rowSummListSub=null;this._rowSummList=null;this._toprowpos=null;this._selectinfo=null;this._recreate_contents_proc=null;this._keydown_elem=null;this._tree_load_all=null;this._image_load_all=null;this._focus_proc=null;this._after_recreate_contents_all=null;this._band_scroll_sizes=null;this._format_str=null;this._exprcache=null;this._is_use_bind_expr_outerstyle=null;this._is_use_bind_expr_prop=null;this._is_use_bind_expr_style=null;this._setdataobj=null;this._resizer_colctrl=null;this._resizer_rowctrl=null;this.selectstartrow=null;this.selectstartcol=null;this.selectstartsubrow=null;this.selectstartpivot=null;this.selectendrow=null;this.selectendcol=null;this.selectendsubrow=null;this.selectendpivot=null;this.formats=null;this._destroyeditors=null;this._overlay_elements=null;this._selectborder_elements=null;this._recalcXY_info=null;this._fake_mergecell_arr=null;this._enable_redraw_history=null;this._autofitcol_rate=null;this._org_treeStates=null;this._realrowsized_body=null;this._realrowsized_head=null;this._realrowsized_summ=null;this._treeCellinfo=null;};_pGrid._is_changingRect=false;_pGrid.on_change_containerRect=function(_a,_b){if(this._is_changingRect){return;}this._is_changingRect=true;this._resizeBand();this._adjustOverlayElements(true,this._is_use_fakemerge);this._is_changingRect=false;};_pGrid.on_create_control_element=function(_a){var _b=new nexacro.GridScrollableControlElement(_a);_b.setLinkedControl(this);this._control_element=_b;return _b;};_pGrid._on_deactivate=function(){if(!this._isSelected()){this._stat_change("notfocus","normal");}};_pGrid.on_update_position=function(_a,_b){nexacro.Component.prototype.on_update_position.call(this,_a,_b);if(this._currentCellEditor&&this._currentCellEditor._isPopupVisible()){this._currentCellEditor.on_update_position(_a,_b);}};_pGrid.applyto_bindSource=function(_a,_b){if(this._currentCellEditor){this._currentCellEditor._setDataset();}};_pGrid._getAccessibilityRole=function(_a){var _b=_a.role?_a.role:this._accessibility_role;if(this._hasTree){_b="treegrid";}return _b;};_pGrid._isAccessibilityEnable=function(){return this._accept_focus;};_pGrid.on_get_style_accessibility_label=function(){return this.id;};_pGrid.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=false;var _e=this._curFormat;if(_e){var _f=(_e._headcells)?_e._headcells.length:0;var _g=(_e._bodycells)?_e._bodycells.length:0;var _h=(_e._summcells)?_e._summcells.length:0;if(this._currentBand=="grid"&&this._accessibility_cellidx<0&&this._accessibility_row<0){if(_f==0&&_g==0&&_h==0){var _i=this._getForm();var _j=_i._getTabOrderNext(this,(_a>0)?_a: -1,true);if(_j&&(!this.nodatatext||this.nodatatext.length<=0)){_j._setAccessibilityNotifyEvent(_a);}}if(_a){this._currentBand="head";this._accessibility_row=0;this._accessibility_cellidx= -1;}else{this._currentBand="summ";this._accessibility_row=0;this._accessibility_cellidx=_h;}}var _k=null;while(true){_k=null;if(_a){this._accessibility_cellidx++ ;}else{this._accessibility_cellidx-- ;}if(this._currentBand=="head"){if(_a){if(!this._headBand||this._accessibility_cellidx>=_f){this._currentBand="body";this._accessibility_row=0;this._accessibility_cellidx=0;if(this.rowcount<=0&&this.nodatatext){this._bodyBand._setAccessibilityNotifyEvent();_d=true;break;}}}else{if(!this._headBand||this._accessibility_cellidx<0){this._accessibility_row= -1;this._accessibility_cellidx= -1;_d=false;break;}}}else if(this._currentBand=="summ"){if(_a){if(!this._summBand||this._accessibility_cellidx>=_h){this._accessibility_row= -1;this._accessibility_cellidx= -1;_d=false;break;}}else{if(!this._summBand||this._accessibility_cellidx<0){this._currentBand="body";this._accessibility_row=this._rowcount-1;this._accessibility_cellidx=_g-1;if(this.rowcount<=0&&this.nodatatext){this._bodyBand._setAccessibilityNotifyEvent();_d=true;break;}}}}else{if(_a){if(this._accessibility_cellidx>=_g){this._accessibility_row++ ;this._accessibility_cellidx=0;}if(this._rowcount<=0||this._accessibility_row>=this._rowcount){this._currentBand="summ";this._accessibility_row=0;this._accessibility_cellidx=0;}}else{if(this._accessibility_cellidx<0){this._accessibility_row-- ;this._accessibility_cellidx=_g-1;}if(this._rowcount<=0||this._accessibility_row<0){this._currentBand="head";this._accessibility_row=0;this._accessibility_cellidx=_f-1;}}}_k=this._getAccessibilityCurrentCell(this._accessibility_row,this._accessibility_cellidx);if(_k){_k._setAccessibilityNotifyEvent();_d=true;break;}}}return _d;};_pGrid._setAccessibilityNotifyEvent=function(_a){this._resetScrollPos(this,this._adjust_left,this._adjust_top,this._adjust_left+this._adjust_width,this._adjust_top+this._adjust_height,(_a&&_a>0)?0:1);this._accessibility_row= -1;this._accessibility_cellidx= -1;this._currentBand="grid";this.on_fire_sys_onaccessibilitygesture(_a);};_pGrid._setAccessibilityInfoByHover=function(_a){var _b=false;if(_a){if(_a._cellobj){_a=_a._cellobj;}if(_a instanceof nexacro.GridCell){this._currentBand=_a._band.id;this._accessibility_cellidx=_a._cellidx;this._accessibility_row=this._getDataRow(_a._rowidx);this._first_focus=true;}else{this._first_focus=false;}_b=_a._setAccessibilityInfoByHover();}return _b;};_pGrid.on_apply_prop_class=function(){this._clearAllStyleCache();if(this._bodyBand){this._bodyBand._css_finder=null;this._bodyBand._ref_css_finder=null;}if(this._headBand){this._headBand._css_finder=null;this._headBand._ref_css_finder=null;}if(this._summBand){this._summBand._css_finder=null;this._summBand._ref_css_finder=null;}nexacro.Component.prototype.on_apply_prop_class.call(this);if(this._is_created){this._refreshAll(true);}};_pGrid.set_fillareatype=function(_a){switch(_a){case "none":case "linerow":case "datarow":case "controlrow":case "allrow":if(_a!=this.fillareatype){this.fillareatype=_a;this.on_apply_fillareatype();}break;}};_pGrid.on_apply_fillareatype=function(){this._resetfillarea=true;this._recreate_contents_all(false,false,false,true);this._resetfillarea=false;};_pGrid.set_selectscrollmode=function(_a){switch(_a){case "select":case "scroll":this._selectscrollmode=this.selectscrollmode=_a;break;case "default":this._selectscrollmode=(nexacro.isTouchInteraction)?"scroll":"select";break;}};_pGrid.set_scrollpixel=function(_a){if(_a!=this.scrollpixel){switch(_a){case "none":case "all":this.scrollpixel=this._scrollpixel=_a;this.on_apply_scrollpixel();break;case "default":this.scrollpixel=_a;this._scrollpixel=(nexacro.isTouchInteraction)?"all":"none";this.on_apply_scrollpixel();break;}}};_pGrid.on_apply_scrollpixel=function(){this._updateScrollInfo();};_pGrid._updateScrollInfo=function(){if(this._control_element){this._control_element._updateClientSize();this._updateClientSize(this._control_element);}};_pGrid.set_hideendline=function(_a){switch(_a){case "none":case "row":case "col":case "both":if(_a!=this.hideendline){this.hideendline=_a;this.on_apply_hideendline();}break;}};_pGrid.on_apply_hideendline=function(){this._refreshAll();};_pGrid.set_userdata=function(_a){if(this.userdata!=_a){this.userdata=_a;}};_pGrid.set_nodataimage=function(_a){if(_a.substring(0,4).toLowerCase()!="url("){_a="URL("+_a+")";}this.nodataimage=_a;this.on_apply_nodataimage();};_pGrid.on_apply_nodataimage=function(){if(this.getElement()){var _a=this._bodyBand;if(_a){_a._control_pseudo="";_a._contents_pseudo="";_a._stat_change();}else{this._control_pseudo="";this._contents_pseudo="";this._stat_change();}}};_pGrid.set_nodatatext=function(_a){this.nodatatext=_a;this.on_apply_nodatatext();};_pGrid.on_apply_nodatatext=function(){var _a=this._getGridRowCount();if(this.getElement()&&_a==0){var _b=this._bodyBand;if(_b){if(this._text_elem){this._text_elem.setElementVisible(false);}_b.on_apply_text();}else{if(this._text_elem){var _c=this.nodatatext;var _d=this.on_find_CurrentStyle_font();var _e=this.on_find_CurrentStyle_color();var _f=this.on_find_CurrentStyle_letterspace();this._text_elem.setElementVisible(true);this._text_elem.setElementText(_c);this._text_elem.setElementFont(_d);this._text_elem.setElementLetterSpace(_f);this._text_elem.setElementColor(_e);}}}else{if(this._text_elem){this._text_elem.setElementVisible(false);}}};_pGrid.set_summarytype=function(_a){switch(_a){case "default":case "top":case "left":case "lefttop":if(_a!=this.summarytype){this.summarytype=_a;this.on_apply_summarytype();}break;}};_pGrid.on_apply_summarytype=function(){if(this.getElement()&&this._curFormat!=null&&this._curFormat.summHeight>0){this._recreate();}};_pGrid.set_suppresslevel=function(_a){switch(_a){case "sameskip":case "allskip":case "allcompare":if(_a!=this.suppresslevel){this.suppresslevel=_a;this.on_apply_suppresslevel();}break;}};_pGrid.on_apply_suppresslevel=function(){if(this.getElement()&&this._curFormat!=null){this._refreshBody();}};_pGrid.set_useselcolor=function(_a){_a=nexacro._toBoolean(_a);this.useselcolor=_a;this.on_apply_useselcolor();};_pGrid.on_apply_useselcolor=function(){this._refreshBody();};_pGrid.setBindDataset=function(_a){if(_a instanceof nexacro.Dataset){if(this._binddataset){this._removeDSEventHandlers(this._binddataset);}if(!_a){this._binddataset=null;this.binddataset="";}else{this._binddataset=_a;this.binddataset=_a.id;}this.on_apply_prop_binddataset();}};_pGrid.getBindDataset=function(){return this._binddataset;};_pGrid.set_binddataset=function(_a){if(typeof _a!="string"){this.setBindDataset(_a);return;}if(_a!=this.binddataset||this.binddataset&&!this._binddataset){if(this._binddataset){this._removeDSEventHandlers(this._binddataset);}if(!_a){this._binddataset=null;this.binddataset="";}else{_a=_a.replace("@","");this._binddataset=this._findDataset(_a);this.binddataset=_a;}this.on_apply_prop_binddataset();}return this.binddataset;};_pGrid.on_apply_prop_binddataset=function(){var _a=this._binddataset;if(_a){_a._is_loaded=true;this.binddataset=_a.id;this.rowcount=this._rowcount=_a.rowcount;this._rowposition=_a.rowposition;this._exprcache={};this._initTreeStates();this._clearAllStyleCache();this._recreate_contents_all(true,true,true);this._initSelect(this._rowposition);this._setDSEventHandlers(_a);}else{this.rowcount=this._rowcount=0;this._rowposition= -1;this._exprcache={};this._initTreeStates();this._clearAllStyleCache();this._recreate_contents_all(true,true,true);}};_pGrid.set_formatid=function(_a){if(this.formatid!=_a){this.formatid=_a;this.on_apply_formatid();}};_pGrid.on_apply_formatid=function(){var _a=this.formatid;if(_a==""){_a="default";}this._curFormat=this._formats[_a];this._autofitcol_rate=[];this._recreate();this._resetSelect(this._rowposition);};_pGrid.set_formats=function(_a){this.formats=_a;this.on_apply_formats();};_pGrid.on_apply_formats=function(){this._setContents(this.formats);this._recreate();this._resetSelect(this._rowposition);};_pGrid.set_locale=function(_a){if(_a!=this.locale){this.locale=_a;if(this._locale!=_a){this._locale=_a;this.on_apply_locale();}}};_pGrid.on_apply_locale=function(){var _a=this._locale;if(this._headBand){this._headBand._setLocale(_a);}if(this._bodyBand){this._bodyBand._setLocale(_a);}if(this._summBand){this._summBand._setLocale(_a);}};_pGrid.set_areaselecttype=function(_a){if(this.areaselecttype!=_a){switch(_a){case "overband":case "limitband":this.areaselecttype=_a;break;}}};_pGrid.set_autoenter=function(_a){if(this.autoenter!=_a){switch(_a){case "select":case "key":case "none":this.autoenter=_a;break;}}};_pGrid.set_autofitbandtype=function(_a){if(this.autofitbandtype!=_a){switch(_a){case "body":case "allband":case "nohead":case "noleft":case "nohead,noleft":this.autofitbandtype=_a;break;}}};_pGrid.set_autofitminheight=function(_a){if(this.autofitminheight!=_a){this.autofitminheight=(isNaN(_a)?100:parseInt(_a,10));}};_pGrid.set_autofitminwidth=function(_a){if(this.autofitminwidth!=_a){this.autofitminwidth=(isNaN(_a)?100:parseInt(_a,10));}};_pGrid.set_autofittype=function(_a){if(this.autofittype!=_a){switch(_a){case "none":case "col":case "row":case "both":case "allpivot":case "allrow":case "allboth":case "col,allrow":case "row,allpivot":this.autofittype=_a;this.on_apply_prop_autofittype();break;}}};_pGrid.on_apply_prop_autofittype=function(){if(this._curFormat){if(!this._isUserChangeColSize){this._autofitcol_rate=[];}this._curFormat._resetOrgColSize(true,this._autofitcol_rate);}this._applyAutofittype(true,true);};_pGrid.set_visible=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);if(this.visible!=_a){nexacro.Component.prototype.set_visible.call(this,_a);if(_a&&this._is_created){this._refreshAll();if(nexacro.Browser=="Chrome"&&this.vscrollbar){this._absolutelyResetScrollPos(true);var _b=this._control_element.vscroll_limit;var _c=this.vscrollbar._pos;if(_c>=_b){_c=_b;this._control_element.setElementVScrollPos(_c-1);}else{this._control_element.setElementVScrollPos(_c+1);}this._control_element.setElementVScrollPos(_c);this._absolutelyResetScrollPos(false);}}}};_pGrid.set_autosizebandtype=function(_a){if(this.autosizebandtype!=_a){switch(_a){case "body":this._bodyAutoSize=true;this._headAutoSize=false;this._summAutoSize=false;this._AutoSizeLcol=false;this._AutoSizeRcol=false;break;case "head":this._bodyAutoSize=false;this._headAutoSize=true;this._summAutoSize=false;this._AutoSizeLcol=false;this._AutoSizeRcol=false;break;case "summary":this._bodyAutoSize=false;this._headAutoSize=false;this._summAutoSize=true;this._AutoSizeLcol=false;this._AutoSizeRcol=false;break;case "allband":this._bodyAutoSize=true;this._headAutoSize=true;this._summAutoSize=true;this._AutoSizeLcol=true;this._AutoSizeRcol=true;break;case "nohead":this._bodyAutoSize=true;this._headAutoSize=false;this._summAutoSize=true;this._AutoSizeLcol=false;this._AutoSizeRcol=false;break;case "noleft":this._bodyAutoSize=true;this._headAutoSize=true;this._summAutoSize=true;this._AutoSizeLcol=false;this._AutoSizeRcol=true;break;case "nohead,noleft":this._bodyAutoSize=true;this._headAutoSize=false;this._summAutoSize=true;this._AutoSizeLcol=false;this._AutoSizeRcol=true;break;}this.autosizebandtype=_a;this.on_apply_autosizebandtype();}};_pGrid.on_apply_autosizebandtype=function(){if(this.getElement()){this._recreate_contents_all(true,true,true);}};_pGrid.set_autosizingtype=function(_a){if(this.autosizingtype!=_a){var _b=false;if(this.extendsizetype=="row"||this.extendsizetype=="both"){_b=true;}switch(_a){case "none":case "col":this._rowSizeEx=_b;break;case "row":case "both":this._rowSizeEx=true;break;}if(_a=="row"||_a=="none"||!_a){if(this._curFormat){this._curFormat._resetOrgColSize(true,this._autofitcol_rate);}}this.autosizingtype=_a;}this.on_apply_autosizingtype();};_pGrid.on_apply_autosizingtype=function(){if(this.getElement()){this._isUserChangeHeadRowSize=false;this._isUserChangeBodyRowSize=false;this._isUserChangeSummRowSize=false;this._realrowsized_body=[];this._realrowsized_head=[];this._realrowsized_summ=[];this._recreate_contents_all(true,true,true);}};_pGrid.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.readonly){this.readonly=_a;this.on_apply_readonly();}};_pGrid.on_apply_readonly=function(_a){var _b=this.readonly;if(_b){this._stat_change("readonly",this._pseudo);}else{this._stat_change("writable",this._pseudo=="readonly"?"normal":this._pseudo);}};_pGrid.set_selectbandtype=function(_a){if(this.selectbandtype!=_a){switch(_a){case "default":case "allband":case "body":case "nohead":case "noleft":this.selectbandtype=_a;this.on_apply_selectbandtype();break;}}};_pGrid.on_apply_selectbandtype=function(){};_pGrid.set_selectchangetype=function(_a){if(this.selectchangetype!=_a){switch(_a){case "up":case "down":this.selectchangetype=_a;break;}}};_pGrid.set_selecttype=function(_a){if(this.selecttype!=_a){switch(_a){case "row":case "cell":case "area":case "multirow":case "multicell":case "multiarea":case "treecell":case "multitreecell":this.selecttype=_a;this.on_apply_selecttype();break;default:if(this.selecttype!="row"){this.selecttype="row";this.on_apply_selecttype();}break;}}};_pGrid.on_apply_selecttype=function(){this._resetSelect();this._refreshBody();this._updateSelector();};_pGrid._applySelectorScroll=function(_a,_b){var _c,_d,_e;var _f=this._curFormat;var _g=false;var _h=this._toprowpos[0];var _i=this._selectinfo.area.length>1&&this.selecttype=="multirow";if(_a[0]=="leftover0"){this._multiselect=_i?"ctrl":"shift";this._moveToCell("prev",false,true,_b,null);_g=true;}else if(_a[0]=="rightover0"){this._multiselect=_i?"ctrl":"shift";this._moveToCell("next",false,true,_b,this._selectinfo.ctrlpoint.col);_g=true;}else if(_a[0]=="leftover1"){this._multiselect=_i?"ctrl":"shift";this._moveToCell("prev",false,true,_b,this._selectinfo.ctrlpoint.col);_g=true;}else if(_a[0]=="rightover1"){this._multiselect=_i?"ctrl":"shift";this._moveToCell("next",false,true,_b,null);_g=true;}if(_a[1]=="topover0"){_d=this._selectinfo.currow-1;_c=this._begrowpos;if(_h!=_d){_e=this._jumpCurrentRow(_d);}_g=(_c!=_e);}else if(_a[1]=="bottomover0"){_d=this._selectinfo.currow+1;_c=this._begrowpos;_e=this._jumpCurrentRow(_d);_g=(_c!=_e);}else if(_a[1]=="topover1"){_d=this._selectinfo.currow-1;_c=this._begrowpos;if(_h!=_d){_e=this._jumpCurrentRow(_d);}_g=(_c!=_e);}else if(_a[1]=="bottomover1"){_d=this._selectinfo.currow+1;_c=this._begrowpos;_e=this._jumpCurrentRow(_d);_g=(_c!=_e);}return _g;};_pGrid._startAreaSizing=function(_a,_b){var _c=this._curFormat;var _d=_c._bodyrows.length;var _e=this._getAreaInfoWithPos(_a,_b);var _f=this._selectinfo.area;if(_b==0){var _g=_c._bodycells[_e.ecell];if(_g){this._selectinfo.ctrlpoint._set(_g,_e.erow,_d);}}else if(_b==1){var _g=_c._bodycells[_e.scell];if(_g){this._selectinfo.ctrlpoint._set(_g,_e.srow,_d);}}else if(_b==2){var _g=_c._bodycells[_e.ecell];if(_g){this._selectinfo.ctrlpoint._set(_g,_e.srow,_d);}}else if(_b==3){var _g=_c._bodycells[_e.scell];if(_g){this._selectinfo.ctrlpoint._set(_g,_e.erow,_d);}}};_pGrid._applyAreaSizing=function(_a,_b,_c){var _d=this._curFormat;var _e=_d._bodyrows.length;var _f=this._selectinfo.curcell;var _g=this._selectinfo.curcol;var _h=this._selectinfo.curdsrow;var _i=this._selectinfo.cursubrow;var _j=this._selectinfo.curpvt;var _k,_l,_m,_n,_o=this._selectinfo.curpvt;var _p=this._getAreaInfoWithPos(_a,_b);if(_b==0){this._setSelectedInfo(_p.scell,_p.scol,_p.srow,_p.ssubrow,null,_p);_k=_p.scell;_l=_p.scol;_m=_p.srow;_n=_p.ssubrow;}else if(_b==1){this._setSelectedInfo(_p.ecell,_p.ecol,_p.erow,_p.esubrow,null,_p);_k=_p.ecell;_l=_p.ecol;_m=_p.erow;_n=_p.esubrow;}else if(_b==2){this._setSelectedInfo(_p.scell,_p.scol,_p.erow,_p.esubrow,null,_p);_k=_p.scell;_l=_p.scol;_m=_p.erow;_n=_p.esubrow;}else if(_b==3){this._setSelectedInfo(_p.ecell,_p.ecol,_p.erow,_p.esubrow,null,_p);_k=_p.ecell;_l=_p.ecol;_m=_p.srow;_n=_p.ssubrow;}var _q;if(_c){_q="selectorsizing";}else if(_c===false){_q="selector";}if(this._selectinfo.area.length>1&&this.selecttype=="multirow"){this._multiselect="ctrl";}else{this._multiselect="shift";}retn=this._ChangeSelect(_k,_l,_m,_n,_o,false,_f,_g,_h,_i,_j,"body",_q);};_pGrid._getAreaInfoWithPos=function(_a,_b){var _c=this._getScrollLeft();var _d=this._getScrollTop();var _e=this._getScollMaxLeft();var _f=this._select_ctrl;var _g=_a.l;var _h=_g+_a.w;var _i=_a.t;var _j=_i+_a.h;var _k=this._curFormat;var _l=_k._cols;var _m=_k._bodyrows;var _n=this._getGridRowCount();var _o,_p,_q,_r,_s,_t,_u,_v,_w,_x,_y;var _z,_aa,_ab,_ac;var _ad;var _ae;var _af=this._selectinfo.ctrlpoint;var _ag,_ah;if(_f){_ag=_f._start_begarea;_ah=_f._start_endarea;}else{_ag=this._selectinfo.arearect.barea;_ah=this._selectinfo.arearect.earea;}var _ai=parseInt(this._fixed_rowcnt);var _aj=_ai>0?parseInt(this._fixed_startrow):0;var _ak=parseInt(this._fixed_endrow);var _al=parseInt(this._fixed_height);if(_ai>0){_ae=this._getHeadHeight();}else{_ae=this._getHeadHeight()-_d;}if(this.summarytype=="top"||this.summarytype=="lefttop"){_ae+=this._getSummHeight();}var _am,_an;var _ao=_k._bodycells;var _ap=_ao.length;var _aq,_o,_ar,_as,_at;var _au;var _av;_p= -1;_am=_ae;for(var _aw=_aj;_aw<_n;_aw++ ){if(_ai>0&&_aw==(_ak+1)){_am-=_d;}_an=_am+this._getRowSize(_aw);if(this._track_mode=="areaselect"){_au=(_i<_an);if(_aw==0&&_i<_am){_au=true;}}else{_au=(_am<=_i&&_i<_an);}if(_p<0&&_au){_p=this._getDataRow(_aw);for(var _ax=0;_ax<_ap;_ax++ ){_at=_ao[_ax]._area;_aq=_ao[_ax]._col;_o=_ao[_ax]._row;_ar=_ao[_ax]._colspan;_as=_ao[_ax]._rowspan;if(_ao[_ax]._area=="left"){_ad=this._client_left;}else if(_ao[_ax]._area=="right"){_ad=this._client_width-_k.rightWidth;}else{_ad=_k.leftWidth-_c;}_z=_ad+_l[_aq].left;_ab=_ad+_l[_aq+_ar-1].right;_aa=_am+_m[_o].top;_ac=_am+_m[_o+_as-1].bottom;_av=this._getSubCellRect(_aw,_ax, -1, -1,false);_z=_av.left;_aa=_av.top;_ab=_av.right;_ac=_av.bottom;if(_ai>0&&_aw<=_ak){_aa+=_d;_ac+=_d;}if(this._track_mode=="areaselect"){_au=(_z<=_g&&_g<_ab&&_i<_ac);if(_ax==0&&_g<_z){_au=true;}}else{_au=(_z<=_g&&_g<_ab&&_i<_ac);}if(_au){if(_ah!=_ag||(_ag=="body"&&_ah=="body")){if(_ag!="left"&&_c>0&&_at=="left"){continue;}if(_ag!="right"&&_c<_e&&_at=="right"){continue;}if(_ah!="right"&&_at=="right"){continue;}}_r=_ax;_t=_aq;_v=_o;if(_a.area!="right"){break;}else if(_ao[_ax]._area=="right"){break;}}}}if(this._track_mode=="areaselect"){_au=_j<_an;if((_aw+1)==_n&&_j>=_an){_au=true;}}else{_au=_am<_j&&_j<=_an;}if(_p>=0&&_au){_q=this._getDataRow(_aw);for(var _ax=0;_ax<_ap;_ax++ ){_aq=_ao[_ax]._col;_o=_ao[_ax]._row;_ar=_ao[_ax]._colspan;_as=_ao[_ax]._rowspan;if(_ao[_ax]._area=="left"){_ad=0;}else if(_ao[_ax]._area=="right"){_ad=this._client_width-_k.rightWidth;}else{_ad=0;}_av=this._getSubCellRect(_aw,_ax, -1, -1,false);_aa=_av.top;_ac=_av.bottom;if(_ai>0&&_aw<=_ak){_aa+=_d;_ac+=_d;}if(_ao[_ax]._area=="right"){_z=_av.left-_c;_ab=_av.right-_c;}else{_z=_av.left;_ab=_av.right;}if(this._track_mode=="areaselect"){_au=_z<_h&&_h<=_ab;if((_ax+1)==_ap&&_h>=_ab){_au=true;}}else{_au=_z<_h&&_h<=_ab&&_aa<_j;}if(_au){if(_ah!=_ag||(_ag=="body"&&_ah=="body")){if(_ah!="right"&&_c<_e&&_ao[_ax]._area=="right"){continue;}if(_ah!="left"&&_c>0&&_ao[_ax]._area=="left"){continue;}if(_ag!="left"&&_ao[_ax]._area=="left"){continue;}}_s=_ax;_u=_aq;_w=_o;if(_a.area!="right"){break;}else if(_ao[_ax]._area=="right"){break;}}}break;}_am=_an;}_x=epvt=this._selectinfo.curpvt;return {srow:_p,erow:_q,scell:_r,ecell:_s,scol:_t,ecol:_u,ssubrow:_v,esubrow:_w,spvt:_x,epvt:epvt};};_pGrid._getSelectRect=function(_a,_b){var _c=this._selectinfo.arearect;var _d=this._selectinfo.area;_c.left=0;_c.top=0;_c.width=0;_c.height=0;_c.barea="";_c.earea="";var _e=this._getScrollLeft();var _f=this._getScrollTop();while(_d.length){var _g=_d[_d.length-1];var _h=this._curFormat;var _i=_h._cols;var _j=_h._bodyrows;var _k=this._rowSizeListSub;var _l=_g.begcol;var _m=_g.endcol;var _n=_h.leftWidth;var _o=this._client_width-_h.rightWidth;var _p=this._fixed_startrow;var _q=this._fixed_endrow;if(_g.begrow<0){break;}if(!this._isAreaSelect()){_l=0;_m=_i.length-1;}if(_l>=0&&_m>=0){if(_a&&_i[_l]._area!=_i[_m]._area){break;}_c.barea=_i[_l]._area;_c.earea=_i[_m]._area;if(_c.barea=="right"){_c.left=_o+_i[_l].left;_c.width=_i[_m].right-_i[_l].left;}else{if(_c.barea=="left"){_c.left=_i[_l].left;}else{_c.left=_n+_i[_l].left-_e;}if(_c.earea=="left"){_c.width=_i[_m].right-_c.left;}else if(_c.earea=="body"){_c.width=(_n+_i[_m].right-_e)-_c.left;}else{_c.width=(_o+_i[_m].right)-_c.left;}}}else{_c.left=this._client_left;_c.width=this._client_width;}for(var _t=0;_t<=_g.endrow;_t++ ){var _r=0,_s=_j.length-1;if(this._hasTree){if(this._getGridRow(_t)< -2){continue;}}if(_t<_g.begrow){if(_b&&_t<_p){continue;}for(var _u=_r;_u<=_s;_u++ ){_c.top+=_k[_t*_j.length+_u];}}else{if(_t==_g.begrow){_r=_g.begsubrow[0];}if(_t==_g.endrow){_s=_g.endsubrow[_t-_g.begrow];}for(var _u=0;_u<=_s;_u++ ){if(_u<_r){_c.top+=_k[_t*_j.length+_u];}else{_c.height+=_k[_t*_j.length+_u];}}}}_c.top+=this._bodyBand._adjust_top-_f;break;}this._selectinfo.arearect=_c;return _c;};_pGrid._updateSelector=function(_a,_b){var _c=this._isAreaSelect()&&nexacro.isTouchInteraction;if(this._control_element){var _d,_e,_f,_g,_h;var _i=this._select_ctrl;if(_c){if(!_i){_i=new nexacro.GridSelector("gridselector","absolute",0,0,0,0,null,null,this);_i._setCallbackFn(this._startAreaSizing,this._applyAreaSizing,this._applySelectorScroll);_i.createComponent();_i._createButton();this._select_ctrl=_i;}if((_a=="vscroll"||_a=="hscroll")&&!_i._is_tracking){_d=this._selectinfo.arearect;if(_a=="hscroll"){if(_d.barea=="left"){if(_d.earea=="body"){_d.width-=_b;}}else if(_d.barea=="body"){_d.left-=_b;if(_d.earea=="right"){_d.width+=_b;}}}if(_a=="vscroll"){_d.top-=_b;}_e=_d.left;_f=_d.top;_g=_d.width;_h=_d.height;if(_f+_h<=this._bodyBand._adjust_top){_c=false;}}else{_d=this._getSelectRect(_i._onlyarea,true);_e=_d.left;_f=_d.top;_g=_d.width;_h=_d.height;}if(!_e&&!_f&&!_g&&!_h){_c=false;}_i.move(_e,_f,_g,_h,_a);if(_c){if(!_i._is_tracking){_i.set_visible(false);}}else{_i.set_visible(false);}}}else{if(this._select_ctrl){this._select_ctrl.destroy();this._select_ctrl=null;}}};_pGrid.set_autoupdatetype=function(_a){if(this.autoupdatetype!=_a){switch(_a){case "none":case "comboselect":case "dateselect":case "itemselect":this.autoupdatetype=_a;break;}}};_pGrid.set_cellclickbound=function(_a){if(this.cellclickbound!=_a){switch(_a){case "control":case "cell":this.cellclickbound=_a;break;}}};_pGrid.set_cellmovingtype=function(_a){if(this.cellmovingtype!=_a){switch(_a){case "none":case "col":case "col,band":case "col,merge":case "col,line":this.cellmovingtype=_a;break;}}};_pGrid.set_cellsizebandtype=function(_a){if(this.cellsizebandtype!=_a){switch(_a){case "body":case "allband":case "nohead":case "noleft":case "nohead,noleft":this.cellsizebandtype=_a;this.on_apply_cellsizebandtype();break;}}};_pGrid.on_apply_cellsizebandtype=function(){};_pGrid.set_cellsizingtype=function(_a){if(this.cellsizingtype!=_a){switch(_a){case "none":case "col":case "row":case "both":this.cellsizingtype=_a;this.on_apply_cellsizingtype();break;}}};_pGrid.on_apply_cellsizingtype=function(){this._applyResizer();};_pGrid.set_extendsizetype=function(_a){if(this.extendsizetype!=_a){var _b=false;if(this.autosizingtype=="row"||this.autosizingtype=="both"){_b=true;}switch(_a){case "none":case "col":this._rowSizeEx=_b;break;case "row":case "both":this._rowSizeEx=true;break;}this.extendsizetype=_a;this.on_apply_extendsizetype();}};_pGrid.on_apply_extendsizetype=function(){if(this.getElement()){this._recreate_contents_all(true,true,true);}};_pGrid.set_wheelscrollrow=function(_a){if(this.wheelscrollrow!=_a){this.wheelscrollrow=(isNaN(_a)?3:parseInt(_a,10));}};_pGrid.set_usecontrolkey=function(_a){_a=nexacro._toBoolean(_a);if(this.usecontrolkey!=_a){this.usecontrolkey=_a;}};_pGrid.set_treeusebutton=function(_a){if(this.treeusebutton!=_a){switch(_a){case "use":case "no":case "noclick":this.treeusebutton=_a;break;}this.on_apply_treeusebutton();}};_pGrid.set_dragscrolltype=function(_a){nexacro.Form.prototype.set_dragscrolltype.call(this,_a);};_pGrid.on_apply_treeusebutton=function(){this._refreshBody();};_pGrid.set_treeuseline=function(_a){_a=nexacro._toBoolean(_a);if(this.treeuseline!=_a){this.treeuseline=_a;this.on_apply_treeuseline();}};_pGrid.on_apply_treeuseline=function(){this._refreshBody();};_pGrid.set_treeusecheckbox=function(_a){_a=nexacro._toBoolean(_a);if(this.treeusecheckbox!=_a){this.treeusecheckbox=_a;this.on_apply_treeusecheckbox();}};_pGrid.on_apply_treeusecheckbox=function(){this._refreshBody();};_pGrid.set_treeuseimage=function(_a){_a=nexacro._toBoolean(_a);if(this.treeuseimage!=_a){this.treeuseimage=_a;this.on_apply_treeuseimage();}};_pGrid.on_apply_treeuseimage=function(){this._refreshBody();};_pGrid.set_treeuseexpandkey=function(_a){_a=nexacro._toBoolean(_a);if(this.treeuseexpandkey!=_a){this.treeuseexpandkey=_a;}};_pGrid.set_treeinitstatus=function(_a){this.treeinitstatus=_a;var _b,_c;switch(_a){case "collapse,null":_b=false,_c=false;break;case "expand,null":_b=true,_c=false;break;case "collapse,all":_b=false,_c=true;break;case "expand,all":_b=true,_c=true;break;}this.on_apply_treeinitstatus(_b,_c);};_pGrid.on_apply_treeinitstatus=function(_a,_b){if(!this._hasTree){return;}var _c=this._curFormat;var _d=_c._bodycells;var _e=_d.length;var _f=this._treeIndexes;var _g=this._treeStates;this._org_treeStates=[];if(!_b){var _h=false;var _i;for(var _o=_f.length-1;_o>=0;_o-- ){var _j,_k;_i=this.getDatasetRow(_o);for(var _p=0;_p<_e;_p++ ){_j=_d[_p];_k=_j._getEdittype(_i);if(_k=="tree"){break;}}if(_j){var _l,_m;if(_j.treestate._bindtype!=0){_l=_j._getAttrValue(_j.treestate,_i);}if(!_l||_l==""){_m=_f.length;if(_a){if(this._setTreeState(_o,1,false,"null")>0){_o+=(_f.length-_m+1);_h=true;}}else{if(this._setTreeState(_o,0,false,"null")>0){_h=true;}}}else{_m=_f.length;var _n=this._setTreeState(_o,_l,false,"null_value");if(_n==2){if((_f.length-_m)>0){_o+=(_f.length-_m+1);}_h=true;}else if(_n==1){_h=true;}}}}if(_h==true){this._recreate_contents_all(false,false,false,true);}}else{var _h=false,_m;for(var _o=_f.length-1;_o>=0;_o-- ){_m=_f.length;if(_a){if(this._setTreeState(_o,1,false,"all")>0){_o+=(_f.length-_m+1);_h=true;}}else{if(this._setTreeState(_o,0,false,"all")>0){_h=true;}}}if(!_a){for(var _o=_g.length-1;_o>=0;_o-- ){var _l=this._getOrgTreeStates(_o);if(_l==2){_g[_o]=2;}}}if(_h==true){if(this.autosizingtype=="col"||this.autosizingtype=="both"){this._recreate_contents_all(false,true,false);}else{this._recreate_contents_all(false,false,false,true);}}}};_pGrid.set_treepathdelimiter=function(_a){if(this.treepathdelimiter!=_a){this.treepathdelimiter=_a;}};_pGrid.set_useinputpanel=function(_a){if(this.useinputpanel!=_a){this.useinputpanel=_a;}};_pGrid.set_usesoftkeyboard=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.usesoftkeyboard){this.usesoftkeyboard=_a;}};_pGrid.on_apply_prop_enable=function(_a){if(!_a){this._enable=_a;}nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(this._is_created){this._refreshAll();}};_pGrid.on_apply_prop_rtldirection=function(){nexacro.Component.prototype.on_apply_prop_rtldirection.call(this);var _a=this._rtldirection;if(this._headBand){this._headBand._setRtlDirection(_a);}if(this._bodyBand){this._bodyBand._setRtlDirection(_a);}if(this._summBand){this._summBand._setRtlDirection(_a);}if(this.vscrollbar){this.vscrollbar._setRtlDirection(this._rtldirection);}if(this.hscrollbar){this.hscrollbar._setRtlDirection(this._rtldirection);}};_pGrid.createFormat=function(){var _a=0;var _b=this._binddataset;var _c=0;var _d=0;var _e=0;var _f=0;if(_b){_d=_b.getColCount();}var _g;if(_d>0){_g="<Formats>\n";_g+="<Format id=\"default\">\n";_g+="<Columns>\n";{for(_c=0;_c<_d;_c++ ){_g+="<Column size=\"";_g+="80";_g+="\"/>\n";}}_g+="</Columns>\n";_g+="<Rows>\n";{_g+="<Row band=\"head\" size=\"";_g+="24";_g+="\"/>\n";_g+="<Row band=\"body\" size=\"";_g+="24";_g+="\"/>\n";}_g+="</Rows>\n";_g+="<Band id=\"head\">\n";{for(_c=0;_c<_d;_c++ ){_g+="<Cell col=\"";_g+=_c.toString();_g+="\" displaytype=\"normal\" text=\"";_g+=_b.getColID(_c);_g+="\"/>\n";}}_g+="</Band>\n";_g+="<Band id=\"body\">\n";{for(_c=0;_c<_d;_c++ ){_g+="<Cell col=\"";_g+=_c.toString();_g+="\" displaytype=\"normal\" text=\"bind:";_g+=_b.getColID(_c);_g+="\"/>\n";}}_g+="</Band>\n";_g+="</Format>\n";_g+="</Formats>\n";}else{_g="<Formats>\n";_g+="<Format id=\"default\">\n";_g+="</Format>\n";_g+="</Formats>\n";}this.set_formats(_g);return 0;};_pGrid.setFormat=function(_a){var _b=this._formats[_a];if(_b){if(_b!=this._curFormat){this.set_formatid(_a);return true;}}else{this.formatid="";this._curFormat=null;this._destroyBands();}return false;};_pGrid.getFormatString=function(){return this.formats;};_pGrid.getCurFormatString=function(_a){if(this._curFormat){if(_a){return this._curFormat._getOrgFormatStr();}else{return this._curFormat._getFormatStr();}}else{return this.formats;}};_pGrid.getCellPos=function(){return this._selectinfo.curcell;};_pGrid.setCellPos=function(_a){return this._moveToPosCell(this._selectinfo.curdsrow,_a);};_pGrid.getCellCount=function(_a){if(!this._curFormat){return 0;}_a=_a.toLowerCase();var _b;if(_a=="head"){_b=this._curFormat._headcells;}else if(_a=="summ"||_a=="summary"){_b=this._curFormat._summcells;}else{_b=this._curFormat._bodycells;}if(_b){return _b.length;}return 0;};_pGrid.getCellRect=function(_a,_b,_c){return this.getSubCellRect(_a,_b, -1,_c);};_pGrid.getSubCellRect=function(_a,_b,_c,_d){return this._getSubCellRect(_a,_b,_c,_d,true);};_pGrid._getSubCellRect=function(_a,_b,_c,_d,_e){var _f={"left":0,"top":0,"right":0,"bottom":0,"width":0,"height":0};_f.left=0;_f.top=0;_f.right=0;_f.bottom=0;_f.width=0;_f.height=0;if(_a>=0&&_a<this._rowcount){if(this._curFormat&&this._curFormat._bodycells){var _g=null;var _h=this._curFormat._bodycells[_b];if(_h&&_c>=0){_g=_h;_h=_h._subcells[_c];}if(_h){var _i=0;var _j=0;var _k=0;var _l=this._getHeadHeight();var _m=this._curFormat._cols;if(this.summarytype=="top"||this.summarytype=="lefttop"){_l+=this._getSummHeight();}var _n=this._curFormat._bodyrows;var _o=_n.length;var _p=this._getGridRowCount();var _q=(_g)?_g._row+_h._row:_h._row;var _r=(_g)?_g._col+_h._col:_h._col;var _s=_h._rowspan;var _t=_h._colspan;var _u=this._rowSizeListSub;var _v;for(var _aa=0;_aa<_p;_aa++ ){_v=_aa;if(this._hasTree){_v=this._treeIndexes[_v];}var _w=_v*_o;if(_v==_a){for(var _ab=0;_ab<_q;_ab++ ){_l+=_u[_w++ ];}_i=_l;for(var _ac=0;_ac<_s;_ac++ ){_l+=_u[_w++ ];}break;}else{for(var _ac=0;_ac<_o;_ac++ ){_l+=_u[_w+_ac];}}}var _x=0;for(var _aa=0;_aa<_r;_aa++ ){_x+=_m[_aa].size;}_j=_x;_x=0;for(var _aa=0;_aa<_r+_t;_aa++ ){_x+=_m[_aa].size;}_k=_x;if(_h._area=="body"||_h._area==""){_j-=this._getScrollLeft();_k-=this._getScrollLeft();}_i-=this._getScrollTop();_l-=this._getScrollTop();if(_e){if(_j<0){_j=0;}if(_k<0){_k=0;}if(_i<0){_i=0;}if(_l<0){_l=0;}}_f.left=_j;_f.right=_k;_f.top=_i;_f.bottom=_l;_f.width=_k-_j;_f.height=_l-_i;}}}else if(_a== -1){if(this._curFormat&&this._curFormat._headcells){var _h=this._curFormat._headcells[_b];if(_h&&_c>=0){_h=_h._subcells[_c];}if(_h){var _i=0;var _j=0;var _k=0;var _l=0;var _m=this._curFormat._cols;var _y=this._curFormat._headrows;var _o=_y.length;var _q=_h._row;var _r=_h._col;var _s=_h._rowspan;var _t=_h._colspan;for(var _ab=0;_ab<_q;_ab++ ){_l+=_y[_ab].size;}_i=_l;for(_ab=0;_ab<_s;_ab++ ){_l+=_y[_ab+_q].size;}var _x=0;for(var _aa=0;_aa<_r;_aa++ ){_x+=_m[_aa].size;}_j=_x;_x=0;for(var _aa=0;_aa<_r+_t;_aa++ ){_x+=_m[_aa].size;}_k=_x;if(_h._area=="body"||_h._area==""){_j-=this._getScrollLeft();_k-=this._getScrollLeft();}if(_e){if(_j<0){_j=0;}if(_k<0){_k=0;}}_f.left=_j;_f.right=_k;_f.top=_i;_f.bottom=_l;_f.width=_k-_j;_f.height=_l-_i;}}}else if(_a== -2){if(this._curFormat&&this._curFormat._summcells){var _h=this._curFormat._summcells[_b];if(_h&&_c>=0){_h=_h._subcells[_c];}if(_h){var _i=0;var _j=0;var _k=0;var _l=0;var _m=this._curFormat._cols;if(this.summarytype=="top"||this.summarytype=="lefttop"){_l+=this._getHeadHeight();}else{_l=this._client_top+this._client_height-this._getSummHeight();}var _z=this._curFormat._summrows;var _o=_z.length;var _q=_h._row;var _r=_h._col;var _s=_h._rowspan;var _t=_h._colspan;for(var _ab=0;_ab<_q;_ab++ ){_l+=_z[_ab].size;}_i=_l;for(_ab=0;_ab<_s;_ab++ ){_l+=_z[_ab+_q].size;}var _x=0;for(var _aa=0;_aa<_r;_aa++ ){_x+=_m[_aa].size;}_j=_x;_x=0;for(var _aa=0;_aa<_r+_t;_aa++ ){_x+=_m[_aa].size;}_k=_x;if(_h._area=="body"||_h._area==""){_j-=this._getScrollLeft();_k-=this._getScrollLeft();}if(_e){if(_j<0){_j=0;}if(_k<0){_k=0;}}_f.left=_j;_f.right=_k;_f.top=_i;_f.bottom=_l;_f.width=_k-_j;_f.height=_l-_i;}}}return _f;};_pGrid.getCellText=function(_a,_b,_c){if(_a>=0){if(this._curFormat&&this._curFormat._bodycells){var _d=this._curFormat._bodycells[_b];if(_d){if(this._hasTree){if(_a<this._treeIndexes.length){_a=this._treeIndexes[_a];return _d._getDisplayText(_a);}}else{if(_a<this._rowcount){return _d._getDisplayText(_a);}}}}}else if(_a== -1){if(this._curFormat&&this._curFormat._headcells){var _d=this._curFormat._headcells[_b];if(_d){return _d._getDisplayText(this._currentDSrow);}}}else if(_a== -2){if(this._curFormat&&this._curFormat._summcells){var _d=this._curFormat._summcells[_b];if(_d){return _d._getDisplayText(this._currentDSrow);}}}};_pGrid.getCellValue=function(_a,_b,_c){if(_c==undefined){_c=0;}if(_a>=0){if(this._curFormat&&this._curFormat._bodycells){var _d=this._curFormat._bodycells[_b];if(_d){if(this._hasTree){if(_a<this._treeIndexes.length){_a=this._treeIndexes[_a];return _d._getValue(_a);}}else{if(_a<this._rowcount){return _d._getValue(_a);}}}}}else if(_a== -1){if(this._curFormat&&this._curFormat._headcells){var _d=this._curFormat._headcells[_b];if(_d){return _d._getValue(this._currentDSrow);}}}else if(_a== -2){if(this._curFormat&&this._curFormat._summcells){var _d=this._curFormat._summcells[_b];if(_d){return _d._getValue(this._currentDSrow);}}}};_pGrid.getSubCellCount=function(_a,_b){var _c=this._curFormat;_a=_a.toLowerCase();if(_c){var _d;if(_a=="head"){_d=_c._headcells;}else if(_a=="summ"||_a=="summary"){_d=_c._summcells;}else{_d=_c._bodycells;}if(_d&&_d.length>_b&&_b>=0){var _e=_d[_b];return _e._subcells.length;}}return 0;};_pGrid.getSubCellProperty=function(_a,_b,_c,_d){var _e=this._curFormat;if(!_e){return undefined;}return _e.getSubCellProperty(_a,_b,_c,_d);};_pGrid.getSubCellText=function(_a,_b,_c,_d){if(_a>=0){if(this._curFormat&&this._curFormat._bodycells){if(_b>=0&&_b<this._curFormat._bodycells.length){var _e=this._curFormat._bodycells[_b];if(_e&&_c>=0&&_c<_e._subcells.length){if(this._hasTree){if(_a<this._treeIndexes.length){_a=this._treeIndexes[_a];return _e._subcells[_c]._getDisplayText(_a);}}else{if(_a<this._rowcount){return _e._subcells[_c]._getDisplayText(_a);}}}}}}else if(_a== -1){if(this._curFormat&&this._curFormat._headcells){var _e=this._curFormat._headcells[_b];if(_e&&_c>=0&&_c<_e._subcells.length){return _e._subcells[_c]._getDisplayText(this._currentDSrow);}}}else if(_a== -2){if(this._curFormat&&this._curFormat._summcells){var _e=this._curFormat._summcells[_b];if(_e&&_c>=0&&_c<_e._subcells.length){return _e._subcells[_c]._getDisplayText(this._currentDSrow);}}}};_pGrid.getSubCellValue=function(_a,_b,_c,_d){if(_a>=0){if(this._curFormat&&this._curFormat._bodycells){if(_b>=0&&_b<this._curFormat._bodycells.length){var _e=this._curFormat._bodycells[_b];if(_e&&_c>=0&&_c<_e._subcells.length){if(this._hasTree){if(_a<this._treeIndexes.length){_a=this._treeIndexes[_a];return _e._subcells[_c]._getValue(_a);}}else{if(_a<this._rowcount){return _e._subcells[_c]._getValue(_a);}}}}}}else if(_a== -1){if(this._curFormat&&this._curFormat._headcells){var _e=this._curFormat._headcells[_b];if(_e&&_c>=0&&_c<_e._subcells.length){return _e._subcells[_c]._getValue(this._currentDSrow);}}}else if(_a== -2){if(this._curFormat&&this._curFormat._summcells){var _e=this._curFormat._summcells[_b];if(_e&&_c>=0&&_c<_e._subcells.length){return _e._subcells[_c]._getValue(this._currentDSrow);}}}};_pGrid.setSubCellProperty=function(_a,_b,_c,_d,_e){var _f=this._curFormat;if(!_f){return false;}var _g=_f.setSubCellProperty(_a,_b,_c,_d,_e);if(_g){_f._clearCellStyleCache(_a,_b);this._refreshCell(_a,_b, -1,true);}return (_g!=null);};_pGrid.setFormatColProperty=function(_a,_b,_c){if(_b&&this._curFormat){_b=_b.toLowerCase();if(this._curFormat.setFormatColProperty(_a,_b,_c)){if(_b=="band"){this._autofitcol_rate=[];this._recreate();}else if(_b=="size"){if(this.enableredraw){this._updateColSize(_a);}else{if(!this._enable_redraw_history["updatecolsize"]){this._enable_redraw_history["updatecolsize"]=[];}this._enable_redraw_history["updatecolsize"].push(_a);}}else{this._recreate_contents_all(true,false,false);}return true;}}return false;};_pGrid.setFormatRowProperty=function(_a,_b,_c){if(_b&&this._curFormat){_b=_b.toLowerCase();if(this._curFormat.setFormatRowProperty(_a,_b,_c)){if(_b=="band"||_b=="size"){this._isUserChangeHeadRowSize=false;this._isUserChangeSummRowSize=false;this._isUserChangeBodyRowSize=false;this._realrowsized_body=[];this._realrowsized_head=[];this._realrowsized_summ=[];this._recreate();}else{this._recreate_contents_all(false,false,false);}return true;}}return false;};_pGrid.getFormatColProperty=function(_a,_b){if(this._curFormat){return this._curFormat.getFormatColProperty(_a,_b);}return null;};_pGrid.getFormatRowProperty=function(_a,_b){if(this._curFormat){return this._curFormat.getFormatRowProperty(_a,_b);}return null;};_pGrid.getFormatColCount=function(){if(this._curFormat){return this._curFormat._cols.length;}return 0;};_pGrid.getFormatRowCount=function(){if(this._curFormat){var _a=this._curFormat;var _b=0;if(_a._headrows){_b+=_a._headrows.length;}if(_a._bodyrows){_b+=_a._bodyrows.length;}if(_a._summrows){_b+=_a._summrows.length;}return _b;}return 0;};_pGrid.getFormatColSize=function(_a){if(this._curFormat){if(this._curFormat._cols.length>0&&this._curFormat._cols.length>_a){var _b=this._curFormat._cols[_a];if(_b){return _b.orgsize;}}}return  -1;};_pGrid.getFormatRowSize=function(_a){if(this._curFormat){if(_a<0){return  -1;}var _b=0;var _c=this._curFormat._headrows;if(_c){if(_c.length>_a){var _d=_c[_a];return _d.orgsize;}_b+=_c.length;}if(this.summarytype=="top"||this.summarytype=="lefttop"){_c=this._curFormat._summrows;if(_c){if(_c.length+_b>_a){var _d=_c[_a-_b];return _d.orgsize;}_b+=_c.length;}_c=this._curFormat._bodyrows;if(_c){if(_c.length+_b>_a){var _d=_c[_a-_b];return _d.orgsize;}}}else{_c=this._curFormat._bodyrows;if(_c){if(_c.length+_b>_a){var _d=_c[_a-_b];return _d.orgsize;}_b+=_c.length;}_c=this._curFormat._summrows;if(_c){if(_c.length+_b>_a){var _d=_c[_a-_b];return _d.orgsize;}}}}return  -1;};_pGrid._isUserChangeHeadRowSize=false;_pGrid._isUserChangeBodyRowSize=false;_pGrid._isUserChangeSummRowSize=false;_pGrid._isUserChangeColSize=false;_pGrid.setRealColSize=function(_a,_b,_c,_d){if(arguments.length==3){_d=_c;_c=_b;_b=_a;_a= -9;}else if(arguments.length==2){_c=_b;_b=_a;_a= -9;_d=true;}this._isUserChangeColSize=true;return this._setColSize(_a,_b,_c,_d,true);};_pGrid.setRealRowSize=function(_a,_b,_c,_d){var _e=this._curFormat;if(_d==undefined){_d=true;}if(_c==undefined){_c=_b;_b= -1;}var _f="none";if(_d){if(_a>=0){_f="body";}else if(_a== -1){_f="head";}else if(_a== -2){_f="summ";}}else{if(_e._headrows){if(_a<_e._headrows.length){_f="head";}else{_a-=_e._headrows.length;}}if(_f=="none"){if(this.summarytype=="top"||this.summarytype=="lefttop"){if(_e._summrows){if(_a<_e._summrows.length){_f="summ";}else{_a-=_e._headrows.length;}}if(_f=="none"){_f="body";}}else{if(_e._bodyrows){var _g=(this._hasTree)?this._treeIndexes.length:this._rowcount;if(_a<_g){_f="body";}else{_a-=_g;}}if(_f=="none"){if(_e._summrows){if(_a<_e._summrows.length){_f="summ";}}}}}}var _h=false;if(_f=="body"){if(_e&&_e._bodyrows){var _i=_a;if(this._hasTree){if(_i>=this._treeIndexes.length){return false;}_i=this._treeIndexes[_i];}else{if(_i>=this._rowcount){return false;}}var _j=_e._bodyrows;var _k=_j.length;var _l=this._rowSizeList;var _m=this._rowSizeListSub;if(_b>=0){if(_b<_k){this._is_variable_bodyrowsize=true;var _n=(_i*_k)+_b;var _o=_m[_n];var _p=_c;if(_o!=_p){_m[_n]=_p;_l[_i]+=(_p-_o);this._realrowsized_body[_n]=true;_h=true;this._updateRowSizeExtendEx(_e._bodyrows,_l,_m,_i,true);if(this.enableredraw){if(this.extendsizetype!="row"&&this.extendsizetype!="both"){if(this._bodyBand){this._bodyBand._recreate_contents();}}else{this._updateRowSize(_a,_b);}}else{if(this.extendsizetype!="row"&&this.extendsizetype!="both"){this._enable_redraw_history["recreate_body"]=true;}else{if(!this._enable_redraw_history["updaterowsize"]){this._enable_redraw_history["updaterowsize"]=[];}this._enable_redraw_history["updaterowsize"].push([_a,_b]);}}this._isUserChangeBodyRowSize=true;}}else{return false;}}else{if(_i<_l.length){this._is_variable_bodyrowsize=true;var _n,_o,_p;for(var _q=0;_q<_k;_q++ ){_n=(_i*_k)+_q;_o=_m[_n];_p=_c;if(_o!=_p){_m[_n]=_p;_l[_i]+=(_p-_o);this._realrowsized_body[_n]=true;_h=true;}}if(_h){this._updateRowSizeExtendEx(_e._bodyrows,_l,_m,_i,true);if(this.enableredraw){if(this._bodyBand){this._bodyBand._recreate_contents();}}else{this._enable_redraw_history["recreate_body"]=true;}this._isUserChangeBodyRowSize=true;}}else{return false;}}}}else if(_f=="head"){if(_e&&_e._headrows){var _j=_e._headrows;var _k=_j.length;var _l=this._rowHeadList;var _m=this._rowHeadListSub;if(_b>=0){if(_b<_k){var _n=_b;var _o=_m[_n];var _p=_c;if(_o!=_p){_m[_n]=_p;_l[0]+=(_p-_o);this._realrowsized_head[_n]=true;_h=true;this._updateRowSizeExtendEx(_e._headrows,_l,_m,0);}}else{return false;}}else{var _n,_o,_p;for(var _q=0;_q<_k;_q++ ){_n=_q;_o=_m[_n];_p=_c;if(_o!=_p){_m[_n]=_p;_l[0]+=(_p-_o);this._realrowsized_head[_n]=true;_h=true;}}if(_h==true){this._updateRowSizeExtendEx(_e._headrows,_l,_m,0);}}if(_h){if(this.enableredraw){if(this._headBand){this._headBand._recreate_contents();}this._resizeBand();}else{this._enable_redraw_history["recreate_head"]=true;this._enable_redraw_history["resize_band"]=true;}this._isUserChangeHeadRowSize=true;}}}else if(_f=="summ"){if(_e&&_e._summrows){var _j=_e._summrows;var _k=_j.length;var _l=this._rowSummList;var _m=this._rowSummListSub;if(_b>=0){if(_b<_k){var _n=_b;var _o=_m[_n];var _p=_c;if(_o!=_p){_m[_n]=_p;_l[0]+=(_p-_o);this._realrowsized_summ[_n]=true;_h=true;this._updateRowSizeExtendEx(_e._summrows,_l,_m,0);}}else{return false;}}else{var _n,_o,_p;for(var _q=0;_q<_k;_q++ ){_n=_q;_o=_m[_n];_p=_c;if(_o!=_p){_m[_n]=_p;_l[0]+=(_p-_o);this._realrowsized_summ[_n]=true;_h=true;}}if(_h==true){this._updateRowSizeExtendEx(_e._summrows,_l,_m,0);}}if(_h==true){if(this.enableredraw){if(this._summBand){this._summBand._recreate_contents();}this._resizeBand();}else{this._enable_redraw_history["recreate_summ"]=true;this._enable_redraw_history["resize_band"]=true;}this._isUserChangeSummRowSize=true;}}}return _h;};_pGrid.getRealColSize=function(_a,_b){var _c=this._curFormat;var _d=this._getColFixCnt("left");var _e=this._getColFixCnt("body");var _f=this._getColFixCnt("right");var _g=_c._cols;var _h=_g.length;var _i="body";if(_b==true){if(_a>=0){_a+=_d;}else if(_a== -2){_a+=_d;_a+=_e;}if(_h<=_a){return  -1;}}return _g[_a].size;};_pGrid.getRealRowSize=function(_a,_b,_c){var _d=this._curFormat;if(_c==undefined){_c=true;}var _e="none";if(_c){if(_a>=0){_e="body";}else if(_a== -1){_e="head";}else if(_a== -2){_e="summ";}}else{if(_d._headrows){if(_a<_d._headrows.length){_e="head";}else{_a-=_d._headrows.length;}}if(_e=="none"){if(this.summarytype=="top"||this.summarytype=="lefttop"){if(_d._summrows){if(_a<_d._summrows.length){_e="summ";}else{_a-=_d._headrows.length;}}if(_e=="none"){_e="body";}}else{if(_d._bodyrows){var _f=(this._hasTree)?this._treeIndexes.length:this._rowcount;if(_a<_f){_e="body";}else{_a-=_f;}}if(_e=="none"){if(_d._summrows){if(_a<_d._summrows.length){_e="summ";}}}}}}if(_e=="body"){if(_d&&_d._bodyrows){var _g=_a;if(this._hasTree){if(_g>=this._treeIndexes.length){return 0;}_g=this._treeIndexes[_g];}else{if(_g>=this._rowcount){return 0;}}var _h=_d._bodyrows;if(_b>=0){if(_b<_h.length){return this._rowSizeListSub[_g*_h.length+_b];}else{return 0;}}else{if(_g<this._rowSizeList.length){return this._rowSizeList[_g];}else{return 0;}}}}else if(_e=="head"){if(_d&&_d._headrows){var _h=_d._headrows;if(_b>=0){if(_b<_h.length){return this._rowHeadListSub[_b];}else{return 0;}}else{return this._rowHeadList[0];}}}else if(_e=="summ"){if(_d&&_d._summrows){var _h=_d._summrows;if(_b>=0){if(_b<_h.length){return this._rowSummListSub[_b];}else{return 0;}}else{return this._rowSummList[0];}}}return 0;};_pGrid.getRealColFullSize=function(_a){var _b=this._curFormat;var _c=0;if(!_a){var _d=this._getColFixCnt("left");for(var _g=0;_g<_d;_g++ ){_c+=this.getRealColSize( -1,_g);}var _e=this._getColFixCnt("body");for(var _g=0;_g<_e;_g++ ){_c+=this.getRealColSize(_d+_g);}var _f=this._getColFixCnt("right");for(var _g=0;_g<_f;_g++ ){_c+=this.getRealColSize(_d+_e+_g);}}else{_a=_a.toLowerCase();if(_a=="left"){var _d=this._getColFixCnt("left");for(var _g=0;_g<_d;_g++ ){_c+=this.getRealColSize(_g);}}else if(_a=="body"){var _d=this._getColFixCnt("left");var _e=this._getColFixCnt("body");for(var _g=0;_g<_e;_g++ ){_c+=this.getRealColSize(_d+_g);}}else if(_a=="right"){var _d=this._getColFixCnt("left");var _e=this._getColFixCnt("body");var _f=this._getColFixCnt("right");for(var _g=0;_g<_f;_g++ ){_c+=this.getRealColSize(_d+_e+_g);}}}return _c;};_pGrid.getRealRowFullSize=function(_a){if(!_a){var _b=(this._hasTree)?this._treeIndexes.length:this._rowcount;var _c=0;for(var _d=0;_d<_b;_d++ ){_c+=this.getRealRowSize(_d);}_c+=this.getRealRowSize( -1);_c+=this.getRealRowSize( -2);return _c;}else{_a=_a.toLowerCase();if(_a=="body"){var _b=(this._hasTree)?this._treeIndexes.length:this._rowcount;var _c=0;for(var _d=0;_d<_b;_d++ ){_c+=this.getRealRowSize(_d);}return _c;}else if(_a=="head"){return this.getRealRowSize( -1);}else if(_a=="summ"||_a=="summary"){return this.getRealRowSize( -2);}}return 0;};_pGrid.__createDefualtColFormat=function(_a){var _b;_b="<Formats>\n";_b+="<Format id=\"default\">\n";_b+="<Columns>\n";_b+="<Column size=\"40\"/>\n";_b+="</Columns>\n";if(_a=="head"){_b+="<Rows>\n";_b+="<Row size=\"24\" band=\"head\"/>";_b+="</Rows>\n";_b+="<Band id=\"head\">\n";_b+="<Cell/>\n";_b+="</Band>\n";}else if(_a=="summ"||_a=="summary"){_b+="<Rows>\n";_b+="<Row size=\"24\" band=\"summ\"/>";_b+="</Rows>\n";_b+="<Band id=\"summary\">\n";_b+="<Cell/>\n";_b+="</Band>\n";}else if(_a=="body"){_b+="<Rows>\n";_b+="<Row size=\"24\" band=\"body\"/>";_b+="</Rows>\n";_b+="<Band id=\"body\">\n";_b+="<Cell/>\n";_b+="</Band>\n";}_b+="</Format>\n";_b+="</Formats>\n";this.set_formats(_b);return 0;};_pGrid.appendContentsRow=function(_a,_b){if(!_a){_a="body";}if(typeof (_a)=="number"){if(_a== -1){_a="head";}else if(_a== -2){_a="summ";}else if(_a>=0){_a="body";}}_a=_a.toLowerCase();if(!this._curFormat){return this.__createDefualtColFormat(_a);}if(!_b==undefined){_b=true;}if(_b==false){_a=this._getLastRowBand();}var _c=this._curFormat.appendContentsRow(_a,_b);if(_c>=0){this._recreate();this._initSelect();if(_a=="body"||_a>=0){if(rows=this._curFormat._headrows){_c+=rows.length;}if(this.summarytype=="top"||this.summarytype=="lefttop"){if(rows=this._curFormat._summrows){_c+=rows.length;}}}else if(_a=="summ"||_a=="summary"||_a== -2){if(rows=this._curFormat._headrows){_c+=rows.length;}if(this.summarytype!="top"&&this.summarytype!="lefttop"){if(rows=this._curFormat._bodyrows){_c+=rows.length;}}}}return _c;};_pGrid.appendContentsCol=function(_a,_b){if(!this._curFormat||(!isNaN(parseInt(_a))&&_a< -2)){return  -1;}this._autofitcol_rate=[];var _c=this._curFormat.appendContentsCol(_a,_b);if(_c>=0){this._recreate();}return _c;};_pGrid.insertContentsRow=function(_a,_b,_c){if(!this._curFormat){return  -1;}if(arguments.length==1){_b=_a;_a="body";}var _d=this._curFormat.insertContentsRow(_a,_b,_c);if(_d>=0){this._recreate();if(_a=="body"||_a>=0){if(rows=this._curFormat._headrows){_d+=rows.length;}if(this.summarytype=="top"||this.summarytype=="lefttop"){if(rows=this._curFormat._summrows){_d+=rows.length;}}}else if(_a=="summ"||_a=="summary"||_a== -2){if(rows=this._curFormat._headrows){_d+=rows.length;}if(this.summarytype!="top"&&this.summarytype!="lefttop"){if(rows=this._curFormat._bodyrows){_d+=rows.length;}}}}return _d;};_pGrid.insertContentsCol=function(_a,_b,_c){if(!this._curFormat){return  -1;}this._autofitcol_rate=[];var _d=this._curFormat.insertContentsCol(_a,_b,_c);if(_d>=0){this._recreate();}return _d;};_pGrid.deleteContentsRow=function(_a,_b,_c){if(!this._curFormat){return  -1;}if(arguments.length==1){_b=_a;_a="body";}var _d=this._curFormat.deleteContentsRow(_a,_b,_c);if(_d>=0){this._recreate();}return _d;};_pGrid.deleteContentsCol=function(_a,_b,_c){if(!this._curFormat){return  -1;}this._autofitcol_rate=[];var _d=this._curFormat.deleteContentsCol(_a,_b,_c);if(_d>=0){this._recreate();}return _d;};_pGrid.mergeContentsCell=function(_a,_b,_c,_d,_e,_f,_g){if(!this._curFormat){return  -1;}_g=nexacro._toBoolean(_g);var _h=this._curFormat.mergeContentsCell(_a,_b,_c,_d,_e,_f,_g);if(_h>=0){this._recreate();}return _h;};_pGrid.splitContentsCell=function(_a,_b,_c,_d,_e,_f){if(!this._curFormat){return  -1;}else{_f=nexacro._toBoolean(_f);var _g=this._curFormat.splitContentsCell(_a,_b,_c,_d,_e,_f);if(_g>0){this._recreate();}return _g;}};_pGrid.setBandProperty=function(_a,_b,_c){var _d=this._curFormat;if(!_d){return false;}_a=_a.toLowerCase();var _e=_d.setBandProperty(_a,_b,_c);if(_e){_a=_a.toLowerCase();if(_a=="body"){this._refreshBody(true);}else if(_a=="head"){this._refreshHead(true);}else{this._refreshSumm(true);}}return (_e!=null);};_pGrid.getBandProperty=function(_a,_b){var _c=this._curFormat;if(!_c){return null;}_a=_a.toLowerCase();return _c.getBandProperty(_a,_b);};_pGrid.setCellProperty=function(_a,_b,_c,_d){var _e=this._curFormat;if(!_e){return false;}_a=_a.toLowerCase();var _f=_e.setCellProperty(_a,_b,_c,_d);if(_f){_e._clearCellStyleCache(_a,_b);if(_c=="displaytype"&&_d=="tree"){this._setTreeCellinfo(_f);this._setTree(true);}else if(_c=="autosizecol"||_c=="autosizerow"){this._recreate_contents_all(true,true,false);}else if(_c=="text"){if(_a=="head"&&this._headAutoSize){this._recreate_contents_all(true,true,false);}else if(_a=="body"&&this._bodyAutoSize){this._recreate_contents_all(true,true,false);}else if(_a.indexOf("summ")>=0&&this._summAutoSize){this._recreate_contents_all(true,true,false);}else{this._refreshCell(_a,_b, -1,true,true);}}else if(_c=="suppress"){if(_d!=0){this._is_use_suppress=true;}else{_f._clearSuppressInfo();var _g=this._curFormat._bodycells;var _h=_g?_g.length:0;var _i;this._is_use_suppress=false;for(var _k=0;_k<_h;_k++ ){_i=_g[_k];if(_i.suppress!=0){this._is_use_suppress=true;break;}}}this._refreshBody();}else if(_c=="suppressalign"&&this._is_use_suppress){this._destroyOverlayElements();this._refreshBody();}else{var _j=false;if(_c=="displaytype"||_c=="editdisplay"||_c=="combodisplay"||_c=="calendardisplay"||_c=="edittype"){this._changeDisplayer=true;}else if(_c=="wordwrap"){_j=true;if(_d!="none"){if(_a=="head"){this._is_head_wordwrap=true;}if(_a=="body"){this._is_body_wordwrap=true;}if(_a.indexOf("summ")>=0){this._is_head_wordwrap=true;}}else{var _g,_h,_i;if(_a=="body"){_g=this._curFormat._bodycells;_h=_g?_g.length:0;this._is_body_wordwrap=false;for(var _k=0;_k<_h;_k++ ){_i=_g[_k];if(_i.wordwrap!="none"){this._is_body_wordwrap=true;break;}}}if(_a=="head"){_g=this._curFormat._headcells;_h=_g?_g.length:0;this._is_head_wordwrap=false;for(var _k=0;_k<_h;_k++ ){_i=_g[_k];if(_i.wordwrap!="none"){this._is_head_wordwrap=true;break;}}}if(_a=="summ"){_g=this._curFormat._summcells;_h=_g?_g.length:0;this._is_summ_wordwrap=false;for(var _k=0;_k<_h;_k++ ){_i=_g[_k];if(_i.wordwrap!="none"){this._is_summ_wordwrap=true;break;}}}}}else if(_c=="tooltiptext"){_j=true;}this._refreshCell(_a,_b, -1,true,_j);this._changeDisplayer=false;}}return (_f!=null);};_pGrid.getCellProperty=function(_a,_b,_c){var _d=this._curFormat;if(!_d){return null;}_a=_a.toLowerCase();return _d.getCellProperty(_a,_b,_c);};_pGrid.autoFitRow=function(_a){};_pGrid.autoFitCol=function(_a){var _b=this.autofittype;this.autofittype="col";if(_a){this.autofittype=_a;}if(this._curFormat){this._curFormat._resetOrgColSize(true,this._autofitcol_rate);}var _c=this._applyAutofittype(true);this.autofittype=_b;return _c;};_pGrid.autoSizeRow=function(_a,_b,_c,_d){if(!this._binddataset||!this._curFormat||_b==undefined){return false;}if(_d==undefined||_d==true){_b=this._getDataRow(_b);}var _e=false;this._autoSizeRowProc=true;if(_a=="row"){if(_b>=0){this._is_variable_bodyrowsize=true;var _f=this._curFormat._bodyrows;var _g=_f.length;if(_c!=undefined){var _h=(_b*_f.length)+_c;var _i=this._rowSizeListSub[_h];var _j=this._getMaxSubRowSize(_b,_c);if(_i!=_j){this._rowSizeListSub[_h]=_j;this._rowSizeList[_b]+=(_j-_i);change=true;}}else{for(var _k=0;_k<_g;_k++ ){var _h=(_b*_f.length)+_k;var _i=this._rowSizeListSub[_h];var _j=this._getMaxSubRowSize(_b,_k);if(_i!=_j){this._rowSizeListSub[_h]=_j;this._rowSizeList[_b]+=(_j-_i);change=true;}}}if(change==true){this._updateRowSizeExtend();}this._recreate_contents_all(false,false,false);_e=true;}else if(_b== -1){var _f=this._curFormat._headrows;var _g=_f.length;if(_c!=undefined){var _h=_c;var _i=this._rowHeadListSub[_h];var _j=this._getMaxSubRowSize(_b,_c);if(_i!=_j){this._rowHeadListSub[_h]=_j;this._rowHeadList[0]+=(_j-_i);change=true;}}else{for(var _k=0;_k<_g;_k++ ){var _h=_k;var _i=this._rowHeadListSub[_h];var _j=this._getMaxSubRowSize(_b,_k);if(_i!=_j){this._rowHeadListSub[_h]=_j;this._rowHeadList[0]+=(_j-_i);change=true;}}}if(change==true){this._updateRowSizeExtend();}this._resizeBand();this._recreate_contents_all(false,false,false);_e=true;}else if(_b== -2){var _f=this._curFormat._summrows;var _g=_f.length;if(_c!=undefined){var _h=_c;var _i=this._rowSummListSub[_h];var _j=this._getMaxSubRowSize(_b,_c);if(_i!=_j){this._rowSummListSub[_h]=_j;this._rowSummList[0]+=(_j-_i);change=true;}}else{for(var _k=0;_k<_g;_k++ ){var _h=_k;var _i=this._rowSummListSub[_h];var _j=this._getMaxSubRowSize(_b,_k);if(_i!=_j){this._rowSummListSub[_h]=_j;this._rowSummList[0]+=(_j-_i);change=true;}}}if(change==true){this._updateRowSizeExtend();}this._resizeBand();this._recreate_contents_all(false,false,false);_e=true;}}this._autoSizeRowProc=false;return _e;};_pGrid.autoSizeCol=function(_a,_b,_c,_d){if(arguments.length==2){_c=_b;_b= -9;}if(_a=="col"){var _e;if(_c== -1){var _f=this._curFormat._cols;var _g=_f.length;for(var _h=0;_h<_g;_h++ ){_e=this._getMaxColDataSizeBand(_h);if(_e>=0&&this._setColSize( -9,_h,_e,_d,true,true,(_h!=_g-1))){change=true;}}}else if(_c>=0){_e=this._getMaxColDataSizeBand(_c);if(_e>=0){this._setColSize(_b,_c,_e,_d,true,true);}}}};_pGrid.isDropdownCalendar=function(){if(this._currentCellEditor&&this._currentCellEditor.visible==true&&this._currentCellEditor._type_name=="CalendarControl"){return this._currentCellEditor.isDropdown();}return false;};_pGrid.isDropdownCombo=function(){if(this._currentCellEditor&&this._currentCellEditor.visible==true&&this._currentCellEditor._type_name=="ComboControl"){return this._currentCellEditor.isDropdown();}return false;};_pGrid.moveToNextCell=function(){return this._moveToCell("next",true,false,undefined,undefined,true);};_pGrid.moveToPrevCell=function(){return this._moveToCell("prev",true,false,undefined,undefined,true);};_pGrid.showEditor=function(_a){var _b;if(_a===undefined){_a=true;}_a=nexacro._toBoolean(_a);if(this._showEditing==_a){return false;}if(_a){this.setFocus(false);_b=this._showEditor();}else{_b=this._hideEditor();}return _b;};_pGrid.dropdownCombo=function(){if(this._currentCellEditor&&this._currentCellEditor.visible==true&&this._currentCellEditor._type_name=="ComboControl"){this._currentCellEditor.dropdown();return true;}return false;};_pGrid.dropdownCalendar=function(){if(this._currentCellEditor&&this._currentCellEditor.visible==true&&this._currentCellEditor._type_name=="CalendarControl"){this._currentCellEditor.dropdown();return true;}return false;};_pGrid.getCurEditType=function(){var _a=this._getBodyCellInfo(this._selectinfo.curcell);if(_a){return _a._getAttrValue(_a.edittype,this._selectinfo.curdsrow);}return "";};_pGrid.getEditCaret=function(){if(this._showEditing){var _a=this._currentCellEditor;if(_a&&_a.getCaretPos){return _a.getCaretPos();}}};_pGrid.getEditSelect=function(){var _a=this._currentCellEditor;if(_a&&_a.getSelect){return _a.getSelect();}};_pGrid.getEditSelectedText=function(){var _a=this._currentCellEditor;if(_a&&_a.getSelectedText){return _a.getSelectedText();}return "";};_pGrid.getEditText=function(){if(this._showEditing){var _a=this._currentCellEditor;if(_a){return _a.text;}}};_pGrid.setEditCaret=function(_a){};_pGrid.setEditSelect=function(_a,_b){var _c=this._currentCellEditor;if(!_c){return false;}if(_a== -1){_c.setSelect(0,0);return true;}else{if(_c.setSelect){return _c.setSelect(_a,_b);}}return false;};_pGrid.setEditSelectedText=function(_a){};_pGrid.setEditText=function(_a){};_pGrid.updateToDataset=function(){if(this._showEditing){var _a=this._currentCellEditor;if(_a){_a._setDataset(false,this._currentCellRow);return true;}return false;}return false;};_pGrid.setTreeStatus=function(_a,_b){if(!this._hasTree){return false;}_b=nexacro._toBoolean(_b);var _c=this._treeIndexes;var _d=_c.length;var _e=this._bodyBand._get_rows();if(_d<=_a||!_e||_e.length==0){return false;}var _f=_c[_a];var _g=_e[0]._cells;var _h=this._treeCellinfo;var _i=_h._getEdittype(_f);var _j;if(_b){_j=this._setTreeState(_a,1,true);}else{_j=this._setTreeState(_a,0,true);}if(_j>0){if(nexacro._enableaccessibility&&(nexacro._accessibilitytype==4||nexacro._accessibilitytype==5)){var _k=this._getCurrentBodyCell(this._currentDSrow,_h._cellidx);if(_k){if(nexacro._accessibilitytype==4){_k._setFocus(false);}else{_k._setAccessibilityNotifyEvent();}}}return true;}return false;};_pGrid.getTreeStatus=function(_a){if(!this._hasTree){return  -1;}var _b=this._treeIndexes;var _c=_b.length;var _d=this._bodyBand._get_rows();if(_c<=_a||!_d||_d.length==0){return  -1;}var _e=_b[_a];var _f=this._treeStates[_e];var _g=_d[0]._cells;var _h=this._treeCellinfo;var _i=_h._getEdittype(_e);if(_i=="tree"){if(_h.treestate._bindtype==1){var _j=_h.treestate._bindexpr;var _k=this._binddataset.getColumn(_e,_j);if(_k>1){_f=_k;}}}if(_f==2){_f++ ;}return _f;};_pGrid.getTreeChildCount=function(_a,_b){if(this._hasTree){var _c=_a;if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}if(_b===false){_c=this.getDatasetRow(_a);}if(_c<0||this._rowcount<=_c){return 0;}var _d=this._treeCellinfo;var _e=_d._getTreeLevel(_c);var _f,_g= -1;var _h=0;for(var _i=_c+1;_i<this._rowcount;_i++ ){_f=_d._getTreeLevel(_i);if(_e>=_f){break;}if(_g>=0){if(_g>=_f){if(_g>_f){_g=_f;}_h++ ;}}else{if(_e<_f){_h++ ;_g=_f;}}}return _h;}return 0;};_pGrid.getTreeChildRow=function(_a,_b,_c){if(this._hasTree){var _d=_a;if(_c==undefined){_c=true;}else{_c=nexacro._toBoolean(_c);}if(_c===false){_d=this.getDatasetRow(_a);}if(_d<0||this._rowcount<=_d){return  -1;}var _e=this._treeCellinfo;var _f=_e._getTreeLevel(_d);var _g,_h= -1;var _i= -1;var _j=0;for(var _k=_d+1;_k<this._rowcount;_k++ ){_g=_e._getTreeLevel(_k);if(_f>=_g){break;}if(_h>=0){if(_h>=_g){if(_h>_g){_h=_g;}_j++ ;if(_b==_j){return _k;}_i=_k;}}else{if(_f<_g){_h=_g;if(_b==0){return _k;}_i=_k;}}}if(_b== -1){return _i;}}return  -1;};_pGrid.getTreeParentRow=function(_a,_b){if(this._hasTree){var _c=_a;if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}if(_b===false){_c=this.getDatasetRow(_a);}if(_c<0||this._rowcount<=_c){return  -1;}var _d=this._treeCellinfo;var _e=_d._getTreeLevel(_c);var _f;for(var _g=_c-1;_g>=0;_g-- ){_f=_d._getTreeLevel(_g);if(_e>_f){return _g;}}}return  -1;};_pGrid.getTreeSiblingRow=function(_a,_b,_c){if(this._hasTree){var _d=_a;if(_b===undefined){_b=1;}if(_c==undefined){_c=true;}else{_c=nexacro._toBoolean(_c);}if(_c===false){_d=this.getDatasetRow(_a);}if(_d<0||this._rowcount<=_d){return  -1;}var _e=this._treeCellinfo;var _f=_e._getTreeLevel(_d);var _g;var _h=0;if(_b<0){for(var _i=_d-1;_i>=0;_i-- ){_g=_e._getTreeLevel(_i);if(_f>_g){break;}else if(_f==_g){_h-- ;if(_b==_h){return _i;}}}}else if(_b>0){for(var _i=_d+1;_i<this._rowcount;_i++ ){_g=_e._getTreeLevel(_i);if(_f>_g){break;}else if(_f==_g){_h++ ;if(_b==_h){return _i;}}}}else{return _d;}}return  -1;};_pGrid.getTreePath=function(_a,_b){if(this._hasTree){var _c=_a;if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}if(_b===false){_c=this.getDatasetRow(_a);}if(_c<0||this._rowcount<=_c){return "";}var _d=this._treeCellinfo;var _e=_d._getTreeLevel(_c);var _f=_d._getTreeStartLevel(_c);var _g=[];var _h=0;while(_c>=0){_g[_h]=_d._getValue(_c);_c=this.getTreeParentRow(_c);_h++ ;}var _i="";for(_h=_g.length-1;_h>=0;_h-- ){_i+=_g[_h];if(_h>0){_i+=this.treepathdelimiter;}}return _i;}return "";};_pGrid.getTreeRow=function(_a){if(this._hasTree){if(typeof (_a)=="string"){var _b=_a;var _c=this._rowcount;var _d;_a= -1;for(var _g=0;_g<_c;_g++ ){_d=this.getTreePath(_g,true);if(_d==_b){_a=_g;break;}}}if(_a>=0){var _e=this._treeIndexes;var _f=_e.length;for(var _h=0;_h<_f;_h++ ){if(_e[_h]==_a){return _h;}}}}return  -1;};_pGrid.getDatasetRow=function(_a){if(_a>=0){if(this._hasTree){if(this._treeIndexes.length>_a){return this._treeIndexes[_a];}}else{if(this._rowcount>_a){return _a;}}}return  -1;};_pGrid.isTreeLeafRow=function(_a,_b){if(this._hasTree){var _c=this.getTreeChildCount(_a,_b);if(_c==0){if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}var _d=_a;if(_b===false){_d=this.getDatasetRow(_a);}if(_d<0||this._rowcount<=_d){return false;}return true;}}return false;};_pGrid.isTreeRootRow=function(_a,_b){if(this._hasTree){var _c=_a;if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}if(_b===false){_c=this.getDatasetRow(_a);}if(_c<0||this._rowcount<=_c){return false;}var _d=this._treeCellinfo;var _e=_d._getTreeLevel(_c);var _f=_d._getTreeStartLevel(_c);if(_f==_e){return true;}}return false;};_pGrid.isTreeExpandedRow=function(_a,_b){if(this._hasTree){var _c=_a;if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}if(_b===false){_c=this.getDatasetRow(_a);}if(_c<0||this._rowcount<=_c){return false;}while(_c>=0){_c=this.getTreeParentRow(_c);if(_c<0){break;}var _d=this._treeIndexes;var _e=_d.length;if(_c>=0&&_e>0){var _f=this._treeStates[_c];if(_f==0){return false;}}}return true;}return false;};_pGrid.isTreeCollapsedRow=function(_a,_b){if(this._hasTree){var _c=_a;if(_b==undefined){_b=true;}else{_b=nexacro._toBoolean(_b);}if(_b===false){_c=this.getDatasetRow(_a);}if(_c<0||this._rowcount<=_c){return false;}while(_c>=0){_c=this.getTreeParentRow(_c);if(_c<0){break;}var _d=this._treeIndexes;var _e=_d.length;if(_c>=0&&_e>0){var _f=this._treeStates[_c];if(_f==0){return true;}}}}return false;};_pGrid.getCsvData=function(_a){};_pGrid.getHeadValue=function(_a){var _b=this._curFormat;if(_b&&_b._headcells&&_a>=0&&_b._headcells.length>_a){var _c=this._curFormat._headcells[_a];if(_c&&_c.text._bindtype!=0){return _c._getValue(this._currentDSrow);}}return null;};_pGrid.getSummValue=function(_a){var _b=this._curFormat;if(_b&&_b._summcells&&_a>=0&&_b._summcells.length>_a){var _c=this._curFormat._summcells[_a];if(_c&&_c.text._bindtype!=0){return _c._getValue(this._currentDSrow);}}return null;};_pGrid.getBindCellIndex=function(_a,_b){var _c=this._curFormat;if(!_c){return  -1;}_a=_a.toLowerCase();if(_b){if(_a=="head"&&_c._headcells){var _d=_c._headcells;var _e=_d.length;var _f;for(var _k=0;_k<_e;_k++ ){_f=_d[_k];if(_f.text._bindexpr==_b){return _k;}}}else if(_a=="body"&&_c._bodycells){var _g=_c._bodycells;var _h=_g.length;var _f;for(var _k=0;_k<_h;_k++ ){_f=_g[_k];if(_f.text._bindexpr==_b){return _k;}}}else if(_a=="summ"&&_c._summcells){var _i=_c._summcells;var _j=_i.length;var _f;for(var _k=0;_k<_j;_k++ ){_f=_i[_k];if(_f.text._bindexpr==_b){return _k;}}}}return  -1;};_pGrid._getDisplayCalendarCtrl=function(){if(!this._displaycalendarctrl){this._displaycalendarctrl=new nexacro.CalendarCtrl("displaycalendarctrl",0,0,0,0,this,false,true);}return this._displaycalendarctrl;};_pGrid.isAboveSelected=function(){};_pGrid._absolutelyResetScrollPos=function(_a){var _b=this._headBand;var _c=this._bodyBand;var _d=this._summBand;if(this._control_element){this._control_element._reset_scrollpos=_a;}if(_b&&_b._control_element){_b._control_element._reset_scrollpos=_a;}if(_c&&_c._control_element){_c._control_element._reset_scrollpos=_a;}if(_d&&_d._control_element){_d._control_element._reset_scrollpos=_a;}};_pGrid._no_use_onscroll_callback_after=false;_pGrid._adjustGridScrollRows_callback=function(_a){if(!this.vscrollbar){return;}var _b=this._control_element;var _c=_b.vscroll_limit;var _d=this.vscrollbar._pos;var _e=this._bodyBand;if(_d>_c){_d=_c;}if(_a){this._scroll_vpos_queue=[];}else{this._scroll_vpos_queue.pop();if(this._scroll_vpos_queue.length>0){this._aniframe_rowscroll.start();}}this._last_scroll_top=_b.scroll_top;this._toprowpos=this._getScreenTopRowPos(_d);this._bottomrowpos=this._getScreenBottomRowPos(_d);_e._update_rows=_e._matrix._adjustScrollRows(_d);_e._on_refresh_rows(true);this._no_use_onscroll_callback_after=true;_b.setElementVScrollPos(_d);this._MoveEditComp();this._updateSelector("vscroll",_d-this._last_scroll_top);this._adjustOverlayElements(false,this._is_use_fakemerge,true);this._setSelectBorder();};_pGrid._adjustGridScrollRows_callback_onscroll_after=function(_a){if(this._no_use_onscroll_callback_after==true){this._no_use_onscroll_callback_after=false;return;}var _b=this._bodyBand;this._toprowpos=this._getScreenTopRowPos(_a);this._bottomrowpos=this._getScreenBottomRowPos(_a);_b._update_rows=_b._matrix._adjustScrollRows(_a);_b._on_refresh_rows(true);this._MoveEditComp();this._adjustOverlayElements(false,this._is_use_fakemerge);};_pGrid._adjustGridScrollRows_callback_onscroll=function(){this._no_use_onscroll_callback_after=false;this._scroll_vpos_queue.pop();var _a=this.vscrollbar._pos;var _b=this._control_element;if(this._scroll_vpos_queue.length>0){this._aniframe_rowscroll.start();}this._last_scroll_top=_b.scroll_top;_b.setElementVScrollPos(_a);this._updateSelector("vscroll",_a-this._last_scroll_top);};_pGrid._adjustGridScrollCols_callback=function(_a){if(!this.hscrollbar){return;}var _b=this.hscrollbar._pos;var _c=this._control_element.scroll_left;if(_a){this._scroll_hpos_queue=[];}else{this._scroll_hpos_queue.pop();if(this._scroll_hpos_queue.length>0){this._aniframe_colscroll.start();}}this._control_element.setElementHScrollPos(_b);this._bodyBand._matrix._adjustColsDisplay(false,true);if(this._headBand){this._headBand._matrix._adjustColsDisplay(false,true);}if(this._summBand){this._summBand._matrix._adjustColsDisplay(false,true);}this._MoveEditComp();this._updateSelector("hscroll",_b-_c);this._adjustOverlayElements(false,this._is_use_fakemerge);this._setSelectBorder();};_pGrid._callback_onscroll=_pGrid._adjustGridScrollRows_callback_onscroll_after;_pGrid._is_over_scroll=0;_pGrid.on_vscroll=function(_a,_b){if(this.onvscroll&&this.onvscroll._has_handlers&&this._is_recreating==false){_b.fromobject=this;this.onvscroll._fireEvent(this,_b);}this._is_over_scroll=0;var _c=this.vscrollbar;if(!_c){return;}if(this._scrollpixel!="all"){if(_c._pos>_c._orgmax){this._is_over_scroll=_c._pos-this.vscrollbar._orgmax;}}var _d=this._control_element;if(!_d||!this._bodyBand||_b.type=="trackstart"||_b.type=="tracklastover"||_b.type=="trackfirstover"){return;}if(_b.type=="trackend"||_b.type=="first"||_b.type=="last"){this._procRefreshDOM=true;}if(nexacro.Browser=="Runtime"||(navigator.userAgent.indexOf("Android 4.1")> -1||navigator.userAgent.indexOf("Android 4.2")> -1||navigator.userAgent.indexOf("Android 4.3")> -1||navigator.userAgent.indexOf("Android 5.0")> -1)){this.vscrollbar._no_set_scrollinfo=true;this._adjustGridScrollRows_callback(true);this.vscrollbar._no_set_scrollinfo=false;}else{if(_b._evtkind=="fling"||_b._evtkind=="slide"||_b.type=="track"){this._bodyBand._control_element._setOnScrollCallbackTarget(this);if(!this._aniframe_rowscroll){var _e=this;this._scroll_vpos_queue=[];if(nexacro.isTouchInteraction&&nexacro.Browser!="Runtime"){this._aniframe_rowscroll=new nexacro.AnimationFrame(this,function(){_e._adjustGridScrollRows_callback_onscroll();});}else{this._aniframe_rowscroll=new nexacro.AnimationFrame(this,function(){_e._adjustGridScrollRows_callback();});}}var _f=this._scroll_vpos_queue.push(_b.pos);if(_f==1){this._aniframe_rowscroll.start();}}else{this.vscrollbar._no_set_scrollinfo=true;this._adjustGridScrollRows_callback(true);this.vscrollbar._no_set_scrollinfo=false;}}this._procRefreshDOM=undefined;return true;};_pGrid.on_hscroll=function(_a,_b){if(this.onhscroll&&this.onhscroll._has_handlers&&this._is_recreating==false){_b.fromobject=this;this.onhscroll._fireEvent(this,_b);}var _c=this._control_element;if(!_c||!this._bodyBand||_b.type=="trackstart"||_b.type=="tracklastover"||_b.type=="trackfirstover"){return;}if(_b.type=="trackend"||_b.type=="first"||_b.type=="last"){this._procRefreshDOM=true;}if(nexacro.Browser!="Runtime"){if(!this._aniframe_colscroll){var _d=this;this._scroll_hpos_queue=[];this._aniframe_colscroll=new nexacro.AnimationFrame(this,function(){_d._adjustGridScrollCols_callback();});}if(_b._evtkind=="fling"||_b._evtkind=="slide"||_b.type=="track"){var _e=this._scroll_hpos_queue.push(_b.pos);if(_e==1){this._aniframe_colscroll.start();}}else{this._adjustGridScrollCols_callback();}}else{this._adjustGridScrollCols_callback(true);}this._procRefreshDOM=undefined;return true;};_pGrid._isWheelScrollable=function(_a){var _b=this._control_element;if(!_b){return false;}var _c=_b.scroll_top;var _d=_b.container_maxheight;var _e=this._getBodyClientSize()[1];if((_c+_e>=_d&&_a<0)||(_c==0&&_a>0)){return false;}return true;};_pGrid._setVScrollDefaultAction=function(_a,_b){var _c,_d;if(this._scrollpixel!="all"){if(_b<0){if(_a.max>_a.pos){_c=_a.pos+this.wheelscrollrow;}else{_a._set_pixelpos(_a._pos-_b,"mousewheel");return;}}else{if(_a.min<_a.pos){_c=_a.pos-this.wheelscrollrow;}else{_a._set_pixelpos(_a._pos-_b,"mousewheel");return;}}}else{if(_b<0){_c=_a._scroll_reverse_convert(_a.pos,true)[0];_d=_a._scroll_reverse_convert(_a.max,true)[0];if(_d>_c){_c+=this.wheelscrollrow;}else{_a._set_pixelpos(_a._pos-_b,"mousewheel");return;}}else{_c=_a._scroll_reverse_convert(_a.pos,true)[0];_c-=this.wheelscrollrow;}}_a._set_rowpos(_c+this._getFixRowCnt(),"mousewheel");};_pGrid._makeEventInfo=function(_a,_b,_c){var _d={cell: -1,col: -1,row: -9,subrow: -1,mergecell: -1,mergecol: -1,mergerow: -1,pivotindex: -9};if(_a&&_a._type_name=="GridCell"){_d.cell=_a._cellidx;_d.col=_a._refobj._col;_d.row=this._getDataRow(_a._rowidx);_d.subrow=_a._refobj._row;if(_b){_d.mergecell=_b._cellidx;_d.mergecol=_b._refobj._col;_d.mergerow=_b._refobj._row;}}else{var _e=this._findBandObj(_c);if(_e){if(_e.id=="head"){_d.row= -1;}else if(_e.id=="summ"){_d.row= -2;}}}return _d;};_pGrid.on_fire_sys_onflingend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(this._aniframe_rowscroll){this._aniframe_rowscroll.stop();}if(this._aniframe_colscroll){this._aniframe_colscroll.stop();}this._adjustGridScrollCols_callback(true);this._adjustGridScrollRows_callback(true);return true;};_pGrid._on_nodataareaclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(!this._is_alive){return;}if(this.enable){this.on_fire_onnodataareaclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);}return true;};_pGrid.on_fire_onnodataareaclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onnodataareaclick&&this.onnodataareaclick._has_handlers){var _m=new nexacro.MouseEventInfo(_k,"onnodataareaclick",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);return this.onnodataareaclick._fireEvent(this,_m);}return true;};_pGrid._on_nodataareadblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(!this._is_alive){return;}if(this.enable){this.on_fire_onnodataareadblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);}return true;};_pGrid.on_fire_onnodataareadblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.onnodataareadblclick&&this.onnodataareadblclick._has_handlers){var _m=new nexacro.MouseEventInfo(_k,"onnodataareadblclick",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);return this.onnodataareadblclick._fireEvent(this,_m);}return true;};_pGrid.on_fire_user_ondragenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(this._noFireDragFlag==true||(_a&&_a.selectscrollmode&&(_a.selectscrollmode=="scroll"||(nexacro._isMobile&&nexacro._isMobile()&&_a.selectscrollmode=="default")))){return;}var _q=_p;_q=this._findCellObj(_q);if(_q&&_q._type_name=="GridCell"){if(_q.parentcell){_q=_q.parentcell;}}var _r=this._recalcXY(_q,_k,_l,false,_p);_k=_r.canvasX;_l=_r.canvasY;_m=_r.clientX;_n=_r.clientY;return nexacro.Component.prototype.on_fire_user_ondragenter.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p);};_pGrid.on_fire_user_ondragleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(this._noFireDragFlag==true||(_a&&_a.selectscrollmode&&(_a.selectscrollmode=="scroll"||(nexacro._isMobile&&nexacro._isMobile()&&_a.selectscrollmode=="default")))){return;}var _q=_p;_q=this._findCellObj(_q);if(_q&&_q._type_name=="GridCell"){if(_q.parentcell){_q=_q.parentcell;}}var _r=this._recalcXY(_q,_k,_l,false,_p);_k=_r.canvasX;_l=_r.canvasY;_m=_r.clientX;_n=_r.clientY;return nexacro.Component.prototype.on_fire_user_ondragleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p);};_pGrid.on_fire_user_ondragmove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(this._noFireDragFlag==true){return;}var _q=_p;_q=this._findCellObj(_q);var _r;if(_q&&_q._type_name=="GridCell"){if(_q.parentcell){_r=_q;_q=_q.parentcell;}}var _s=this._recalcXY(_q,_k,_l,false,_p);_k=_s.canvasX;_l=_s.canvasY;_m=_s.clientX;_n=_s.clientY;if(!_a||!_a.selectscrollmode||_a.selectscrollmode=="select"||(nexacro._isDesktop()&&_a.selectscrollmode=="default")){if(this.ondragmove&&this.ondragmove._has_handlers){var _t=this._makeEventInfo(_q,_r,_p);var _u=_t.cell;var _v=_t.col;var _w=_t.mergecell;var _x=_t.mergecol;var _y=_t.mergerow;var _z=_t.pivotindex;var _aa=_t.row;var _ab=_t.subrow;var _ac=new nexacro.GridDragEventInfo(this,"ondragmove",_c,_d,_a,_b,_o,_p,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_u,_v,_w,_x,_y,_z,_aa,_ab);return this.ondragmove._fireUserEvent(this,_ac);}}return false;};_pGrid.on_fire_sys_ondragmove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r){if(!this._is_drag_sameselect){if(this._isAreaSelect()){return this._areaselectMove(_p,_k,_l);}else{return nexacro.Component.prototype.on_fire_sys_ondragmove.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r);}}else{this._is_drag_selecting=true;}};_pGrid._noFireDragFlag=false;_pGrid.on_fire_user_ondrag=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=_l;_n=this._findCellObj(_n);var _o;if(_n&&_n._type_name=="GridCell"){if(_n.parentcell){_o=_n;_n=_n.parentcell;}}this._noFireDragFlag=false;var _p=null;var _q=null;var _r=this._getDragData();if(this.ondrag&&this.ondrag._has_handlers){var _s=this._recalcXY(_n,_g,_h,false,_l);_g=_s.canvasX;_h=_s.canvasY;_i=_s.clientX;_j=_s.clientY;var _t=this._makeEventInfo(_n,_o,_l);var _u=_t.cell;var _v=_t.col;var _w=_t.mergecell;var _x=_t.mergecol;var _y=_t.mergerow;var _z=_t.pivotindex;var _aa=_t.row;var _ab=_t.subrow;_p=new nexacro.GridDragEventInfo(this,"ondrag",_r,_q,this,_m,_k,_l,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_u,_v,_w,_x,_y,_z,_aa,_ab);}if(this._selectscrollmode=="select"){if(_p){if(this.ondrag._fireUserEvent(this,_p)==true){return [true,this,_m,_p.dragdata,_p.userdata];}else if(this.ondrag.defaultprevented==true){return [false,this,_m,_p.dragdata,_p.userdata];}}}else{this._noFireDragFlag=true;}var _ac=[false];if(this._resizer_rowctrl&&this._resizer_rowctrl._is_tracking==true){var _ad=nexacro._getCachedValueObj("row-resize");this._setGlobalCursor(_ad,_n);}else if(this._resizer_colctrl&&this._resizer_colctrl._is_tracking==true){var _ad=nexacro._getCachedValueObj("col-resize");this._setGlobalCursor(_ad,_n);}else if(this.cellmovingtype!="none"||_p){if(_n&&_n._type_name=="GridCell"&&_n._rowidx== -1){if(this.cellmovingtype!="none"){var _ae=_n._refobj._col;var _af=this._getColMergeInfo("head",_ae);var _ag=this._getColMergeInfo("body",_ae);var _ah=this._getColMergeInfo("summ",_ae);var _ai=nexacro._getCachedValueObj("move");if(_af[1]==1&&(_ag==null||_ag[1]==1)&&(_ah==null||_ah[1]==1)){this._movingcell=_n;this._setGlobalCursor(_ai,_n);this._noFireDragFlag=true;}}else{this._movingcell=null;}}_ac=[this._noFireDragFlag,this,_m,_r,_q];}return _ac;};_pGrid.on_fire_user_ondrop=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){var _q=_p;_q=this._findCellObj(_q);var _r;if(_q&&_q._type_name=="GridCell"){if(_q.parentcell){_r=_q;_q=_q.parentcell;}}var _s=this._recalcXY(_q,_k,_l,false,_p);_k=_s.canvasX;_l=_s.canvasY;_m=_s.clientX;_n=_s.clientY;if(this._resizer_rowctrl&&this._resizer_rowctrl._is_tracking==true){this._setGlobalCursor(null,_q);}else if(this._resizer_colctrl&&this._resizer_colctrl._is_tracking==true){this._setGlobalCursor(null,_q);}else if(this.cellmovingtype!="none"){var _t=this._movingcell;var _u=this._curFormat;this._setGlobalCursor(null,_q);if(_t&&_t._is_alive&&_t!=_q&&_q._rowidx== -1){var _v=_t._refobj._col;var _w=_t._refobj._cellidx;var _x=_q._refobj._col;var _y=_t._refobj._colspan;var _z=this._getColMergeInfo("head",_x);_x=_z[0];var _aa=_z[1];this._autofitcol_rate=[];_u._moveColumn(_v,_x,_y,_aa,this.cellmovingtype);this._addRefreshContents("cellmoving",this._headBand);this._addRefreshContents("cellmoving",this._bodyBand);this._addRefreshContents("cellmoving",this._summBand);}this._movingcell=null;}if(this._noFireDragFlag==true||(_a&&_a.selectscrollmode&&(_a.selectscrollmode=="scroll"||(nexacro._isMobile&&nexacro._isMobile()&&_a.selectscrollmode=="default")))){if(_a&&_a._noFireDragFlag){_a._noFireDragFlag=false;}this._noFireDragFlag=false;return;}if(this.ondrop&&this.ondrop._has_handlers){var _ab=this._makeEventInfo(_q,_r,_p);var _ac=_ab.cell;var _ad=_ab.col;var _ae=_ab.mergecell;var _af=_ab.mergecol;var _ag=_ab.mergerow;var _ah=_ab.pivotindex;var _ai=_ab.row;var _aj=_ab.subrow;var _ak=new nexacro.GridDragEventInfo(this,"ondrop",_c,_d,_a,_b,_o,_p,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_ac,_ad,_ae,_af,_ag,_ah,_ai,_aj);return this.ondrop._fireUserEvent(this,_ak);}return false;};_pGrid._mouseSelection=function(_a,_b,_c,_d,_e,_f,_g,_h){var _i=this._currentCellEditor;var _j=_g;var _k=true;while(_j){if(_j==_i||_j instanceof nexacro.GridScrollBarCtrl||_j instanceof nexacro.ScrollBarCtrl){_k=false;break;}_j=_j.parent;}if(_k&&_i){this._hideEditor();}if(this._resizer_colctrl&&this._resizer_colctrl._is_tracking){return;}if(this._resizer_rowctrl&&this._resizer_rowctrl._is_tracking){return;}if(this._down_scroll_top>=0&&this._down_scroll_top!=this._last_scroll_top){return;}if(_a&&_a._type_name=="GridCell"){this._lbuttondown_proc=true;var _l=_a._band.id;var _m=this._on_grid_lbuttondown(_a,_l,_b,_c,_h);if(!_a._is_alive||_h){return;}if(this._showEditorCell){if(nexacro._toBoolean(this.readonly)==false){if(_m){var _n=_a;if(_n&&_n._hasEditor()){_n._showEditor();var _o=this._getDataRow(_n._rowidx);this._beforeEditRowIdx=_o;this._beforeEditCellIdx=_n._cellidx;this._showEditing=true;_n._refobj._editingRow=_o;_n._editshowing=true;var _i=this._currentCellEditor;_i._setFocus(false);if(_i&&_i.setCaretPos&&!_i.autoselect){_i.setCaretPos(0);}}}else{this._onceTime_focus=true;this._showEditor();this._onceTime_focus=false;}}this._showEditorCell=false;this._showEditRowIdx= -1;this._showEditCellIdx= -1;}if(this.selectchangetype=="down"&&nexacro._toBoolean(this.readonly)==false){var _o=this._getDataRow(_a._rowidx);var _p=_a._refobj._getDisplaytype(_o);if(_p=="checkbox"){if(this.cellclickbound=="cell"){_a._needToggle("onlbuttondown",_a);}else{if(_a!=_g&&_a._subComp&&_a._subComp._toggleCheck){if(_a.selected){_a._subComp._toggleCheck();}}}}else{_a._needToggle("onlbuttondown",_a);}}this._lbuttondown_proc=false;}};_pGrid._common_fire_sys_lbuttondown=function(_a,_b,_c,_d,_e,_f,_g){if(!this._is_alive){return;}if(this.selectchangetype=="up"){if(this._isAreaSelect()&&this._selectscrollmode=="select"){this._mouseSelection(_a,_b,_c,_d,_e,_f,_g);}else if(this.selecttype=="multirow"){this._mouseSelection(_a,_b,_c,_d,_e,_f,_g,true);}var _h=this._getWindow();if(!_h._cur_ldown_elem){this._setdataobj=null;}}else{this._mouseSelection(_a,_b,_c,_d,_e,_f,_g);}if(this._is_down_act){this._on_last_lbuttonup(true);}};_pGrid._common_fire_user_lbuttondown=function(_a,_b,_c,_d,_e,_f,_g){if(!this._is_alive){return;}this._resizerStart(_d,_e,_a,"down",_g);var _h=this._resizer_colctrl;var _i=this._resizer_rowctrl;var _j=this._getClientXY(_d,_e);if(_h&&_h._is_range){var _k=this._getWindow();_h._setTracksize(this._client_height);if(_h._direction=="horizon"){_h.move(_j[0],this._client_top,1,_h._tracksize);}nexacro._setTrackInfo(_k,_h,_k._curWindowX,_k._curWindowY);}else if(_i&&_i._is_range){var _k=this._getWindow();_i._setTracksize(this._client_width);if(_i._direction=="vertical"){_i.move(this._client_left,_j[1],_i._tracksize,1);}nexacro._setTrackInfo(_k,_i,_k._curWindowX,_k._curWindowY);}if(this._select_ctrl){this._select_ctrl._initTrackInfo();}};_pGrid._recalcTouchInfosXY=function(_a,_b,_c,_d){var _e,_f;for(var _g=0,_h=_b.length;_g<_h;_g++ ){if(_e=_b[_g]){_f=this._recalcXY(_a,_e.canvasX,_e.canvasY,_c,_d);_e.canvasX=_f.canvasX;_e.canvasY=_f.canvasY;_e.clientX=_f.clientX;_e.clientY=_f.clientY;}}};_pGrid._getRecalcCanvasXY=function(_a,_b,_c){var _d=0,_e=0;var _f=0,_g=0;var _h=this._getRootForm();var _i=this._getRootComponent(this);if(this._recalcXY_info){_b=this._recalcXY_info[0]+this._adjust_left;_c=this._recalcXY_info[1]+this._adjust_top;this._recalcXY_info=null;}else{_b+=this._adjust_left-this._scroll_left||0;_c+=this._adjust_top-this._scroll_top||0;}if(this.parent&&!(this instanceof nexacro.ScrollBarCtrl)){var _j=this.parent._control_element;if(_j&&_j instanceof nexacro.ScrollableControlElement){_d=_j.scroll_left;_e=_j.scroll_top;_j=null;}}_b-=_d;_c-=_e;if(_h&&_h!=this&&!this._is_subcontrol&&_h==_i.parent){var _j=_h._control_element;if(_j){_f=_j.border?_j.border._left_width:0;_g=_j.border?_j.border._top_width:0;}_b+=_f;_c+=_g;}return [_b,_c];};_pGrid._recalcXY=function(_a,_b,_c,_d,_e){var _f=_b;var _g=_c;if(_a._type_name=="GridCell"){if(_d){var _h=_a._setPositionInGrid(null,false,true);_f=_b+_h.orgl;_g=_c+_h.orgt;}else{var _i=_a._refobj._area;var _j=_a._band.id;if(_i=="body"){_f=_b+this._curFormat.leftWidth;_f-=this._getScrollLeft();}else if(_i=="right"){var _k=_a.parent;var _h=_k._getAreaRect(_i);var _l=_h.left;_f=_b+_l;}if(_j=="body"&&!_a.parent._fixed){_g-=this._getScrollTop();_g+=this._fixed_height;}}}if(_e._type_name!="Grid"){if(_e._type_name=="GridRow"&&_e._rowidx>=0){_g-=this._getScrollTop();}var _m=this.currentstyle.border;if(_m){_f+=_m._left_width;_g+=_m._top_width;}}this._recalcXY_info=[_f,_g];var _n=this._getClientXY(_f,_g);return {canvasX:_f,canvasY:_g,clientX:_n[0],clientY:_n[1]};};_pGrid.on_fire_user_ontouchstart=function(_a,_b,_c,_d,_e){return this.on_fire_ontouchstart(_a,_b,_c,_d,true,_e);};_pGrid.on_fire_sys_ontouchstart=function(_a,_b,_c,_d,_e){return this.on_fire_ontouchstart(_a,_b,_c,_d,false,_e);};_pGrid._down_scroll_top= -1;_pGrid.on_fire_ontouchstart=function(_a,_b,_c,_d,_e,_f){var _g=_d;_g=this._findCellObj(_g);this._recalcTouchInfosXY(_g,_b,_f,_d);var _h=nexacro._getFirstTouchInfo(_b);var _i;if(_g&&_g._type_name=="GridCell"){if(_g.parentcell){_i=_g;_g=_g.parentcell;}}var _j=false;if(this.ontouchstart&&this.ontouchstart._has_handlers){var _k=this._makeEventInfo(_g,_i,_d);var _l=_k.cell;var _m=_k.col;var _n=_k.mergecell;var _o=_k.mergecol;var _p=_k.mergerow;var _q=_k.pivotindex;var _r=_k.row;var _s=_k.subrow;var _t=new nexacro.TouchEventInfo(this,"ontouchstart",_a,_b,_c,_d);if(_e){_j=this.ontouchstart._fireUserEvent(this,_t);}else{_j=this.ontouchstart._fireSysEvent(this,_t);}}this._down_scroll_top=this._last_scroll_top;if(_h){if(_e){this._resizerStart(_h.canvasX,_h.canvasY,_g,"down",_d);this._common_fire_user_lbuttondown(_g,false,false,_h.canvasX,_h.canvasY,_c,_d);}else{if(this._selectscrollmode=="select"){if(_g._band&&_g._band.id=="body"){if(this._isAreaSelect()){this._common_fire_sys_lbuttondown(_g,false,false,_h.canvasX,_h.canvasY,_c,_d);}if(nexacro.OS!="Windows"||nexacro.Browser!="Runtime"){if(this.selectchangetype=="down"){this._mouseSelection(_g,false,false,_h.canvasX,_h.canvasY,_c,_d);}}}}}}return _j;};_pGrid.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(nexacro.isTouchInteraction){this._down_scroll_top=this._last_scroll_top;}return nexacro.Component.prototype.on_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};_pGrid.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this.on_fire_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,true,_m);};_pGrid.on_fire_sys_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this.on_fire_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,false,_m);};_pGrid.on_fire_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=_l;_o=this._findCellObj(_o);var _p;if(_o&&_o._type_name=="GridCell"){if(_o.parentcell){_p=_o;_o=_o.parentcell;}}var _q=this._recalcXY(_o,_g,_h,_n,_l);_g=_q.canvasX;_h=_q.canvasY;_i=_q.clientX;_j=_q.clientY;var _r=false;if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var _s=this._makeEventInfo(_o,_p,_l);var _t=this._getRootComponent(_k);var _u=_s.cell;var _v=_s.col;var _w=_s.mergecell;var _x=_s.mergecol;var _y=_s.mergerow;var _z=_s.pivotindex;var _aa=_s.row;var _ab=_s.subrow;var _ac=new nexacro.GridMouseEventInfo(_t,"onlbuttondown",_u,_v,_w,_x,_y,_z,_aa,_ab,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);if(_m){_r=this.onlbuttondown._fireUserEvent(this,_ac);}else{_r=this.onlbuttondown._fireSysEvent(this,_ac);}}if(nexacro.isTouchInteraction){if(_m){this._resizerStart(_g,_h,_o,"down",_l);this._common_fire_user_lbuttondown(_o,_c,_d,_g,_h,_k,_l);}else{if(this._selectscrollmode=="select"){if(_o._band&&_o._band.id=="body"){if(this._isAreaSelect()){this._common_fire_user_lbuttondown(_o,_c,_d,_g,_h,_k,_l);}}}}}else{if(_m){this._common_fire_user_lbuttondown(_o,_c,_d,_g,_h,_k,_l);}else{this._common_fire_sys_lbuttondown(_o,_c,_d,_g,_h,_k,_l);}}return _r;};_pGrid.on_fire_user_onrbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){var _m=_l;_m=this._findCellObj(_m);var _n;if(_m&&_m._type_name=="GridCell"){if(_m.parentcell){_n=_m;_m=_m.parentcell;}}var _o=this._recalcXY(_m,_g,_h,false,_l);_g=_o.canvasX;_h=_o.canvasY;_i=_o.clientX;_j=_o.clientY;if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var _p=this._makeEventInfo(_m,_n,_l);var _q=this._getRootComponent(_l);var _r=_p.cell;var _s=_p.col;var _t=_p.mergecell;var _u=_p.mergecol;var _v=_p.mergerow;var _w=_p.pivotindex;var _x=_p.row;var _y=_p.subrow;var _z=new nexacro.GridMouseEventInfo(_q,"onrbuttondown",_r,_s,_t,_u,_v,_w,_x,_y,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);return this.onrbuttondown._fireUserEvent(this,_z);}return false;};_pGrid.on_fire_user_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this.on_fire_onmousedown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,true);};_pGrid.on_fire_sys_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this.on_fire_onmousedown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,false);};_pGrid.on_fire_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=_l;_n=this._findCellObj(_n);var _o;if(_n&&_n._type_name=="GridCell"){if(_n.parentcell){_o=_n;_n=_n.parentcell;}}var _p=this._recalcXY(_n,_g,_h,false,_l);_g=_p.canvasX;_h=_p.canvasY;_i=_p.clientX;_j=_p.clientY;var _q=false;if(this.onmousedown&&this.onmousedown._has_handlers){var _r=this._makeEventInfo(_n,_o,_l);var _s=this._getRootComponent(_k);var _t=_r.cell;var _u=_r.col;var _v=_r.mergecell;var _w=_r.mergecol;var _x=_r.mergerow;var _y=_r.pivotindex;var _z=_r.row;var _aa=_r.subrow;var _ab=new nexacro.GridMouseEventInfo(_s,"onmousedown",_t,_u,_v,_w,_x,_y,_z,_aa,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);if(_m){_q=this.onmousedown._fireUserEvent(this,_ab);}else{_q=this.onmousedown._fireSysEvent(this,_ab);}}return _q;};_pGrid._clearDestroyEditor=function(_a){var _b=this._destroyeditors;if(_b.length){for(var _c=0;_c<_b.length;_c++ ){if(_a&&_b.length<=5){break;}if(_b[_c]._is_alive){_b[_c].destroy();}_b[_c]=null;_b.splice(_c,1);_c-- ;}}};_pGrid._resetFixSize=function(){var _a=this._rowSizeList;var _b=0,_c=0;var _d=this._fixed_startrow;var _e=this._fixed_endrow;if(_d<0){return;}for(var _f=0,_g=_a.length;_f<_g;_f++ ){_b+=_a[_f];if(_d>_f){continue;}_c+=_a[_f];if(_e==_f){break;}}this._fixed_height=_c;this._fixedrow_height=_b;};_pGrid.setFixedRow=function(_a){this._setFixedRow(_a,undefined);};_pGrid._setFixedRow=function(_a,_b){if(this._hasTree){return;}var _c=(_a<0)?false:true;var _d,_e=this._endrowpos;_d=this._fixed_startrow;if(_d<0){_d=this._toprowpos[0];}if(_a>=0&&(_a<_d||_a>_e)){return;}if(_c){if(this._fixed_height){this._setFixedRow( -1);}}var _f=this._bodyBand;if(_c){var _g=this._getGridRowCount();var _h=this._toprowpos[0];var _i=0,_j=0;var _k=false;var _l=0;for(var _m=0;_m<_g;_m++ ){this._fixed_rowcnt++ ;_l=this._getRowSize(_m);_j+=_l;if(_m>=_h){if(this._fixed_startrow<0){this._fixed_startrow=_m;}_i+=_l;_k=true;}if(_m>=_a){break;}}if(_k){this._fixedrow_height=_j;this._fixed_endrow=_a;this._fixed_height=_i;if(!_b){this._recreate_contents_all(false,false,true,true);}}else{this._fixed_startrow= -9;this._fixed_endrow= -9;this._fixed_height=0;this._fixedrow_height=0;this._fixed_rowcnt=0;}}else{var _d=this._fixed_startrow;this._fixed_endrow= -9;this._fixed_height=0;this._fixedrow_height=0;this._fixed_rowcnt=0;this._fixed_startrow= -9;if(!_b){this._recreate_contents_all(false,false,false,true);if(this.vscrollbar&&_d>=0){this.vscrollbar._set_rowpos(_d);}}}};_pGrid._getFixRowCnt=function(){return (this._bodyBand)?this._fixed_rowcnt:0;};_pGrid._checkInclude=function(_a,_b,_c,_d,_e){if(_a.start_column<=_c&&_a.end_column>=_c){if(_a.start_row<=_d&&_a.end_row>=_d){if(_e==undefined||_a.start_subrow==undefined){return true;}else{if(_a.start_row<_d&&_a.end_row>_d){return true;}if(_a.start_row==_a.end_row){if(_a.start_subrow<=_e&&_a.end_subrow>=_e){return true;}}else{if(_a.start_row==_d){if(_a.start_subrow<=_e&&_b>_e){return true;}}if(_a.end_row==_d){if(0<=_e&&_a.end_subrow>=_e){return true;}}}}}}return false;};_pGrid._getFakeMergeCellInfos=function(_a,_b,_c,_d,_e,_f,_g,_h){var _i=[];var _j,_k,_l,_m;for(var _n=0,_o=_a.length;_n<_o;_n++ ){col1=_a[_n]._col;colspan=_a[_n]._colspan;col2=col1+colspan-1;row1=_a[_n]._row;rowspan=_a[_n]._rowspan;row2=row1+rowspan-1;if((_b<=col1&&_c>=col1)||(_b<=col2&&_c>=col2)||(col1<=_b&&col2>=_b)||(col1<=_c&&col2>=_c)){if(_d>=0){_j=_d*_h+row1;_k=_d*_h+_f;_l=_e*_h+row2;_m=_e*_h+_g;}else{_j=row1;_k=_f;_l=row2;_m=_g;}if((_k<=_j&&_m>=_j)||(_k<=_l&&_m>=_l)||(_j<=_k&&_l>=_k)||(_j<=_m&&_l>=_m)){_i.push(_a[_n]);}}}return _i;};_pGrid.setFakeMerge=function(_a,_b,_c,_d,_e,_f){this._setFakeMerge(_a,_c,_e,_b,_d,_f,false);};_pGrid._getFakeMergeCellObjs=function(_a){var _b;var _c=[];var _d=this._curFormat;var _e;if(_a.start_row== -1){_b=this._headBand;_e=_d._headrows.length;}else if(_a.start_row== -2){_b=this._summBand;_e=_d._summrows.length;}else if(_a.start_row>=0){_b=this._bodyBand;_e=_d._bodyrows.length;}if(!_b){return _c;}var _f=_b._get_rows();var _g;var _h=_a.start_column;var _i=_a.end_column;var _j=_a.start_row;var _k=_a.end_row;var _l=_a.start_subrow;var _m=_a.end_subrow;var _n;var _o,_p,_q,_r;var _s;for(var _t=0,_u=_f.length;_t<_u;_t++ ){_n=this._getDataRow(_f[_t]._rowidx);if(_n>=_j&&_n<=_k){_g=_f[_t]._cells;for(var _v=0,_w=_g.length;_v<_w;_v++ ){_s=_g[_v]._refobj;if(_s._col>=_h&&_s._col<=_i){if(_l==undefined){_c.push(_g[_v]);}else{if(_j>=0){_o=_n*_e+_s._row;_p=_j*_e+_l;_q=_n*_e+_s._row+_s._rowspan-1;_r=_k*_e+_m;}else{_o=_s._row;_p=_l;_q=_s._row+_s._rowspan-1;_r=_m;}if((_p<=_o&&_r>=_o)||(_p<=_q&&_r>=_q)||(_o<=_p&&_q>=_p)||(_o<=_r&&_q>=_r)){_c.push(_g[_v]);}}}}}}return _c;};_pGrid._is_use_fakemerge=false;_pGrid._setFakeMerge=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._curFormat;var _i;var _j;var _k;if(_a>_d||_a<0||_d<0){return false;}if(_b== -1||_e== -1){if(_b!=_e){return false;}if(!_h._headrows){return false;}_i=_h._headcells;_j=_h._headrows.length;_k="head";if(_f<_c){return false;}}else if(_b== -2||_e== -2){if(_b!=_e){return false;}if(!_h._summrows){return false;}_i=_h._summcells;_j=_h._summrows.length;_k="summ";if(_f<_c){return false;}}else{if(_b<0||_e<0){return false;}if(_b>_e){return false;}if(!_h._bodyrows){return false;}_i=_h._bodycells;_j=_h._bodyrows.length;_k="body";}if(_c==undefined){_c=0;}if(_f==undefined){_f=_j-1;}if(_j<=_c||_j<=_f){return false;}var _l,_m,_n,_o=false;var _p,_q,_r;var _s=[];var _t=null;var _u,_v,_w,_x;for(var _ae=0,_aj=_i.length;_ae<_aj;_ae++ ){_t=_i[_ae];_l=_t._col;_m=_t._colspan;_n=_l+_m-1;_p=_t._row;_q=_t._rowspan;_r=_p+_q-1;if((_a<=_l&&_d>=_l)||(_a<=_n&&_d>=_n)||(_l<=_a&&_n>=_a)||(_l<=_d&&_n>=_d)){if(_b>=0){_u=_b*_j+_p;_v=_b*_j+_c;_w=_e*_j+_r;_x=_e*_j+_f;}else{_u=_p;_v=_c;_w=_r;_x=_f;}if((_v<=_u&&_x>=_u)||(_v<=_w&&_x>=_w)||(_u<=_v&&_w>=_v)||(_u<=_x&&_w>=_x)){if(_t.suppress!=0){return false;}var _y=false;if(_t._colspan>1){var _z=_t._col+_t._colspan-1;if(_t._col<_a){_y=true;_a=_t._col;}if(_z>_d){_y=true;_d=_z;}}if(_t._rowspan>1){if(_u<_v){_y=true;_c=_t._row;}if(_w>_x){_y=true;_f=_t._row+_t._rowspan-1;}}if(_y==true){_s=[];_ae= -1;}else{_s.push(_t);}}}}var _aa={start_column:_a,start_row:_b,start_subrow:_c,end_column:_d,end_row:_e,end_subrow:_f,cellinfos:_s};var _ab=this._fake_mergecell_arr;var _ac=_ab.length;var _ad;var _ae=0;var _af=[];for(;_ae<_ac;_ae++ ){if(this._checkInclude(_ab[_ae],_j,_a,_b,_c)){_af.push(_ae);}else if(this._checkInclude(_ab[_ae],_j,_a,_e,_f)){_af.push(_ae);}else if(this._checkInclude(_ab[_ae],_j,_d,_b,_c)){_af.push(_ae);}else if(this._checkInclude(_ab[_ae],_j,_d,_e,_f)){_af.push(_ae);}else if(this._checkInclude(_aa,_j,_ab[_ae].start_column,_ab[_ae].start_row,_ab[_ae].start_subrow)){_af.push(_ae);}else if(this._checkInclude(_aa,_j,_ab[_ae].start_column,_ab[_ae].end_row,_ab[_ae].end_subrow)){_af.push(_ae);}else if(this._checkInclude(_aa,_j,_ab[_ae].end_column,_ab[_ae].start_row,_ab[_ae].start_subrow)){_af.push(_ae);}else if(this._checkInclude(_aa,_j,_ab[_ae].end_column,_ab[_ae].end_row,_ab[_ae].end_subrow)){_af.push(_ae);}}if(_af.length==0){for(var _ae=0,_ak=_s.length;_ae<_ak;_ae++ ){if(_s[_ae]._fakemerge_infos==null){_s[_ae]._fakemerge_infos=[];}}_ab.push(_aa);this._is_use_fakemerge=true;for(var _ae=0,_ak=_s.length;_ae<_ak;_ae++ ){_h._clearCellStyleCache(_k,_s[_ae]._cellidx);this._refreshCell(_k,_s[_ae]._cellidx, -1,true);}}else{if(_g){return false;}for(var _ae=0,_ak=_af.length;_ae<_ak;_ae++ ){var _ag=_af[_ae];var _ah=_ab.splice(_ag-_ae,1)[0];var _ai=this._getFakeMergeCellInfos(_i,_ah.start_column,_ah.end_column,_ah.start_row,_ah.end_row,_ah.start_subrow,_ah.end_subrow,_j);for(var _al=0,_am=_ai.length;_al<_am;_al++ ){for(var _an=_ah.start_row;_an<=_ah.end_row;_an++ ){_ai[_al]._fakemerge_infos[_an+2]=undefined;}_h._clearCellStyleCache(_k,_ai[_al]._cellidx);this._refreshCell(_k,_ai[_al]._cellidx, -1,true);}for(var _al=0,_aj=_s.length;_al<_aj;_al++ ){for(var _an=_b;_an<=_e;_an++ ){if(_s[_al]._fakemerge_infos){_s[_al]._fakemerge_infos[_an+2]=undefined;}}_h._clearCellStyleCache(_k,_s[_al]._cellidx);this._refreshCell(_k,_s[_al]._cellidx, -1,true);}}}this._adjustOverlayElements(false,this._is_use_fakemerge);if(_ab.length==0){this._is_use_fakemerge=false;}return true;};_pGrid._checkFakeMerge=function(_a,_b){if(!_a._fakemerge_infos){return "";}if(_a._fakemerge_infos[_b+2]){return _a._fakemerge_infos[_b+2];}var _c=this._fake_mergecell_arr;var _d=_c.length;var _e;var _f=this._curFormat;var _g;if(_b== -1){_e=(_f._headrows)?_f._headrows.length:0;_g="head";}else if(_b== -2){_e=(_f._summrows)?_f._summrows.length:0;_g="summ";}else if(_b>=0){_e=(_f._bodyrows)?_f._bodyrows.length:0;_g="body";}if(!_e){return "";}if(_d==0){return "";}var _h=_a._col,_i=_a._col+_a._colspan-1,_j=_a._row,_k=_a._row+_a._rowspan-1,_l=_a._area;for(var _n=0;_n<_d;_n++ ){if(this._checkInclude(_c[_n],_e,_h,_b,_j)){if(this._checkInclude(_c[_n],_e,_i,_b,_j)){if(this._checkInclude(_c[_n],_e,_h,_b,_k)){if(this._checkInclude(_c[_n],_e,_i,_b,_k)){var _m="";if(_l!="right"){if(_i<_c[_n].end_column){_m+="right";}}else{if(_h>_c[_n].start_column){_m+="left";}}if(_g!="summ"){if(_b<_c[_n].end_row){_m+="bottom";}else if(_b==_c[_n].end_row){if(_c[_n].end_subrow==undefined&&_k<_e-1){_m+="bottom";}else if(_k<_c[_n].end_subrow){_m+="bottom";}}}else{if(_b>_c[_n].start_row){_m+="top";}else if(_b==_c[_n].start_row){if(_c[_n].start_subrow==undefined&&_j>0){_m+="top";}else if(_j>_c[_n].start_subrow){_m+="top";}}}_m+="fake";_a._fakemerge_infos[_b+2]=_m;return _m;}}}}}return "";};_pGrid._on_last_lbuttonup=function(_a){if(this._movingcell){this._setGlobalCursor(null,this);this._movingcell=null;}this._is_down_act=false;this._clearDestroyEditor(true);this._setdataobj=null;var _b=this._after_recreate_contents_all;if(_b!=null){this._is_after_recreate=true;this._recreate_contents_all(_b[0],_b[1],_b[2],_b[3],_b[4]);this._after_recreate_contents_all=null;this._is_after_recreate=false;if(!this._showEditing&&this.autoenter=="select"){this._showEditor();}}if(this._after_recreate){this._is_after_recreate=true;this._recreate();this._after_recreate=false;this._is_after_recreate=false;}if(this._currentCellEditor&&this._currentCellEditor._user_push){this._currentCellEditor._user_push=false;this._currentCellEditor._stat_change("focus","focused");this._currentCellEditor._is_pushed_area=false;this._currentCellEditor._is_push=false;}};_pGrid._on_last_keyup=function(_a){this._is_down_act=false;this._clearDestroyEditor(true);this._setdataobj=null;var _b=this._after_recreate_contents_all;if(_b!=null){this._is_after_recreate=true;this._recreate_contents_all(_b[0],_b[1],_b[2],_b[3],_b[4]);this._after_recreate_contents_all=null;this._is_after_recreate=false;if(this.autoenter=="select"){if(this._is_data_enter_apply){this._is_data_enter_apply=false;}else{if(!this._showEditing){this._showEditor();}}}}if(this._after_recreate){this._is_after_recreate=true;this._recreate();this._after_recreate=false;this._is_after_recreate=false;var _c=this._dsRowToDispRow(this._rowposition);this._jumpCurrentRow(_c);}};_pGrid._common_fire_sys_lbuttonup=function(_a,_b,_c,_d){if(!this._is_alive){return;}if(!this.enable){return true;}if(_a&&_a._type_name=="GridCell"){var _e=this._getDataRow(_a._rowidx);if(this._isFakeCell(_e)){this._is_drag_selectstart=false;this._is_drag_selecting=false;this._is_drag_sameselect=false;return true;}if(_c==false&&_d==false&&this._is_drag_selecting==false&&_e>=0){if(this._isMultiSelected()){if(this._isIncludeSelectpos(_a._cellidx,_e)){this._clrMultiSelect();this._refreshAll(true);this._ChangeSelect(this._selectinfo.curcell,this._selectinfo.curcol,this._selectinfo.curdsrow,this._selectinfo.cursubrow,this._selectinfo.curpvt,false,this._selectinfo.curcell,this._selectinfo.curcol,this._selectinfo.curdsrow,this._selectinfo.cursubrow,this._selectinfo.curpvt,"body","lbuttonup");}}}}this._is_drag_selectstart=false;this._is_drag_selecting=false;this._is_drag_sameselect=false;this._execRefreshContents("colsizing",false,true);this._execRefreshContents("rowsizing",false,false);this._execRefreshContents("cellmoving",true);this._exeFuncQueue("colsizing");this._exeFuncQueue("rowsizing");};_pGrid._is_down_act=false;_pGrid._cancelEvent=function(_a){this._endExtraTrack();this._is_drag_selectstart=false;this._is_drag_selecting=false;this._is_down_act=this._isDownActionKeyMouse();this._setdataobj=null;this._focus_proc=null;var _b=this._getWindow();nexacro._cur_drag_info=null;nexacro._cur_repeat_info=null;nexacro._cur_track_info=null;_b._cur_ldown_elem=null;_b._keydown_element=null;};_pGrid.on_fire_user_ontouchend=function(_a,_b,_c,_d,_e){return this.on_fire_ontouchend(_a,_b,_c,_d,true,_e);};_pGrid.on_fire_sys_ontouchend=function(_a,_b,_c,_d,_e){return this.on_fire_ontouchend(_a,_b,_c,_d,false,_e);};_pGrid.on_fire_ontouchend=function(_a,_b,_c,_d,_e,_f){var _g=_d;_g=this._findCellObj(_g);this._recalcTouchInfosXY(_g,_b,_f,_d);var _h;if(_g&&_g._type_name=="GridCell"){if(_g.parentcell){_h=_g;_g=_g.parentcell;}}var _i=false;if(this.ontouchend&&this.ontouchend._has_handlers){var _j=this._makeEventInfo(_g,_h,_d);var _k=_j.cell;var _l=_j.col;var _m=_j.mergecell;var _n=_j.mergecol;var _o=_j.mergerow;var _p=_j.pivotindex;var _q=_j.row;var _r=_j.subrow;var _s=new nexacro.TouchEventInfo(this,"ontouchend",_a,_b,_c,_d);if(_e){_i=this.ontouchend._fireUserEvent(this,_s);}else{_i=this.ontouchend._fireSysEvent(this,_s);}}if(!_e){this._common_fire_sys_lbuttonup(_g,false,false,false);}return _i;};_pGrid._isCheckAlive=function(_a){var _b=_a;while(_b!=this){if(!_b||_b._is_alive==false){return false;}_b=_b.parent;}return true;};_pGrid._on_afterHideWaitComp=function(_a){if(this._currentCellEditor){this._currentCellEditor._setFocus(false);}};_pGrid.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){return this.on_fire_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,true,_n);};_pGrid.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){return this.on_fire_onlbuttonup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,false,_n);};_pGrid.on_fire_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this._focus_proc){if(!this._showEditing){if(this._isCheckAlive(this._focus_proc.parent)){var _p=false;if(this._scrollpixel=="all"){_p=true;}this._focus_proc.parent._showfull(_p);this._focus_proc.parent._setFocus(false);}}else if(this._currentCellEditor.setCaretPos){if(this._currentCellEditor.autoselect){this._currentCellEditor.setSelect(0, -1);}else{this._currentCellEditor.setCaretPos(0);}}this._focus_proc=null;}var _q=_l;_q=this._findCellObj(_q);var _r;if(_q&&_q._type_name=="GridCell"){if(_q.parentcell){_r=_q;_q=_q.parentcell;}}var _s=this._recalcXY(_q,_g,_h,_o,_l);_g=_s.canvasX;_h=_s.canvasY;_i=_s.clientX;_j=_s.clientY;var _t=false;if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _u=this._makeEventInfo(_q,_r,_l);var _v=this._getRootComponent(_l);var _w=_u.cell;var _x=_u.col;var _y=_u.mergecell;var _z=_u.mergecol;var _aa=_u.mergerow;var _ab=_u.pivotindex;var _ac=_u.row;var _ad=_u.subrow;var _ae=new nexacro.GridMouseEventInfo(_v,"onlbuttonup",_w,_x,_y,_z,_aa,_ab,_ac,_ad,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);if(_n){_t=this.onlbuttonup._fireUserEvent(this,_ae);}else{_t=this.onlbuttonup._fireSysEvent(this,_ae);}}if(!_n){if(_q){if(this.selectchangetype=="up"){if(this.selecttype!="area"&&this.selecttype!="multiarea"){if(!this._is_drag_selecting){this._mouseSelection(_q,_c,_d,_g,_h,_k,_l);this._endExtraTrack();}}}}this._common_fire_sys_lbuttonup(_q,_b,_c,_d);this._resizerStart(_g,_h,_q,"up",_l);}return _t;};_pGrid.on_fire_user_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){var _m=_l;_m=this._findCellObj(_m);var _n;if(_m&&_m._type_name=="GridCell"){if(_m.parentcell){_n=_m;_m=_m.parentcell;}}var _o=this._recalcXY(_m,_g,_h,false,_l);_g=_o.canvasX;_h=_o.canvasY;_i=_o.clientX;_j=_o.clientY;if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var _p=this._makeEventInfo(_m,_n,_l);var _q=this._getRootComponent(_l);var _r=_p.cell;var _s=_p.col;var _t=_p.mergecell;var _u=_p.mergecol;var _v=_p.mergerow;var _w=_p.pivotindex;var _x=_p.row;var _y=_p.subrow;var _z=new nexacro.GridMouseEventInfo(_q,"onrbuttonup",_r,_s,_t,_u,_v,_w,_x,_y,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);return this.onrbuttonup._fireUserEvent(this,_z);}return false;};_pGrid.on_fire_user_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this.on_fire_onmouseup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,true);};_pGrid.on_fire_sys_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return this.on_fire_onmouseup(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,false);};_pGrid.on_fire_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=_l;_n=this._findCellObj(_n);var _o;if(_n&&_n._type_name=="GridCell"){if(_n.parentcell){_o=_n;_n=_n.parentcell;}}var _p=this._recalcXY(_n,_g,_h,false,_l);_g=_p.canvasX;_h=_p.canvasY;_i=_p.clientX;_j=_p.clientY;var _q=false;if(this.onmouseup&&this.onmouseup._has_handlers){var _r=this._makeEventInfo(_n,_o,_l);var _s=this._getRootComponent(_k);var _t=_r.cell;var _u=_r.col;var _v=_r.mergecell;var _w=_r.mergecol;var _x=_r.mergerow;var _y=_r.pivotindex;var _z=_r.row;var _aa=_r.subrow;var _ab=new nexacro.GridMouseEventInfo(_s,"onmouseup",_t,_u,_v,_w,_x,_y,_z,_aa,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);if(_m){_q=this.onmouseup._fireUserEvent(this,_ab);}else{_q=this.onmouseup._fireSysEvent(this,_ab);}}return _q;};_pGrid.on_fire_user_onlongpress=function(_a,_b,_c,_d){var _e=_d;_e=this._findCellObj(_e);this._recalcTouchInfosXY(_e,_b,false,_d);var _f=nexacro._getFirstTouchInfo(_b);var _g;if(_e&&_e._type_name=="GridCell"){if(_e.parentcell){_g=_e;_e=_e.parentcell;}}var _h=false;if(this.onlongpress&&this.onlongpress._has_handlers){var _i=this._makeEventInfo(_e,_g,_d);var _j=_i.cell;var _k=_i.col;var _l=_i.mergecell;var _m=_i.mergecol;var _n=_i.mergerow;var _o=_i.pivotindex;var _p=_i.row;var _q=_i.subrow;var _r=new nexacro.GridLongPressEventInfo(this,"onlongpress",_b,_c,_d,_j,_k,_p,_q,_o,_l,_m,_n);return this.onlongpress._fireUserEvent(this,_r);}return false;};_pGrid._resizerStart=function(_a,_b,_c,_d,_e){if(this._movingcell){return;}var _f=this._resizer_colctrl;var _g=this._resizer_rowctrl;if((_f&&_f._is_tracking)||(_g&&_g._is_tracking)){return;}var _h=_a;var _i=_b;var _j=_c._rowidx;var _k=_c._cellidx;if(_c._is_alive==false){if(_j== -1){_c=this._getCurrentHeadCell(_k,true);}else{_c=this._getCurrentBodyCell(_j,_k);}}if(!_c){return;}var _l=(_c._refobj)?_c._refobj._area:"";var _m=(_c._band)?_c._band.id:"";if(_l=="body"){_h+=this._getScrollLeft();}if(_m=="body"){if(!_c.parent._fixed){_i+=this._getScrollTop();}}var _n=false;if(_f&&!_f._is_tracking){var _o=nexacro._getCachedValueObj("col-resize");var _p=this._resizerColRange;var _q=_p.length;if(_q>0){_f._is_range=false;for(var _s=0;_s<_q;_s++ ){var _r=_p[_s];if(_h>=_r.left&&_h<=_r.right){if(_l!=_r.area){continue;}if(_i>=_r.top&&_i<=_r.bottom){this.a=_h;_f._is_range=true;_f._setIndex(_r.index);this._setGlobalCursor(_o,_c);_n=true;break;}}}}if(!_f._is_range&&!_f._is_tracking&&(!_g||!_g._is_tracking)){if(_c._type_name!="GridCell"){this._setGlobalCursor(null,_e);}else{this._setGlobalCursor(null,_c);}_n=false;}else if(_f._is_tracking){this._setGlobalCursor(_o,_c);_n=true;}}if(_n){return;}if(_g&&!_g._is_tracking){var _o=nexacro._getCachedValueObj("row-resize");var _p=this._resizerRowRange;var _q=_p.length;if(_q>0){_g._is_range=false;for(var _s=0;_s<_q;_s++ ){var _r=_p[_s];if(_i>=_r.top&&_i<=_r.bottom){if(_m!=_r.area){continue;}if(_h>=_r.left&&_h<=_r.right){_g._is_range=true;_g._setIndex(_r.index);this._setGlobalCursor(_o,_c);break;}}}}if(!_g._is_range&&!_g._is_tracking&&(!_f||!_f._is_tracking)){if(_c._type_name!="GridCell"){this._setGlobalCursor(null,_e);}else{this._setGlobalCursor(null,_c);}}else if(_g._is_tracking){this._setGlobalCursor(_o,_c);}}};_pGrid.on_fire_user_ontouchmove=function(_a,_b,_c,_d){var _e=_d;_e=this._findCellObj(_e);this._recalcTouchInfosXY(_e,_b,false,_d);var _f;if(_e&&_e._type_name=="GridCell"){if(_e.parentcell){_f=_e;_e=_e.parentcell;}}var _g=false;if(this.ontouchmove&&this.ontouchmove._has_handlers){var _h=this._makeEventInfo(_e,_f,_d);var _i=_h.cell;var _j=_h.col;var _k=_h.mergecell;var _l=_h.mergecol;var _m=_h.mergerow;var _n=_h.pivotindex;var _o=_h.row;var _p=_h.subrow;var _q=new nexacro.TouchEventInfo(this,"ontouchmove",_a,_b,_c,_d);_g=this.ontouchmove._fireUserEvent(this,_q);}return _g;};_pGrid.on_fire_user_onmousemove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(!_l._is_alive){return;}var _m=_l;_m=this._findCellObj(_m);var _n;if(_m&&_m._type_name=="GridCell"){if(_m.parentcell){_n=_m;_m=_m.parentcell;}}var _o=this._recalcXY(_m,_g,_h,false,_l);_g=_o.canvasX;_h=_o.canvasY;_i=_o.clientX;_j=_o.clientY;var _p=false;if(this.onmousemove&&this.onmousemove._has_handlers){var _q=this._makeEventInfo(_m,_n,_l);var _r=this._getRootComponent(_l);var _s=_q.cell;var _t=_q.col;var _u=_q.mergecell;var _v=_q.mergecol;var _w=_q.mergerow;var _x=_q.pivotindex;var _y=_q.row;var _z=_q.subrow;var _aa=new nexacro.GridMouseEventInfo(_r,"onmousemove",_s,_t,_u,_v,_w,_x,_y,_z,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);_p=this.onmousemove._fireUserEvent(this,_aa);}if(!nexacro.isTouchInteraction){this._resizerStart(_g,_h,_m,"move",_l);}return _p;};_pGrid._prevAreaCellObj=null;_pGrid._areaselectMove=function(_a,_b,_c){if(this._is_drag_selectstart&&!this._showEditing){var _d=_a;_d=this._findCellObj(_d);var _e,_f;if(_d&&_d._type_name=="GridCell"){if(_d.parentcell){_e=_d;_d=_d.parentcell;}var _g=this._recalcXY(_d,_b,_c,false,_a);_b=_g.canvasX;_c=_g.canvasY;clientX=_g.clientX;clientY=_g.clientY;if((this._prevAreaCellObj==_d)&&!this._fixed_row_scrolling){return;}_f=_d._refobj._area;var _h=this._getDataRow(_d._rowidx);if(_h==undefined){_h=0;}if(this._isFakeCell(_h)||_h<0){return true;}var _i=this._beforebodycellpos=this._selectinfo.curcell;var _j=this._beforebodycolpos=this._selectinfo.curcol;var _k=this._beforebodyrowpos=this._selectinfo.curdsrow;var _l=this._beforebodysubrowpos=this._selectinfo.cursubrow;var _m=this._beforepvt=this._selectinfo.curpvt;var _n=_d._cellidx;var _o=_d._refobj._col;var _p=_h;var _q=_d._refobj._row;var _r= -9;if(_e){_o+=_e._refobj._col;}if(this._fixed_rowcnt>0){var _s=this._fixed_startrow;var _t=this._fixed_endrow;var _u=this._selectinfo;if(_u.area.length>0){var _v=_u.area[_u.area.length-1];var _w=_v.begrow;var _x=_v.endrow;var _y=this.vscrollbar.pos;var _z=this._getScrollTop();var _aa="";if(_p<_k){_aa="up";}else if(_p>_k){_aa="down";}else{_aa="keep";}if(_aa=="up"){this._fixed_row_scrolling=true;if(_x>_p&&_p<=_t&&_x>_t){this.vscrollbar.set_pos(_y-1);}else{this._fixed_row_scrolling=false;}}else if(_aa=="down"){if(_w<=this._fixed_endrow&&_x<=this._fixed_endrow){this._fixed_row_scroll_zeroset=true;}else{this._fixed_row_scroll_zeroset=false;}if(this._fixed_row_scroll_zeroset&&_p&&(_p<=0||(_p<=this._fixed_endrow&&_x>this._fixed_endrow)||(_p>this._fixed_endrow&&_w<=this._fixed_endrow))){if(_y>0){this.vscrollbar.set_pos(0);this._fixed_row_scroll_zeroset=false;return;}}}else{if(_y==0){this._fixed_row_scrolling=false;}else if(this._fixed_row_scrolling){this.vscrollbar.set_pos(_y-1);}}}}if(this._fixed_rowcnt>0){var _s=this._fixed_startrow;var _t=this._fixed_endrow;var _u=this._selectinfo;if(_u.area.length>0){var _v=_u.area[_u.area.length-1];var _w=_v.begrow;var _x=_v.endrow;var _y=this.vscrollbar.pos;var _z=this._getScrollTop();var _aa="";if(_p<_k){_aa="up";}else if(_p>_k){_aa="down";}else{_aa="keep";}if(_aa=="up"){this._fixed_row_scrolling=true;if(_x>_p&&_p<=_t&&_x>_t){this.vscrollbar.set_pos(_y-1);}else{this._fixed_row_scrolling=false;}}else if(_aa=="down"){if(_w<=this._fixed_endrow&&_x<=this._fixed_endrow){this._fixed_row_scroll_zeroset=true;}else{this._fixed_row_scroll_zeroset=false;}if(this._fixed_row_scroll_zeroset&&_p&&(_p<=0||(_p<=this._fixed_endrow&&_x>this._fixed_endrow)||(_p>this._fixed_endrow&&_w<=this._fixed_endrow))){if(_y>0){this.vscrollbar.set_pos(0);this._fixed_row_scroll_zeroset=false;return;}}}else{if(_y==0){this._fixed_row_scrolling=false;}else if(this._fixed_row_scrolling){this.vscrollbar.set_pos(_y-1);}}}}while(true){if(this.selecttype=="multirow"&&_p==_k){break;}this._setSelectedInfo(_n,_o,_p,_q,_r);this._ChangeSelect(_n,_o,_p,_q,_r,false,_i,_j,_k,_l,_m,_d._band.id,"mousemove");break;}this._prevAreaCellObj=_d;}}};_pGrid._on_start_extratrack=function(_a,_b,_c,_d,_e){var _f=this._getScrollLeft();var _g=this._getScrollTop();this._track_point.x=_c;this._track_point.y=_d;this._track_point.w=0;this._track_point.h=0;this._track_point.cur_rect={l:0,t:0,w:0,h:0};this._track_start_info={};this._track_start_info.target=this._lastmouseentercell;this._track_start_info.cell_screenX=system.clientToScreenX(this._lastmouseentercell,0);this._track_start_info.cell_screenY=system.clientToScreenY(this._lastmouseentercell,0);var _h=this._getOwnerFrame();if(_h&&(_h._window_type==1||_h._window_type==4||_h._window_type==5)){var _i=this._lastmouseentercell._adjust_left;var _j=this._lastmouseentercell._adjust_top;var _k=this._lastmouseentercell.parent;while(_k){if(_k._is_frame){break;}_i+=_k._adjust_left;_j+=_k._adjust_top;_k=_k.parent;}var _l=system.clientToScreenX(_h,0);var _m=system.clientToScreenY(_h,0);if(_l==0&&_h._adjust_left<0){_l=_h._adjust_left;}if(_m==0&&_h._adjust_top<0){_m=_h._adjust_top;}this._track_start_info.cell_screenX=_l+_i;}this._track_start_info.start_screenX=_c;this._track_start_info.start_screenY=_d;this._track_start_info.scrollLeft=_f;this._track_start_info.scrollTop=_g;this._track_start_info._start_begarea=this._selectinfo.arearect.barea;this._track_start_info._start_endarea=this._selectinfo.arearect.earea;var _n=this._getSelectRect(false,true);var _o=this._getExtraTrackSelectRect(_c,_d,0,0,true);if(!_e){this._startAreaSizing(_o,_o.idx);}this._track_mode="areaselect";};_pGrid._on_move_extratrack=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._getRootComponent(_a);if(!_a||(this._showEditing==false&&(_h!=this||_a&&(_h==this&&_a instanceof nexacro.GridCell&&(_a._band.id=="head"||_a._band.id=="summ"))||(_h==this&&_a instanceof nexacro.GridRow&&_a._band.id=="body")||(_h==this&&_a.id=="body")))){var _i=this._getExtraTrackSelectRect(_f,_g,_d,_e,false);var _j=_i.idx;var _k=this._getTrackType(this._track_start_info,_i.l,_i.t,_i.w,_i.h,_j,false);var _l=this._selectinfo.area;if(this._fixed_rowcnt>0&&_l.length){var _m=_l[_l.length-1];var _n=_m.begrow;var _o=_m.endrow;var _p=this._selectinfo.ctrlpoint;var _q=_p.row;var _r=_p.col;var _s=this.currentstyle.border;var _t=(_s)?parseInt(_s.right_width,10):0;var _u=this._getHeadHeight();var _v=this._fixed_height;var _w=_u+_v+_t;var _x=this._fixed_startrow;var _y=this._fixed_endrow;var _z=_i.t;var _aa=_i.h;var _ab=this._getScrollTop();var _ac=this.vscrollbar;if(_n<=_y&&_o<=_y&&_ab>0&&(_z+_aa)>_w){_ac.set_pos(0);}else if(_n<=_y&&_o>=_y&&_ab>0&&(_z+_aa)<=_w){_ac.set_pos(_ac.pos-1);}else if(_p.row>_y&&_ab>0&&_z<=_w){_ac.set_pos(_ac.pos-1);}}this._applySelectorScroll(_k.type);this._applyAreaSizing(_i,_j);var _ad=this._getSelectRect(false,true);this._extratrack_typeinfo=_k;this._extratrack_rectinfo=_i;this._extratrack_idx=_j;var _ae=500;var _af=10;function getTimerInterval(_a){var _ah=_ae;var _ai=nexacro.System.clientToScreenX(_a,0);var _aj=nexacro.System.clientToScreenY(_a,0);var _ak=_a._getOwnerFrame();if(_ak&&(_ak._window_type==1||_ak._window_type==4)){var _al=_a._adjust_left;var _am=_a._adjust_top;var _an=_a.parent;while(_an){if(_an._is_frame){break;}_al+=_an._adjust_left;_am+=_an._adjust_top;_an=_an.parent;}var _ao=system.clientToScreenX(_ak,0);var _ap=system.clientToScreenY(_ak,0);if(_ao==0&&_ak._adjust_left<0){_ao=_ak._adjust_left;}if(_ap==0&&_ak._adjust_top<0){_ap=_ak._adjust_top;}_ai=_ao+_al;}var _aq=_ai+parseInt(_a._adjust_width);var _ar=_aj+parseInt(_a._adjust_height);var _as=(_f<_ai)?(_ai-_f):(_f-_aq);var _at=(_g<_aj)?(_aj-_g):(_g-_ar);if(_as>=0){_ah=_ah-(_as*10);return _ah>0?_ah:1;}if(_at>=0){_ah=_ah-(_at*10);return _ah>0?_ah:1;}return  -1;}var _ag=getTimerInterval(this);if(_ag>0&&_ag<_af){_ag=_af;}if(_ag>0){if(!this._extratrack_timer){this._extratrack_timer={};this._extratrack_timer._handle=null;this._extratrack_timer._interval=_ag;this._extratrack_timer._handle=new nexacro.CallbackTimer(this,function(){this._applySelectorScroll(this._extratrack_idx,this._extratrack_typeinfo.type);this._applyAreaSizing(this._extratrack_rectinfo,this._extratrack_idx);var _ad=this._getSelectRect(false,true);},_ag);this._extratrack_timer._handle.start();}else{if(this._extratrack_timer&&this._extratrack_timer._interval!=_ag){if(_ag>0){this._extratrack_timer._interval=_ag;this._extratrack_timer._handle.setInterval(_ag);this._extratrack_timer._handle.start();}else{this._extratrack_timer._handle.stop();}}}}}else{if(this._extratrack_timer){this._extratrack_timer._handle.stop();}}};_pGrid._on_end_extratrack=function(_a,_b,_c){var _d=this._select_ctrl;this._track_start_info=null;this._track_idx= -1;this._track_mode="";if(this._extratrack_timer){this._extratrack_timer._handle.stop();this._extratrack_timer._handle=null;this._extratrack_timer=null;}var _e=this._getSelectRect(false,true);};_pGrid._endExtraTrack=function(){this._on_end_extratrack();nexacro._cur_extra_track_info=null;};_pGrid._trackingHScroll=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=[0,0];if(!this.hscrollbar){return _j;}var _k=this.hscrollbar;if(_a==0||_a==2){if(_d=="right"){if(_b<_g&&_b>_f){_k.set_pos(_i);}}else if(_d=="left"){if(_b>_f&&_b<_g){_k.set_pos(0);_j[1]=_h;}}}else{if(_e=="left"){if(_c>_f&&_c<_g){_k.set_pos(0);}}else if(_e=="right"){if(_c<_g&&_c>_f){_k.set_pos(_i);_j[0]=_h-_i;_j[1]=_i-_h;}}}return _j;};_pGrid._getTrackType=function(_a,_b,_c,_d,_e,_f,_g){var _h,_i,_j,_k;var _l=this;var _m=_l._curFormat;var _n=["",""];var _o=_l._selectinfo.ctrlpoint.area;var _p=_m.leftWidth;var _q=_l._client_width-_m.rightWidth;var _r=_m.leftWidth+_m.bodyWidth;var _s=_l._getScrollLeft();var _t=_l._getScollMaxLeft();var _u=_b+_d;var _v=_l._getHeadHeight();var _w=_l._fixed_height;var _x=_v+_w;if(_g){if(_o=="left"){_h=0;_i=_p;}else if(_o=="right"){_h=_q;_i=_l._client_width;}else{_h=_p;_i=(_r<_q)?_r:_q;}}else{var _y=this._trackingHScroll(_f,_b,_u,_p,_a._start_begarea,_a._start_endarea,_q,_s,_t);_b+=_y[0];_d+=_y[1];_u=_b+_d;if(_o=="left"){_h=0;if(_s==_t){_i=(_r<_l._client_width)?_r:_l._client_width;}else{_i=(_r<_q)?_r:_q;}}else if(_o=="right"){if(_s==0){_h=0;}else{_h=_p;}_i=_l._client_width;}else{if(_s==0){_h=0;}else{_h=_p;}if(_s==_t){_i=(_r<_l._client_width)?_r:_l._client_width;}else{_i=(_r<_q)?_r:_q;}}}_j=this._bodyBand._adjust_top;_k=this._bodyBand._getPosBottom();if(_f==0){if(_b<_h){_d-=(_h-_b);_b=_h;if(this._start_begarea!="left"){_n[0]="leftover0";}}else if(_b>_i||(_s<_t&&_b>_q)){_n[0]="rightover0";}if(_l._fixed_rowcnt>0){if(_c<(_w+_v)){_n[1]="topover0";}else if(_c>_k){_n[1]="bottomover0";}}else{if(_c<_j){_e-=(_j-_c);_c=_j;_n[1]="topover0";}else if(_c>_k){_n[1]="bottomover0";}}if(_d<=0){_b+=_d-1;}if(_e<=0){_c+=_e-1;}}else if(_f==1){var _z=_b+_d,_aa=_c+_e;if(_z<_h||(_s>0&&_z<_p)){_n[0]="leftover1";}else if(_z>_i){_d=_i-_b;if(this._start_endarea!="right"){_n[0]="rightover1";}}if(_aa<_j){_n[1]="topover1";}else if(_aa>_k){_e=_k-_c;_n[1]="bottomover1";}}else if(_f==2){var _aa=_c+_e;if(_b<_h){_d-=(_h-_b);_b=_h;if(this._start_begarea!="left"){_n[0]="leftover0";}}else if(_b>_i||(_s<_t&&_b>_q)){_n[0]="rightover0";}if(_aa<_j||_aa>_x){_n[1]="topover1";}else if(_aa>_k){_e=_k-_c;_n[1]="bottomover1";}}else if(_f==3){var _z=_b+_d;if(_z<_h||(_s>0&&_z<_p)){_n[0]="leftover1";}else if(_z>_i){_d=_i-_b;if(this._start_endarea!="right"){_n[0]="rightover1";}}if(_c<_j){_n[1]="topover1";}else if(_c>_k){_e=_k-_c;_n[1]="bottomover1";}}return {type:_n,adjust_l:_b,adjust_t:_c,adjust_w:_d,adjust_h:_e};};_pGrid._getExtraTrackSelectRect=function(_a,_b,_c,_d,_e){var _f=1;var _g=this._track_start_info;var _h=_g.start_screenX;var _i=_g.start_screenY;var _j=_g.cell_screenX;var _k=_g.cell_screenY;var _l=_g.scrollLeft;var _m=_g.scrollTop;var _n=_g.target.width;var _o=_g.target.height;var _p=_g.target._rowidx;var _q=_k-_i;var _r=_k-_i+_o;var _s=_h-_j;var _t=_j-_h+_n;var _u=this._getScrollLeft();var _v=this._getScrollTop();var _w=_u-_l;var _x=_v-_m;var _y=_x;var _z=system.clientToScreenX(this,0);var _aa=system.clientToScreenY(this,0);var _ab=this._getOwnerFrame();if(_ab&&(_ab._window_type==1||_ab._window_type==4||_ab._window_type==5)){var _ac=this._adjust_left;var _ad=this._adjust_top;var _ae=this.parent;while(_ae){if(_ae._is_frame){break;}_ac+=_ae._adjust_left;_ad+=_ae._adjust_top;_ae=_ae.parent;}var _af=system.clientToScreenX(_ab,0);var _ag=system.clientToScreenY(_ab,0);if(_af==0&&_ab._adjust_left<0){_af=_ab._adjust_left;}if(_ag==0&&_ab._adjust_top<0){_ag=_ab._adjust_left;}_z=_af+_ac;}var _ah=true;if(this._fixed_rowcnt>0&&_p>=this._fixed_startrow&&_p<=this._fixed_endrow){_ah=false;}if(!_ah){_y=0;}if(_a<(_h-_w)&&_b<(_i-_y)){_f=0;}else if(_a>(_h-_w)&&_b>(_i-_y)){_f=1;}else if(_a<(_h-_w)&&_b>(_i-_y)){_f=2;}else if(_a>(_h-_w)&&_b<(_i-_y)){_f=3;}var _ai=_c;var _aj=_d;var _ak=new Array(2);var _al=this.currentstyle.border;var _am=(_al)?parseInt(_al.left_width,10):0;var _an=(_al)?parseInt(_al.right_width,10):0;var _ao=(_al)?parseInt(_al.right_width,10):0;var _ap=(_al)?parseInt(_al.right_width,10):0;var _aq,_ar,_as,_at;if(_f==0){_aq=this._track_point.x-_z+_ai;_ar=this._track_point.y-_aa+_aj;_as= -(_ai);_at= -(_aj)-(_ah?_x:0);}else if(_f==1){_aq=this._track_point.x-_z-_w;_ar=this._track_point.y-_aa-(_ah?_x:0);_as=_ai+_w;_at=_aj+(_ah?_x:0);}else if(_f==2){_aq=this._track_point.x-_z+_ai;_ar=this._track_point.y-_aa-(_ah?_x:0);_as= -(_ai)-_w;_at=_aj+(_ah?_x:0);}else if(_f==3){_aq=this._track_point.x-_z-_w;_ar=this._track_point.y-_aa+_aj;_as=_ai+_w;_at= -(_aj)-(_ah?_x:0);}return {idx:_f,l:_aq,t:_ar,w:_as,h:_at};};_pGrid.on_fire_sys_onmousemove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(!this.enable){return true;}return this._areaselectMove(_l,_g,_h);};_pGrid._setSelectedInfo=function(_a,_b,_c,_d,_e,_f){if(_a!==null){this._selectinfo.curcell=_a;}if(_b!==null){this._selectinfo.curcol=_b;}if(_c!==null){this._selectinfo.curdsrow=_c;this._selectinfo.currow=(_c<0)?_c:this._getTreeRowPosition(_c);}if(_d!==null){this._selectinfo.cursubrow=_d;}if(_e!==null){this._selectinfo.curpvt=_e;}if(this._currentBand=="body"){if(_a!==null){this.currentcell=_a;}if(_b!==null){this.currentcol=_b;}if(_c!==null){this._currentDSrow=_c;this.currentrow=(_c<0)?_c:this._getTreeRowPosition(_c);}if(_d!==null){this.currentsubrow=_d;}if(_e!==null){this.currentpivot=_e;}}if(_f){this._selectinfo.areainfo=null;this._selectinfo.areainfo={srow:_f.srow,erow:_f.erow,scell:_f.scell,ecell:_f.ecell,scol:_f.scol,ecol:_f.ecol,ssubrow:_f.ssubrow,esubrow:_f.esubrow,spvt:_f.spvt,epvt:_f.epvt};}};_pGrid._is_drag_selecting=false;_pGrid._on_grid_lbuttondown=function(_a,_b,_c,_d,_e){if(!this._is_alive){return;}if(!this.enable){return true;}var _f=this._getDataRow(_a._rowidx);if(_f==undefined){_f=0;}if(this._isFakeCell(_f)||_f<0){return true;}var _g=this._beforebodycellpos=this._selectinfo.curcell;var _h=this._beforebodycolpos=this._selectinfo.curcol;var _i=this._beforebodyrowpos=this._selectinfo.curdsrow;var _j=this._beforebodysubrowpos=this._selectinfo.cursubrow;var _k=this._beforepvt=this._selectinfo.curpvt;var _l=_a._cellidx;var _m=_a._refobj._col;var _n=_f;var _o=_a._refobj._row;var _p= -9;var _q=_a.parentcell;this._prevAreaCellObj=_a;if(_q){_l=_q._cellidx;_m+=_q._refobj._col;this._prevAreaCellObj=_q;}if(!_e){this._setSelectedInfo(_l,_m,_n,_o,_p);}if(_c==true){if(this._isMultiSelect()){this._multiselect="ctrl";}else{this._multiselect="none";}}else if(_d==true){if(this._isMultiSelect()||this._isAreaSelect()){this._multiselect="shift";}else{this._multiselect="none";}}else{if(this._multiselect!="none"){this._selectClear=true;}this._multiselect="none";}if((this._isAreaSelect()||this._isMultiSelect())&&!nexacro.isTouchInteraction){this._is_drag_selectstart=true;}var _r=false;if(!_e){_r=this._ChangeSelect(_l,_m,_n,_o,_p,false,_g,_h,_i,_j,_k,_b,"lbuttondown");};if(!_r){if(!this._isIncludeSelectpos(_l,_n)){this._is_drag_selectstart=false;}this._is_drag_sameselect=true;}if(this._is_drag_selectstart){var _s=this._getWindow();if(!nexacro.isTouchInteraction&&(this._isAreaSelect()||this.selecttype=="multirow")){if(nexacro.Browser=="Runtime"){var _t=this._getOwnerFrame();if(_t._window_type!=1&&_t._window_type!=4&&_t._window_type!=5){_t=application.mainframe;}var _u=system.clientToScreenX(_t,0)+_s._curWindowX-((_t._adjust_left>=0)?_t._adjust_left:0);var _v=system.clientToScreenY(_t,0)+_s._curWindowY-((_t._adjust_top>=0)?_t._adjust_top:0);nexacro._setExtraTrackInfo(_s,this,_s._curWindowX,_s._curWindowY,_u,_v,_d||_e);}else{nexacro._setExtraTrackInfo(_s,this,_s._curWindowX,_s._curWindowY,_s._cur_screen_pos.x,_s._cur_screen_pos.y,_d||_e);}}}return _r;};_pGrid.on_fire_onselectchanged=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.onselectchanged&&this.onselectchanged._has_handlers){var _t=new nexacro.GridSelectEventInfo(_a,"onselectchanged",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s);return this.onselectchanged._fireEvent(this,_t);}return true;};_pGrid.on_fire_user_onkeyup=function(_a,_b,_c,_d,_e,_f){if(!this.enable){return true;}if(_d==false&&_c==false){if(_a!=nexacro.Event.KEY_SHIFT&&_a!=nexacro.Event.KEY_CTRL){this._multiselect="none";}}this._keydown_elem=null;var _g=nexacro.Component.prototype.on_fire_user_onkeyup.call(this,_a,_b,_c,_d,_e,_f);if(!this._is_alive){return _g;}if(_a==nexacro.Event.KEY_RIGHT&&_b){var _h=this._curFormat;if(_h){var _i=_h._bodycells;if(_i&&_i.length){var _j=this._getBodyCellInfo(this._selectinfo.curcell);if(_j){var _k=_j._getAttrValue(_j.expandshow,this._selectinfo.curdsrow);if(_k=="show"){if(this.onkeyup&&this.onkeyup.defaultprevented==true){}else{this.on_fire_onexpandup("none",_b,_c,_d, -1, -1, -1, -1, -1, -1,_e,_f);}}}}}}return _g;};_pGrid.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f){if(this._is_down_act){this._on_last_keyup(true);}};_pGrid.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f){var _g=nexacro.AccessibilityUtil.checkComponentHotkey(this,_a,_b,_c,_d);if(_g){this._hideEditor();var _h=this.currentrow;switch(_g){case nexacro.AccessibilityUtil.Hotkey.FIRSTCELL:this.currentcell=0;this._currentBand="grid";if(this.vscrollbar&&this.vscrollbar.visible){this.vscrollbar.set_pos(0);}this._setAccessibilityBandFocus("next",false,true);break;case nexacro.AccessibilityUtil.Hotkey.LASTCELL:this.currentcell=this._getAccessibilityCellIndex()-1;this._currentBand="grid";if(this.vscrollbar&&this.vscrollbar.visible){this.vscrollbar.set_pos(this.vscrollbar._max);}this._setAccessibilityBandFocus("prev",false,true);break;case nexacro.AccessibilityUtil.Hotkey.FIRSTCELLINROW:this.currentcol=0;if(nexacro._enableaccessibility){this._moveToPosAccessibilityCell(_h,0);}else{this._moveToPosCell(_h,0);}break;case nexacro.AccessibilityUtil.Hotkey.LASTCELLINROW:this.currentcol=this._curFormat._cols.length-1;if(nexacro._enableaccessibility){this._moveToPosAccessibilityCell(_h,this.currentcol);}else{this._moveToPosCell(_h,this.currentcol);}break;case nexacro.AccessibilityUtil.Hotkey.FIRSTCELLINCOLUMN:this._currentBand="grid";if(this.vscrollbar&&this.vscrollbar.visible){this.vscrollbar.set_pos(0);}if(nexacro._enableaccessibility){this._setAccessibilityBandFocus("next",false,true);}else{this._moveToPosCell(0,this.currentcol);}break;case nexacro.AccessibilityUtil.Hotkey.LASTCELLINCOLUMN:this._currentBand="grid";if(this.vscrollbar&&this.vscrollbar.visible){this.vscrollbar.set_pos(this.vscrollbar._max);}if(nexacro._enableaccessibility){this._setAccessibilityBandFocus("prev",false,true);}else{this._moveToPosCell(this._rowcount-1,this.currentcol);}break;}return true;}if(!this.enable){return true;}if(_a!=nexacro.Event.KEY_TAB){var _i=nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f);if((this.onkeydown&&this.onkeydown.defaultprevented==true)||!this._is_alive){return _i;}}this._keydown_elem=this._getWindow()._keydown_element;var _j=false;if(this._isAreaSelect()){_j=true;}if(_d==true){if(_a==nexacro.Event.KEY_SHIFT){return _i;}if(this._isMultiSelect()||this._isAreaSelect()){this._multiselect="shift";}else{this._multiselect="none";}}else if(_c==true){if(_a==nexacro.Event.KEY_CTRL){return _i;}if(this._multiselect!="none"){this._selectClear=true;}this._multiselect="none";}else{if(this._multiselect!="none"){this._selectClear=true;}this._multiselect="none";}var _k=false;var _l=true;this._is_data_enter_apply=false;if(this.autoenter=="key"&&nexacro.Browser=="Runtime"){if(this._isChar(_a)||_a==25){if(!this._showEditing){this._showEditor();if(_a==nexacro.Event.KEY_ENTER){_k=true;}else{if(this._currentCellEditor&&this._currentCellEditor._set_absolutelyValue){this._currentCellEditor._set_absolutelyValue("");}}}}}if(_a==nexacro.Event.KEY_ENTER&&this._showEditing){var _m=this._currentCellEditor;var _n=_m._cellinfo._getEdittype(_m._cellobj._rowidx);var _o=_m._cellinfo._getAttrValue(_m._cellinfo.editacceptsenter);_o=nexacro._toBoolean(_o);if(_n=="textarea"&&((!_o&&(_b||_c||_d))||(_o&&!_b&&!_c&&!_d))){;}else if(_n=="text"||_n=="mask"||_n=="date"||_n=="combo"||_n=="masknumber"||_n=="textarea"){if(_m.calendaredit){_m.calendaredit._edit_base_api.syncValue();_m._fireKeydownEvent();}else if(_m.comboedit){_m.comboedit._edit_base_api.syncValue();}else{_m._edit_base_api.syncValue();}_k=true;_l=false;if((_f instanceof nexacro.ComboEditCtrl||_f instanceof nexacro.CalendarEditCtrl)&&_f.parent._isPopupVisible()){;}else{this._hideEditor();if(this._setdataobj&&this._setdataobj.succ==false){_l=true;}else{if(this.autoenter=="select"){this._is_data_enter_apply=true;}}}}}var _p=_f;var _q="";if(_a==nexacro.Event.KEY_UP){if(this._isEditorKeyAction(this._keydown_elem,_f,_a,_b,_c,_d)==false){if(_c){if(this.vscrollbar&&this.vscrollbar.enable){var _r;if(this._scrollpixel=="all"){_r=this.vscrollbar.pos-25;}else{_r=this.vscrollbar.pos-1;}if(_r<0){_r=0;}this.vscrollbar.set_pos(_r);}}else{if(nexacro._enableaccessibility){_i=this._moveToAccessibilityCell("up",false);}else{this._moveToCell("up");}}}}else if(_a==nexacro.Event.KEY_DOWN){if(this._isEditorKeyAction(this._keydown_elem,_f,_a,_b,_c,_d)==false){if(_c){var _r;if(this._scrollpixel=="all"){_r=this.vscrollbar.pos+25;}else{_r=this.vscrollbar.pos+1;}if(_r>this.vscrollbar.max){_r=this.vscrollbar.max;}this.vscrollbar.set_pos(_r);}else{if(nexacro._enableaccessibility){_i=this._moveToAccessibilityCell("down",false);}else{this._moveToCell("down");}}}}else if(_a==nexacro.Event.KEY_SPACE){if(!nexacro._enableaccessibility||nexacro._enableaccessibility&&this._currentBand=="body"){var _s=this._curFormat;if(_s){var _t=_s._bodycells;if(_t&&_t.length){var _u=_t[this._selectinfo.curcell];if(_u){var _v=_u._getEdittype(this._selectinfo.curdsrow);if(_v=="checkbox"&&nexacro._toBoolean(this.readonly)==false){if(this._toggleVal(this._selectinfo.curdsrow,_u)){this._jumpCurrentRow(this._selectinfo.currow);}}}}}}}else if(_a==nexacro.Event.KEY_ENTER){if(!nexacro._enableaccessibility||nexacro._enableaccessibility&&this._currentBand=="body"){{var _v="";if(_f._type_name=="GridCell"){_v=_f._refobj._getEdittype(_f._rowidx);_q=_f._refobj._getValue(_f._rowidx);}else if(_f instanceof nexacro.GridControlCheckbox){_q=_f._cellinfo._getValue(_f._cellobj._rowidx);}else if(_f.parent instanceof nexacro.GridControlCheckbox){_q=_f.parent._cellinfo._getValue(_f.parent._cellobj._rowidx);}if(_f instanceof nexacro.GridControlEdit||_f instanceof nexacro.GridControlTextArea||_f instanceof nexacro.GridControlMaskEdit||_f instanceof nexacro.GridControlCheckbox||_f.parent instanceof nexacro.GridControlCheckbox||_v=="checkbox"||_f instanceof nexacro.GridControlCalendar||_f.parent instanceof nexacro.GridControlCalendar||_f instanceof nexacro.GridControlCombo||_f.parent instanceof nexacro.GridControlCombo){if(nexacro.Browser=="Edge"||nexacro.Browser=="IE"){if(_f instanceof nexacro.GridControlCombo){_p=_f.comboedit;}}if(this._showEditing||_v=="checkbox"){if(!_b&&!_c&&!_d){_k=true;}}else if(_l){nexacro.OnceCallbackTimer.callonce(this,function(){this._showEditor();},50);}}else{if(!this._showEditing){nexacro.OnceCallbackTimer.callonce(this,function(){this._showEditor();},50);}}}}}else if(_a==nexacro.Event.KEY_LEFT){var _s=this._curFormat;if(_s){var _t=_s._bodycells;if(_t&&_t.length){var _u=this._getBodyCellInfo(this._selectinfo.curcell);if(_u){var _v=_u._getEdittype(this._selectinfo.curdsrow);if(_v=="tree"&&this.treeuseexpandkey){this._is_editor_keyaction=false;this._setTreeState(this._selectinfo.currow,0,true);}else if(_v=="combo"&&_u._getAttrValue(_u.combotype,this._getDataRow(this._selectinfo.curdsrow))=="dropdown"){this._is_editor_keyaction=false;if(nexacro._enableaccessibility){_i=this._moveToAccessibilityCell("prev",false,undefined,_j);}else{this._moveToCell("prev",false,_j,undefined,undefined,true);}}}}if(this._isEditorKeyAction(this._keydown_elem,_f,_a,_b,_c,_d)==false){if(nexacro._enableaccessibility){_i=this._moveToAccessibilityCell("prev",false,undefined,_j);}else{this._moveToCell("prev",false,_j,undefined,undefined,true);}}}}else if(_a==nexacro.Event.KEY_RIGHT){var _s=this._curFormat;if(_s){var _t=_s._bodycells;if(_t&&_t.length){var _u=this._getBodyCellInfo(this._selectinfo.curcell);if(_u){var _v=_u._getEdittype(this._selectinfo.curdsrow);if(_v=="tree"&&this.treeuseexpandkey){this._is_editor_keyaction=false;this._setTreeState(this._selectinfo.currow,1,true);}else if(_v=="combo"&&_u._getAttrValue(_u.combotype,this._getDataRow(this._selectinfo.curdsrow))=="dropdown"){this._is_editor_keyaction=false;if(nexacro._enableaccessibility){_i=this._moveToAccessibilityCell("next",false,undefined,_j);}else{this._moveToCell("next",false,_j,undefined,undefined,true);}}else{var _w=_u._getAttrValue(_u.expandshow,this._selectinfo.curdsrow);if(_w=="show"&&_b){this._is_editor_keyaction=false;this.on_fire_onexpanddown("none",_b,_c,_d, -1, -1, -1, -1, -1, -1,_e,_f);}}}}if(this._isEditorKeyAction(this._keydown_elem,_f,_a,_b,_c,_d)==false){if(nexacro._enableaccessibility){_i=this._moveToAccessibilityCell("next",false,undefined,_j);}else{this._moveToCell("next",false,_j,undefined,undefined,true);}}}}else if(_a==nexacro.Event.KEY_PAGE_UP){if(this.vscrollbar&&this.vscrollbar.enable){var _r=this.vscrollbar._pos-this.vscrollbar.page;if(this._scrollpixel!="all"){_r=this.vscrollbar._scroll_reverse_convert(_r)[0];}if(_r<0){_r=0;}this.vscrollbar.set_pos(_r);}}else if(_a==nexacro.Event.KEY_PAGE_DOWN){if(this.vscrollbar&&this.vscrollbar.enable){var _r=this.vscrollbar._pos+this.vscrollbar.page;if(this._scrollpixel!="all"){_r=this.vscrollbar._scroll_reverse_convert(_r)[0];}if(_r>this.vscrollbar.max){_r=this.vscrollbar.max;}this.vscrollbar.set_pos(_r);}}else if(_a==nexacro.Event.KEY_TAB){if(nexacro._enableaccessibility){if(_d){this._acceptstab=this._moveToAccessibilityCell("prev",true);}else{this._acceptstab=this._moveToAccessibilityCell("next",true);}}else{if(_d==true){this._acceptstab=this._moveToCell("prev",true,false,undefined,undefined,true);}else{this._acceptstab=this._moveToCell("next",true,false,undefined,undefined,true);}}if(this._acceptstab){var _i=nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f);if((this.onkeydown&&this.onkeydown.defaultprevented==true)||!this._is_alive){return _i;}}this._keydown_elem._event_stop=true;return this._acceptstab;}else{if(this.autoenter=="key"&&nexacro.Browser=="Runtime"){if(this._isChar(_a)||_a==25){if(!this._showEditing){this._showEditor();if(nexacro.Browser=="Gecko"){if(_k){this.on_fire_onenterdown(_a,_b,_c,_d,_e,_p,_q);}return true;}else if(nexacro.Browser=="Edge"||nexacro.Browser=="IE"){}}}}}if(_k){this.on_fire_onenterdown(_a,_b,_c,_d,_e,_p,_q);}return _i;};_pGrid.on_fire_allclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x){if((this.onlbuttondown&&this.onlbuttondown.defaultprevented==true)||(this.onlbuttonup&&this.onlbuttonup.defaultprevented==true)){return;}if(this._down_scroll_top>=0&&this._down_scroll_top!=this._last_scroll_top){return;}var _y=this[_b];if(_y&&_y._has_handlers&&this.enableevent){var _z=new nexacro.GridClickEventInfo(_a,_b,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w);_z.clickitem=_c;return _y._fireEvent(this,_z);}return true;};_pGrid._getByteLength_UTF8=function(_a,_b,_c,_d){for(_b=_c=0;_d=_a.charCodeAt(_c++ );_b+=_d>>11?3:_d>>7?2:1){}return _b;};_pGrid.on_fire_cellclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(!this._is_alive){return;}if(!this.enable){return true;}var _o=this._getDataRow(_a._rowidx);if(this._isFakeCell(_o)){return true;}var _p;if(_a.parentcell){_p=_a;_a=_a.parentcell;}var _q=this._recalcXY(_a,_i,_j,true,_n);_i=_q.canvasX;_j=_q.canvasY;_k=_q.clientX;_l=_q.clientY;if(nexacro.isTouchInteraction){if(_a._band.id=="body"){if(!(this._selectscrollmode=="select"&&this._isAreaSelect())){this._common_fire_sys_lbuttondown(_a,_e,_f,_i,_j,_m,_n);}}}var _r=this._beforebodycellpos;var _s=this._beforebodycolpos;var _t=this._beforebodyrowpos;var _u=this._beforebodysubrowpos;var _v=this._beforepvt;var _w=_a._cellidx;var _x=_a._refobj._col;var _y=_o;var _z=_a._refobj._row;var _aa= -9;var _ab=_a.parentcell;if(_p){_x+=_p._refobj._col;}var _ac=_n;var _ad=false;while(_ac&&_ac._type_name!="Grid"){if(_ac._displaymode==false&&!_ac._clickevt_able){_ad=true;}_ac=_ac.parent;}if(!_ad){this.on_fire_allclick(this,"oncellclick",_b,_r,_s,_t,_u,_v,_w,_x,_y,_z,_aa,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);}};_pGrid.on_fire_headclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(!this.enable||!this._is_alive){return true;}var _o;if(_a.parentcell){_o=_a;_a=_a.parentcell;}var _p=this._recalcXY(_a,_i,_j,true,_n);_i=_p.canvasX;_j=_p.canvasY;_k=_p.clientX;_l=_p.clientY;var _q=this._beforeheadcellpos;var _r=this._beforeheadcolpos;var _s=this._beforeheadrowpos;var _t=this._beforeheadsubrowpos;var _u=this._beforepvt;var _v=this._beforeheadcellpos=_a._cellidx;var _w=this._beforeheadcolpos=_a._refobj._col;var _x=this._beforeheadrowpos=this._getDataRow(_a._rowidx);var _y=this._beforeheadsubrowpos=_a._refobj._row;var _z= -9;if(_o){_w+=_o._refobj._col;}this.on_fire_allclick(this,"onheadclick",_b,_q,_r,_s,_t,_u,_v,_w,_x,_y,_z,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);};_pGrid.on_fire_summclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(!this.enable||!this._is_alive){return true;}var _o;if(_a.parentcell){_o=_a;_a=_a.parentcell;}var _p=this._recalcXY(_a,_i,_j,true,_n);_i=_p.canvasX;_j=_p.canvasY;_k=_p.clientX;_l=_p.clientY;var _q=this._beforesummcellpos;var _r=this._beforesummcolpos;var _s=this._beforesummrowpos;var _t=this._beforesummsubrowpos;var _u=this._beforepvt;var _v=this._beforesummcellpos=_a._cellidx;var _w=this._beforesummcolpos=_a._refobj._col;var _x=this._beforesummrowpos=this._getDataRow(_a._rowidx);var _y=this._beforesummsubrowpos=_a._refobj._row;var _z= -9;this.on_fire_allclick(this,"onsummclick",_b,_q,_r,_s,_t,_u,_v,_w,_x,_y,_z,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);};_pGrid.on_fire_celldblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(!this.enable||!this._is_alive){return true;}var _o=this._getDataRow(_a._rowidx);if(this._isFakeCell(_o)){return true;}var _p;if(_a.parentcell){_p=_a;_a=_a.parentcell;}var _q=this._recalcXY(_a,_i,_j,true,_n);_i=_q.canvasX;_j=_q.canvasY;_k=_q.clientX;_l=_q.clientY;var _r=this._dbclickPreCell;var _s=this._dbclickPreCol;var _t=this._dbclickPreRow;var _u=this._dbclickPreSubrow;var _v=this._dbclickPrePvt;var _w=_a._cellidx;var _x=_a._refobj._col;var _y=_o;var _z=_a._refobj._row;var _aa= -9;if(_p){_x+=_p._refobj._col;}this._dbclickPreCell=_w;this._dbclickPreCol=_x;this._dbclickPreRow=_y;this._dbclickPreSubrow=_z;this._dbclickPrePvt=_aa;this.on_fire_allclick(this,"oncelldblclick",_b,_r,_s,_t,_u,_v,_w,_x,_y,_z,_aa,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);};_pGrid.on_fire_headdblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(!this.enable||!this._is_alive){return true;}var _o;if(_a.parentcell){_o=_a;_a=_a.parentcell;}var _p=this._recalcXY(_a,_i,_j,true,_n);_i=_p.canvasX;_j=_p.canvasY;_k=_p.clientX;_l=_p.clientY;var _q=this._dbclickPreCell;var _r=this._dbclickPreCol;var _s=this._dbclickPreRow;var _t=this._dbclickPreSubrow;var _u=this._dbclickPrePvt;var _v=_a._cellidx;var _w=_a._refobj._col;var _x=this._getDataRow(_a._rowidx);var _y=_a._refobj._row;var _z= -9;if(_o){_w+=_o._refobj._col;}this._dbclickPreCell=_v;this._dbclickPreCol=_w;this._dbclickPreRow=_x;this._dbclickPreSubrow=_y;this._dbclickPrePvt=_z;this.on_fire_allclick(this,"onheaddblclick",_b,_q,_r,_s,_t,_u,_v,_w,_x,_y,_z,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);};_pGrid.on_fire_summdblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(!this.enable||!this._is_alive){return true;}var _o;if(_a.parentcell){_o=_a;_a=_a.parentcell;}var _p=this._recalcXY(_a,_i,_j,true,_n);_i=_p.canvasX;_j=_p.canvasY;_k=_p.clientX;_l=_p.clientY;var _q=this._dbclickPreCell;var _r=this._dbclickPreCol;var _s=this._dbclickPreRow;var _t=this._dbclickPreSubrow;var _u=this._dbclickPrePvt;var _v=_a._cellidx;var _w=_a._refobj._col;var _x=this._getDataRow(_a._rowidx);var _y=_a._refobj._row;var _z= -9;this._dbclickPreCell=_v;this._dbclickPreCol=_w;this._dbclickPreRow=_x;this._dbclickPreSubrow=_y;this._dbclickPrePvt=_z;this.on_fire_allclick(this,"onsummdblclick",_b,_q,_r,_s,_t,_u,_v,_w,_x,_y,_z,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);};_pGrid.on_dsnotify_onrowposchanged=function(_a,_b){var _c=this._rowposition;var _d=parseInt(_a.rowposition,10);this._rowposition=_d;if(this.getElement()&&this._userRowposChange==false){var _e= -1;var _f= -1;var _g=this;if(this._hasTree){_e=this._getTreeRowPosition(_c);_f=this._getTreeRowPosition(_d);}else{_e=_c;_f=_d;}var _h;var _i;var _j;var _k;var _l;var _m;var _n;var _o;var _p;var _q= -9;_h=this._beforebodycellpos=this._selectinfo.curcell;_i=this._beforebodycolpos=this._selectinfo.curcol;_j=this._beforebodyrowpos=this._selectinfo.curdsrow;_k=this._beforebodysubrowpos=this._selectinfo.cursubrow;_l=this._beforepvt=this._selectinfo.curpvt;if(_f<0){_m=(this._selectinfo.curcell<0)?0:this._selectinfo.curcell;_n=(this._selectinfo.curcol<0)?0:this._selectinfo.curcol;_o=_d;_p=(this._selectinfo.cursubrow<0)?0:this._selectinfo.cursubrow;function procClearCellPos(){_g._hideEditor();_g._setSelectedInfo(_m,_n,_o,_p,_q);_g._ChangeSelect(_m,_n,_o,_p,_q,true,_h,_i,_j,_k,_l,"body");_g._moveCellAfterFocus();};if(this._is_async_recreate){nexacro.OnceCallbackTimer.callonce(this,procClearCellPos,100);}else{procClearCellPos();}}else if(_e==_f){}else{_m=(this._selectinfo.curcell<0)?0:this._selectinfo.curcell;_n=(this._selectinfo.curcol<0)?0:this._selectinfo.curcol;_o=_d;_p=(this._selectinfo.cursubrow<0)?0:this._selectinfo.cursubrow;if(_o>=0&&(this._isMultiSelect()||this._isAreaSelect())){if(_a._bWorkingstatus==true){this._beforebodycellpos= -1;this._beforebodycolpos= -1;this._beforebodyrowpos= -1;this._beforebodysubrowpos= -1;this._setSelectedInfo( -1, -1, -1, -1,null);this._hideEditor();this._ChangeSelect( -1, -1, -1, -1,_q,true,_h,_i,_j,_k,_l,"body");this._moveCellAfterFocus();}else{if(this._getUseBindExprProp("body")||this._isUseBindExprStyle("body")){this._refreshBody(true);}if(this._isUseBindExprStyle("head")||this._getUseBindExprProp("head")){this._refreshHead(true);}if(this._isUseBindExprStyle("summ")||this._getUseBindExprProp("summ")){this._refreshSumm(true);}var _r=this._dsRowToDispRow(_o);function procMultiCellPos(){_g._jumpCurrentRow(_r);_g._moveCellAfterFocus();};if(this._is_async_recreate){nexacro.OnceCallbackTimer.callonce(this,procMultiCellPos,100);}else{procMultiCellPos();}}}else{this._setSelectedInfo(_m,_n,_o,_p,_q);function procSingleCellPos(){_g._hideEditor();_g._ChangeSelect(_m,_n,_o,_p,_q,true,_h,_i,_j,_k,_l,"body");_g._moveCellAfterFocus();};if(this._is_async_recreate){nexacro.OnceCallbackTimer.callonce(this,procSingleCellPos,100);}else{procSingleCellPos();}}}}};_pGrid.on_dsnotify_oncolumnchanged=function(_a,_b){if(_a._bWorkingstatus==true){this._recreate_contents_all(true,true,false);return;}var _c=false;var _d=[];if(this._isTreeStateChanged(_b,this._dsEventOccured)==true){_c=true;this._updateTreeStates();var _e=this._getTreeRowPosition(_b.row);var _f=this._treeStates[_b.row];if(this._bodyBand){var _g=this._bodyBand._matrix;if(_e== -1||!_g._getPhysicalRow(_g._rows,_e)){this._recreate_contents_all(true,true,false,true);}else{if(this._treeCellinfo.treelevel._bindexpr==_b.columnid){this._refreshBody();}else{if(_f==0){this._bodyBand._matrix._adjustTreeDisplay(_e,true);}else{this._bodyBand._matrix._adjustTreeDisplay(_e,false);}var _h=this.getTreeParentRow(_e,true);_h=this._dsRowToDispRow(_h,true);this._refreshBodyRow(_h);}}}}else if((this.autosizingtype=="row"||this.autosizingtype=="both")&&this._isChangeBodyRowSizeList(_b.row)==true){this._recreate_contents_all(true,true,false);}else if((this.autosizingtype=="col"||this.autosizingtype=="both")&&this._isChangeBodyColSizeList(_b.columnid,_d,_b.row)==true){this._autofitcol_rate=[];if(_d.length>1){if(this.autosizingtype=="both"){this._recreate_contents_all(true,true,false);}else{this._recreate_contents_all(true,false,false);}}else if(_d.length==1){this._updateColSize(_d[0]);}}else{if(_b.row>=0){if(this._hasTree&&this._treeCellinfo.treecheck._bindexpr==_b.columnid){this._treeChecked=this._createTreeChecked();}var _i=this._dsRowToDispRow(_b.row,true);if(_i>=0){var _j=this._getBindTextCellInfo(_b.columnid);if(_j){var _k=_j[0];var _l=_j[1];var _m=false;var _n=false;var _o=_k.length,_p;for(var _s=0;_s<_o;_s++ ){_p=_k[_s]._getSuppress(_b.row);if(_p!=0){this._suppressUpdate();break;}}var _q=false;for(var _s=0;_s<_o;_s++ ){if(_k[_s].celltype=="head"){_m=true;}else if(_k[_s].celltype=="summary"){_n=true;}else{if(_b.col== -1&&_b.colidx== -1){if(_b.newvalue!=undefined){if(!_q){if(this._hasTree){this._initTreeStates(true,true);this._recreate_contents_all(true,false,false,true);}else{this._refreshBodyRow(_i);}_q=true;}}}else{if(this._hasTree&&_c){if(!_q){this._refreshBody();_q=true;}}else{_p=_k[_s]._getSuppress(_b.row);if(_p>0){this._refreshCell("body",_k[_s]._cellidx);}else if(_p<0){if(!_q){this._refreshBodyRow(_i);_q=true;}}else{if(!_q){var _r=this._binddataset;if(_r.keystring&&_r._keycols.length>0){this._refreshBody();}else{this._refreshBodyRow(_i);}_q=true;}if(_l&&this._currentCellEditor&&_k[_s]._col==this._currentCellEditor._cellinfo._col&&_k[_s]._row==this._currentCellEditor._cellinfo._row&&_b.row==this._currentCellRow){this._currentCellEditor._setProperty();}}}}_n=true;}}}if(_m){this._refreshHead();}if(_n){this._refreshSumm();}}else{if(this._hasTree&&_b.columnid==""){this._initTreeStates(true);this._recreate_contents_all(true,false,false,true);}}}else{this._refreshHead();this._refreshSumm();if(_a._isConstColumn(_b.col)==true){this._refreshBody();}}}};_pGrid.on_dsnotify_onload=function(_a,_b){if(!this._is_created&&this._rowcount==_a.rowcount){return;}this.rowcount=this._rowcount=_a.rowcount;this._rowposition=_a.rowposition;this._initSelect(this._rowposition);if(this._is_down_act&&!this._isDownActionKeyMouse()){this._is_down_act=false;}this._exprcache={};this._clearAllStyleCache();this._initTreeStates();var _c=_b.reason;if(_c==0||_c==1||_c==2||_c==3){if(this.autosizingtype!="none"){if(this._async_create==true){this._recreate_contents_all_async(true,true,true);}else{this._recreate_contents_all(true,true,true);}}else{if(this._curFormat){this._updateBodyClient("load");if(this._isUseBindExprStyle("head")||this._getUseBindExprProp("head")){this._refreshHead(true);}if(this._isUseBindExprStyle("summ")||this._getUseBindExprProp("summ")){this._refreshSumm(true);}}else{this._recreate_contents_all(true,true,true);}}}else if(_c==91){this._recreate_contents_all(true,true,true);this._binddataset=null;}else if(_c==12){var _d=this._bodyBand;var _e=this._getDataRow(this._endrowpos);var _f=_d._matrix._getBodyRowTopPos(_e+1)-this._getScrollTop();var _g=this._getAvailableRect(_d);var _h=this._rowcount;var _i=_d._matrix._rows.length;var _j=_e+1;if(_f>=_g.height&&_e<_j&&(_i%2!=1)){if(this._isUserChangeHeadRowSize||this._isUserChangeBodyRowSize||this._isUserChangeSummRowSize){this._recreate_contents_all(true,true,false,true);}else{this._resetRowSizeList(_h);this._resetColSizeList(_h);this._resetScrollMax();}}else{if(this._hasTree){this._initTreeStates(true);this._recreate_contents_all(true,true,false,true);}else if(this.autosizingtype=="col"||this.autosizingtype=="both"){this._recreate_contents_all(true,true,false);}else{this._updateBodyClient("appenddata");if(this._isUseBindExprStyle("head")||this._getUseBindExprProp("head")){this._refreshHead(true);}if(this._isUseBindExprStyle("summ")||this._getUseBindExprProp("summ")){this._refreshSumm(true);}}}}};_pGrid.on_dsnotify_onrowsetchanged=function(_a,_b){var _c=this._binddataset;var _d=(this._rowcount!=_c.rowcount);var _e=this._rowcount;this.rowcount=this._rowcount=_c.rowcount;var _f=false;if(this._rowposition!=_c.rowposition){_f=true;}if(this._is_down_act&&!this._isDownActionKeyMouse()){this._is_down_act=false;}this._rowposition=_c.rowposition;if(this._curFormat){var _g=this._curFormat._bodycells;var _h=this._rowcount-1;var _i;switch(_b.reason){case 10:_i="assign";break;case 11:_i="copydata";break;case 12:if(_b.row== -1){_i="appenddata";}else if(_b.row==_h){_i="addrow";}else if(_b.row<_h){_i="insertrow";}break;case 20:if(_b.row== -1){_i="deletemultirows";}else{_i="deleterow";}break;case 22:_i="deleteall";break;case 23:_i="cleardata";break;case 30:_i="keystring";break;case 31:if(_b.row== -1){_i="filter";}else{_i="filterrow";}break;case 32:_i="moverow";break;case 33:_i="exchangerow";break;case 34:_i="addcolumn";break;case 41:_i="enableevent";break;case 40:_i="rowtype";break;default:break;}if(_i=="copydata"||_i=="addcolumn"||_i=="assign"){this._exprcache={};this._resetSelect(this._rowposition);}else if(_i=="enableevent"||_i=="appenddata"){this._exprcache={};}else if(_i=="deleterow"||_i=="filterrow"){this._delSelectpos( -1,_b.row,true);if(_g&&this._isMultiSelect()==false&&this._isAreaSelect()==false){if(this._isSelectRowType()){for(var _l=0,_m=_g.length;_l<_m;_l++ ){this._addSelectpos(_l,this._rowposition);}}else{this._addSelectpos(0,this._rowposition);}}this._resetSelectStartEndRow();this._updateTreeStates(_b.row,false);}else if(_i=="deletemultirows"){var _j=_a._deleteRows;this._delSelectpos( -1,_j,true);if(_g&&this._isMultiSelect()==false&&this._isAreaSelect()==false){if(this._isSelectRowType()){for(var _l=0,_m=_g.length;_l<_m;_l++ ){this._addSelectpos(_l,this._rowposition);}}else{this._addSelectpos(0,this._rowposition);}}this._resetSelectStartEndRow();for(var _l=_j.length-1;_l>=0;_l-- ){this._updateTreeStates(_j[_l],false);}}else if(_i=="deleteall"||_i=="cleardata"||_i=="filter"){if(_i!="filter"){this._clrMultiSelect();this._setSelectedInfo( -1, -1, -1, -1,null);}this._destroyOverlayElements();}else if(_i=="copydata"){this._setSelectedInfo(null,null,this._rowposition,0,null);}else if(_i=="addrow"||_i=="insertrow"||_i=="appendrow"){this._updateTreeStates(_b.row,true);}if(this._is_async_recreate){var _k=this._getWindow();_k._postMessage(this,"afterrowset",this._callbackPostmsg,[_i,_f,_b.row,_d,_e]);}else{this._afterRowsetChanged(_i,_f,_b.row,_d,_e);}}};_pGrid._callbackPostmsg=function(_a){var _b=_a.data;if(_a.id=="afterrowset"){this._afterRowsetChanged(_b[0],_b[1],_b[2],_b[3],_b[4]);}else if(_a.id=="showeditor"){if(_b[2]){this._onceTime_focus=true;this._showEditorFocus=true;}this._showEditor(_b[0],_b[1]);this._showEditorFocus=false;this._onceTime_focus=false;}};_pGrid._afterRowsetChanged=function(_a,_b,_c,_d,_e){if(!this.enableredraw){this._enable_redraw_history["recreate"]=true;return;}if(this.getElement()){if(_a=="moverow"||_a=="enableevent"){this._hideEditor(false,true);}else{this._hideEditor(false,true);}if(_a=="copydata"||_a=="assign"){this._initTreeStates();this._recreate_contents_all(true,true,true);}else if(_a=="addcolumn"){this._initTreeStates(true);this._recreate_contents_all(true,true,false);}else if(_a=="keystring"){this._initTreeStates();if(this.autosizingtype!="none"){this._recreate_contents_all(true,true,false);}else{this._recreate_contents_all(true,true,false,true);}this._resetSelect(this._rowposition,this._selectinfo.curcell,this._selectinfo.curcol,this._selectinfo.cursubrow,this._selectinfo.curpvt);}else if(_a=="enableevent"){this._initTreeStates(true);if(_d||this.autosizingtype!="none"){this._recreate_contents_all(true,true,false);}else{if(this._hasTree){this._bodyBand._matrix._adjustRowsDisplay(true);this._bodyBand._matrix._adjustColsDisplay();this._bodyBand._on_refresh_rows();}this._refreshAll();}if(_b==false){this._select_noscroll=true;}this._resetSelect(this._rowposition,this._selectinfo.curcell,this._selectinfo.curcol,this._selectinfo.cursubrow,this._selectinfo.curpvt);this._select_noscroll=false;if(!this._is_created){this._create_selection={cell:this._selectinfo.curcell,col:this._selectinfo.curcol,row:this._selectinfo.curdsrow,subrow:this._selectinfo.cursubrow,pvt:this._selectinfo.curpvt};}}else if(this._bodyBand&&(_a=="addrow"||_a=="appenddata"||_a=="deleterow"||_a=="filterrow"||_a=="insertrow"||_a=="deletemultirows"||_a=="filter")){var _f=this._bodyBand;var _g=this._getDataRow(this._endrowpos);var _h=_f._matrix._getBodyRowTopPos(_g+1)-this._getScrollTop();var _i=this._getAvailableRect(_f);var _j;if(_a=="addrow"||_a=="appenddata"){_j=_e;}var _k=_f._matrix._rows.length;if(_h>=_i.height&&_g<_c&&(_k%2!=1)){if(_c<=this._fixed_endrow){this._setFixedRow( -1);}else{if(this._isUserChangeHeadRowSize||this._isUserChangeBodyRowSize||this._isUserChangeSummRowSize){this._recreate_contents_all(true,true,false,true,undefined,_j);}else{this._resetRowSizeList(_j);this._resetColSizeList(_j);this._resetScrollMax();}if(_a=="deleterow"){var _l=this._dsRowToDispRow(this._binddataset.rowposition);this._jumpCurrentRow(_l);}else{}}}else{if(_c<=this._fixed_endrow){if(_a=="insertrow"){this._resetRowSizeList();}this._setFixedRow( -1);}else{if(_a=="insertrow"){if(this.autosizingtype!="none"||this._hasTree){this._recreate_contents_all(true,true,false,true,undefined,_j);}else{this._updateBodyClient(_a,_c,_j);}}else{if(this._hasTree){this._initTreeStates((_a=="addrow"||_a=="appenddata"||_a=="deleterow"));this._recreate_contents_all(true,true,false,true,undefined,_j);}else if(this.autosizingtype=="col"||this.autosizingtype=="both"){this._recreate_contents_all(true,true,false,undefined,undefined,_j);}else{this._updateBodyClient(_a,_c,_j);if(this._isUseBindExprStyle("head")||this._getUseBindExprProp("head")){this._refreshHead(true);}if(this._isUseBindExprStyle("summ")||this._getUseBindExprProp("summ")){this._refreshSumm(true);}var _m=this._binddataset;if(_m.keystring&&_m._keycols.length>0){this._refreshBody();}}}}}}else if(_a=="exchangerow"||_a=="moverow"){if(this.autosizingtype!="none"||this._hasTree){this._initTreeStates(true);this._recreate_contents_all(true,false,false,true);}else{this._refreshBody();}}else if(_a=="rowtype"){this._refreshAll();}else{this._initTreeStates();this._recreate_contents_all(true,true,false);}this._moveCellAfterFocus();}};_pGrid._getDisplayRowCount=function(){var _a=this._bodyBand;if(_a){return _a._get_rows().length;}return 0;};if(nexacro.Browser=="IE"){_pGrid._div_max_height=1533000;}else if(nexacro.Browser=="Gecko"){_pGrid._div_max_height=17895000;}else{_pGrid._div_max_height=134217000;}_pGrid._needUpdateExtinner=function(){var _a=(this.vscrollbar)?this.vscrollbar._pos:0;var _b=this._bodyBand;if(!_b){return true;}var _c=_b._control_element._getExtendContainerCount();if(_c>0&&_a>(this._div_max_height-(this._client_height*2))){return true;}return false;};_pGrid._updateBodyClient=function(_a,_b,_c){this._resetRowSizeList(_c);this._resetColSizeList(_c);var _d=this._bodyBand;this._resetScrollMax();this._applyAutofittype(true);var _e=this._getDisplayRowCount();if(_a=="insertrow"){if(this._needUpdateExtinner()){this._recreate_contents_all(false,false,false,true);}else{_d._matrix._adjustRowsDisplay();_d._matrix._adjustColsDisplay();}var _f=_d._get_rows();var _g=_f.length;for(var _m=0;_m<_g;_m++ ){var _h=this._getDataRow(_f[_m]._rowidx);if(_b>_h){continue;}_d._update_rows.push(_f[_m]);}_d._on_refresh_rows();var _i=this._dsRowToDispRow(_b);this._jumpCurrentRow(_i);}else if(_a=="deleterow"){var _j=(this.vscrollbar)?this.vscrollbar._pos:0;_j-=this._is_over_scroll;if(_j<0){_j=0;}this._toprowpos=this._getScreenTopRowPos(_j);this._bottomrowpos=this._getScreenBottomRowPos(_j);if(this._needUpdateExtinner()){this._recreate_contents_all(false,false,false,true);}else{_d._matrix._adjustRowsDisplay();_d._matrix._adjustColsDisplay();var _f=_d._get_rows();var _g=_f.length;for(var _m=0;_m<_g;_m++ ){var _h=this._getDataRow(_f[_m]._rowidx);if(_b>_h){continue;}_d._update_rows.push(_f[_m]);}_d._on_refresh_rows();}var _k=this._last_scroll_top;if(_k!=_j){_d._update_rows=_d._matrix._adjustScrollRows(_j);}_d._on_refresh_rows();var _i=this._dsRowToDispRow(this._binddataset.rowposition);this._jumpCurrentRow(_i);if(this._is_over_scroll>0){this.vscrollbar.set_pos(this.vscrollbar.pos-1);}}else if(_a=="load"){if(this._needUpdateExtinner()){this._recreate_contents_all(false,false,true,true);}else{this._toprowpos=this._getScreenTopRowPos(0);this._bottomrowpos=this._getScreenBottomRowPos(0);if(this.vscrollbar&&this.vscrollbar.pos>0){this.vscrollbar.set_pos(0);}_d._update_rows=_d._matrix._adjustScrollRows(0);_d._matrix._adjustRowsDisplay();_d._matrix._adjustColsDisplay();_d._on_refresh_rows();}}else{var _j=(this.vscrollbar)?this.vscrollbar._pos:0;_j-=this._is_over_scroll;if(_j<0){_j=0;}this._toprowpos=this._getScreenTopRowPos(_j);this._bottomrowpos=this._getScreenBottomRowPos(_j);if(this._needUpdateExtinner()){this._recreate_contents_all(false,false,false,true);}else{if(_a=="filterrow"||_a=="deletemultirows"||_a=="filter"){_d._matrix._init();}_d._matrix._adjustRowsDisplay();_d._matrix._adjustColsDisplay();}var _k=this._last_scroll_top;if(_k!=_j){_d._update_rows=_d._matrix._adjustScrollRows(_j);}_d._on_refresh_rows();if(this._is_over_scroll>0){this.vscrollbar.set_pos(this.vscrollbar.pos-1);}}var _l=this._getDisplayRowCount();if(this.fillareatype!="none"||_a=="load"){this._refreshBody();}this._updateNodata(_e,_l);};_pGrid.set_enableredraw=function(_a){_a=nexacro._toBoolean(_a);if(this.enableredraw!=_a){this.enableredraw=_a;if(_a){if(this._curFormat){this._curFormat._updateFormatStr();}this.on_apply_enableredraw();}}return _a;};_pGrid.on_apply_enableredraw=function(){if(this._enable_redraw_history["recreate"]){this.redraw();this._enable_redraw_history={};return;}var _a=this._binddataset;if(_a&&_a.oncolumnchanged&&_a.oncolumnchanged._firestat){this._recreate_contents_all(true,true,false);this._enable_redraw_history={};return;}if(this._enable_redraw_history["recreate_body"]){if(this._bodyBand){this._bodyBand._recreate_contents();}}else if(this._enable_redraw_history["refresh_body"]&&!this._enable_redraw_history["refreshall"]){this._refreshBody(true);}if(this._enable_redraw_history["recreate_head"]){if(this._headBand){this._headBand._recreate_contents();}}else if(this._enable_redraw_history["refresh_head"]&&!this._enable_redraw_history["refreshall"]){this._refreshHead(true);}if(this._enable_redraw_history["recreate_summ"]){if(this._summBand){this._summBand._recreate_contents();}}else if(this._enable_redraw_history["refresh_summ"]&&!this._enable_redraw_history["refreshall"]){this._refreshSumm(true);}if(this._enable_redraw_history["resize_band"]){this._resizeBand();}if(this._enable_redraw_history["updatecolsize"]){var _b=this._enable_redraw_history["updatecolsize"];var _c=_b.length;var _d=_b[0];for(var _f=1;_f<_c;_f++ ){_d=Math.min(_b[_f],_d);}this._updateColSize(_d);}if(this._enable_redraw_history["updaterowsize"]){var _b=this._enable_redraw_history["updaterowsize"];var _c=_b.length;for(var _f=0;_f<_c;_f++ ){this._updateRowSize(_b[_f][0],_b[_f][1],(_f<_c-1));}}if(this._enable_redraw_history["autofit"]){var _e=this._enable_redraw_history["autofit"];this._applyAutofittype(_e[0],_e[1]);}if(this._enable_redraw_history["refreshall"]){this._refreshAll(true);}else{nexacro.Component.prototype.on_apply_enableredraw.call(this);}this._enable_redraw_history={};};_pGrid._isSelectedCell=function(_a,_b){var _c=this._selectinfo.getSelectCells(_b);if(!this._isSelectRowType()){if(_c&&_c[_a]){return true;}}else{if(_c){return true;}}return false;};_pGrid.isSelectedCell=function(_a,_b,_c,_d){if(_b){_b=_b.toLowerCase();}if(arguments.length==0){return false;}else if(arguments.length==1){_b="body";_c=0;_d=0;}else if(arguments.length==2){if(_b=="body"){_c=0;}else if(_b.indexOf("summ")>=0){_c= -2;}else{_c= -1;}_d=0;}else if(arguments.length==3){if(_b.indexOf("summ")>=0){_c= -2;}else if(_b=="head"){_c= -1;}_d=0;}return this._isSelectedCell(_a,_c);};_pGrid._getSelect=function(_a){var _b;if(_a== -2){_b="summ";}else if(_a== -1){_b="head";}else{_b="body";}return this.isSelectedCell(0,_b,_a);};_pGrid.getSelectedRows=function(){var _a=[].concat(this._selectinfo.rows);var _b=[];for(var _c=0,_d=_a.length;_c<_d;_c++ ){_b[_c]=this._getTreeRowPosition(_a[_c]);}return _b;};_pGrid.getSelectedDatasetRows=function(){var _a=[].concat(this._selectinfo.rows);for(var _b=0;_b<_a.length;_b++ ){if(_a[_b]<0){_a.splice(_b,1);_b-- ;}}if(_a.length==0){_a= -9;}return _a;};_pGrid.clearSelect=function(){this._selectinfo.area=[];this._resetSelect( -1, -1, -1, -1, -9);return true;};_pGrid.selectRow=function(_a,_b){if(_b==undefined){_b=true;}_a=this._getDataRow(_a);return this._selectRow(_a,_b);};_pGrid.selectCell=function(_a,_b,_c){if(_c==undefined){_c=true;}return this._selectRow(_a,_c,false,_b);};_pGrid.selectArea=function(_a,_b,_c,_d){if(!this._isAreaSelect()){return false;}var _e=this._selectinfo.curcell;var _f=this._selectinfo.curcol;var _g=this._selectinfo.curdsrow;var _h=this._selectinfo.cursubrow;var _i=this._selectinfo.curpvt;if(_a>_c){var _j=_a;_a=_c;_c=_j;}if(_b>_d){var _j=_b;_b=_d;_d=_j;}var _k=this._curFormat;var _l=_k._bodyrows.length-1;var _m="body",_n="body";if(_a== -1){_m="head";}else if(_a== -2){_m="summ";}if(_c== -1){_l=_k._headrows.length-1;_n="head";}else if(_c== -2){_l=_k._summrows.length-1;_n="summ";}function getBegEnd(_u,_b,_d,_v){var _w,_x;if(_v){for(var _y=0,_z=_u.length;_y<_z;_y++ ){if(_u[_y]._col==_b){_w=_y;break;}}return _w;}else{for(var _y=_u.length-1;_y>=0;_y-- ){if(_u[_y]._col<=_d&&_d<=(_u[_y]._col+_u[_y]._colspan)){_x=_y;break;}}return _x;}}var _o,_p,_q,_r,_s,_t;if(_m=="summ"){_t=getBegEnd(_k._summcells,_b,_d,true);}else if(_m=="head"){_t=getBegEnd(_k._headcells,_b,_d,true);}else{_t=getBegEnd(_k._bodycells,_b,_d,true);}this._setSelectedInfo(_t,_b,_a,0,null);_o=_t;_p=_b;_q=_a;_r=0;_s=this._selectinfo.curpvt;if(this._isMultiSelect()){this._multiselect="ctrl";}else{this._clrMultiSelect();this._multiselect="none";}this._ChangeSelect(_o,_p,_q,_r,_s,false,_e,_f,_g,_h,_i,_m,"func_area1");if(_n=="summ"){_t=getBegEnd(_k._summcells,_b,_d,false);}else if(_n=="head"){_t=getBegEnd(_k._headcells,_b,_d,false);}else{_t=getBegEnd(_k._bodycells,_b,_d,false);}this._setSelectedInfo(_t,_d,_c,_l,null);_o=_t;_p=_d;_q=_c;_r=_l;_s=this._selectinfo.curpvt;this._multiselect="shift";retn=this._ChangeSelect(_o,_p,_q,_r,_s,false,_e,_f,_g,_h,_i,_n,"func_area2");return retn;};_pGrid._selectRow=function(_a,_b,_c,_d,_e){var _f=this._selectinfo.curcell;var _g=this._selectinfo.curcol;var _h=this._selectinfo.curdsrow;var _i=this._selectinfo.cursubrow;var _j=this._selectinfo.curpvt;var _k="body";if(_a== -1){_k="head";}else if(_a== -2){_k="summ";}this._setSelectedInfo(null,null,_a,0,null);if(_k!="body"&&_d==undefined){_d=0;}if(_d!=undefined){this._setSelectedInfo(_d,null,null,null,null);}var _l=false;if(!_e){_e=false;}var _m=(this._selectinfo.curcell<0)?0:this._selectinfo.curcell;var _n=(this._selectinfo.curcol<0)?0:this._selectinfo.curcol;var _o=_a;var _p=(this._selectinfo.cursubrow<0)?0:this._selectinfo.cursubrow;var _q=this._selectinfo.curpvt;if(this._isMultiSelect()){if(_b!=this._getSelect(_o)){this._multiselect="ctrl";_l=this._ChangeSelect(_m,_n,_o,_p,_q,_e,_f,_g,_h,_i,_j,_k,"func_selectrow");}}else{this._clrMultiSelect();if(_b==true){_l=this._ChangeSelect(_m,_n,_o,_p,_q,false,_f,_g,_h,_i,_j,_k,"func_selectrow");}}if(!_c){this._refreshBody();if(_k=="head"){this._refreshHead();}else if(_k=="summ"){this._refreshSumm();}}return _l;};_pGrid._on_killfocus=function(_a,_b){if(!this._is_alive){return;}if(this._binddataset&&this._binddataset.cancolumnchange&&this._binddataset.cancolumnchange._firestat){this._hideEditor(undefined,true,true);}else{this._hideEditor(undefined,undefined,true);}this._focusSelectorPoint(false);if(nexacro._enableaccessibility){this._accept_arrow=false;this._acceptstab=false;}this._is_async_recreate=false;};_pGrid._focusSelectorPoint=function(_a){if(this._isAreaSelect()){if(this._select_ctrl){this._select_ctrl._trackbar[0].set_visible(_a);this._select_ctrl._trackbar[1].set_visible(_a);this._select_ctrl._trackbar[2].set_visible(_a);this._select_ctrl._trackbar[3].set_visible(_a);}}};_pGrid._on_focus=function(_a,_b,_c,_d,_e,_f){this._acceptstab=true;if(this._showEditorFocus){return;}var _g=false;if(!_a){this._focusSelectorPoint(true);}if(_b=="tabkey"||_b=="shifttabkey"){_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(this._bodyBand&&(_a==false||nexacro._enableaccessibility)){var _h=this._bodyBand._get_rows();if(_h.length>0){if(_h[0]._cells&&_h[0]._cells.length>0){var _i=null;this._showEditorFocus=true;if(_b=="shifttabkey"){_i=this._getLastEditableCell();if(_i.row!==null){if(this.vscrollbar&&this.vscrollbar.visible){this.vscrollbar.set_pos(this.vscrollbar.max);}_g=this._moveToPosCell(_i.row,_i.cell);}}else{_i=this._getFirstEditableCell();if(_i.row!==null){if(this.vscrollbar&&this.vscrollbar.visible){this.vscrollbar.set_pos(0);}_g=this._moveToPosCell(_i.row,_i.cell);}}if(nexacro._enableaccessibility&&_i.row!==null){this._currentBand="body";var _j=this._getAccessibilityCurrentCell();if(_j){if(_b=="tabkey"){this._first_focus=true;this._is_first_bodycell=true;}this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}}this._showEditorFocus=false;}}}}else{_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(nexacro._enableaccessibility){this._accept_arrow=true;this._acceptstab=true;_g=false;if(nexacro._accessibilitytype==4&&_b===undefined){this._currentBand="grid";this._moveToAccessibilityCell("next");}}else{if(_a==false){if(_b=="lbuttondown"&&_f&&_f._type_name=="GridCell"){;}else if(this.autoenter=="select"){var _k=this._getWindow();_k._postMessage(this,"showeditor",this._callbackPostmsg,[false,undefined,true]);}}}}if(nexacro._enableaccessibility){this._first_focus=false;}return _g;};_pGrid.on_fire_onchar=function(_a,_b,_c,_d,_e){var _f=this._currentCellCell;var _g=this._currentCellCol;var _h=this._selectinfo.curpvt;var _i=this._currentCellRow;var _j=this._currentCellSubRow;if(this.onchar&&this.onchar._has_handlers){var _k=new nexacro.GridEditCharEventInfo(this,"onchar",_f,_b,_g,_h,_d,_c,_i,_j);var _l=this.onchar._fireCheckEvent(this,_k);_e.chartext=_k.chartext;return _l;}return true;};_pGrid.on_fire_ontextchange=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._selectinfo.curcell;var _i=this._selectinfo.curcol;var _j=this._selectinfo.curpvt;var _k=this._selectinfo.curdsrow;var _l=this._selectinfo.cursubrow;if(this.ontextchange&&this.ontextchange._has_handlers){var _m=new nexacro.GridTextChangeEventInfo(this,"ontextchange",_h,_b,_i,_j,_f,_d,_e,_c,_k,_l);var _n=this.ontextchange._fireCheckEvent(this,_m);_g.chartext=_m.chartext;return _n;}return true;};_pGrid.on_fire_ontextchanged=function(_a,_b,_c){var _d=this._selectinfo.curcell;var _e=this._selectinfo.curcol;var _f=this._selectinfo.curpvt;var _g=this._selectinfo.curdsrow;var _h=this._selectinfo.cursubrow;if(this.ontextchanged&&this.ontextchanged._has_handlers){var _i=new nexacro.GridTextChangedEventInfo(this,"ontextchanged",_d,_e,_f,_c,_b,_g,_h);return this.ontextchanged._fireEvent(this,_i);}return true;};_pGrid.on_fire_cantreestatuschange=function(_a,_b,_c){var _d=this._selectinfo.curcell;if(this.cantreestatuschange&&this.cantreestatuschange._has_handlers){var _e=new nexacro.GridTreeStatusEventInfo(this,"cantreestatuschange",_d,_b,_a,_c);return this.cantreestatuschange._fireEvent(this,_e);}return true;};_pGrid.on_fire_ontreestatuschanged=function(_a,_b,_c){var _d=this._selectinfo.curcell;if(this.ontreestatuschanged&&this.ontreestatuschanged._has_handlers){var _e=new nexacro.GridTreeStatusEventInfo(this,"ontreestatuschanged",_d,_b,_a,_c);return this.ontreestatuschanged._fireEvent(this,_e);}return true;};_pGrid.on_fire_oncloseup=function(_a,_b,_c,_d,_e){if(this.oncloseup&&this.oncloseup._has_handlers){var _f=this._selectinfo.curcell;var _g=this._selectinfo.curcol;var _h=this._selectinfo.curpvt;var _i=this._selectinfo.curdsrow;var _j=this._selectinfo.cursubrow;var _k=this._evtvalue(_a,_e);var _l=new nexacro.GridEditEventInfo(this,"oncloseup",_f,_g,_h,_i,_j,_k);return this.oncloseup._fireEvent(this,_l);}return true;};_pGrid.on_fire_ondropdown=function(_a){if(this.ondropdown&&this.ondropdown._has_handlers){var _b=this._selectinfo.curcell;var _c=this._selectinfo.curcol;var _d=this._selectinfo.curpvt;var _e=this._selectinfo.curdsrow;var _f=this._selectinfo.cursubrow;var _g=this._evtvalue(_a);var _h=new nexacro.GridEditEventInfo(this,"ondropdown",_b,_c,_d,_e,_f,_g);return this.ondropdown._fireEvent(this,_h);}return true;};_pGrid.on_fire_onenterdown=function(_a,_b,_c,_d,_e,_f,_g){if(this.onenterdown&&this.onenterdown._has_handlers){var _h=this._selectinfo.curcell;var _i=this._selectinfo.curcol;var _j=this._selectinfo.curpvt;var _k=this._selectinfo.curdsrow;var _l=this._selectinfo.cursubrow;var _m=this._evtvalue(_f,_g);var _n=new nexacro.GridEditEventInfo(this,"onenterdown",_h,_i,_j,_k,_l,_m);return this.onenterdown._fireEvent(this,_n);}return true;};_pGrid.on_fire_onexpanddown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.readonly){return;}var _m=_k;_m=this._findCellObj(_m);var _n;if(_m&&_m._type_name=="GridCell"){if(_m.parentcell){_n=_m;_m=_m.parentcell;}}var _o=this._recalcXY(_m,_g,_h,false,_l);_g=_o.canvasX;_h=_o.canvasY;_i=_o.clientX;_j=_o.clientY;if(this.onexpanddown&&this.onexpanddown._has_handlers){var _p=this._makeEventInfo(_m,_n,_l);var _q=this._getRootComponent(_l);var _r=_p.cell;var _s=_p.col;var _t=_p.mergecell;var _u=_p.mergecol;var _v=_p.mergerow;var _w=_p.pivotindex;var _x=_p.row;var _y=_p.subrow;var _z=new nexacro.GridMouseEventInfo(_q,"onexpanddown",_r,_s,_t,_u,_v,_w,_x,_y,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);return this.onexpanddown._fireEvent(this,_z);}return;};_pGrid.on_fire_onexpandup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(this.readonly){return;}var _m=_k;_m=this._findCellObj(_m);var _n;if(_m&&_m._type_name=="GridCell"){if(_m.parentcell){_n=_m;_m=_m.parentcell;}}var _o=this._recalcXY(_m,_g,_h,false,_l);_g=_o.canvasX;_h=_o.canvasY;_i=_o.clientX;_j=_o.clientY;if(this.onexpandup&&this.onexpandup._has_handlers){var _p=this._makeEventInfo(_m,_n,_l);var _q=this._getRootComponent(_k);var _r=_p.cell;var _s=_p.col;var _t=_p.mergecell;var _u=_p.mergecol;var _v=_p.mergerow;var _w=_p.pivotindex;var _x=_p.row;var _y=_p.subrow;var _z=new nexacro.GridMouseEventInfo(_q,"onexpandup",_r,_s,_t,_u,_v,_w,_x,_y,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);return this.onexpandup._fireEvent(this,_z);}return;};_pGrid.on_fire_oncolresized=function(_a){if(this.oncolresized&&this.oncolresized._has_handlers){var _b=_a[0];var _c=_a[1];var _d=_a[2];var _e=_a[3];var _f=_a[4];var _g=new nexacro.GridSizeChangedEventInfo("oncolresized",_b,_c,_d,_e,1,_f);return this.oncolresized._fireEvent(this,_g);}return false;};_pGrid.on_fire_onrowresized=function(_a){if(this.onrowresized&&this.onrowresized._has_handlers){var _b=_a[0];var _c=_a[1];var _d=_a[2];var _e=_a[3];var _f=_a[4];var _g=new nexacro.GridSizeChangedEventInfo("onrowresized",_b,_c,_d,_e,2,_f);return this.onrowresized._fireEvent(this,_g);}return false;};_pGrid._clearAllStyleCache=function(){var _a=this._curFormat;if(_a){_a._clearCellStyleCache("head");_a._clearCellStyleCache("body");_a._clearCellStyleCache("summ");}};_pGrid._createVScrollBar=function(_a){var _b=new nexacro.GridScrollBarCtrl("vscrollbar","absolute",0,0,_a,this._client_width,null,null,this);_b._setDirection("vert");_b._setEventHandler("onscroll",this.on_vscroll,this);_b.on_update_style_scrollbarsize();return _b;};_pGrid._is_recreating=false;_pGrid._recreate=function(){if(!this.enableredraw){this._enable_redraw_history["recreate"]=true;return true;}if(!this.getElement()){return false;}var _a=this._isDownActionKeyMouse()||this._is_down_act;if(_a&&!this._userRowposChange&&!this._is_after_recreate){this._after_recreate=true;return;}this._is_recreating=true;var _b=(this.vscrollbar)?this.vscrollbar._pos:0;var _c=(this.hscrollbar)?this.hscrollbar._pos:0;this._destroyBands();this._createBandsAndAreas();this._refreshBody();this._onResetScrollBar();this._recreate_contents_proc=[];if(this.vscrollbar){this.vscrollbar._set_pixelpos(0);this.vscrollbar._set_pixelpos(_b);}if(this.hscrollbar){this.hscrollbar.set_pos(0);this.hscrollbar.set_pos(_c);}this._is_recreating=false;return true;};_pGrid.createcellasync=false;_pGrid.set_createcellasync=function(_a){_a=nexacro._toBoolean(_a);this.createcellasync=_a;if(nexacro.Browser=="IE"&&nexacro.BrowserVersion<=8){this._async_create=_a;}else{this._async_create=false;}};_pGrid._recreate_contents_all_async=function(_a,_b,_c,_d,_e){nexacro.OnceCallbackTimer.callonce(this,function(){return this._recreate_contents_all(_a,_b,_c,_d,_e);});};_pGrid._isDownActionKeyMouse=function(){var _a=this._getWindow();if(_a&&(_a._cur_ldown_elem||_a._keydown_element)){var _b=_a._cur_ldown_elem||_a._keydown_element,_c=_a.findComponent(_b,0,0)[0],_d=false;while(_c){if(_c instanceof nexacro.ScrollBarCtrl){break;}if(_c._type_name=="Grid"&&_c==this&&_c.id==this.id){_d=true;break;}_c=_c.parent;}return _d;}return false;};_pGrid._recreate_contents_all=function(_a,_b,_c,_d,_e,_f){if(!this.enableredraw){this._enable_redraw_history["recreate"]=true;return;}var _g=this._isDownActionKeyMouse()||this._is_down_act;if(_g&&!this._userRowposChange&&!this._is_after_recreate){var _h=[_a,_b,_c,_d,_e];if(this._after_recreate_contents_all){_h[0]=_h[0]||this._after_recreate_contents_all[0];_h[1]=_h[1]||this._after_recreate_contents_all[1];_h[2]=_h[2]||this._after_recreate_contents_all[2];_h[3]=_h[3]&&this._after_recreate_contents_all[3];_h[2]=_h[4]||this._after_recreate_contents_all[4];}this._after_recreate_contents_all=_h;return;}var _i=this._getDisplayRowCount();if(_b){this._resetRowSizeList(_f);this._resetColSizeList(_f);this._resizeBand();if(this._bodyBand){this._bodyBand._recreate_contents(_a,_c,false,_e);this._bodyBand._matrix._adjustColsDisplay(true);}if(!_d){if(this._headBand){this._headBand._recreate_contents(_a);this._headBand._matrix._adjustColsDisplay(true);}if(this._summBand){this._summBand._recreate_contents(_a);this._summBand._matrix._adjustColsDisplay(true);}}}else{if(this._bodyBand){this._bodyBand._recreate_contents(_a,_c,false,_e);}if(!_d){if(this._headBand){this._headBand._recreate_contents(_a);}if(this._summBand){this._summBand._recreate_contents(_a);}}}var _j=this._getDisplayRowCount();this._updateNodata(_i,_j);this._updateSelector();this._adjustOverlayElements(true,this._is_use_fakemerge);};_pGrid._updateNodata=function(_a,_b){if((_a==0&&_b>0)||(_a>0&&_b==0)){var _c=this._bodyBand;if(_c){_c._updateAll(true);}else{this._control_pseudo="";this._contents_pseudo="";this._stat_change();}}};_pGrid._getRowSize=function(_a){var _b=this._curFormat;if(_a== -1){if(this._rowHeadList.length>0){return this._rowHeadList[0];}else{return _b.headHeight;}}else if(_a== -2){if(this._rowSummList.length>0){return this._rowSummList[0];}else{return _b.summHeight;}}else{var _c=this._getDataRow(_a);if(_c>=0){if(this._rowSizeList.length>0){return this._rowSizeList[_c];}else{return _b._body_height;}}}return  -1;};_pGrid._getHeadHeight=function(){var _a=this._curFormat;if(_a==null||_a._headband==null){return 0;}var _b=this._rowHeadList[0];if(_b==undefined){_b=_a.headHeight;}return _b;};_pGrid._getSummHeight=function(){var _a=this._curFormat;if(_a==null||_a._summband==null){return 0;}var _b=this._rowSummList[0];if(_b==undefined){_b=_a.summHeight;}return _b;};_pGrid._createBandsAndAreas=function(){if(!this.enableredraw){this._enable_redraw_history["recreate"]=true;return;}var _a=this._curFormat;if(_a==null){return;}this._clearAllStyleCache();this._applyAutofittype(false);var _b=this._curFormat._bodycells;var _c=_b?_b.length:0;var _d;for(var _o=0;_o<_c;_o++ ){_d=_b[_o];if(_d.suppress!=0){this._is_use_suppress=true;}if(_d.wordwrap!="none"){this._is_body_wordwrap=true;}}_b=this._curFormat._headcells;_c=_b?_b.length:0;for(var _o=0;_o<_c;_o++ ){_d=_b[_o];if(_d.wordwrap!="none"){this._is_head_wordwrap=true;break;}}_b=this._curFormat._summcells;_c=_b?_b.length:0;for(var _o=0;_o<_c;_o++ ){_d=_b[_o];if(_d.wordwrap!="none"){this._is_summ_wordwrap=true;break;}}var _e=this._getAvailableRect(this);var _f=_e.width;var _g=_e.height;var _h=this.getElement();var _i,_j;var _k=_a.headHeight;var _l=_a.summHeight;if(this.summarytype=="top"||this.summarytype=="lefttop"){_i=_k+_l;_j=_g;}else{_i=_k;_j=_g-_l;}if(_j<_i){_j=_i;}this._bodyBand=new nexacro.GridBand("body",0,_i,_f,_j-_i,this,_a._bodyband);this.body=_a._bodyband;var _m,_n;if(_l>0){_e=this._getAvailableRect(this);_f=_e.width;_g=_e.height;if(this.summarytype=="top"||this.summarytype=="lefttop"){_i=_k;_j=_k+_l;}else{_j=_g;_i=_j-_l;}this._summBand=_m=new nexacro.GridBand("summ",0,_i,_f,_j-_i,this,_a._summband);this.summ=this.summary=_a._summband;}else{this._summBand=null;}if(_k>0){_e=this._getAvailableRect(this);_f=_e.width;_g=_e.height;_i=0;_j=_k;this._headBand=_n=new nexacro.GridBand("head",0,_i,_f,_j-_i,this,_a._headband);this.head=_a._headband;}else{this._headBand=null;}this._resetRowSizeList();this._resetColSizeList();this._bodyBand.createComponent();_h.setVertScrollElements(this._bodyBand._control_element);if(_n){this._headBand.createComponent();}if(_m){this._summBand.createComponent();}this._updateSelector();this._setHscrollElement();this._setScrollMaxSize(this._bodyBand._scrollWidth,this._bodyBand._scrollHeight);this._control_element._arrangeBandOrder();if(this._is_recreating){this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}};_pGrid._band_scroll_sizes=null;_pGrid._setScrollMaxSize=function(_a,_b,_c){if(_c){this._band_scroll_sizes=_c;}if(this._control_element){this._control_element._setInnerElementScrollMaxSize(this._band_scroll_sizes);if(_b==undefined){_b=this._bodyBand._scrollHeight;}this._control_element.setElementScrollMaxSize(_a,_b);this._updateClientSize(this._control_element);}};_pGrid._resizeBand=function(_a){var _b=this._client_left;var _c=this._client_top;var _d=this._client_width;var _e=this._client_height;var _f=this._getHeadHeight();var _g=this._getSummHeight();var _h,_i,_j,_k;_h=_b;_j=_d;if(this._bodyBand){if(this.summarytype=="top"||this.summarytype=="lefttop"){_i=_f+_g;_k=_e-_i;}else{_i=_f;_k=_e-_g-_i;}if(_k<0){_k=0;}this._bodyBand.move(_h,_i,_j,_k);}_e=this._client_height;if(this._summBand){if(this.summarytype=="top"||this.summarytype=="lefttop"){_i=_f;_k=_f+_g-_i;}else{_i=_e-_g;_k=_e-_i;}this._summBand.move(_h,_i,_j,_k);}_e=this._client_height;if(this._headBand){_i=_c;_k=_f;this._headBand.move(_h,_i,_j,_k);}if(!_a&&(this._colautofit||this._rowautofit)){this._applyAutofittype(true);}this._MoveEditComp();this._updateSelector();this._updateScrollInfo();};_pGrid._onResetScrollBar=function(){switch(this.scrollbars){case "none":this._scrollbars=0;break;case "autovert":this._scrollbars=1;break;case "autohorz":this._scrollbars=2;break;case "autoboth":this._scrollbars=3;break;case "fixedvert":this._scrollbars=4;break;case "fixedhorz":this._scrollbars=8;break;case "fixedboth":this._scrollbars=12;break;case "alwaysvert":this._scrollbars=16;break;case "alwayshorz":this._scrollbars=32;break;}if(this._scrollbars==1||this._scrollbars==4){if(this._rowautofit){this._scrollbars=0;}}else if(this._scrollbars==2||this._scrollbars==8){if(this._colautofit){this._scrollbars=0;}}else if(this._scrollbars==3){if(this._colautofit&&this._rowautofit){this._scrollbars=0;}if(this._colautofit){this._scrollbars=1;}if(this._rowautofit){this._scrollbars=2;}}else if(this._scrollbars==16){if(this._rowautofit){this._scrollbars=2;}if(this._colautofit){this._scrollbars=1;}}else if(this._scrollbars==32){if(this._colautofit){this._scrollbars=1;}}return nexacro.Component.prototype._onResetScrollBar.call(this);};_pGrid._setHscrollElement=function(){if(!this._control_element){return;}var _a=[];if(this._bodyBand){var _b=this._bodyBand._get_rows();for(var _c=0,_d=_b.length;_c<_d;_c++ ){_a.push(_b[_c]._control_element);}}if(this._headBand){var _b=this._headBand._matrix._rows;for(var _c=0,_d=_b.length;_c<_d;_c++ ){_a.push(_b[_c]._control_element);}}if(this._summBand){var _b=this._summBand._matrix._rows;for(var _c=0,_d=_b.length;_c<_d;_c++ ){_a.push(_b[_c]._control_element);}}if(_a.length==0){_a=null;}this._control_element.setHorzScrollElements(_a);};_pGrid._resetScrollMax=function(){var _a=this._curFormat;if(!_a){return;}var _b=this._bodyBand;if(!_b){return;}var _c=this._getGridRowCount();var _d=this._getAvailableRect(_b);var _e=_d.width-_a.leftWidth-_a.rightWidth;var _f=_d.height;var _g=_a.bodyWidth;var _h=this._treeIndexes;var _i=this._rowSizeList;var _j;var _k=[];var _l=0;var _m=[];var _n=1;var _o=this._div_max_height;var _p=0;for(var _q=0;_q<_c;_q++ ){_j=this._getDataRow(_q);_p+=_i[_j];if(_p-this._fixedrow_height>=_o*_n){_m.push(_p-_i[_j]);_n++ ;}}_p-=this._fixedrow_height;_m.push(_p);_b._scrollHeight=_p;_b._scrollWidth=_g;this._setScrollMaxSize(_b._scrollWidth,_b._scrollHeight,_m);};_pGrid._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Format");var _d=_c.length;var _e="";this._format_str=[];this._autofitcol_rate=[];for(var _i=0;_i<_d;_i++ ){var _f=_c[_i];var _g=_f.getAttribute("id");if(_g==null||_g==""){_g="default";}if(_e==""||_g=="default"){_e=_g;}var _h=new nexacro.GridFormat(_g,this);_h._loadFromDOM(_f);this._formats[_g]=_h;this._format_str.push(_g);}this.formats=_a;if(this.formatid==""){this.formatid=_e;}this._curFormat=this._formats[this.formatid];};_pGrid._destroyBands=function(_a){if(!this.enableredraw){this._enable_redraw_history["recreate"]=true;return;}if(!_a){this._hideEditor(false,true);}if(this._temphead){this._temphead.destroy();this._temphead=null;}if(this._tempsumm){this._tempsumm.destroy();this._tempsumm=null;}if(this._bodyBand){if(this._control_element){this._control_element.setVertScrollElements(null);}this._bodyBand.destroy();this._bodyBand=null;this.body=null;}if(this._summBand){this._summBand.destroy();this._summBand=null;this.summary=null;this.summ=null;}if(this._headBand){this._headBand.destroy();this._headBand=null;this.head=null;}if(this._select_ctrl){this._select_ctrl.destroy();this._select_ctrl=null;}this._destroyOverlayElements();};_pGrid._refreshAll=function(_a){this._refreshHead(_a);this._refreshSumm(_a);this._refreshBody(_a);};_pGrid._getBodyCellInfo=function(_a){if(this._curFormat){var _b=this._curFormat._bodycells[_a];if(_b){return _b;}}return null;};_pGrid._getBodyCellItem=function(_a,_b){return (this._bodyBand._get_rows()[_a]._cells[_b]);};_pGrid._refreshBodyCell=function(_a,_b,_c,_d){if(!this.enableredraw){this._enable_redraw_history["refresh_body"]=true;return;}if(_b<0){return;}var _e=this._bodyBand;if(_e){var _f=_e._get_rows();if(_f.length<=_b){return;}var _g=_f[_b]._rowidx;var _h=(this._hasTree)?this._treeIndexes[_g]:_g;var _i=this._isSelectedCell(_a,_h);if(_f[_b]){var _j=_f[_b]._cells[_a];if(_c){if(_j){_j.currentstyle._empty();}}_e._refreshRowCell(_b,_a,_i,undefined,_d);}}};_pGrid._refreshHead=function(_a){if(!this.enableredraw){this._enable_redraw_history["refresh_head"]=true;return;}var _b=this._headBand;if(_b){var _c=_b._get_rows().length;_b._updateAll(_a);for(var _d=0;_d<_c;_d++ ){_b._refreshRow(_d);}}this._applyResizer();this._adjustOverlayElements(false,this._is_use_fakemerge);};_pGrid._refreshSumm=function(_a){if(!this.enableredraw){this._enable_redraw_history["refresh_summ"]=true;return;}var _b=this._summBand;if(_b){var _c=_b._get_rows().length;_b._updateAll(_a);for(var _d=0;_d<_c;_d++ ){_b._refreshRow(_d);}_b._updateAll(_a);}this._adjustOverlayElements(false,this._is_use_fakemerge);};_pGrid._refreshBody=function(_a,_b,_c,_d){if(!this.enableredraw){this._enable_redraw_history["refresh_body"]=true;return;}var _e=this._bodyBand;if(_e){if(!_d){this._suppressUpdate();}var _f=this._getDispRowCnt();var _g=_e._get_rows();var _h;_e._updateAll(_a);for(var _i=0;_i<_f;_i++ ){_e._refreshRow(_i,undefined,_b);}if(!_c){this._adjustOverlayElements(this._is_recreating,this._is_use_fakemerge);}this._setSelectBorder();}};_pGrid._MoveEditComp=function(){if(this._showEditing){this._showEditor(true);}};_pGrid._analyzeSuppress=function(_a){var _b=this._curFormat._bodycells;if(!_b){return;}var _c;if(_a){_c=this._getGridRowCount();}else{if(this._fixed_rowcnt>0){_c=this._fixed_rowcnt-this._fixed_startrow+this._disprowcnt;}else{_c=this._disprowcnt;}}if(_c==0){return;}var _d=_b.length;var _e;for(var _w=0;_w<_d;_w++ ){_e=_b[_w];if(_e.suppress==0){continue;}_e._clearSuppressInfo();var _f,_g,_h,_i,_j,_k,_l,_m,_n,_o;for(var _q=0;_q<=_c;_q++ ){_f=(!_a)?this.__getBodyCellRowIdxFromIdx(_q):_q;_n=this._getDataRow(_f);_o=_e._getSuppress(_n);if(_q>0){_l=_e._getSuppressInfo(_q-1,true);}if(_o>0&&_q>0){if(_c==_q){break;}_i=0;_j=0;_m=this._getDataRow((!_a)?this.__getBodyCellRowIdxFromIdx(_q-1):_q-1);_n=this._getDataRow(_f);if(this._isFakeCell(_n)){continue;}if(this._hasTree){_g=_e._getDisplayText(_m);_i=_e._getTreeLevel(_m);_h=_e._getDisplayText(_n);_j=_e._getTreeLevel(_n);}else{_g=_e._getDisplayText(_m);_h=_e._getDisplayText(_n);}_k=_e._getDisplaytype(_f);if(this._hasTree&&_k=="tree"){;}else{if(_g==_h){_l.last=false;}else{_l.last=true;}}}else if(_o<0&&_w>0){}}}var _p=this.suppresslevel;if(_p=="sameskip"||_p=="allcompare"){var _q=0;function __analyzeSuppress_row_loop2(_x){if(_q<_c){var _y=[];var _z=[];var _e;_f=(!_a)?_x.__getBodyCellRowIdxFromIdx(_q):_q;_n=_x._getDataRow(_f);for(var _w=0;_w<_d;_w++ ){_e=_b[_w];_o=_e._getSuppress(_n);if(_o>0){_y.push(_e);}if(_o<0){}}if(_y.length>0){_y.sort(function(_ac,_ad){return _ac._getSuppress(_n)-_ad._getSuppress(_n);});var _aa=_y.length;for(var _ac=0;_ac<_aa;_ac++ ){_e=_y[_ac];if(_e){for(var _ad=0;_ad<_d;_ad++ ){if(_ad==_e._col){continue;}_x._compareSuppressCol(_q,_ad,_e._col,_p,_n);}}}}if(_z.length>0){_z.sort(function(_ae,_af){return _af._getSuppress(_n)-_ae._getSuppress(_n);});var _ab=_z.length;for(var _ac=0;_ac<_ab;_ac++ ){_e=_z[_ac];if(_e){for(var _ad=0;_ad<_d;_ad++ ){if(_ad==_e._col){continue;}}}}}_q++ ;return false;}return true;}for(;true;){if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}if(__analyzeSuppress_row_loop2(this)){break;}}}if(_c>0){var _r=0;var _s;var _t,_u,_o,_f,_n;for(var _w=0;_w<_d;_w++ ){_s=0;var _e,_v;for(var _q=0;_q<_c;_q++ ){_e=_b[_w];if(_e.suppress==0){continue;}_f=(!_a)?this.__getBodyCellRowIdxFromIdx(_q):_q;_n=this._getDataRow(_f);if(_e.suppressalign.indexOf("middle")<0){break;}_t=_e._getSuppressInfo(_q);_t.middle=false;_o=_e._getSuppress(_n);if(_o>0){_r++ ;if(_t.last==true){if(_r==1){_t.middle=true;}else{_v=Math.round(_r/2);_u=_e._getSuppressInfo(_s+_v-1);_u.middle=true;}_s=_q+1;_r=0;}}if(_o<0){;}}}}};_pGrid._compareSuppressCol=function(_a,_b,_c,_d,_e){var _f=this._bodyBand;var _g=this._curFormat._bodycells;var _h=_g[_b];var _i=_g[_c];var _j,_k;var _l=_i._getSuppress(_e);var _m=_h._getSuppress(_e);if(_l<=0||_m<=0){return false;}if(_m<_l){_j=_h._getSuppressInfo(_a);_k=_i._getSuppressInfo(_a);if(_j.last==true){_k.last=true;}return true;}else if(_d=="allcompare"&&_m==_l){_j=_h._getSuppressInfo(_a);_k=_i._getSuppressInfo(_a);if(_j.last==true){_k.last=true;}if(_k.last==true){_j.last=true;}return true;}return false;};_pGrid.__getBodyCellRowIdxFromIdx=function(_a){var _b;if(this._fixed_rowcnt){if(_a+this._fixed_startrow<=this._fixed_endrow){_b=this._fixed_startrow;}else{_a-=this._fixed_rowcnt-this._fixed_startrow;_b=this._toprowpos[0];}}else{_b=this._toprowpos[0];}return _a+_b;};_pGrid._suppressUpdate=function(){if(!this._is_use_suppress||!this._curFormat||!this._curFormat._bodycells){return;}this._analyzeSuppress();var _a=this._fixed_rowcnt+this._disprowcnt;for(var _b=0;_b<=_a;_b++ ){this._suppressUpdateRow(_b,0,_a-1);}};_pGrid._suppressUpdateRow=function(_a,_b,_c,_d){var _e=this._bodyBand;if(_e==null){return;}var _f=this._curFormat._bodycells;var _g=_f.length;var _h=(!_d)?this.__getBodyCellRowIdxFromIdx(_a):_a;var _i,_j,_k,_l;var _m,_n,_o;var _p=this._getDataRow(_h);for(var _r=0;_r<_g;_r++ ){_i=_f[_r];_n=_i._getSuppressInfo(_a);_o=_i._getSuppress(_p);if(!_n){continue;}if(_o>0){if(_o>0&&(_a-_b)>0){_m=_i._getSuppressInfo(_a-1);}else if(_i.csupp<0&&_r>0){var _q=_f[_r-1];_m=_q._getSuppressInfo(_a);}_k=(_m?_m.last:true);_l=(_a==_c?true:_n.last);if(_i.suppressalign.indexOf("first")>=0){if(_k==false){_n.text_proc=_o;}else{_n.text_proc=0;}}else if(_i.suppressalign.indexOf("last")>=0){if(_l==false){_n.text_proc=_o;}else{_n.text_proc=0;}}else if(_i.suppressalign.indexOf("middle")>=0){if(_n.middle==true){_n.text_proc=0;}else{_n.text_proc=_o;}}if(_m){if(_k==false){_m.border_proc=_o;}else{_m.border_proc=0;}}}else if(_o==undefined){if(_i.suppressalign.indexOf("first")>=0||_i.suppressalign.indexOf("middle")>=0){_n.text_proc=1;}}}};_pGrid._refreshBodyRow=function(_a,_b,_c){if(!this.enableredraw){this._enable_redraw_history["refresh_body"]=true;return;}var _d=this._bodyBand;if(_d){var _e=_d._get_rows();if(_e.length<=_a){return;}var _f=this._getDispRowCnt();if(_a>=0&&_a<_f){var _g=_e[_a]._rowidx;var _h=(this._hasTree)?this._treeIndexes[_g]:_g;if(_h==undefined){return;}_d._refreshRow(_a,_b);}this._adjustOverlayElements(false,this._is_use_fakemerge);}};_pGrid._global_cursor=undefined;_pGrid._setGlobalCursor=function(_a,_b){if(this._global_cursor!==_a){this._global_cursor=_a;while(_b){_b._updateCursor(_a);if(_b instanceof nexacro.Grid){return;}_b=_b.parent;}}};_pGrid._getColMergeInfo=function(_a,_b){var _c;if(_a=="head"){_c=this._curFormat._headcells;}else if(_a=="summ"||_a=="summary"){_c=this._curFormat._summcells;}else{_c=this._curFormat._bodycells;}if(!_c){return null;}var _d=_c.length;var _e;var _f=_b;var _g=1;var _h=[];for(var _i=0;_i<_d;_i++ ){_e=_c[_i];if(_e._col<=_b&&(_e._col+_e._colspan)>_b){if(_g<_e._colspan){_g=_e._colspan;_f=_e._col;}}}_h[0]=_f;_h[1]=_g;return _h;};_pGrid._applySelect=function(_a,_b,_c){var _d=false;if(this.summarytype=="top"||this.summarytype=="lefttop"){_d=true;}if(_a.length==0||(_d&&_c<0)){_a.splice(0,0,_c);_b.splice(0,0,_c);}else{var _e,_f;var _g=0;if(_d){for(var _i=0;_i<_a.length;_i++ ){if(_a[_i]>=0){break;}_g++ ;}_e=_a.splice(0,_g);_f=_b.splice(0,_g);}var _h=_a.length;if(_h==0){_a.splice(0,0,_c);_b.splice(0,0,_c);}else if(_h==1||_a[0]>_c){this._addSelect(_a,_b,0,_c);}else if(_b[_h-1]<_c){this._addSelect(_a,_b,_h-1,_c);}else{for(var _i=0;_i<_h;_i++ ){if(_b[_i]<_c&&_a[_i+1]>_c){if((_b[_i]+1)==_c&&(_a[_i+1]-1)>_c){this._addSelect(_a,_b,_i,_c);}else if((_b[_i]+1)<_c&&(_a[_i+1]-1)==_c){this._addSelect(_a,_b,_i+1,_c);}else if((_b[_i]+1)==_c&&(_a[_i+1]-1)==_c){this._addSelect(_a,_b,_i,_c);_b[_i]=_b[_i+1];_a.splice(_i+1,1);_b.splice(_i+1,1);}else if((_b[_i]+1)<_c&&(_a[_i+1]-1)>_c){_a.push(_c);_b.push(_c);_a.sort();_b.sort();}break;}}}if(_d){for(var _i=0;_i<_e.length;_i++ ){_a.splice(0,0,_e[_i]);_b.splice(0,0,_f[_i]);}}}};_pGrid._addSelect=function(_a,_b,_c,_d){if(_b[_c]<_d){if((_b[_c]+1)==_d){_b[_c]=_d;}else{_a.push(_d);_b.push(_d);}}else if(_a[_c]>_d){if((_a[_c]-1)==_d){_a[_c]=_d;}else{_a.push(_d);_b.push(_d);_a.sort();_b.sort();}}};_pGrid._findCellObj=function(_a){var _b=_a;while(_b&&_b._type_name!="GridCell"){if(_b._type_name=="Grid"){if(_b==this){break;}else{_b=_a;break;}}if(_b._cellobj&&_b._cellobj._is_alive&&_b._cellobj._type_name=="GridCell"){_b=_b._cellobj;break;}_b=_b.parent;}return _b;};_pGrid._findBandObj=function(_a){var _b=_a;while(_b&&_b._type_name!="GridBand"){if(_b==this){break;}_b=_b.parent;}return _b;};_pGrid._getHScrollPos=function(){if(!this.hscrollbar.visible){return 0;}return this.hscrollbar.pos;};_pGrid._isFakeCell=function(_a){if(this._rowcount<=_a||_a< -2){return true;}return false;};_pGrid._moveToPosCell=function(_a,_b){var _c=_a;var _d=true;if(_c==undefined){_c=0;}if(this._isFakeCell(_c)){return false;}var _e=this._getBodyCellInfo(_b);if(!_e){return false;}var _f=this._beforebodycellpos=this._selectinfo.curcell;var _g=this._beforebodycolpos=this._selectinfo.curcol;var _h=this._beforebodyrowpos=this._selectinfo.curdsrow;var _i=this._beforebodysubrowpos=this._selectinfo.cursubrow;var _j=this._beforepvt=this._selectinfo.curpvt;var _k=_b;var _l=_e._col;var _m=_c;var _n=_e._row;var _o= -9;this._setSelectedInfo(_k,_l,_m,_n,_o);while(true){if(_k!=_f){break;}if(_l!=_g){break;}if(_m!=_h){break;}if(_n!=_i){break;}if(_o!=_j){break;}_d=false;break;}if(_d){_d=this._ChangeSelect(_k,_l,_m,_n,_o,false,_f,_g,_h,_i,_j,"body");}if(_d&&this._isSelectRowType()){var _p=this._dsRowToDispRow(_m);this._jumpCurrentRow(_p);var _q=this._getCurrentBodyCell( -1, -1);if(_q){_q._showfull();}}this._moveCellAfterFocus();return _d;};_pGrid._getColFixCnt=function(_a){if(this._curFormat){return this._curFormat._getColFixCnt(_a);}return  -1;};_pGrid._getGridBand=function(_a){if(!this._curFormat||!this._curFormat._bodycells){return  -1;}var _b=this._curFormat._bodycells[_a];if(_b){if(this._bPivotGrid){var _c=this._getColFixCnt("left");var _d=this._getColFixCnt("right");if(_b._col<_c){return  -1;}else if(_b._col>=(this._curFormat._bodycells.length-right)){return  -2;}else{return 0;}}else{return 0;}}return  -9;};_pGrid._clrMultiSelect=function(){this._selectinfo.rows=[];this._selectinfo.selects=[];this._selectstartrow=[];this._selectstartcol=[];this._selectstartsubrow=[];this._selectstartpvt=[];this._selectendrow=[];this._selectendcol=[];this._selectendsubrow=[];this._selectendpvt=[];this._defaultSelect();};_pGrid._isIncludeSelectpos=function(_a,_b){var _c=this._selectinfo.getSelectCells(_b);if(_c&&_c[_a]){return true;}return false;};_pGrid._addSelectpos=function(_a,_b,_c){var _d=this._selectinfo.selects;var _e=this._selectinfo.rows;if(!_d[_b+2]){_d[_b+2]=[];}_d[_b+2][_a]=true;for(var _f=0,_g=_e.length;_f<_g;_f++ ){if(_e[_f]==_b){return;}}_e.push(_b);if(!_c){_e.sort(function(_h,_i){return _h-_i;});}};_pGrid._delSelectpos=function(_a,_b,_c){var _d=this._selectinfo.selects;var _e=this._selectinfo.rows;if(_a<0){if(nexacro._isArray(_b)){var _f=_b.length;for(var _i=_f-1;_i>=0;_i-- ){if(_c){if(_d.length>_b[_i]+2){_d.splice(_b[_i]+2,1);}}else{_d[_b[_i]+2]=undefined;}for(var _j=0;_j<_e.length;_j++ ){if(_e[_j]==_b[_i]){_e.splice(_j,1);break;}}}}else{if(_c){if(_d.length>_b+2){_d.splice(_b+2,1);}}else{_d[_b+2]=undefined;}for(var _j=0;_j<_e.length;_j++ ){if(_e[_j]==_b){_e.splice(_j,1);break;}}}}else{if(nexacro._isArray(_b)){var _f=_b.length;var _g,_h;for(var _i=_f-1;_i>=0;_i-- ){_g=_d[_b[_i]+2];if(_g){_g[_a]=false;}_h=false;for(var _j=0,_k=_g.length;_j<_k;_j++ ){if(_g[_j]){_h=true;break;}}if(!_h){_d[_b+2]=undefined;for(var _j=0;_j<_e.length;_j++ ){if(_e[_j]==_b[_i]){_e.splice(_j,1);break;}}}}}else{var _g=_d[_b+2];if(_g){_g[_a]=false;}var _h=false;for(var _j=0,_l=_g.length;_j<_l;_j++ ){if(_g[_j]){_h=true;break;}}if(!_h){_d[_b+2]=undefined;for(var _j=0;_j<_e.length;_j++ ){if(_e[_j]==_b){_e.splice(_j,1);break;}}}}}};_pGrid._resetSelectStartEndRow=function(){var _a=this._selectinfo.selects;this._selectstartrow=[];this._selectendrow=[];for(var _b=0,_c=_a.length;_b<_c;_b++ ){if(_a[_b]){this._applySelect(this._selectstartrow,this._selectendrow,_b-2);}}this.selectstartrow=this._selectstartrow;this.selectendrow=this._selectendrow;if(!this.selectstartrow.length){this.selectstartrow= -9;}if(!this.selectendrow.length){this.selectendrow= -9;}};_pGrid._isMultiSelected=function(){if(!this._curFormat||!this._curFormat._bodycells){return false;}if(this._isSelectRowType()){if(this._selectinfo.rows.length>1){return true;}}else{if(this._selectinfo.rows.length>1){return true;}else if(this._selectinfo.rows.length==1){var _a=this._selectinfo.selects[this._selectinfo.rows[0]+2];var _b=0;for(var _c=0,_d=_a.length;_c<_d;_c++ ){if(_a[_c]){_b++ ;}if(_b>1){return true;}}}}return false;};_pGrid._initSelect=function(_a,_b,_c,_d,_e){_b=(_b!==undefined)?_b:0;_c=(_c!==undefined)?_c:0;_a=(_a!==undefined)?_a:0;_d=(_d!==undefined)?_d:0;_e=(_e!==undefined)?_e: -9;this._resetSelect(_a,_b,_c,_d,_e);};_pGrid._resetSelect=function(_a,_b,_c,_d,_e){var _f=this._selectinfo.curcell;var _g=this._selectinfo.curcol;var _h=this._selectinfo.curdsrow;var _i=this._selectinfo.cursubrow;var _j=this._selectinfo.curpvt;_b=(_b!==undefined)?_b:this._selectinfo.curcell;_c=(_c!==undefined)?_c:this._selectinfo.curcol;_a=(_a!==undefined)?_a:this._selectinfo.curdsrow;_d=(_d!==undefined)?_d:this._selectinfo.cursubrow;_e=(_e!==undefined)?_e:this._selectinfo.curpvt;if(_a>=0&&_b<0){if(this._isSelectRowType()){_b=0;}else{_b=_c=_d=0;}}if(this.getElement()){this._clrMultiSelect();this._multiselect="none";this._setSelectedInfo(_b,_c,_a,_d,_e);this._ChangeSelect(_b,_c,_a,_d,_e,true,_f,_g,_h,_i,_j,"body");this._refreshHead(true);this._refreshSumm(true);}else if(!this._is_created&&_a>=0){this._create_selection={cell:_b,col:_c,row:_a,subrow:_d,pvt:_e};}};_pGrid._ChangeSelect=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){_f=_f||false;var _n=this._multiselect;var _o=this._curFormat;if(!_o||((_m=="lbuttondown"||_m=="keydown")&&this._setdataobj&&this._setdataobj.succ==false)){this._setdataobj=null;this._setSelectedInfo(_g,_h,_i,_j,_k);return false;}var _p,_q,_r,_s=0;var _t=false;if(_l=="head"){_p=_o._headcells;_t=(_i!=_c||_g!=_a);if(_o._headrows){_s=_o._headrows.length;}}else if(_l=="summ"||_l=="summary"){_p=_o._summcells;_t=(_i!=_c||_g!=_a);if(_o._summrows){_s=_o._summrows.length;}}else{_p=_o._bodycells;if(this._isSelectRowType()){_t=(_i!=_c);}else{_t=(_i!=_c||_g!=_a);}if(_o._bodyrows){_s=_o._bodyrows.length;}}if(!_p){this._setSelectedInfo(_g,_h,_i,_j,_k);return false;}_q=_p.length;_r=_p[_a];var _u=false;if((_l=="body"&&_c<0)||_a<0){_u=(_n!="normal");this._clrMultiSelect();this._selectDraw(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_u,[]);this._selectinfo.area=[];this._defaultSelect();if(_t){this.on_fire_onselectchanged(this,_a,_b,_c,_d,_e,_g,_h,_i,_j,_k,this.selectendcol,this.selectendpivot,this.selectendrow,this.selectendsubrow,this.selectstartcol,this.selectstartpivot,this.selectstartrow,this.selectstartsubrow);}return true;}else if(!_r){this._setSelectedInfo(_g,_h,_i,_j,_k);return false;}_u=(this._selectClear||_u);this._selectClear=false;var _v=false;if(_n=="ctrl"){if(this.selecttype=="multirow"){if(!this._isIncludeSelectpos(0,_c)){_v=true;}}if(this.selecttype=="multicell"){if(!this._isIncludeSelectpos(_a,_c)){_v=true;}}}if(_f==false){if(this._binddataset&&_l=="body"&&_c>=0&&(_v==true||_i!=_c)){this._userRowposChange=true;var _w=this._binddataset._setRowPosition(_c,undefined,51);this._userRowposChange=false;if(_c!=_w){this._setSelectedInfo(_g,_h,_i,_j,_k);this._selectDraw(_g,_h,_i,_j,_k,_f,_a,_b,_c,_d,_e,true,[]);return false;}}}var _x=this._selectinfo.ctrlpoint;var _y=[];var _z=false;var _aa=0;function makeClearRows(_ac){var _ad=_ac._selectinfo.rows;var _ae=0;_y=[];for(var _af=0,_ag=_ad.length;_af<_ag;_af++ ){_y[_ae++ ]=_ac._dsRowToDispRow(_ad[_af]);}return _ad;};if(_n=="none"){if(_l=="body"){if(this._isAreaSelect()||this._isMultiSelect()){if(this._isIncludeSelectpos(_a,_c)){if(_m=="keydown"||_m=="mousemove"){_z=true;}else{_x._set(_r,_c,_s);return false;}}else{if(_m=="lbuttonup"){_z=true;}}if(_m=="mousemove"){this._is_drag_selecting=true;}else{_y=makeClearRows(this);this._clrMultiSelect();if(_m!="lbuttonup"){_x._set(_r,_c,_s);}}}else{this._clrMultiSelect();_x._set(_r,_c,_s);}}else{_y=makeClearRows(this);this._clrMultiSelect();_x._set(_r,_c,_s);}this._selectinfo.area=[];}else if(_n=="ctrl"){if(_m!="mousemove"){_x._set(_r,_c,_s);}if(this.selecttype=="multirow"){if(_v==false&&(_m=="lbuttondown"||(_m&&_m.indexOf("func")>=0))){this._delMultirowSelectInfo(_c);this._delSelectpos( -1,_c);this._resetSelectStartEndRow();this._selectDraw(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_u,_y);this._defaultSelect();this.on_fire_onselectchanged(this,_a,_b,_c,_d,_e,_g,_h,_i,_j,_k,this.selectendcol,this.selectendpivot,this.selectendrow,this.selectendsubrow,this.selectstartcol,this.selectstartpivot,this.selectstartrow,this.selectstartsubrow);return true;}_z=true;_aa=this._selectinfo.area.length;if(_m=="mousemove"){this._is_drag_selecting=true;_aa-- ;}}else if(this.selecttype=="multiarea"){_aa=this._selectinfo.area.length;if(_m=="mousemove"){this._is_drag_selecting=true;_aa-- ;}}}else if(_n=="shift"){if(this.selecttype=="multiarea"){_aa=this._selectinfo.area.length-1;}this._clrMultiSelect();_u=true;}if(this._isSelectRowType()==false){if(_t){_z=true;}if(this._isAreaSelect()){this._applyAreaSelectPos(_a,_c,_aa,"area");}else{this._addSelectpos(_a,_c);this._applySelect(this._selectstartrow,this._selectendrow,_c);this._applySelect(this._selectstartcol,this._selectendcol,_b);this._applySelect(this._selectstartsubrow,this._selectendsubrow,_d);}}else{if(_t){_z=true;}if(this._isMultiSelect()){this._applyAreaSelectPos(_a,_c,_aa,"row");}else{for(var _ac=0;_ac<_q;_ac++ ){this._addSelectpos(_ac,_c);}this._applySelect(this._selectstartrow,this._selectendrow,_c);}}this._defaultSelect();var _ab=false;if(_f==false){if(this._binddataset&&_l=="body"&&_c>=0&&(_v==true||_i!=_c)){this._rowposition=_c;_ab=true;}else{if(_u==true){_ab=true;}else if(_z==true){_ab=true;}}}else{_u=(this._isMultiSelect()||this._isAreaSelect());_ab=true;}if(_ab){this._selectDraw(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_u,_y,_m);}if(_z&&_m!="func_area1"){this.on_fire_onselectchanged(this,_a,_b,_c,_d,_e,_g,_h,_i,_j,_k,this.selectendcol,this.selectendpivot,this.selectendrow,this.selectendsubrow,this.selectstartcol,this.selectstartpivot,this.selectstartrow,this.selectstartsubrow);}return true;};_pGrid._applyAreaSelectPos=function(_a,_b,_c,_d){var _e=this._curFormat;var _f,_g,_h;var _i=[],_j=0,_k=0,_l=[],_m=0,_n=0,_o=[],_p=0,_q=0;if(_e._bodycells){_i=_e._bodycells;_j=_i.length;_k=_e._bodyrows.length;}if(_e._headcells){_l=_e._headcells;_m=_l.length;_n=_e._headrows.length;}if(_e._summcells){_o=_e._summcells;_p=_o.length;_q=_e._summrows.length;}if(_b== -2){_f=_o;_h=_q;}else if(_b== -1){_f=_l;_h=_n;}else{_f=_i;_h=_k;}var _g=_f.length;var _r=this._selectinfo.ctrlpoint;var _s=_f[_a];var _t,_u,_v,_w,_x=[],_y=[],_z;_v=Math.min(_b,_r.row);_w=Math.max(_b,_r.row);_t=Math.min(_r.col,_s._col);_u=Math.max((_r.col+_r.colspan-1),(_s._col+_s._colspan-1));if(_r.row<_b){_v=_r.row;_w=_b;_z=_w-_v;_x[0]=_r.subrow;_y[0]=_r.subrowslen-1;_x[_z]=0;_y[_z]=_s._row+_s._rowspan-1;}else if(_r.row>_b){_v=_b;_w=_r.row;_z=_w-_v;_x[0]=_s._row;_y[0]=_h-1;_x[_z]=0;_y[_z]=_r.subrow+_r.rowspan-1;}else{_v=_w=_b;_z=0;_x[0]=Math.min(_s._row,_r.subrow);_y[0]=Math.max(_s._row+_s._rowspan-1,_r.subrow+_r.rowspan-1);}var _aa;for(var _ar=_v+1;_ar<_w;_ar++ ){_aa=_ar-_v;_x[_aa]=0;if(_ar== -1){_y[_aa]=_n-1;}else{_y[_aa]=_k-1;}}var _ab;if(_d=="area"){if(_v>=0||_v==_w){_ab=this._adjustMergeArea(_f,_t,_u,_v,_w,_x,_y);}else{var _ac,_ad;var _ae=_t,_af=_u;while(true){_ac=[].concat(_x);_ad=[].concat(_y);if(_v== -2){var _ag=_ac.splice(0,1);var _ah=_ad.splice(0,1);var _ai=_ac.splice(0,1);var _aj=_ad.splice(0,1);_ab=this._adjustMergeArea(_o,_ae,_af, -2, -2,_ag,_ah);_ae=_ab.begcol;_af=_ab.endcol;_ab=this._adjustMergeArea(_l,_ae,_af, -1, -1,_ai,_aj);if(_ae!=_ab.begcol||_af!=_ab.endcol){_ae=_ab.begcol;_af=_ab.endcol;continue;}}else if(_v== -1){var _ai=_ac.splice(0,1);var _aj=_ad.splice(0,1);_ab=this._adjustMergeArea(_l,_ae,_af, -1, -1,_ai,_aj);_ae=_ab.begcol;_af=_ab.endcol;}if(_w>=0){_ab=this._adjustMergeArea(_i,_ae,_af,0,_w,_ac,_ad);}if(_ae!=_ab.begcol||_af!=_ab.endcol){_ae=_ab.begcol;_af=_ab.endcol;continue;}break;}_ab.begrow=_v;_ab.begsubrow=_x;_ab.endsubrow=_y;}}else{_ab=this._adjustRowArea(_v,_w);}this._selectinfo.area[_c]=_ab;var _ak=this._selectinfo.area;var _al=_ak.length;this._clrMultiSelect();var _am,_an,_ao,_ap;if(_d=="area"){for(var _as=0;_as<_al;_as++ ){_t=_ak[_as].begcol;_u=_ak[_as].endcol;_v=_ak[_as].begrow;_w=_ak[_as].endrow;_x=_ak[_as].begsubrow;_y=_ak[_as].endsubrow;this._selectstartrow[_as]=_v;this._selectendrow[_as]=_w;this._selectstartcol[_as]=_t;this._selectendcol[_as]=_u;this._selectstartsubrow[_as]=_x[0];this._selectendsubrow[_as]=_y[_y.length-1];for(var _ar=_v,_at=0;_ar<=_w;_ar++ ,_at++ ){if(_ar== -2){_f=_o;_g=_p;}else if(_ar== -1){_f=_l;_g=_m;}else{_f=_i;_g=_j;}for(var _au=0;_au<_g;_au++ ){_am=_f[_au]._col;_an=_f[_au]._col+_f[_au]._colspan-1;_ao=_f[_au]._row;_ap=_f[_au]._row+_f[_au]._rowspan-1;if(_am>=_t&&_an<=_u&&_ao>=_x[_at]&&_ap<=_y[_at]){this._addSelectpos(_au,_ar);}}}}}else{for(var _as=0;_as<_al;_as++ ){_v=_ak[_as].begrow;_w=_ak[_as].endrow;for(var _ar=_v,_at=0;_ar<=_w;_ar++ ,_at++ ){if(_ar== -2){_g=_p;}else if(_ar== -1){_g=_m;}else{_g=_j;}if(_g==0){continue;}for(var _au=0;_au<_g;_au++ ){this._addSelectpos(_au,_ar,true);}this._applySelect(this._selectstartrow,this._selectendrow,_ar);}}var _aq=this._selectinfo.rows;_aq.sort(function(_as,_av){return _as-_av;});_aq=null;}};_pGrid._delMultirowSelectInfo=function(_a){var _b=this._selectinfo.area;var _c=_b.length;for(var _f=0;_f<_c;_f++ ){if(_b[_f].begrow==_b[_f].endrow&&_b[_f].begrow==_a){_b.splice(_f,1);break;}else if(_b[_f].begrow==_a&&_b[_f].endrow!=_a){_b[_f].begrow++ ;break;}else if(_b[_f].endrow==_a&&_b[_f].begrow!=_a){_b[_f].endrow-- ;break;}else if(_b[_f].begrow<_a&&_b[_f].endrow>_a){var _d=_b[_f].endrow;_b[_f].endrow=_a-1;var _e=this._adjustRowArea(_a+1,_d);_b.splice(_f+1,0,_e);break;}}};_pGrid._adjustRowArea=function(_a,_b){return {begcol: -1,endcol: -1,begrow:_a,endrow:_b,begsubrow:[],endsubrow:[]};};_pGrid._adjustMergeArea=function(_a,_b,_c,_d,_e,_f,_g){var _h=_e-_d;var _i=_a.length;var _j,_k,_l,_m;var _n,_o=_f.length;for(var _p=0;_p<_i;_p++ ){_j=_a[_p]._col;_k=_a[_p]._col+_a[_p]._colspan-1;_l=_a[_p]._row;_m=_a[_p]._row+_a[_p]._rowspan-1;_n=false;for(var _q=0;_q<_o;_q++ ){if(((_b<=_j&&_c>=_j)||(_b<=_k&&_c>=_k)||(_b>_j&&_c<_k))&&((_f[_q]<=_l&&_g[_q]>=_l)||(_f[_q]<=_m&&_g[_q]>=_m)||(_f[_q]>_l&&_g[_q]<_m))){if(_b>_j){_b=_j;_n=true;}if(_c<_k){_c=_k;_n=true;}if(_q==0){if(_f[0]>_l){_f[0]=_l;_n=true;}}if(_q==_h){if(_g[_h]<_m){_g[_h]=_m;_n=true;}}if(_n==true){_p=0;break;}}}}return {begcol:_b,endcol:_c,begrow:_d,endrow:_e,begsubrow:_f,endsubrow:_g};};_pGrid._defaultSelect=function(){this.selectstartrow=this._selectstartrow;this.selectstartcol=this._selectstartcol;this.selectstartsubrow=this._selectstartsubrow;this.selectstartpivot=this._selectstartpvt;this.selectendrow=this._selectendrow;this.selectendcol=this._selectendcol;this.selectendsubrow=this._selectendsubrow;this.selectendpivot=this._selectendpvt;if(!this.selectstartrow.length){this.selectstartrow= -9;}if(!this.selectstartcol.length){this.selectstartcol= -1;}if(!this.selectstartsubrow.length){this.selectstartsubrow= -1;}if(!this.selectstartpivot.length){this.selectstartpivot= -9;}if(!this.selectendrow.length){this.selectendrow= -9;}if(!this.selectendcol.length){this.selectendcol= -1;}if(!this.selectendsubrow.length){this.selectendsubrow= -1;}if(!this.selectendpivot.length){this.selectendpivot= -9;}};_pGrid._dsRowToDispRow=function(_a,_b){var _c;if(this._hasTree){_c=this._getTreeRowPosition(_a);}else{_c=_a;}if(_b){_c-=this._getBodyBegRowPos(_c);}return _c;};_pGrid._jumpCurrentRow=function(_a){if(_a<0){return this._begrowpos;}var _b=this._toprowpos[0];var _c=this.vscrollbar;var _d=this._getBodyBegRowPos(_a);if(this._lbuttondown_proc==false){if(_a<=_b){if(!this._select_noscroll&&_c&&_c._isEnable()){_c._set_rowpos(_a);}_d=this._getBodyBegRowPos(_a);}else if(_a>(_b+this.pagerowcount-1)){var _e=(this.pagerowcount>0)?this._pagerowcnt-this.pagerowcount:0;if(!this._select_noscroll&&_c&&_c._isEnable()){_c._set_rowpos(_a-this._pagerowcnt+1+_e);}_d=this._getBodyBegRowPos(_a);}else{if(this._isRemainAreaScroll()){if(!this._select_noscroll&&_c&&_c._isEnable()){_c._set_rowpos(_a);}_d=this._getBodyBegRowPos(_a);}}}return _d;};_pGrid._getBodyBegRowPos=function(_a){if(this._fixed_rowcnt>0){if(this._fixed_endrow>=_a){return this._fixed_startrow;}return this._begrowpos-(this._fixed_rowcnt-this._fixed_startrow);}return this._begrowpos;};_pGrid._clearRows=function(_a){if(_a.length>0){for(var _b=0,_c=_a.length;_b<_c;_b++ ){if(_a[_b]== -2){this._refreshSumm(true);bSummRowDraw=false;}else if(_a[_b]== -1){this._refreshHead(true);bHeadRowDraw=false;}else{this._refreshBodyRow(_a[_b]-this._getBodyBegRowPos(_a[_b]));}}return true;}return false;};_pGrid._selectDraw=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=this._dsRowToDispRow(_i);var _p=this._dsRowToDispRow(_c);var _q=this._toprowpos[0];this._setSelectedInfo(null,null,_c,null,null);if(!this._is_created){return;}var _r=false;var _s=false;var _t=false;var _u=null;if((_u=this._getUseBindExprProp("body"))||this._isUseBindExprStyle("body")){_r=true;_l=true;}if(this._isUseBindExprStyle("head")||this._getUseBindExprProp("head")||_p== -1||_o== -1){_s=true;}if(this._isUseBindExprStyle("summ")||this._getUseBindExprProp("summ")||_p== -2||_o== -2){_t=true;}if(this._isSelectRowType()){if(_p<0&&(_n&&_n.indexOf("func")<0)){if(_l){if(!this._clearRows(_m)){this._refreshBody(false,!_l);}}else{this._refreshBodyRow(_o-this._getBodyBegRowPos(_o));}if(_s){this._refreshHead(false);}if(_t){this._refreshSumm(false);}}else if(_p!=_o){this._jumpCurrentRow(_p);if(this._isMultiSelect()){this._refreshBody(false,!_l);if(_s){this._refreshHead(false);}if(_t){this._refreshSumm(false);}}else{if(_l){if(!this._clearRows(_m)){this._refreshBody(false,!_l);}else{this._refreshBodyRow(_p-this._getBodyBegRowPos(_p));}}else{this._refreshBodyRow(_o-this._getBodyBegRowPos(_o));this._refreshBodyRow(_p-this._getBodyBegRowPos(_p));}if(_s){this._refreshHead(false);}if(_t){this._refreshSumm(false);}}}else{if(this._isMultiSelect()){this._refreshBody(false,!_l);if(_s){this._refreshHead(false);}if(_t){this._refreshSumm(false);}}}}else{if(_p<0&&(_n&&_n.indexOf("func")<0)){if(_l){if(!this._clearRows(_m)){this._refreshBody(false,!_l);}}else{this._refreshBodyCell(_g,_o-this._getBodyBegRowPos(_o));}if(_s){this._refreshHead(false);}if(_t){this._refreshSumm(false);}}else if(_p!=_o||_a!=_g){if(_n!="selectorsizing"){this._jumpCurrentRow(_p);var _v;if(_p== -1){_v=this._getCurrentHeadCell( -1);}else if(_p== -2){_v=this._getCurrentSummCell( -1);}else{_v=this._getCurrentBodyCell( -1, -1);}if(_v){var _w=_v._refobj._area;var _x=this._select_ctrl;if(_x&&_x._is_tracking){if(_w=="body"){_v.parent._showfull(_v);}else if(_w=="left"){if(this.hscrollbar){this.hscrollbar.set_pos(0);}}else{var _y=this._getScollMaxLeft();if(this.hscrollbar){this.hscrollbar.set_pos(_y);}}}else if(!_n){_v.parent._showfull(_v);}else if(_n=="keydown"){_v._showfull(true);}}}if(this._isAreaSelect()){if(_n=="selectorsizing"){if(nexacro.OS=="Android"&&(nexacro.Browser=="Safari"||nexacro.Browser=="MobileSafari")){nexacro.OnceCallbackTimer.callonce(this,function(){this._refreshBody(false,!_l);},10);}else{this._refreshBody(false,!_l);}}else{this._refreshBody(false,!_l);if(_s){this._refreshHead(false);}if(_t){this._refreshSumm(false);}}}else{if(_l){this._clearRows(_m);this._refreshBody(false,!_l);}else{this._refreshBodyCell(_g,_o-this._getBodyBegRowPos(_o));this._refreshBodyCell(_a,_p-this._getBodyBegRowPos(_p));}if(_s){this._refreshHead(false);}if(_t){this._refreshSumm(false);}}}else{if(this._isAreaSelect()){if(_n=="selectorsizing"){if(nexacro.OS=="Android"&&(nexacro.Browser=="Safari"||nexacro.Browser=="MobileSafari")){nexacro.OnceCallbackTimer.callonce(this,function(){this._refreshBody(false,!_l);},10);}else{this._refreshBody(false,!_l);}}else{this._refreshBody(false,!_l);if(_s){this._refreshHead(false);}if(_t){this._refreshSumm(false);}}}else if(this._isMultiSelect()){if(_l){this._clearRows(_m);this._refreshBody(false,!_l);}else{this._refreshBodyCell(_a,_p-this._getBodyBegRowPos(_p));}if(_s){this._refreshHead(false);}if(_t){this._refreshSumm(false);}}}}this._adjustOverlayElements(false,this._is_use_fakemerge);this._updateSelector();this._setSelectBorder();};_pGrid._isUseBindExprStyle=function(_a){return this._is_use_bind_expr_style[_a];};_pGrid._isUseBindExprOuterStyle=function(_a){return this._is_use_bind_expr_outerstyle[_a];};_pGrid._getUseBindExprProp=function(_a){var _b;var _c;var _d=this._curFormat;if(_a=="summary"){_a="summ";}if(this._is_use_bind_expr_prop[_a]!==null){return this._is_use_bind_expr_prop[_a];}this._is_use_bind_expr_prop[_a]=undefined;if(_a=="body"){_b=this._bodyBand;_c=_d._bodycells;}else if(_a=="head"){_b=this._headBand;_c=_d._headcells;}else{_b=this._summBand;_c=_d._summcells;}if(_b){var _e;for(var _g=0,_h=_c.length;_g<_h;_g++ ){var _f=_c[_g];for(_e in _f){if(_f.hasOwnProperty(_e)){if(_a=="body"&&_e=="text"){continue;}if(_f[_e]&&_f[_e]._bindtype>0){if(this._is_use_bind_expr_prop[_a]==undefined){this._is_use_bind_expr_prop[_a]=[];}this._is_use_bind_expr_prop[_a].push(_g);break;}}}}}return this._is_use_bind_expr_prop[_a];};_pGrid._clearBindTypeFlag=function(){this._is_use_bind_expr_prop.body=null;this._is_use_bind_expr_prop.head=null;this._is_use_bind_expr_prop.summ=null;};_pGrid._toggleVal=function(_a,_b){if(!_b){return false;}var _c=_b._getValue(_a);_c=nexacro._toBoolean(_c);_c=(_c)?0:1;if(_b.text._bindtype==1){this._dsEventOccured=true;var _d=this._binddataset.setColumn(_a,_b.text._bindexpr,_c);if(nexacro._enableaccessibility){var _e=this._getAccessibilityCurrentCell();if(_e){_e._setAccessibilityStatChecked(nexacro._toBoolean(_c));}}this._dsEventOccured=false;return _d;}return false;};_pGrid._isEditorKeyAction=function(_a,_b,_c,_d,_e,_f){if(this._is_editor_keyaction==false){this._is_editor_keyaction=true;return true;}if(_a instanceof nexacro.InputElement||_a instanceof nexacro.TextAreaElement){if(_a.readonly==true){return false;}if(_c==nexacro.Event.KEY_LEFT){if(_e||_f||_d){return true;}var _g=_a.getElementCaretPos();if((_g&&_g!= -1)&&_g.begin!=0){return true;}}else if(_c==nexacro.Event.KEY_RIGHT){if(_e||_f||_d){return true;}var _g=_a.getElementCaretPos();var _h=_a.getElementValue();var _i=_h?_h.length:0;if((_g&&_g!= -1)&&_g.begin!=_i){return true;}}else if(_c==nexacro.Event.KEY_UP){if(_e||_f||_d){return true;}if(_a.usemultiline){var _j=_a.getCaretLine();if(_j!=1){return true;}}}else if(_c==nexacro.Event.KEY_DOWN){if(_e||_f||_d){return true;}if(_a.usemultiline){var _j=_a.getCaretLine();_b=_a.parent.linkedcontrol;var _k=parseInt(_b._getTextLine());if(_j!=_k){return true;}}}}return false;};_pGrid._getDlgCode=function(_a,_b,_c,_d){if(nexacro._enableaccessibility&&nexacro._accessibilitytype==5){this._accept_arrow=true;}return {want_tab:this._acceptstab,want_return:false,want_escape:false,want_chars:false,want_arrows:this._accept_arrow};};_pGrid._getFirstEditableCell=function(){var _a,_b;if(this._binddataset&&this._curFormat&&this._curFormat._bodycells){var _c=this._getGridRowCount();var _d=this._curFormat._bodycells.length;for(var _f=0;_f<_c;_f++ ){for(var _g=0;_g<_d;_g++ ){var _e=_f;if(this._hasTree){_e=this._treeIndexes[_e];}_b=this._curFormat._bodycells[_g]._getEdittype(_e);if(_b!==""&&_b!=="none"){return {row:_e,cell:_g};}}}}return {row:null,cell:null};};_pGrid._getLastEditableCell=function(){var _a,_b;if(this._binddataset){var _c=this._getGridRowCount();var _d=this._curFormat._bodycells.length;for(var _f=_c-1;_f>=0;_f-- ){for(var _g=_d-1;_g>=0;_g-- ){var _e=_f;if(this._hasTree){_e=this._treeIndexes[_e];}_b=this._curFormat._bodycells[_g]._getEdittype(_e);if(_b!==""&&_b!=="none"){return {row:_e,cell:_g};}}}}return {row:null,cell:null};};_pGrid._isChar=function(_a){switch(_a){case 9:case 25:case 27:case 144:case 145:return false;break;};if((_a>=16&&_a<=21)||(_a>=33&&_a<=40)||(_a>=91&&_a<=93)||(_a>=112&&_a<=123)){return false;}return true;};_pGrid._ReasonRefresh=null;_pGrid.on_apply_cell_pseudo=function(_a,_b){this._ReasonRefresh=_a;_a._ReasonRefresh=1;if(this.enableredraw){if(this._isSelectRowType()){if(_b=="mouseover"){this._refreshBodyRow(_a._getDisplayRowIdx(),_b,_a.enable);}else{_a._ReasonRefresh=null;_a._control_pseudo="";_a._contents_pseudo="";this._refreshBodyRow(_a._getDisplayRowIdx(),_b,_a.enable);}this._adjustOverlayElements(false,this._is_use_fakemerge);}}_a._ReasonRefresh=null;this._ReasonRefresh=null;};_pGrid._setDSEventHandlers=function(_a){_a._setEventHandler("onload",this.on_dsnotify_onload,this);_a._setEventHandler("onrowposchanged",this.on_dsnotify_onrowposchanged,this);_a._setEventHandler("oncolumnchanged",this.on_dsnotify_oncolumnchanged,this);_a._setEventHandler("onrowsetchanged",this.on_dsnotify_onrowsetchanged,this);};_pGrid._removeDSEventHandlers=function(_a){_a._removeEventHandler("onload",this.on_dsnotify_onload,this);_a._removeEventHandler("onrowposchanged",this.on_dsnotify_onrowposchanged,this);_a._removeEventHandler("oncolumnchanged",this.on_dsnotify_oncolumnchanged,this);_a._removeEventHandler("onrowsetchanged",this.on_dsnotify_onrowsetchanged,this);};_pGrid._getBodyClientSize=function(){var _a=this._curFormat;var _b=0,_c=0,_d;_d=this._getAvailableRect(this);_c=_d.width;_b=_d.height;if(_a){if(!this._bodyBand){_d=this._getAvailableRect(this);_c=_d.width-_a.leftWidth-_a.rightWidth;_b=_d.height-this._getHeadHeight()-this._getSummHeight();}else{_d=this._getAvailableRect(this._bodyBand);_c=_d.width-_a.leftWidth-_a.rightWidth;_b=_d.height;}}return [_c,_b];};_pGrid._applyAutofittype=function(_a,_b){if(this.enableredraw==false){this._enable_redraw_history["autofit"]=[_a,_b];return;}var _c=this._curFormat;var _d=this.getElement();if(!_c||!_d){return;}var _e,_f;var _g=this._getBodyClientSize();_f=_g[0];_e=_g[1];if(!this._is_created&&(_f<=0||_e<=0)){_f=_d.client_width;_e=_d.client_height;}var _h=false;switch(this.autofittype){case "col":this._colautofit=true;this._rowautofit=false;break;case "row":this._colautofit=false;this._rowautofit=true;break;case "both":this._colautofit=true;this._rowautofit=true;break;case "allrow":this._colautofit=false;break;case "allboth":this._colautofit=true;break;case "col,allrow":this._colautofit=true;break;case "allpivot":this._colautofit=true;break;case "row,allpivot":this._colautofit=false;break;case "none":this._colautofit=false;this._rowautofit=false;_h=_b;break;}if(this._colautofit&&_f>=0){_h=_c._adjustColWidth(_f,this._autofitcol_rate);}if(_h){if(_a){this._autofiting=true;if(this._bodyBand){var _i=this._bodyBand._scrollHeight;var _j=this._bodyBand._scrollWidth;if(this._colautofit){if(_f!=_j){this._setScrollMaxSize(_f,_i);this._bodyBand._scrollWidth=_f;}this._bodyBand._matrix._adjustColsDisplay(true);}else{this._setScrollMaxSize(_c.bodyWidth,_i);this._bodyBand._scrollWidth=_c.bodyWidth;this._bodyBand._matrix._adjustColsDisplay(true);}}if(this._headBand){this._headBand._matrix._adjustColsDisplay(true);}if(this._summBand){this._summBand._matrix._adjustColsDisplay(true);}this._autofiting=false;this._onResetScrollBar();}this._applyResizer();return true;}return false;};_pGrid._resetColSizeList=function(_a){var _b=false;if(this.autofittype!="col"&&this.autofittype!="both"&&this.autofittype!="allboth"&&this.autofittype!="col,allrow"){var _c=this._curFormat;if(!_c){return false;}var _d=_c._cols,_e=_d.length;if(this.autosizingtype=="col"||this.autosizingtype=="both"){for(var _g=0;_g<_e;_g++ ){var _f=this._getMaxColDataSizeBand(_g,_a);if(_f>=0&&this._setColSize( -9,_g,_f,false,false,true,(_g!=_e-1))){_b=true;}}if(this.autofittype=="col"||this.autofittype=="both"||this.autofittype=="allboth"||this.autofittype=="col,allrow"){this._applyAutofittype(true);}}else{for(var _g=0;_g<_e;_g++ ){var _f=_d[_g].size;if(_f>=0&&this._setColSize( -9,_g,_f,false,false,true,(_g!=_e-1))){_b=true;}}}}return _b;};_pGrid.redraw=function(){if(!this.enableredraw){this._enable_redraw_history["recreate"]=true;return;}this._recreate();if(this._select_ctrl){this._select_ctrl._updateAll();}};_pGrid._getRowSizeInfo=function(_a){var _b=this._curFormat;var _c,_d=[];if(_a== -1){_c=this._rowHeadList[0];_d=this._rowHeadListSub;return {row_size:_c,subrow_sizes:_d};}else if(_a== -2){_c=this._rowSummList[0];_d=this._rowSummListSub;return {row_size:_c,subrow_sizes:_d};}else if(_a>=0){var _e=_b._bodyrows;var _f=_e.length;var _g=this._rowSizeListSub=[];var _h=this._rowSizeList=[];_c=_g[_a];for(var _i=0;_i<_f;_i++ ){_d[_i]=_h[_a*_f+_i];}return {row_size:_c,subrow_sizes:_d};}return null;};_pGrid._resetRowSizeList=function(_a){if(!this._curFormat){return;}if(!this._preloadImage()){return;}var _b=this._curFormat;if(_b._headrows){var _c=this._isUserChangeHeadRowSize;if(!_c){this._rowHeadListSub=[];this._rowHeadList=[];}var _d=0,_e=_b._headrows,_f=_e.length,_g=this._rowHeadListSub,_h=this._rowHeadList,_i;if(!(_c&&_h[0]>=0)){if(this._binddataset&&this._headAutoSize&&(this._autoSizeRowProc||this.autosizingtype=="row"||this.autosizingtype=="both")){for(var _p=0;_p<_f;_p++ ){_i=this._getMaxSubRowSize( -1,_p);_g[_p]=_i;_d+=_i;}}else{for(var _p=0;_p<_f;_p++ ){_i=_e[_p].size;_g[_p]=_i;_d+=_i;}}this._rowHeadList[0]=_d;}}if(_b._summrows){var _c=this._isUserChangeSummRowSize;if(!_c){this._rowSummListSub=[];this._rowSummList=[];}var _d=0,_e=_b._summrows,_f=_e.length,_j=this._rowSummListSub,_k=this._rowSummList,_i;if(!(_c&&_k[0]>=0)){if(this._binddataset&&this._summAutoSize&&(this._autoSizeRowProc||this.autosizingtype=="row"||this.autosizingtype=="both")){for(var _p=0;_p<_f;_p++ ){_i=this._getMaxSubRowSize( -2,_p);_j[_p]=_i;_d+=_i;}}else{for(var _p=0;_p<_f;_p++ ){_i=_e[_p].size;_j[_p]=_i;_d+=_i;}}this._rowSummList[0]=_d;}}if(_b._bodyrows){var _c=this._isUserChangeBodyRowSize;if(!_c&&!_a){this._rowSizeList=[];this._rowSizeListSub=[];}var _l=this._rowcount,_e=_b._bodyrows,_f=_e.length,_m=this._rowSizeListSub,_n=this._rowSizeList,_d,_i,_o;if(this._binddataset&&this._bodyAutoSize&&(this._autoSizeRowProc||this.autosizingtype=="row"||this.autosizingtype=="both")){for(var _q=0;_q<_l;_q++ ){if(_a>=0&&_q<_a){continue;}_d=0;for(var _p=0;_p<_f;_p++ ){_o=_q*_f+_p;if(_c&&_m[_o]>=0&&this._realrowsized_body[_o]){_d+=_m[_o];continue;}_i=this._getMaxSubRowSize(_q,_p);_m[_o]=_i;_d+=_i;}_n[_q]=_d;}this._is_variable_bodyrowsize=true;}else{for(var _q=0;_q<_l;_q++ ){_d=0;for(var _p=0;_p<_f;_p++ ){_o=_q*_f+_p;if(_c&&_m[_o]>=0&&this._realrowsized_body[_o]){_d+=_m[_o];continue;}_i=_e[_p].size;_m[_o]=_i;_d+=_i;}_n[_q]=_d;}if(!_c){this._is_variable_bodyrowsize=false;}}}this._updateRowSizeExtend();};_pGrid._updateRowSizeExtendEx=function(_a,_b,_c,_d,_e){if(this.extendsizetype!="row"&&this.extendsizetype!="both"){if(!_a){return;}var _f=[];var _g=_a.length;for(var _k=0;_k<_g;_k++ ){_f[_k]=0;}var _h=_c.length;if(_d!=undefined){for(var _l=0;_l<_g;_l++ ){_f[_l]=_c[_d*_g+_l];}}else{for(var _l=0;_l<_h;){for(var _k=0;_k<_g;_k++ ){_f[_k]=Math.max(_f[_k],_c[_l]);_l++ ;}}}for(var _l=0;_l<_h;){for(var _k=0;_k<_g;_k++ ){_c[_l]=_f[_k];_l++ ;}}var _i=0;for(var _k=0;_k<_g;_k++ ){_i+=_f[_k];}var _j=_b.length;for(var _l=0;_l<_j;_l++ ){_b[_l]=_i;}}if(_e){this._resetFixSize();}};_pGrid._updateRowSizeExtend=function(){if(!this._binddataset||!this._curFormat){return;}if(this._headAutoSize){this._updateRowSizeExtendEx(this._curFormat._headrows,this._rowHeadList,this._rowHeadListSub);}if(this._summAutoSize){this._updateRowSizeExtendEx(this._curFormat._summrows,this._rowSummList,this._rowSummListSub);}if(this._bodyAutoSize){this._updateRowSizeExtendEx(this._curFormat._bodyrows,this._rowSizeList,this._rowSizeListSub,undefined,true);}};_pGrid._isChangeBodyColSizeList=function(_a,_b,_c){if(this.autosizingtype!="both"&&this.autosizingtype!="col"){return false;}var _d=this._curFormat;if(!this._binddataset||!_d){return false;}var _e=_d._bodycells;var _f,_g,_h,_i=0;var _j=false;var _k;for(var _l=0,_m=_e.length;_l<_m;_l++ ){if(_e[_l].text._bindexpr==_a){_k=_e[_l]._getAttrValue(_e[_l].displaytype,_c);if(_k=="checkbox"){continue;}_g=_e[_l]._col;_f=_d._cols[_g];_h=this._getMaxColDataSizeBand(_g);if(_f.size!=_h){_d._setColSize(_g,_h);_b[_i++ ]=_g;_j=true;}}}return _j;};_pGrid._isChangeBodyRowSizeList=function(_a){if(this._rowSizeEx==false&&this.autosizingtype!="both"&&this.autosizingtype!="row"){return false;}if(!this._binddataset||!this._curFormat){return false;}var _b=_a;var _c=this._curFormat._bodyrows;var _d;if(_c&&this._bodyAutoSize==true){_d=_c.length;for(var _h=0;_h<_d;_h++ ){var _e=(_b*_c.length)+_h;var _f=this._rowSizeListSub[_e];var _g=this._getMaxSubRowSize(_b,_h);if(_f!=_g){return true;}}}_c=this._curFormat._headrows;if(_c&&this._headAutoSize==true){_d=_c.length;for(var _h=0;_h<_d;_h++ ){var _f=this._rowHeadListSub[_h];var _g=this._getMaxSubRowSize( -1,_h);if(_f!=_g){return true;}}}_c=this._curFormat._summrows;if(_c&&this._summAutoSize==true){_d=_c.length;for(var _h=0;_h<_d;_h++ ){var _f=this._rowSummListSub[_h];var _g=this._getMaxSubRowSize( -2,_h);if(_f!=_g){return true;}}}return false;};_pGrid._updateBodyRowSizeList=function(_a){var _b=false;if(this._rowSizeEx==false||this._bodyAutoSize==false){return false;}if(!this._binddataset||!this._curFormat||!this._curFormat._bodyrows||this._curFormat._bodyrows.length==0){return false;}var _c=_a;var _d=this._curFormat._bodyrows;var _e=_d.length;for(var _i=0;_i<_e;_i++ ){var _f=(_c*_d.length)+_i;var _g=this._rowSizeListSub[_f];var _h=this._getMaxSubRowSize(_c,_i);if(_g!=_h){this._rowSizeListSub[_f]=_h;this._rowSizeList[_c]+=(_h-_g);_b=true;}}if(_b==true){this._updateRowSizeExtend();}return _b;};_pGrid._isChangeBandSrollSizeList=function(_a){if(this._band_scroll_sizes){var _b=this._band_scroll_sizes.length;for(var _c=0;_c<_b;_c++ ){if(this._band_scroll_sizes[_c]!=_a[_c]){return true;}}}return false;};_pGrid._getGridRowCount=function(_a){if(_a&&this._bodyrowheight===0){return 0;}var _b=0;if(this._hasTree){if(this._treeIndexes){_b=this._treeIndexes.length;}}else{_b=this._rowcount;}return _b;};_pGrid._resetDisplayInfo=function(_a){this.pagerowcount=0;this._pagerowcnt=0;this._disprowcnt=0;var _b=this._curFormat;if(!_b){return;}var _c=this._getBodyClientSize();var _d=_c[1];var _e=this._getGridRowCount();var _b=this._curFormat;this._bodyrowheight=_b._body_height;if(this._bodyrowheight>0){if(this._is_variable_bodyrowsize==false){var _b=this._curFormat;var _f=this._bodyrowheight;this.pagerowcount=Math.floor(_d/_f);this._pagerowcnt=Math.ceil(_d/_f);}else{var _g=(this.vscrollbar)?this.vscrollbar._pos:0;var _h=this._control_element.vscroll_limit;if(_g<0){_g=0;}else if(_g>_h){_g=_h;}var _i,_j,_k=this._getScreenTopRowPos(_g);var _l=0;_i=_j=_k[0];_l=_k[1];var _m=0;var _n;for(;_j<_e;_j++ ){_n=this._getDataRow(_j);_m+=this._rowSizeList[_n];if(_l>0){_m-=(this._rowSizeList[_n]-_l);_l=0;}this._pagerowcnt++ ;if(_m>=_d){break;}this.pagerowcount++ ;}if(_j==_e&&_m<_d){var _o=(this._fixed_endrow>=0)?this._fixed_endrow: -1;for(var _j=_i-1;_j>_o;_j-- ){_n=this._getDataRow(_j);_m+=this._rowSizeList[_n];this._pagerowcnt++ ;if(_m>=_d){break;}this.pagerowcount++ ;}}while(_m<_d){_m+=this._bodyrowheight;this._pagerowcnt++ ;if(_m>=_d){break;}this.pagerowcount++ ;}if(this._pagerowcnt==0&&_k[1]>=_d){this._pagerowcnt=this.pagerowcount=1;}}this._disprowcnt=this._pagerowcnt;}};_pGrid._getMaxColSize=function(_a,_b,_c,_d,_e){var _f=0;var _g=_a.length;var _h,_i,_j;var _k=this._curFormat;var _l=0;var _m,_n;for(var _ah=0;_ah<_g;_ah++ ){_m=_a[_ah]._col;_n=_a[_ah]._colspan;if(_m<=_b&&_m+_n>_b){_j=_a[_ah]._subcells;if(_j.length>0){var _o=this._getMaxColSize(_j,_b-_m,_c,_b,_e);_f=Math.max(_f,_o);}else{if(_n>1){if(_m+_n-1!=_b){continue;}}if(!_d){_d=0;}var _p=0;if(this._hasTree){_p=this._getDepthWidth(_c,_a[_ah]);}if(_p<0){return  -1;}var _q=_a[_ah]._getAttrValue(_a[_ah].autosizecol,_c);var _r=_k._cols[_b+_d].orgsize;var _s;if(_q=="none"){_s=_r;}else{var _t=_a[_ah]._getAttrValue(_a[_ah].displaytype,_c);if(_t=="checkbox"){var _u=_a[_ah]._query_pseudo_control(this,_c,"checkboxsize","buttonsize","normal");if(_u==null){_u=14;}else{_u=parseInt(_u._value,10);}_s=_u+6;}else{var _v=_a[_ah]._getDisplayText(_c);if(_e&&_n==1&&!this._hasTree){var _w=/\r\n|\n|\r/;var _x=_v.split(_w);var _y=_x.length;var _z,_aa=0,_ab=0;for(var _ai=0;_ai<_y;_ai++ ){_z=this._getByteLength_UTF8(_x[_ai]);_ab=Math.max(_ab,_x[_ai].length);_aa=Math.max(_aa,_z);}if(_e.max>_aa&&_e.len>_ab){continue;}_e.len=_ab;_e.max=_aa;}_s=this._getCellRowTextSize(_a[_ah],_c,_v);_s=_s[0];}var _ac=_a[_ah]._curpadding,_ad=_a[_ah]._curborder;if(_ac==="bindexpr"||_ac===undefined){_ac=_a[_ah]._query_pseudo_padding(_c,"normal");}if(_ad==="bindexpr"||_ad===undefined){_ad=_a[_ah]._query_pseudo_border(_c,false,"normal",0,null,null);}_s+=(_ac)?(_ac.left+_ac.right):0;_s+=(_ad&&_ad.bottom_width)?parseInt(_ad.bottom_width):0;_s+=_p;if(_q=="limitmin"){if(_s<_r){_s=_r;}}else if(_q=="limitmax"){if(_s>_r){_s=_r;}}if(_n>1){var _ae=0;var _af=_m,_ag=_m+_n-1;for(var _ai=_af;_ai<_ag;_ai++ ){_ae+=_k._cols[_ai+_d].size;}_s-=_ae;}}_f=Math.max(_f,_s);}}}return _f+1;};_pGrid._getCellRowTextSize=function(_a,_b,_c,_d){var _e=_a._curfont,_f=_a._curselfont;var _g=_a._query_pseudo_letterspace(_b,false,"normal");var _h=_a._getWordwrap(_b);var _i=[],_j,_k;if(_e===undefined){_e=_a._query_pseudo_font(_b,false,"normal");_j=nexacro._getTextSize2(_g,"A",_e);if(_a._curfont!=="bindexpr"){_a._cur1font_size=_j;}}else{if(_e==="bindexpr"){_e=_a._query_pseudo_font(_b,false,"normal");_j=nexacro._getTextSize2(_g,"A",_e);}else if(!(_j=_a._cur1font_size)){_j=nexacro._getTextSize2(_g,"A",_e);_a._cur1font_size=_j;}}if(_f===undefined){_f=_a._query_pseudo_font(_b,true,"normal");_k=nexacro._getTextSize2(_g,"A",_f);if(_a._curselfont!=="bindexpr"){_a._cur1selectfont_size=_k;}}else{if(_f==="bindexpr"){_f=_a._query_pseudo_font(_b,true,"normal");_k=nexacro._getTextSize2(_g,"A",_f);}else if(!(_k=_a._cur1selectfont_size)){_k=nexacro._getTextSize2(_g,"A",_f);_a._cur1selectfont_size=_k;}}var _l,_m;if(!_c){if(_j[0]<=_k[0]){_i=[].concat(_k);}else{_i=[].concat(_j);}_i[0]=1;return _i;}else{if(_j[0]<=_k[0]){_e=_f;_m=_k[0];_l=_k[1];}else{_m=_j[0];_l=_j[1];}}var _n=_a._getAttrValue(_a.displaytype,_b);if(_n=="image"){var _o="row"+_b;var _p=_a._imgWidthTemp[_o];var _q=_a._imgHeightTemp[_o];if(_p>0){_i[0]=_p;_i[1]=_q;}else{url=nexacro._getURIValue(_c);url=nexacro._getImageLocation(url,this._getRefFormBaseUrl());var _r=nexacro._getImageSize(url,this._on_sizeloading,this,undefined,_c);if(_r){_i[0]=_r.width;_i[1]=_r.height;}else{_i[0]=1;_i[1]=_l;}}return _i;}else{var _s=true;if(this.autosizingtype=="col"||this.autosizingtype=="both"){_s=false;}var _n=_a._getAttrValue(_a.displaytype,_b);var _t=0,_u=0;var _v,_w,_x;var _y=_a._getEdittype(_b);if(_n=="combo"){var _z=_a._getAttrValue(_a.combodisplay,_b);if(_z=="display"){var _aa=this.controlcombo;_v=_a._query_pseudo_control(_aa,_b,"controlborder","border","normal");_w=_a._query_pseudo_control(_aa,_b,"controlpadding","padding","normal");if(_v){_t+=(_v._left_width+_v._right_width);_u+=(_v._top_width+_v._bottom_width);}if(_w){_t+=(_w.left+_w.right);_u+=(_w.top+_w.bottom);}}}else if(_n=="date"){var _z=_a._getAttrValue(_a.calendardisplay,_b);if(_z=="display"){var _aa=this.controlcalendar;_v=_a._query_pseudo_control(_aa,_b,"controlborder","border","normal");_w=_a._query_pseudo_control(_aa,_b,"controlpadding","padding","normal");if(_v){_t+=(_v._left_width+_v._right_width);_u+=(_v._top_width+_v._bottom_width);}if(_w){_t+=(_w.left+_w.right);_u+=(_w.top+_w.bottom);}}}else{var _z=_a._getAttrValue(_a.editdisplay,_b);if(_z=="display"){var _aa=this.controledit;if(_y=="textarea"){_aa=this._sizetextarea;}_v=_a._query_pseudo_control(_aa,_b,"controlborder","border","normal");_w=_a._query_pseudo_control(_aa,_b,"controlpadding","padding","normal");if(_v){_t+=(_v._left_width+_v._right_width);_u+=(_v._top_width+_v._bottom_width);}if(_w){_t+=(_w.left+_w.right);_u+=(_w.top+_w.bottom);}}}var _ab=_a._getAttrValue(_a.expandshow,_b);if(_ab=="show"){_t+=_a._getAttrValue(_a.expandsize,_b);}if(_s&&(this._autoSizeRowProc||this._rowSizeEx)&&_h!="none"&&_h!=false&&_h!="false"){var _ac=this._curFormat._cols;var _ad=(_d?_d._col:0)+_a._col+_a._colspan-1;var _ae=_ac[_ad].right-_ac[_a._col].left;var _af=_a._query_pseudo_padding(_b,"normal");var _ag=_a._query_pseudo_border(_b,false,"normal",0,null,null);var _ah=_a._query_pseudo_border(_b,true,"normal",0,null,null);_ag=(_ag.right_width<_ah.right_width)?_ah:_ag;_ae-=(_af.left+_af.right);_ae-=_ag.right_width?parseInt(_ag.right_width):0;_i=nexacro._getTextSize2(_g,_c,_e,true,_ae,_h);if(_y=="textarea"&&this._sizetextarea._input_element){var _k=[0,0];this._sizetextarea.move(0, -10,_ae,1);this._sizetextarea.style.set_font(_e);this._sizetextarea.set_wordwrap(_h);this._sizetextarea.set_value(_c);_k[0]=this._sizetextarea._input_element.getScrollWidth();_k[1]=this._sizetextarea._input_element.getScrollHeight();if(this._sizetextarea._client_width<_k[0]&&_i[0]<_k[0]){_i[0]=_k[0];}if(this._sizetextarea._client_height<_k[1]&&_i[1]<_k[1]){_i[1]=_k[1];}}}else{_i=nexacro._getTextSize2(_g,_c,_e,true);}_i[0]+=_t;_i[1]+=_u;if(_i[1]<_l){_i[1]=_l;}return _i;}};_pGrid._getMaxSubRowSize=function(_a,_b,_c,_d,_e){var _f=this._curFormat;var _g;if(_a== -2){if(!_c){_c=this._curFormat._summcells;};_g=_f._summrows;}else if(_a== -1){if(!_c){_c=this._curFormat._headcells;}_g=_f._headrows;}else{if(!_c){_c=this._curFormat._bodycells;}_g=_f._bodyrows;}var _h=this._curFormat._cols;if(!this._autoSizeRowProc&&this.autosizingtype!="row"&&this.autosizingtype!="both"){return _g[_b].size;}var _i=0;var _j=_c.length;var _k,_l,_m;for(var _ab=0;_ab<_j;_ab++ ){_k=_c[_ab]._row;_l=_c[_ab]._rowspan;_m=_c[_ab]._subcells;if(_k==_b||(_m.length>0&&_k<=_b&&(_k+_l)>_b)){var _n=0;var _o= -1;var _p=0;if(_m.length>0){_n=this._getMaxSubRowSize(_a,_b-_k,_m,_k,_c[_ab]);_i=Math.max(_i,_n);}else{if(!_d){_d=0;}var _q=_c[_ab]._getAttrValue(_c[_ab].autosizerow,_a);var _r=_g[_b+_d].size;var _s;if(_q=="none"){_s=_r;}else{var _t=_c[_ab]._getAttrValue(_c[_ab].displaytype,_a);if(_t=="checkbox"){var _u=_c[_ab]._query_pseudo_control(this,_a,"checkboxsize","buttonsize","normal");if(_u==null){_u=14;}else{_u=parseInt(_u._value,10);}_s=_u+6;}else{var _v=_c[_ab]._getDisplayText(_a);var _w=this._getCellRowTextSize(_c[_ab],_a,_v,_e);_s=_w[1];var _x=_w[0];var _y=1;var _z=_c[_ab]._curpadding,_aa=_c[_ab]._curborder;if(_z==="bindexpr"||_z===undefined){_z=_c[_ab]._query_pseudo_padding(_a,"normal");}if(_aa==="bindexpr"||_aa===undefined){_aa=_c[_ab]._query_pseudo_border(_a,false,"normal",0,null,null);}_s+=_z.top+_z.bottom;_s+=_aa.bottom_width?parseInt(_aa.bottom_width):0;if(_q=="limitmin"){if(_s<_r){_s=_r;}}else if(_q=="limitmax"){if(_s>_r){_s=_r;}}}}_i=Math.max(_i,_s);}}}return _i;};_pGrid._getSubRowSizeList=function(_a){var _b=this._curFormat;var _c=_b._bodyrows;var _d=_c.length;var _e=[],_f=0;for(var _g=0;_g<_d;_g++ ){_e[_f++ ]=this._rowSizeListSub[_a*_d+_g];}return _e;};_pGrid._makeCssRefInfoCtrl=function(_a){_a._refcssobj=this;_a._refcssid="#"+_a.id;return this;};_pGrid._addFuncQueue=function(_a,_b,_c,_d){var _e={work:_a,pthis:_b,func:_c,args:_d};this._func_queue.push(_e);};_pGrid._exeFuncQueue=function(_a){for(var _b=0;_b<this._func_queue.length;_b++ ){if(this._func_queue[_b].work==_a){this._func_queue[_b].func.call(this._func_queue[_b].pthis,this._func_queue[_b].args);this._func_queue.splice(_b,1);_b-- ;}}};_pGrid._addRefreshContents=function(_a,_b,_c){if(_b){var _d=this._recreate_contents_proc;if(_c){for(var _f=0,_g=_d.length;_f<_g;_f++ ){if(_d[_f].workname==_a){return false;}}}var _e={workname:_a,band:_b};_d.push(_e);return true;}};_pGrid._execRefreshContents=function(_a,_b,_c){if(_b&&this._recreate_contents_proc.length>0){this._clearAllStyleCache();}for(var _d=0;_d<this._recreate_contents_proc.length;_d++ ){if(this._recreate_contents_proc[_d].workname==_a){this._recreate_contents_proc[_d].band._recreate_contents(true,false,false,false,_c);this._recreate_contents_proc.splice(_d,1);_d-- ;}}};_pGrid._applyColSizing=function(_a,_b){if(this.enableredraw==false){return;}var _c=this.getElement();var _d=this._curFormat;if(_c&&_d&&_b>=0){var _e=this._headBand;var _f=_e._get_rows();var _g=_f[0]._cells[_b];var _h=_g._refobj;var _i=_h._col+(_h._colspan-1);var _j=_d._cols[_i]._area;if(_h._area!="right"){var _k=_d._cols[_i].left;var _l=_d._cols[_i].right+_a;if(_k>_l){var _m=_d._cols[_i+1];if((_m&&_m._area=="right")||_i==_d._cols.length-1){_a=_k-_d._cols[_i].right+7;}else{_a=_k-_d._cols[_i].right+1;}}}else{var _n=_d._cols[_i].right;var _o=_d._cols[_i].left+_a;if(_n<_o){_a=_n-_d._cols[_i].left-1;}_a=0-_a;}var _p=_d._cols[_i].size;var _q=_d._adjustColSizing(_i,_a);var _r=_d._cols[_i].size;if(_q){this._updateColSize(_i);this._isUserChangeColSize=true;this._addFuncQueue("colsizing",this,this.on_fire_oncolresized,[_i, -9,_r,_p,_i]);}}};_pGrid._applyRowSizing=function(_a,_b){if(this.enableredraw==false){return;}var _c=this.getElement();var _d,_e,_f;var _g=this._curFormat;if(_g&&_c&&_b>=0){var _h=this._resizerRowRange[_b];var _i=_h.area,_j;var _k=this._getDataRow(_h.row);var _l=_h.cellinfo._row+_h.cellinfo._rowspan-1;var _m=false;if(_i=="head"){_e=this._rowHeadListSub[_l];_j=_e+_a;_j=Math.max(_j,5);_j=Math.min(_j,this._client_height-5);_f=_j;var _n=this.enableredraw;this.enableredraw=false;this.setRealRowSize( -1,_l,_j,true);this.enableredraw=_n;_d=_l;if(_a){this._resizeBand();this._addRefreshContents("rowsizing",this._headBand);_m=true;}}else if(_i=="body"){_e=this._rowSizeListSub[_k*_g._bodyrows.length+_l];_j=_e+_a;var _o,_p;if(_k==this._rowcount-1){_p=7;}else{_p=1;}_o=_j-_p;if(_o<0){_j=_p;_a-=_o;}_f=_j;if(this._getFixRowCnt()>_k){this._fixed_height+=_a;this._fixedrow_height+=_a;}var _n=this.enableredraw;this.enableredraw=false;this.setRealRowSize(_k,_l,_j,true);this.enableredraw=_n;_d=_l+((_g._headrows)?_g._headrows.length:0);if(_a){if(this.extendsizetype!="row"&&this.extendsizetype!="both"){this._addRefreshContents("rowsizing",this._bodyBand);}else{this._updateRowSize(_k,_l);}_m=true;}}else if(_i=="summ"){_e=this._rowSummListSub[_l];if(this.summarytype=="top"||this.summarytype=="lefttop"){_j=_e+_a;}else{_j=_e-_a;}_j=Math.max(_j,5);_j=Math.min(_j,this._client_height-5);_f=_j;var _n=this.enableredraw;this.enableredraw=false;this.setRealRowSize( -2,_l,_j,true);this.enableredraw=_n;_d=_l+((_g._headrows)?_g._headrows.length:0)+((_g._bodyrows)?_g._bodyrows.length:0);if(_a){this._resizeBand();this._addRefreshContents("rowsizing",this._summBand);_m=true;}}if(_m){this._addFuncQueue("rowsizing",this,this.on_fire_onrowresized,[_d,_k,_f,_e,_l]);}}};_pGrid._no_update_bandrect=false;_pGrid._updateColSize=function(_a){var _b=false;if(this.autosizingtype=="row"||this.autosizingtype=="both"){this._resetRowSizeList();var _c=this._no_update_bandrect;this._no_update_bandrect=true;this._resizeBand(true);this._no_update_bandrect=_c;_b=true;_a=null;}this._autofitcol_rate=[];this._applyAutofittype(true);if(this._getScrollLeft()!=0){_a=0;}if(this._headBand){this._headBand._matrix._adjustColsDisplay(true,false,_a);this._headBand._matrix._adjustRowsDisplay(_b);}if(this._summBand){this._summBand._matrix._adjustColsDisplay(true,false,_a);this._summBand._matrix._adjustRowsDisplay(_b);}if(this._bodyBand){var _d=this._getScrollTop();if(_d<0){_d=0;}this._last_scroll_top=_d;this._toprowpos=this._getScreenTopRowPos(_d);this._bottomrowpos=this._getScreenBottomRowPos(_d);this._bodyBand._matrix._adjustColsDisplay(true,false,_a);this._bodyBand._matrix._adjustRowsDisplay(_b);this._bodyBand._update_rows=this._bodyBand._matrix._adjustScrollRows(_d,true);this._bodyBand._on_refresh_rows(false,true);this._adjustOverlayElements(false,this._is_use_fakemerge);}};_pGrid._updateRowSize=function(_a,_b,_c){if(this.extendsizetype!="row"&&this.extendsizetype!="both"){return;}var _d=this._curFormat;if(_a== -1){if(!this._headBand){return false;}var _e=this._headBand._get_rows()[0];var _f=this._rowHeadList[0];var _g=this._rowHeadListSub[_b];_e.set_height(_f);_e._init(_d);var _h=_e._cells;for(var _n=0,_o=_h.length;_n<_o;_n++ ){if(_h[_n]._refobj._row<=_b&&_b<_h[_n]._refobj._row+_h[_n]._refobj._rowspan){if(_h[_n]._refobj._row<_b){for(var _p=_h[_n]._refobj._row;_p<_b;_p++ ){_g+=this._rowHeadListSub[_p];}}if(_h[_n]._refobj._rowspan>1){for(var _p=_b+1;_p<_h[_n]._refobj._row+_h[_n]._refobj._rowspan;_p++ ){_g+=this._rowHeadListSub[_p];}}_h[_n].set_height(_g);}}this._resizeBand();if(this._bodyBand&&!_c){this._bodyBand._matrix._adjustRowsDisplay();this._bodyBand._matrix._adjustColsDisplay();this._bodyBand._on_refresh_rows(false,false);}}else if(_a== -2){if(!this._summBand){return false;}var _e=this._summBand._get_rows()[0];var _f=this._rowSummList[0];var _g=this._rowSummListSub[_b];var _i=_d._summrows.length;_e.set_height(_f);_e._init(_d);var _h=_e._cells;for(var _n=0,_o=_h.length;_n<_o;_n++ ){if(_h[_n]._refobj._row<=_b&&_b<_h[_n]._refobj._row+_h[_n]._refobj._rowspan){if(_h[_n]._refobj._row<_b){for(var _p=_h[_n]._refobj._row;_p<_b;_p++ ){_g+=this._rowSummListSub[_p];}}if(_h[_n]._refobj._rowspan>1){for(var _p=_b+1;_p<_h[_n]._refobj._row+_h[_n]._refobj._rowspan;_p++ ){_g+=this._rowSummListSub[_p];}}_h[_n].set_height(_g);}}this._resizeBand();if(this._bodyBand&&!_c){this._bodyBand._matrix._adjustRowsDisplay();this._bodyBand._matrix._adjustColsDisplay();this._bodyBand._on_refresh_rows(false,false);}}else if(_a>=0){if(!this._bodyBand){return false;}var _j=this._bodyBand._get_rows();var _e;for(var _q=0,_r=_j.length;_q<_r;_q++ ){if(_j[_q]._rowidx==_a){_e=_j[_q];break;}}if(!_e){return false;}_e._init(_d);this._bodyBand._control_element._setFixArea(this._fixed_height);this._bodyBand._client_height=this._bodyBand._control_element.client_height;var _k=this._getDataRow(_a);var _f=this._rowSizeList[_k];var _l=this._curFormat._bodyrows.length;var _g=this._rowSizeListSub[_k*_l+_b];_e.set_height(_f);var _h=_e._cells;for(var _n=0,_o=_h.length;_n<_o;_n++ ){if(_h[_n]._refobj._row<=_b&&_b<_h[_n]._refobj._row+_h[_n]._refobj._rowspan){if(_h[_n]._refobj._row<_b){for(var _p=_h[_n]._refobj._row;_p<_b;_p++ ){_g+=this._rowSizeListSub[_k*_l+_p];}}if(_h[_n]._refobj._rowspan>1){for(var _p=_b+1;_p<_h[_n]._refobj._row+_h[_n]._refobj._rowspan;_p++ ){_g+=this._rowSizeListSub[_k*_l+_p];}}_h[_n].set_height(_g);}}var _m=this._getScrollTop();if(_m<0){_m=0;}if(!_c){this._last_scroll_top=_m;this._toprowpos=this._getScreenTopRowPos(_m);this._bottomrowpos=this._getScreenBottomRowPos(_m);this._bodyBand._matrix._adjustRowsDisplay(true);this._bodyBand._matrix._adjustColsDisplay();this._bodyBand._update_rows=this._bodyBand._matrix._adjustScrollRows(_m,true);this._bodyBand._on_refresh_rows(false,false);}}else{return false;}this._adjustOverlayElements(false,this._is_use_fakemerge);return true;};_pGrid._applyResizer=function(){if(!this._is_created){return;}var _a=this.currentstyle.border;var _b=(_a)?_a._left_width:0;var _c=(_a)?_a._top_width:0;if(this.cellsizingtype=="col"||this.cellsizingtype=="both"){var _d=this._headBand;if(_d==null){return;}var _e=_d._get_rows();if(_e.length==0){return;}var _f=_e[0]._cells.length;var _g,_h,_i,_j;var _k,_l,_m,_n;var _o=this._resizerColRange=[];var _p={};var _q=0;var _r=this._resizer_colctrl;var _s=this._curFormat;if(_r){_r.destroy();delete _r;}_r=new nexacro.GridControlResizer("resizertrack","absolute",0,0,0,0,null,null,this);_r._setDirection("horizon");_r._setTracksize(this._client_height);_r._setCallbackFn(this._applyColSizing);_r.createComponent();this._resizer_colctrl=_r;for(var _z=0;_z<_f;_z++ ){_k=_e[0]._cells[_z];if(!_k){break;}_m=_k._refobj;_n=_k._setPositionInGrid(null,true,true);_j=_n.height;_l=_k.on_find_CurrentStyle_border(_k._pseudo);if(_m._area=="left"||_m._area=="body"){_i=_l?_l._right_width:0;_g=_n.left+_k._adjust_width-_i-4;}else{_i=_l?_l._left_width:0;_g=_n.left-2;}_p={left:_g+_b,top:_n.top+_c,right:_g+_i+_b+6,bottom:_n.top+_j+_c,index:_k._cellidx,area:_m._area};switch(this.cellsizebandtype){case "body":if(_m._area=="body"){_o[_q++ ]=_p;}break;case "allband":case "nohead":_o[_q++ ]=_p;break;case "noleft":case "nohead,noleft":if(_m._area!="left"){_o[_q++ ]=_p;}break;}}}else{var _r=this._resizer_colctrl;if(_r){_r.destroy();this._resizer_colctrl=null;this._resizerColRange=[];}}if(this.cellsizingtype=="row"||this.cellsizingtype=="both"){var _t=this._headBand;var _u=this._bodyBand;var _v=this._summBand;var _e,_k,_l,_m,_n;if(!_t&&!_u&&!_v){return;}var _o=this._resizerRowRange=[];var _p={};var _q=0;var _w=this._resizer_rowctrl;if(_w){_w.destroy();delete _w;}_w=new nexacro.GridControlResizer("resizertrack","absolute",0,0,0,0,null,null,this);_w._setDirection("vertical");_w._setTracksize(this._client_width);_w._setCallbackFn(this._applyRowSizing);_w.createComponent();this._resizer_rowctrl=_w;while(_t){if(this.cellsizebandtype=="body"||this.cellsizebandtype=="nohead"||this.cellsizebandtype=="nohead,noleft"){break;}_e=_t._get_rows();if(!_e.length){break;}var _x=_e[0]._cells.length;for(var _aa=0;_aa<_x;_aa++ ){_k=_e[0]._cells[_aa];_m=_k._refobj;_n=_k._setPositionInGrid(null,true,true);_i=_k._adjust_width;_l=_k.on_find_CurrentStyle_border(_k._pseudo);_j=_l?_l._bottom_width:0;_h=_n.top+_k._adjust_height-_j-4;_p={left:_n.left+_b,top:_h+_c,right:_n.left+_i+_b,bottom:_h+_j+6+_c,index:_q,area:"head",row:_k._rowidx,cellinfo:_m};_o[_q++ ]=_p;}break;}if(_u){_e=_u._get_rows();var _y=_e.length;var _x=_y>0?_e[0]._cells.length:0;for(var _aa=0;_aa<_y;_aa++ ){for(var _z=0;_z<_x;_z++ ){_k=_e[_aa]._cells[_z];_m=_k._refobj;_n=_k._setPositionInGrid(null,true,true);_i=_k._adjust_width;_l=_k.on_find_CurrentStyle_border(_k._pseudo);_j=_l?_l._bottom_width:0;_h=_n.top+_k._adjust_height-_j-4;_p={left:_n.left+_b,top:_h+_c,right:_n.left+_i+_b,bottom:_h+_j+6+_c,index:_q,area:"body",row:_k._rowidx,cellinfo:_m};_o[_q++ ]=_p;}}}while(_v){if(this.cellsizebandtype=="body"){break;}_e=_v._get_rows();if(!_e.length){break;}var _x=_e[0]._cells.length;for(var _aa=0;_aa<_x;_aa++ ){_k=_e[0]._cells[_aa];_m=_k._refobj;_n=_k._setPositionInGrid(null,true,true);_i=_k._adjust_width;_l=_k.on_find_CurrentStyle_border(_k._pseudo);if(this.summarytype=="top"||this.summarytype=="lefttop"){_j=_l?_l._bottom_width:0;_h=_n.top+_k._adjust_height-_j-4;}else{_j=_l?_l._top_width:0;_h=_n.top-2;}_p={left:_n.left+_b,top:_h+_c,right:_n.left+_i+_b,bottom:_h+_j+6+_c,index:_q,area:"summ",row:_k._rowidx,cellinfo:_m};_o[_q++ ]=_p;}break;}}else{var _w=this._resizer_rowctrl;if(_w){_w.destroy();this._resizer_rowctrl=null;this._resizerRowRange=[];}}};_pGrid._isAreaSelect=function(){if(this.selecttype=="area"||this.selecttype=="multiarea"){return true;}return false;};_pGrid._isSelectRowType=function(){if(this.selecttype=="row"||this.selecttype=="multirow"){return true;}return false;};_pGrid._isMultiSelect=function(){if(this.selecttype=="multirow"||this.selecttype=="multicell"||this.selecttype=="multitreecell"||this.selecttype=="multiarea"){return true;}return false;};_pGrid._setColSize=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._curFormat;var _i=this._getColFixCnt("left");var _j=this._getColFixCnt("body");var _k=this._getColFixCnt("right");var _l=_h._cols;var _m=_l.length;var _n="body";if(_a== -1){_n="left";}else if(_a== -2){_n="right";}if(_d==true||_a>= -2){if(_n=="body"&&_b>=0){_b+=_i;}else if(_n=="right"){_b+=_i;_b+=_j;}}var _o=false;if(_b== -1){var _p;for(var _q=0;_q<_m;_q++ ){if(_f){if(_l[_q]._area=="left"&&this._AutoSizeLcol==false){continue;}if(_l[_q]._area=="right"&&this._AutoSizeRcol==false){continue;}}_p=_h.setFormatColProperty(_q,"size",_c);if(_p){_o=_p;this._autofitcol_rate=[];if(_e){this._recreate_contents_all(true,true,false);}}}}else{while(true){if(_f){if(_l[_b]._area=="left"&&this._AutoSizeLcol==false){break;}if(_l[_b]._area=="right"&&this._AutoSizeRcol==false){break;}}if(_o=_h._setColSize(_b,_c,_g)){if(_e){this._updateColSize(_b);}}break;}}return _o;};_pGrid._getLastRowBand=function(){var _a=this._curFormat;var _b="body";if(this.summarytype=="top"||this.summarytype=="lefttop"){if(_a._headrows&&_a._headrows.length){_b="head";}if(_a._summrows&&_a._summrows.length){_b="summ";}if(_a._bodyrows&&_a._bodyrows.length){_b="body";}}else{if(_a._headrows&&_a._headrows.length){_b="head";}if(_a._bodyrows&&_a._bodyrows.length){_b="body";}if(_a._summrows&&_a._summrows.length){_b="summ";}}return _b;};_pGrid._getDispRowCnt=function(){if(this._bodyBand){return this._bodyBand._get_rows().length;}return 0;};_pGrid._getScreenBottomRowPos=function(_a){if(!this._is_use_suppress){return  -1;}var _b=this._bodyBand;var _c=(_a!=null)?_a:this._getScrollTop();var _d= -1;var _e=0;var _f=this._getGridRowCount();var _g=this._getAvailableRect(_b).height;for(var _h=0;_h<_f;_h++ ){if(_h<=this._fixed_endrow){continue;}_e+=this._getRowSize(_h);if(_e>=_c+_g){_d=_h;break;}}return _d;};_pGrid._getScreenTopRowPos=function(_a){var _b=this._bodyBand;var _c=(_a!=null)?_a:this._getScrollTop();var _d=0;var _e=0;var _f=this._getGridRowCount();var _g=0;var _h=false;for(var _i=0;_i<_f;_i++ ){if(_i<=this._fixed_endrow){continue;}if(_e>_c){_d=_i-1;_g=_e-_c;_h=true;break;}_e+=this._getRowSize(_i);}if(!_h){if(_b._client_height<_e){if(_e>_c){_d=_i-1;_g=_e-_c;}}else{_d=this._getFixRowCnt();_g=0;}}return [_d,_g];};_pGrid._isRemainAreaScroll=function(){var _a=this._bodyBand;var _b=_a._get_rows();if(_b.length==0){return false;}var _c=this._getScrollTop();var _d=0;var _e=_b.length;var _f=_b[_e-1];var _g=this._getGridRowCount()-1;if(_f._rowidx!=_g){return false;}var _h=this._getBodyClientSize()[1];var _i=0;for(var _j=_b.length-1;_j>=0;_j-- ){_i=_b[_j]._rowidx;_d+=this._getRowSize(_i);if(_d>=_h){break;}}_c-=_b[0]._adjust_top;for(var _j=0;_j<_e;_j++ ){if(_d==_c){return false;}else if(_d>_c){if(_i==_b[_j]._rowidx-1){return true;}else{return false;}}_d+=this._getRowSize(_b[_j]._rowidx);}return false;};_pGrid._getScollMaxLeft=function(){if(this._control_element){return this._control_element.hscroll_limit;}return 0;};_pGrid._getScrollLeft=function(){if(this._control_element){return this._control_element.scroll_left;}return 0;};_pGrid._getScrollTop=function(){if(this._control_element){return this._control_element.scroll_top;}return 0;};_pGrid._getDataRow=function(_a){if(_a>=this._rowcount){return  -9;}if(this._hasTree&&_a>=0){_a=this._treeIndexes[_a];if(_a==undefined){_a= -9;}}return _a;};_pGrid._getGridRow=function(_a){if(this._hasTree&&_a>=0){var _b=this._treeIndexes;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d]==_a){return _d;}}return  -9;}return _a;};_pGrid._refreshCol=function(_a,_b,_c){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}if(!this.getElement()){return;}var _d=this._headBand;if(_d&&(!_c||_c=="head")){var _e=_d._get_rows()[0];var _f=_e.length;for(var _i=0;_i<_f;_i++ ){var _g=_e[_i];if(_g&&_g._refobj._col==_a){if(_b){_g.currentstyle._empty();}_g._updateAll();}}}_d=this._summBand;if(_d&&(!_c||_c=="summ")){var _e=_d._get_rows()[0];var _f=_e.length;for(var _i=0;_i<_f;_i++ ){var _g=_e[_i];if(_g&&_g._refobj._col==_a){if(_b){_g.currentstyle._empty();}_g._updateAll();}}}_d=this._bodyBand;var _h=_d._get_rows();if(_d&&_h.length&&(!_c||_c=="body")){var _e=_h[0]._cells;var _f=_e.length;for(var _i=0;_i<_f;_i++ ){var _g=_e[_i];if(_g&&_g._refobj._col==_a){for(var _j=0;_j<this._getDispRowCnt();_j++ ){this._refreshCell("body",_g._cellidx,_j,_b);}}}}};_pGrid._refreshCell=function(_a,_b,_c,_d,_e){if(!this.enableredraw){this._enable_redraw_history["refreshall"]=true;return;}_a=_a.toLowerCase();if(_a=="head"){var _f=this._headBand;if(_f){var _g=_f._get_rows()[0]._cells[_b];if(_g){if(_d){_g.currentstyle._empty();}_g._updateAll(undefined,_e);}}}else if(_a=="summ"||_a=="summary"){var _f=this._summBand;if(_f){var _g=_f._get_rows()[0]._cells[_b];if(_g){if(_d){_g.currentstyle._empty();}_g._updateAll(undefined,_e);}}}else{if(_c>=0){this._refreshBodyCell(_b,_c,_d,_e);}else{for(var _h=0;_h<this._getDispRowCnt();_h++ ){this._refreshBodyCell(_b,_h,_d,_e);}}}};_pGrid._isEnable=function(){this._enable=nexacro.Component.prototype._isEnable.call(this);return this._enable;};_pGrid._getMaxColDataSizeBand=function(_a,_b){var _c= -1;var _d=this._curFormat;if(this._bodyAutoSize){var _e= -1;if(this._binddataset){var _f=this._getGridRowCount();if(_f>0&&_d._bodycells){if(!this._preloadTreeImage()){return  -1;}if(!this._preloadImage()){return  -1;}var _g=_d._bodycells;var _h=_g.length;var _i=[];var _j;var _k={max: -1,len: -1};var _l,_m,_n,_o;var _p,_q,_r,_s;for(var _u=0;_u<_h;_u++ ){_p=_g[_u];if(_p._col<=_a&&(_p._col+_p._colspan)>_a){if(_p!=_q){_i.push(_p);}_q=_p;if(_p._subcells.length){_r=_p._subcells;for(var _v=0,_w=_r.length;_v<_w;_v++ ){if(_p._col+_r[_v]._col<=_a&&(_p._col+_r[_v]._col+_r._colspan)>_a){_p=_r[_v];break;}}}if(_k){if(_p._curfont===undefined){_p._query_pseudo_font(0,false,"normal");}if(_p._curselfont===undefined){_p._query_pseudo_font(0,true,"normal");}if(_p._curborder===undefined){_p._query_pseudo_border(0,false,"normal",0,null,null);}if(_p._curpadding===undefined){_p._query_pseudo_padding(0,"normal");}if(_p._curfont==="bindexpr"||_p._curselfont==="bindexpr"||_p._curborder==="bindexpr"||_p._curpadding==="bindexpr"){_k=null;continue;}else if(_l!==undefined){if((_l!=_p._curfont)||(_m!=_p._curselfont)||(_n!=_p._curborder)||(_o!=_p._curpadding)){_k=null;continue;}}_l=_p._curfont;_m=_p._curselfont;_n=_p._curborder;_o=_p._curpadding;}}}for(var _v=0;_v<_f;_v++ ){var _t=this._getDataRow(_v);if(_b>=0&&_v<_b){_e=_d._cols[_a].size;continue;}_j=this._getMaxColSize(_i,_a,_t,null,_k);if(_j<0){return  -1;}_e=Math.max(_e,_j);}}}_c=Math.max(_c,_e);}if(this._headAutoSize&&_d._headcells){var _g=_d._headcells;var _h=_g.length;var _e;var _i=[],_p;for(var _u=0;_u<_h;_u++ ){_p=_g[_u];if(_p._col<=_a&&(_p._col+_p._colspan)>_a){_i.push(_p);}}_e=this._getMaxColSize(_i,_a, -1);_c=Math.max(_c,_e);}if(this._summAutoSize&&_d._summcells){var _g=_d._summcells;var _h=_g.length;var _e;var _i=[],_p;for(var _u=0;_u<_h;_u++ ){_p=_g[_u];if(_p._col<=_a&&(_p._col+_p._colspan)>_a){_i.push(_p);}}_e=this._getMaxColSize(_i,_a, -2);_c=Math.max(_c,_e);}return _c;};_pGrid._on_treeloadImagetemp=function(_a,_b,_c){};_pGrid._tree_recreate=false;_pGrid._hasTree=false;_pGrid._treeIndexes=null;_pGrid._treeStates=null;_pGrid._treeChecked=null;_pGrid._treeCellinfo=null;_pGrid._hasSameNextNode=null;_pGrid._maxdepth=0;_pGrid._rootlevel=99;_pGrid._treeInitStatus={"collapse,null":0,"expand,null":1,"collapse,all":2,"expand,all":3};_pGrid._currentCellEditor=null;_pGrid._tempEditor=null;_pGrid._currentCellCell= -1;_pGrid._currentCellRow= -1;_pGrid._currentCellCol= -1;_pGrid._currentCellSubRow= -1;_pGrid._showEditing=false;_pGrid._beforeEditRowIdx= -1;_pGrid._beforeEditCellIdx= -1;_pGrid._onceTime_focus=false;_pGrid._set_focus_dir= -1;_pGrid._showEditorFocus=false;_pGrid._on_treeloadImage=function(_a,_b,_c){var _d=this._tree_load_all;_d[_a]=true;var _e,_f=true;for(_e in _d){if(_d.hasOwnProperty(_e)){if(_d[_e]==false){_f=false;break;}}}if(_f){if(this._is_created){this._recreate_contents_all(true,true,true);}else{this._tree_recreate=true;}}else{if(this._is_created){if(this._resetColSizeList()){this._bodyBand._matrix._adjustColsDisplay(true);}}}};_pGrid._on_sizeloading=function(_a,_b,_c){var _d=this._image_load_all;if(_d[_a]){return;}_d[_a]=true;var _e,_f=true;for(_e in _d){if(_d.hasOwnProperty(_e)){if(_d[_e]==false){_f=false;break;}}}if(_f){if(this._is_created){this._recreate_contents_all(true,true,true);}else{this._image_recreate=true;}}else{if(this._is_created){if(this._resetColSizeList()){this._bodyBand._matrix._adjustColsDisplay(true);}}}};_pGrid._preloadTreeImage=function(){if(this._tree_load_all!=null){return true;}if(!this._binddataset){return true;}var _a=this._binddataset.getRowCount();var _b=this._curFormat._bodycells;var _c,_d,_e,_f;this._tree_load_all={};for(var _k=0;_k<_a;_k++ ){for(var _l=0,_m=_b.length;_l<_m;_l++ ){_e=_b[_l];_d=_e._getDisplaytype(_k);if(_d!="tree"){continue;}_c=this._treeStates[_k];if(_c==0){_f="treecollapseimage";}else if(_c==1){_f="treeexpandimage";}else if(_c==2){_f="treeitemimage";}var _g=_e._query_pseudo_treecontrol(_k,_f,"normal");if(_g){if(_g.substring(0,4).toLowerCase()=="url("){_g=_g.substring(5,_g.length-2);}_g=nexacro._getImageLocation(_g,this._getRefFormBaseUrl());this._tree_load_all[_g]=false;}_f="";if(_c==0){_f+="treeopenbuttonimage";}else if(_c==1){_f+="treeclosebuttonimage";}if(_f){var _g=_e._query_pseudo_treecontrol(_k,_f,"normal");if(_g){if(_g.substring(0,4).toLowerCase()=="url("){_g=_g.substring(5,_g.length-2);}_g=nexacro._getImageLocation(_g,this._getRefFormBaseUrl());this._tree_load_all[_g]=false;}}}}var _h,_i=true,_j;for(_h in this._tree_load_all){if(this._tree_load_all.hasOwnProperty(_h)){_j=nexacro._getImageSize(_h,this._on_treeloadImage,this);if(!_j){_i=false;}}}return _i;};_pGrid._preloadImage=function(){if(this._image_load_all!=null){return true;}if(!this._binddataset){return true;}var _a=this._binddataset.getRowCount();var _b=this._curFormat._bodycells;var _c,_d;if(!_b){return true;}this._image_load_all={};for(var _i=0;_i<_a;_i++ ){for(var _j=0,_k=_b.length;_j<_k;_j++ ){_d=_b[_j];_c=_d._getDisplaytype(_i);if(_c!="image"){continue;}prop="text";var _e=_d._getDisplayText_image(_i);if(_e){if(_e.substring(0,4).toLowerCase()=="url("){_e=_e.substring(5,_e.length-2);}_e=nexacro._getImageLocation(_e,this._getRefFormBaseUrl());this._image_load_all[_e]=false;}}}var _f,_g=true,_h;for(_f in this._image_load_all){if(this._image_load_all.hasOwnProperty(_f)){_h=nexacro._getImageSize(_f,this._on_sizeloading,this);if(!_h){_g=false;}}}return _g;};_pGrid._getDepthWidth=function(_a,_b){var _c=_b._getDisplaytype(_a);if(_c!="tree"){return 0;}var _d=_b._getTreeStartLevel(_a);var _e=_b._getTreeLevel(_a);var _f=this._treeStates[_a];var _g=22;var _h=6;var _i=9;var _j=14;var _k=14;var _l=14;var _m,_n,_o;var _p;var _q="normal";if(_f==0){_p="treecollapseimage";}else if(_f==1){_p="treeexpandimage";}else if(_f==2){_p="treeitemimage";}var _r=_b._query_pseudo_treecontrol(_a,_p,_q);if(_r){if(_r.substring(0,4).toLowerCase()=="url("){_r=_r.substring(5,_r.length-2);}_r=nexacro._getImageLocation(_r,this._getRefFormBaseUrl());var _s=nexacro._getImageSize(_r,this._on_treeloadImagetemp,this,undefined,_b._query_pseudo_treecontrol(_a,_p,_q));if(_s){_j=_s.width;}}_p="";if(_f==0){_p+="treeopenbuttonimage";}else if(_f==1){_p+="treeclosebuttonimage";}if(_p){var _r=_b._query_pseudo_treecontrol(_a,_p,_q);if(_r){if(_r.substring(0,4).toLowerCase()=="url("){_r=_r.substring(5,_r.length-2);}_r=nexacro._getImageLocation(_r,this._getRefFormBaseUrl());var _s=nexacro._getImageSize(_r,this._on_treeloadImagetemp,this,undefined,_b._query_pseudo_treecontrol(_a,_p,_q));if(_s){_k=_s.width;}}}_e-=_d;if(_e<0){_e= -1;}var _t=(_e*_g)+_i;if(this.treeusebutton!="no"){_t+=_k;}else{_t+=_i;}if(this.treeusecheckbox==true){var _u=_b._query_pseudo_control(this,_a,"checkboxsize","buttonsize",_q);if(_u==null){checkWidth=14;}else{checkWidth=parseInt(_u._value,10);}_t+=checkWidth;}if(this.treeuseimage==true){_t+=1;if(_j>0){_t+=_j;}else{_t+=15;}_t+=5;}else{_t+=4;}return _t+2;};_pGrid._isPassPrevCell=function(_a,_b,_c,_d){var _e=_a.endsubrow.length;var _f=_a.begsubrow;var _g=_a.endsubrow;var _h=_a.begcol;var _i=_a.endcol;var _j=_b.length;if(_c=="next"||_c=="prev"){for(var _k=0;_k<_e;_k++ ){for(var _l=0;_l<_j;_l++ ){if(_f[_k]<=_b[_l]._row&&_g[_k]>=_b[_l]._row){if(_b[_l]._colspan>1){if(_c=="next"&&_b[_l]._col<_d&&_d<_b[_l]._col+_b[_l]._colspan){return true;}else if(_c=="prev"&&_b[_l]._col<=_d&&_d<_b[_l]._col+_b[_l]._colspan-1){return true;}}}}}}else{for(var _k=0,_m=_b.length;_k<_m;_k++ ){if(_h<=_b[_k]._col&&_i>=_b[_k]._col){if(_b[_k]._rowspan>1){if(_c=="down"&&_b[_k]._row<_d&&_d<_b[_k]._row+_b[_k]._rowspan){return true;}else if(_c=="up"&&_b[_k]._row<=_d&&_d<_b[_k]._row+_b[_k]._rowspan-1){return true;}}}}}return false;};_pGrid._getAreaMoveCell=function(_a,_b,_c){var _d=this._selectinfo;if(_d.area.length==0){return true;}var _e=_d.area[_d.area.length-1];var _f=this._curFormat._bodycells;if(_a=="next"){if(_d.ctrlpoint.col<_b){if(_e.endcol>=_b){return false;}}else{if(this._isPassPrevCell(_e,_f,_a,_b)){return false;}}}else if(_a=="prev"){if(_d.ctrlpoint.col>_b){if(_e.begcol<=_b){return false;}}else{if(this._isPassPrevCell(_e,_f,_a,_b)){return false;}}}else if(_a=="down"){if(_d.ctrlpoint.row<_c||(_d.ctrlpoint.row==_c&&_d.ctrlpoint.subrow<_b)){if(_e.endsubrow.length==(_c-_d.ctrlpoint.row+1)){if(_e.endsubrow[_e.endsubrow.length-1]>=_b){return false;}}}else{if(this._isPassPrevCell(_e,_f,_a,_b)){return false;}}}else if(_a=="up"){if(_d.ctrlpoint.row>_c||(_d.ctrlpoint.row==_c&&_d.ctrlpoint.subrow>_b)){if(_e.begsubrow.length==(_d.ctrlpoint.row-_c+1)){if(_e.begsubrow[0]<=_b){return false;}}}else{if(this._isPassPrevCell(_e,_f,_a,_b)){return false;}}}return true;};_pGrid._moveToCell=function(_a,_b,_c,_d,_e,_f){if(this._selectinfo.curdsrow<0&&!_b){if(this.rowcount>0&&(_a=="next"||_a=="down")){this._moveToPosCell(0,0);return true;}return false;}if(this._curFormat==null){return false;}var _g=this._curFormat;var _h=this._beforebodycellpos=this._selectinfo.curcell;var _i=this._beforebodycolpos=this._selectinfo.curcol;var _j=this._beforebodyrowpos=this._selectinfo.curdsrow;var _k=this._beforebodysubrowpos=this._selectinfo.cursubrow;var _l=this._beforepvt=this._selectinfo.curpvt;var _m,_n,_o,_p;var _q= -9;var _r;var _s=_g._bodycells;var _t=_s.length;if(_a=="next"){if(_b){_r=this._getLastEditableCell();if(_r.row==null||(_r.row<=this._selectinfo.curdsrow&&_r.cell==this._selectinfo.curcell)){this._hideEditor(undefined,undefined,true);if(this._setdataobj&&this._setdataobj.succ==false){this._setSelectedInfo(_h,_i,_j,_k,_l);this._setdataobj=null;this._needAfterMoveToCell();return true;}return false;}}for(;true;){var _u=this.rowcount;if(this._selectinfo.currow>=(_u-1)&&this._selectinfo.curcell>=(_g._bodycells.length-1)){return false;}if(this._selectinfo.curcell>=_s.length-1){if(_c){return false;}for(;true;){_m=0;_n=0;_o=this._selectinfo.curdsrow+1;_p=0;this._setSelectedInfo(_m,_n,_o,_p,_q);if(this._hasTree){var _v=false;var _w=this._treeIndexes;var _x=_w.length;for(var _as=0,_at=_w.length;_as<_at;_as++ ){if(_w[_as]==_o){_v=true;break;}else if(_w[_as]>_o){break;}}if(_v==false){continue;}}break;}}else{if(_c){_m=this._selectinfo.curcell;_n=_s[this._selectinfo.curcell]._col+_s[this._selectinfo.curcell]._colspan;_o=this._selectinfo.curdsrow;_p=this._selectinfo.cursubrow;for(var _au=0;_au<_t;_au++ ){if(_s[_au]._col==_n&&(_s[_au]._row<=this._selectinfo.cursubrow&&this._selectinfo.cursubrow<(_s[_au]._row+_s[_au]._rowspan))){if(!_d||_d==_s[_au]._area){_m=_au;_p=_s[_au]._row;break;}}}if(_m==this._selectinfo.curcell){return false;}}else{_m=this._selectinfo.curcell+1;_n=_s[_m]._col;_o=this._selectinfo.curdsrow;_p=_s[_m]._row;}if(_e!=undefined&&_e<_n){return false;}this._setSelectedInfo(_m,_n,_o,_p,_q);if(_g._cols[_n].size<=0){continue;}if(this._isAreaSelect()){if(!this._getAreaMoveCell(_a,_n,_o)){continue;}}}if(_b){if(this._hasTree){var _v=false;var _w=this._treeIndexes;var _x=_w.length;for(var _as=0;_as<_x;_as++ ){if(_w[_as]==_o){_v=true;break;}else if(_w[_as]>_o){break;}}if(_v==false){continue;}}var _y=_s[_m];var _z=_y._getEdittype(_o);if(_z==""||_z=="none"){continue;}}if(_f&&_o>=0){var _aa=this._getCurrentBodyCell(_o,_m);if(_aa){_aa._showfull(_aa);}}break;}}else if(_a=="prev"){for(;true;){if(this._selectinfo.curcell<=0){if(_c||this._selectinfo.currow<=0){this._hideEditor(undefined,undefined,true);if(this._setdataobj&&this._setdataobj.succ==false){this._setSelectedInfo(_h,_i,_j,_k,_l);this._setdataobj=null;this._needAfterMoveToCell();return true;}return false;}for(;true;){_m=_g._bodycells.length-1;_n=_s[_m]._col;_o=this._selectinfo.curdsrow-1;_p=_s[_m]._row;this._setSelectedInfo(_m,_n,_o,_p,_q);if(this._hasTree){var _v=false;var _w=this._treeIndexes;var _x=_w.length;for(var _as=0,_at=_w.length;_as<_at;_as++ ){if(_w[_as]==_o){_v=true;break;}else if(_w[_as]>_o){break;}}if(_v==false){continue;}}break;}}else{var _ab;if(_c){_m=this._selectinfo.curcell;_ab=_n=this._selectinfo.curcol-1;_o=this._selectinfo.curdsrow;_p=this._selectinfo.cursubrow;for(var _au=0;_au<_t;_au++ ){if((_s[_au]._col<=_n&&_n<_s[_au]._col+_s[_au]._colspan)&&(_s[_au]._row<=this._selectinfo.cursubrow&&this._selectinfo.cursubrow<(_s[_au]._row+_s[_au]._rowspan))){if(!_d||_d==_s[_au]._area){_n=_s[_au]._col;_m=_au;_p=_s[_au]._row;break;}}}if(_m==this._selectinfo.curcell){return false;}}else{_m=this._selectinfo.curcell-1;_n=_s[_m]._col;_o=this._selectinfo.curdsrow;_p=_s[_m]._row;}if(_e!=undefined&&_e>_n){return false;}this._setSelectedInfo(_m,_n,_o,_p,_q);if(_g._cols[_n].size<=0){continue;}if(this._isAreaSelect()){if(!this._getAreaMoveCell(_a,_ab,_o)){continue;}}}if(_b){if(this._hasTree){var _v=false;var _w=this._treeIndexes;var _x=_w.length;for(var _as=_x-1;_as>=0;_as-- ){if(_w[_as]==_o){_v=true;break;}else if(_w[_as]<_o){break;}}if(_v==false){continue;}}var _y=_s[_m];var _z=_y._getEdittype(_o);if(_z==""||_z=="none"){continue;}}if(_f&&_o>=0){var _aa=this._getCurrentBodyCell(_o,_m);if(_aa){_aa._showfull(_aa);}}break;}}else if(_a=="up"){var _ac= -1,_ad= -1,_ae= -1;var _af=this._selectinfo.curcol;var _ag;for(;true;){if(this._isSelectRowType()){if(this._selectinfo.curdsrow==0){return false;}_m=this._selectinfo.curcell;_n=this._selectinfo.curcol;_o=this._selectinfo.curdsrow-1;_p=this._selectinfo.cursubrow;}else{if(this._selectinfo.curdsrow==0&&this._selectinfo.cursubrow==0){return false;}if(this._fixed_startrow>=this._selectinfo.curdsrow){return false;}_ag=_s[this._selectinfo.curcell]._rowspan;var _ah;if(this._selectinfo.cursubrow==0){for(var _au=_t-1;_au>=0;_au-- ){if(_s[_au]._col<=this._selectinfo.curcol&&this._selectinfo.curcol<(_s[_au]._col+_s[_au]._colspan)){_ac=_s[_au]._cellidx;_ad=_s[_au]._col;_ae=_s[_au]._row;_ah=_ae+_s[_au]._rowspan-1;break;}}_n=_ad;_m=_ac;_o=this._selectinfo.curdsrow-1;_p=_ae;}else{for(var _au=this._selectinfo.curcell-1;_au>=0;_au-- ){if(_s[_au]._col<=this._selectinfo.curcol&&this._selectinfo.curcol<(_s[_au]._col+_s[_au]._colspan)&&_s[_au]._row<=(this._selectinfo.cursubrow-1)&&(this._selectinfo.cursubrow-1)<(_s[_au]._row+_s[_au]._rowspan)){_ac=_s[_au]._cellidx;_ad=_s[_au]._col;_ae=_s[_au]._row;_ah=_ae+_s[_au]._rowspan-1;break;}}_n=_ad;_m=_ac;_o=this._selectinfo.curdsrow;_p=_ae;}}this._setSelectedInfo(_m,_n,_o,_p,_q);if(this._hasTree){var _v=false;var _w=this._treeIndexes;var _x=_w.length;for(var _as=_x-1;_as>=0;_as-- ){if(_w[_as]==_o){_v=true;break;}else if(_w[_as]<_o){break;}}if(_v==false){continue;}}if(this._isAreaSelect()){if(!this._getAreaMoveCell(_a,_ah,_o)){continue;}}break;}}else if(_a=="down"){var _u=this._getGridRowCount();var _ai=this._dsRowToDispRow(this._selectinfo.curdsrow);var _aj=_g._bodyrows.length-1;var _ak= -1,_al= -1,_am= -1;var _af=this._selectinfo.curcol;var _an=this._selectinfo.cursubrow;var _ag;for(;true;){if(this._isSelectRowType()){if(_u-1<=_ai){return false;}_m=this._selectinfo.curcell;_n=this._selectinfo.curcol;_o=this._selectinfo.curdsrow+1;_p=this._selectinfo.cursubrow;}else{_ag=_s[this._selectinfo.curcell]._rowspan;if(_u-1<=_ai&&(this._selectinfo.cursubrow+_ag)-1==_aj){if(this.vscrollbar){this.vscrollbar.set_pos(this.vscrollbar.max);}return false;}if((this._selectinfo.cursubrow+_ag-1)==_aj){for(var _au=0;_au<_t;_au++ ){if(_s[_au]._col<=this._selectinfo.curcol&&this._selectinfo.curcol<(_s[_au]._col+_s[_au]._colspan)){_ak=_s[_au]._cellidx;_al=_s[_au]._col;_am=_s[_au]._row;break;}}_n=_al;_m=_ak;_o=this._selectinfo.curdsrow+1;_p=_am;}else{for(var _au=this._selectinfo.curcell+1;_au<_t;_au++ ){if(_s[_au]._col<=this._selectinfo.curcol&&this._selectinfo.curcol<(_s[_au]._col+_s[_au]._colspan)&&(_s[_au]._row==this._selectinfo.cursubrow+(_ag-1)+1)){_ak=_s[_au]._cellidx;_al=_s[_au]._col;_am=_s[_au]._row;break;}}_n=_al;_m=_ak;_o=this._selectinfo.curdsrow;_p=_am;}}this._setSelectedInfo(_m,_n,_o,_p,_q);if(this._hasTree){var _v=false;var _w=this._treeIndexes;var _x=_w.length;for(var _as=0,_av=_w.length;_as<_av;_as++ ){if(_w[_as]==_o){_v=true;break;}else if(_w[_as]>_o){break;}}if(_v==false){continue;}}if(this._isAreaSelect()){if(!this._getAreaMoveCell(_a,_p,_o)){continue;}}break;}}var _ao;if(this._keydown_elem){_ao="keydown";}this._hideEditor();var _ap=this._selectinfo;var _aq=this._ChangeSelect(_ap.curcell,_ap.curcol,_ap.curdsrow,_ap.cursubrow,_ap.curpvt,false,_h,_i,_j,_k,_l,"body",_ao);var _ar=this._getCurrentBodyCell(_ap.curdsrow,_ap.curcell);if(_ar&&!nexacro._enableaccessibility){_ar._no_dom_focus=true;_ar._setFocus(false);_ar._no_dom_focus=false;}this._needAfterMoveToCell();return true;};_pGrid._needAfterMoveToCell=function(){if(!this._keydown_elem){this._moveCellAfterFocus();}else{if(this.autoenter=="select"&&!this._showEditing){var _a=this._getWindow();_a._postMessage(this,"showeditor",this._callbackPostmsg,[false,true]);}}};_pGrid._moveCellAfterFocus=function(){var _a=true;if(this.autoenter=="select"){if(nexacro.Browser=="Edge"||nexacro.Browser=="Opera"||nexacro.Browser=="IE"){this._onceTime_focus=true;}if(this._currentBand=="body"&&!this._showEditing&&!this._showEditor(false,true)){this._hideEditor();_a=false;}this._onceTime_focus=false;}return _a;};_pGrid._setTree=function(_a){_a=nexacro._toBoolean(_a);if(this._hasTree!=_a){this._hasTree=_a;if(_a==true){this._setFixedRow(false,true);this._initTreeStates();}else{this._clearTreeStates();}if(this._is_created){this._recreate_contents_all(false,false,false,true);}}};_pGrid._setTreeCellinfo=function(_a){if(this._treeCellinfo!=_a){this._treeCellinfo=_a;this._setTree(true);}};_pGrid._removeTreeCellinfo=function(_a){if(this._treeCellinfo==_a){this._treeCellinfo=null;this._setTree(false);}};_pGrid._initTreeStates=function(_a,_b){if(this._hasTree&&this._binddataset){this._treeIndexes=this._createTreeIndexes();this._treeStates=this._createTreeStates(_a,undefined,_b);this._treeChecked=this._createTreeChecked();this._createTreeHasChild();this._applyTreeStates();if(this._treeIndexes.length>0){this.rowcount=this._treeIndexes.length;}else{this.rowcount=0;}}};_pGrid._createTreeHasChild=function(){var _a=this._rowcount;var _b=this._treeCellinfo;if(this._hasSameNextNode){delete this._hasSameNextNode;}this._hasSameNextNode=new Array(_a);for(var _f=_a-1;_f>=0;_f-- ){var _c=_b._getTreeLevel(_f);this._maxdepth=Math.max(_c,this._maxdepth);this._rootlevel=Math.min(_c,this._rootlevel);if(this._hasSameNextNode[_f]==undefined){var _d=[];_d[0]=_c;_d[1]=false;this._hasSameNextNode[_f]=_d;for(var _g=_f-1;_g>=0;_g-- ){var _e=_b._getTreeLevel(_g);if(_c==_e){var _d=[];_d[0]=_c;_d[1]=true;this._hasSameNextNode[_g]=_d;}else if(_c>_e){break;}}}}this._rootlevel=Math.max(_b._getTreeStartLevel(0),this._rootlevel);};_pGrid._createTreeIndexes=function(){if(this._binddataset==null){return [];}var _a=this._binddataset.rowcount;var _b=new Array(_a);for(var _c=0;_c<_a;_c++ ){_b[_c]=_c;}return _b;};_pGrid._getTreeDefaultStatus=function(){var _a=this._treeInitStatus[this.treeinitstatus];if(_a==null){_a=0;}var _b;if(_a==0||_a==1){_b=(_a==0)?0:1;}else if(_a==2||_a==3){_b=(_a==2)?0:1;}return _b;};_pGrid._createTreeStates=function(_a,_b,_c){if(this._binddataset==null){return [];}var _d=this._binddataset;var _e=this._treeIndexes;var _f=_d.rowcount;var _g=_d._viewRecords;var _h=new Array(_f);var _i=this._treeCellinfo;var _j=this._treeInitStatus[this.treeinitstatus];var _k=null;var _l;if(_j==null){_j=0;}var _m=this._treeStates;if(_a&&_m.length==_f){for(var _q=0;_q<_f;_q++ ){if(_i.treestate._bindtype==0){_h[_q]=_m[_q];}}}if(_j==0||_j==1){var _n=(_j==0)?0:1;var _o=_l= -1;var _p;for(var _q=0;_q<_f;_q++ ){if(!_b){_k=_i._getTreeState(_q);}if(_h[_q]==undefined||(_c&&_h[_q]==2)){if(_k&&_k.length){_h[_q]=parseInt(_k,10);}else{_h[_q]=_n;}}_l=_i._getTreeLevel(_q);if(!_p||_i.treestate._bindtype==0){if(_o>=_l){_h[_q-1]=2;}else if(_h[_q-1]>=2){_h[_q-1]=_n;}}_o=_l;_p=_k;}if(_i.treestate._bindtype==0||!_k){_h[_f-1]=2;}}else if(_j==2||_j==3){var _n=(_j==2)?0:1;var _o=_l= -1;for(var _q=0;_q<_f;_q++ ){if(_h[_q]==undefined||(_c&&_h[_q]==2)){_h[_q]=_n;}_l=_i._getTreeLevel(_q);if(_o>=_l){_h[_q-1]=2;}_o=_l;}if(_f>0){_h[_f-1]=2;}}if(this._org_treeStates.length==0){this._org_treeStates=this._org_treeStates.concat(_h);}return _h;};_pGrid._createTreeChecked=function(){if(this._binddataset==null){return [];}var _a=this._binddataset.rowcount;var _b=new Array(_a);var _c=this._treeCellinfo;var _d=null;for(var _e=0;_e<_a;_e++ ){_d=_c._getTreeCheck(_e);if(_d&&(_d>0||_d.length)){_b[_e]=parseInt(_d,10);}else{_b[_e]=0;}}return _b;};_pGrid._updateTreeStates=function(_a,_b){if(this._hasTree&&this._binddataset){if(_a>=0){var _c=this._treeStates;if(_b){_c.splice(_a,0,2);}else{_c.splice(_a,1);if(_c[_a]!=2){if(_c[_a-1]==1){_c[_a-1]=2;}}else{var _d=this._treeCellinfo;var _e=_d._getTreeLevel(_a);var _f=_d._getTreeLevel(_a-1);if(_e==_f){_c[_a-1]=2;}}}this._treeStates=_c;}this._treeIndexes=this._createTreeIndexes();this._treeChecked=this._createTreeChecked();this._createTreeHasChild();this._applyTreeStates();if(this._treeIndexes.length>0){this.rowcount=this._treeIndexes.length;}else{this.rowcount=0;}}};_pGrid._applyTreeStates=function(){var _a=this._treeIndexes;var _b=this._treeStates;var _c=_a.length;var _d=this._treeCellinfo;var _e=_a.slice(0,_a.length);var _f= -1;var _g= -1;var _h=0;for(var _i=0;_i<_c;_i++ ){_h++ ;if(_b[_i]==0){_f=_d._getTreeLevel(_e[_i]);for(var _j=_i+1;_j<_c;_j++ ){_g=_d._getTreeLevel(_e[_j]);if(_g>_f){_i++ ;_a.splice(_h,1);}else{break;}}}}};_pGrid._clearTreeStates=function(){this._treeIndexes=null;this._treeStates=null;this._treeChecked=null;if(this._hasTree){this.rowcount=0;}};_pGrid._getTreeRowPosition=function(_a){if(_a<0||!this._hasTree){return _a;}var _b=this._treeIndexes;var _c=_b.length-1;for(var _d=_c;_d>=0;_d-- ){if(_b[_d]==_a){return _d;}else if(_b[_d]<_a){break;}}return  -1;};_pGrid._getBindTextCellInfo=function(_a){var _b=this._curFormat;var _c=true;if(!_b){return null;}var _d=[];if(_a){if(_b._headcells){var _e=_b._headcells;var _f=_e.length;var _g;for(var _l=0;_l<_f;_l++ ){_g=_e[_l];if(_g.text._bindexpr==_a){_d.push(_g);}}}if(_b._bodycells){var _h=_b._bodycells;var _i=_h.length;var _g;for(var _l=0;_l<_i;_l++ ){_g=_h[_l];if(_g.text._bindexpr==_a){_d.push(_g);}}}if(_b._summcells){var _j=_b._summcells;var _k=_j.length;var _g;for(var _l=0;_l<_k;_l++ ){_g=_j[_l];if(_g.text._bindexpr==_a){_d.push(_g);}}}}if(_d.length==0&&_b._bodycells){_d=_b._bodycells;_c=false;}return [_d,_c];};_pGrid._isTreeStateChanged=function(_a,_b){var _c=false;if(this._hasTree){var _d=_a.columnid;var _e=this._treeCellinfo;if(_d==_e.treecheck._bindexpr){var _f=_a.row;var _g=this._getTreeRowPosition(_f);var _h=_a.newvalue;this._setTreeChecked(_g,_h);}if(_b==false){if(_d==_e.treestate._bindexpr){var _f=_a.row;var _g=this._getTreeRowPosition(_f);var _h=_a.newvalue;this._setTreeState(_g,_h);_c=true;}var _i=this._getTreeDefaultStatus();if(_d==_e.treelevel._bindexpr){var _j;var _k=this._treeStates;var _l=_e._getTreeLevel(_a.row);for(var _m=_a.row-1;_m>=0;_m-- ){_j=_e._getTreeLevel(_m);if(_j<_l){if(_k[_m]>=2){_k[_m]=_i;}break;}}if(_k[_a.row]>=2){if(this._rowcount>0&&_a.row<this._rowcount-1){_j=_e._getTreeLevel(_a.row+1);if(_j>_l){_k[_a.row]=_i;}}}_c=true;}}}return _c;};_pGrid._setTreeState=function(_a,_b,_c,_d){_b=parseInt(_b,10);if(isFinite(_b)){var _e=this._treeIndexes[_a];var _f=this._treeStates[_e];var _g=0;if(_b!=_f){if(_b==2){if(_c){this._refreshBodyRow(_a-this._getBodyBegRowPos(_a));}return 1;}else if((_g=this._toggleTreeState(_a,_c,_b,_d))>0){return _g;}}}return 0;};_pGrid._getOrgTreeStates=function(_a){var _b;if(this._org_treeStates.length){_b=this._org_treeStates;}else{_b=this._createTreeStates(false,true);}if(_b[_a]==2){return 2;}else{return this._treeStates[_a];}};_pGrid._toggleTreeState=function(_a,_b,_c,_d){var _e=this._treeIndexes[_a];var _f;if(_d){_f=this._getOrgTreeStates(_e);}else{_f=this._treeStates[_e];}var _g=false;var _h;if(_f==0){if(this.on_fire_cantreestatuschange(_a,_e,1)!==false){_h=this._expandTreeState(_a);this.on_fire_ontreestatuschanged(_a,_e,1);}}else if(_f==1){if(this.on_fire_cantreestatuschange(_a,_e,0)!==false){_g=true;_h=this._collapseTreeState(_a);this.on_fire_ontreestatuschanged(_a,_e,0);}}else if(_f==2){if(_d){if(_d=="null_value"){this._treeStates[_e]=_c;}else{this._treeStates[_e]=2;}}else{if(this.on_fire_cantreestatuschange(_a,_e,0)!==false){_h=1;this._treeStates[_e]=_c;this.on_fire_ontreestatuschanged(_a,_e,0);}}}if(_b){if(_h==2){if(this._bodyBand){if(this.enableredraw){var _i=this._bodyBand._matrix._adjustTreeDisplay(_a,_g);if(_i){if(this._headBand){this._headBand._matrix._adjustColsDisplay(true);}if(this._summBand){this._summBand._matrix._adjustColsDisplay(true);}}this._setSelectBorder(this._bodyBand.on_find_CurrentStyle_selectborder(this._bodyBand._pseudo));}else{this._enable_redraw_history["recreate_body"]=true;}}}else if(_h==1){this._refreshBodyRow(_a-this._getBodyBegRowPos(_a));}}return _h;};_pGrid._collapseTreeState=function(_a){var _b=this._treeIndexes;var _c=this._treeStates;var _d=_b.length;var _e=_b[_a];var _f=this._treeCellinfo;if(_c[_e]==1){_c[_e]=0;}else{return 0;}var _g=_f._getTreeLevel(_e);if(nexacro._enableaccessibility&&nexacro._accessibilitytype!=4){var _h=this._getAccessibilityCurrentCell();if(_h){_h._setAccessibilityStatExpanded(false);}}var _i= -1;var _j=0;for(var _k=_a+1;_k<_d;_k++ ){_i=_f._getTreeLevel(_b[_k]);if(_i>_g){_j++ ;}else{break;}}if(_j>0){_b.splice(_a+1,_j);this.rowcount=_b.length;return 2;};return 1;};_pGrid._expandTreeState=function(_a){var _b=this._treeIndexes;var _c=this._treeStates;var _d=_c.length;var _e=_b[_a];var _f=this._treeCellinfo;if(_c[_e]==0){_c[_e]=1;}else{return 0;}var _g=_f._getTreeLevel(_e);if(nexacro._enableaccessibility&&nexacro._accessibilitytype!=4){var _h=this._getAccessibilityCurrentCell();if(_h){_h._setAccessibilityStatExpanded(true);}}var _i= -1;var _j=0;var _k=_e;var _l=[_e];var _m= -1;var _n= -1;var _o=false;var _p;for(var _r=_e+1;_r<_d;_r++ ){_i=_f._getTreeLevel(_r);if(_i>_g){if(_m<0){if((_p=(_i-_g))>1){for(var _s=0;_s<_p-1;_s++ ){_l.push(_m);}}}else{_n=_f._getTreeLevel(_m);if(_i>_n){if(_o==true){continue;}_k=_m;if((_p=(_i-_n))>1){for(var _s=0;_s<_p-1;_s++ ){_l.push(_m);}}else{_l.push(_m);}}else if(_i<_n){var _q=_n-_i;_l.splice(_l.length-_q,_q);_k=_l[_l.length-1];}_o=false;}if(_c[_k]>0){_b.splice(_a+1+_j,0,_r);_j++ ;}else{_o=true;}_m=_r;}else{break;}}if(_j>0){this.rowcount=this._treeIndexes.length;return 2;}return 1;};_pGrid._setTreeChecked=function(_a,_b){_b=parseInt(_b,10);if(isFinite(_b)){var _c=this._treeIndexes[_a];var _d=this._treeChecked[_c];if(_b==_d){return false;}else{return (this._toggleTreeChecked(_a));}}return false;};_pGrid._toggleTreeChecked=function(_a){var _b=this._treeIndexes[_a];var _c=this._treeChecked[_b];var _d=(_c==0)?1:0;this._treeChecked[_b]=_d;return true;};_pGrid._getCurrentBodyCell=function(_a,_b){var _c=this._bodyBand;if(_c){if(_a<0){_a=this._selectinfo.curdsrow;}if(_b<0){_b=this._selectinfo.curcell;}var _d=_c._get_row(_a);if(_d){return _d._cells[_b];}}return null;};_pGrid._getCurrentHeadCell=function(_a,_b){var _c=this._headBand;if(_c&&(_b||this._currentDSrow== -1)){if(_a<0){_a=this.currentcell;}var _d=_c._get_rows()[0];if(_d){return _d._cells[_a];}}return null;};_pGrid._getCurrentSummCell=function(_a,_b){var _c=this._summBand;if(_c&&(_b||this._currentDSrow== -2)){if(_a<0){_a=this.currentcell;}var _d=_c._get_rows()[0];if(_d){return _d._cells[_a];}}return null;};_pGrid._showEditor=function(_a,_b){if(nexacro._toBoolean(this.readonly)==true){return false;}var _c=this._find_lastFocused();if(_c!=this){return false;}if(!_a){var _d=this._getCurrentBodyCell( -1, -1);if(!_d){return false;}var _e=this._getBodyBegRowPos(_d._rowidx);var _f=this._endrowpos;var _g=this._selectinfo.currow;var _h=this._selectinfo.curcell;if(_e>_g||_f<_g){return false;}else{if(this._beforeEditRowIdx!=_g||this._beforeEditCellIdx!=_h){if(_d._hasEditor()){_d._showEditor(false,false,true);this._beforeEditRowIdx=this._selectinfo.curdsrow;this._beforeEditCellIdx=this._selectinfo.curcell;this._showEditing=true;var _i=this._getDataRow(_d._rowidx);_d._refobj._editingRow=_i;_d.editshowing=true;var _j=this._currentCellEditor;if(_j){_j._setFocus(false);if(_j.setCaretPos&&!_j.autoselect){_j.setCaretPos(0);}else if(_j.comboedit&&_j.comboedit.setCaretPos){_j.comboedit.setCaretPos(0);}}}else{_d._setFocus(false);}}}}else{var _d=this._getCurrentBodyCell(this._beforeEditRowIdx,this._beforeEditCellIdx);if(_d&&_d._hasEditor()){_d._showEditor(true,true);this._showEditing=true;var _i=this._getDataRow(_d._rowidx);_d._refobj._editingRow=_i;}else{this._hideEditor(true);}}return true;};_pGrid._setdataobj=null;_pGrid._hideEditor=function(_a,_b,_c){if(!_a){var _d=this._getCurrentBodyCell(this._beforeEditRowIdx,this._beforeEditCellIdx);var _e=this._currentCellEditor;if(_e){var _f={succ:false};if(_d){if(!_b){if(_f){_f.succ=_e._setDataset(true);}else{_e._setDataset(true);}if(this._currentCellEditor&&this._currentCellEditor!=_e){_e=this._currentCellEditor;}}if(this._binddataset.enableevent==false){this._refreshAll();}if(nexacro.Browser=="Safari"){nexacro.OnceCallbackTimer.callonce(_e,function(){_e.set_visible(false);});}else{_e.set_visible(false);}this._currentCellEditor=null;if(_d._is_alive){_d._refobj._editingRow= -9;_d._setDisplayText();_d._hideEditor();if(this._keydown_elem&&!_c){_d._setFocus(false);}}this._showEditing=false;}else{_e._cellinfo._editingRow= -9;if(!_b){if(_f){_f.succ=_e._setDataset(true,this._currentCellRow);}else{_e._setDataset(true,this._currentCellRow);}}_e.set_visible(false);this._currentCellEditor=null;this._showEditing=false;}this._setdataobj=_f;}this._beforeEditCellIdx= -1;this._beforeEditRowIdx= -1;this._currentCellCell= -1;this._currentCellRow= -1;this._currentCellCol= -1;this._currentCellSubRow= -1;}else{var _e=this._currentCellEditor;if(_e){var _g=_e._adjust_height+10;_e.set_top( -_g);if(_e._cellobj._subComp){_e._cellobj._subComp.set_visible(true);}}}return true;};_pGrid._createEditor=function(_a){var _b=_a._refobj;var _c=this._getDataRow(_a._rowidx);var _d=_b._getEdittype(_c);var _e=this["_createEditor_"+_d];if(_e==null){_e=this._createEditor_text;}if(this._tempEditor){this._clearDestroyEditor(true);this._tempEditor.set_visible(false);this._destroyeditors.push(this._tempEditor);this._tempEditor=null;}var _f=_e.call(this,_a);this._tempEditor=this._currentCellEditor=_f;return _f;};_pGrid.getShowEditor=function(){var _a=this._currentCellEditor;if(_a instanceof nexacro.GridControlEdit||_a instanceof nexacro.GridControlTextArea||_a instanceof nexacro.GridControlMaskEdit){return _a;}else{return false;}};_pGrid._createEditor_text=function(_a){return this._createEditor_edit(_a);};_pGrid._createEditor_readonly=function(_a){return this._createEditor_textarea(_a,true);};_pGrid._createEditor_mask=function(_a,_b){return this._createEditor_maskedit(_a);};_pGrid._createEditor_masknumber=function(_a,_b){return this._createEditor_maskedit(_a);};_pGrid._createEditor_button=function(_a){var _b=_a._setPositionInGrid();var _c=new nexacro.GridControlButton("controlbutton",_b.left,_b.top,_b.width,_b.height,this);_c._cellobj=_a;_c._cellinfo=_a._refobj;_c.createComponent();if(nexacro.Browser=="IE"&&!nexacro._enableaccessibility){nexacro.OnceCallbackTimer.callonce(this,function(){_c._control_element.setElementFocus();},0);}return _c;};_pGrid._createEditor_edit=function(_a,_b){var _c=this._getDataRow(_a._rowidx);var _d=_a._setPositionInGrid();var _e=this._currentCompositionStatus;var _f=this._currentCompositionData;var _g=new nexacro.GridControlEdit("controledit",_d.left,_d.top,_d.width,_d.height,this);_g._cellobj=_a;_g._cellinfo=_a._refobj;var _h=_g._cellinfo._getValue(_c);_g._set_absolutelyValue(_h);_g.createComponent();var _i=_a._refobj;var _j=_i._getAttrValue(_i.editlimit,_c);if(_j==0){_j=this._binddataset._getColumnSize(_i.text._bindtype==1?_i.text._bindexpr:0);}_g.set_maxlength(_j);if(_b){_g.set_readonly(true);}if(nexacro.Browser=="Safari"){if(_e==nexacro.EditBase.Status.CompositionStart){_g._on_input_compositionstart(_f);}else if(_e==nexacro.EditBase.Status.CompositionUpdate){_g._on_input_compositionupdate(_f);}}return _g;};_pGrid._createEditor_maskedit=function(_a,_b){var _c=this._getDataRow(_a._rowidx);var _d=_a._setPositionInGrid();var _e=new nexacro.GridControlMaskEdit("controlmaskedit",_d.left,_d.top,_d.width,_d.height,this);_e._cellobj=_a;_e._cellinfo=_a._refobj;var _f=_e._cellinfo._getValue(_c);_e._set_absolutelyValue(_f);var _g=_e._cellinfo._getEdittype(_c);var _h=_e._cellinfo._getAttrValue(_e._cellinfo.edittype,_c);var _i=_e._cellinfo._getDisplaytype(_c);var _j=_e._cellinfo._getAttrValue(_e._cellinfo.locale,_c);if(_g=="masknumber"){_e.set_type("number");}else{if(_h=="normal"){if(_i=="number"){_e.set_type("number");}else{_e.set_type("string");}}else{_e.set_type("string");}}if(_g=="masknumber"||_g=="mask"){_f=_e._cellinfo._getAttrValue(_e._cellinfo.mask,_c);if(_f!=null){_e.set_mask(_f);}}if(!_j){_j=this.locale;}_e.createComponent();_e.set_locale(_j);return _e;};_pGrid._createEditor_combo=function(_a){var _b=_a._setPositionInGrid();var _c=new nexacro.GridControlCombo("controlcombo",_b.left,_b.top,_b.width,_b.height,this);_c._cellobj=_a;_c._cellinfo=_a._refobj;_c.createComponent();return _c;};_pGrid._createEditor_date=function(_a){var _b=this._getDataRow(_a._rowidx);var _c=_a._setPositionInGrid();var _d=new nexacro.GridControlCalendar("controlcalendar",_c.left,_c.top,_c.width,_c.height,this);_d._cellobj=_a;_d._cellinfo=_a._refobj;var _e=_d._cellinfo._getValue(_b);var _f=_d._cellinfo._getAttrValue(_d._cellinfo.mask,_b);var _g=_d._cellinfo._getAttrValue(_d._cellinfo.locale,_b);if(this._displaymode==true&&!_e){_e=_d._cellinfo._getDisplayText(_b);}if(!_f||_f.length==0){_f="yyyy-MM-dd";}if(!_g){_g=this._getLocale();}_d.createComponent();_d.set_editformat(_f);_d.set_dateformat(_f);_d._currentformat="editformat";_d.set_value(_d._toValueStr(_e));_d.set_locale(_g);_d._resizeCalendar();return _d;};_pGrid._createEditor_textarea=function(_a,_b){var _c=this._getDataRow(_a._rowidx);var _d=_a._setPositionInGrid();var _e=this._currentCompositionStatus;var _f=this._currentCompositionData;var _g=new nexacro.GridControlTextArea("controltextarea",_d.left,_d.top,_d.width,_d.height,this);_g._cellobj=_a;_g._cellinfo=_a._refobj;var _h;if(_g._displaymode==true||_b){_h=_g._cellinfo._getDisplayText(_c);}else{_h=_g._cellinfo._getValue(_c);}_g._set_absolutelyValue(_h);var _i=_g._cellinfo._getWordwrap(_c);_g.set_wordwrap(_i);_g.createComponent();var _j=_a._refobj;var _c=this._getDataRow(_a._rowidx);var _k=_j._getAttrValue(_j.editlimit,_c);if(_k==0){_k=this._binddataset._getColumnSize(_j._col);}_g.set_maxlength(_k);if(_b){_g.set_readonly(true);}if(nexacro.Browser=="Safari"){if(_e==nexacro.EditBase.Status.CompositionStart){_g._on_input_compositionstart(_f);}else if(_e==nexacro.EditBase.Status.CompositionUpdate){_g._on_input_compositionupdate(_f);}}var _l=_j._getAttrValue(_j.editacceptsenter);_g._is_use_ex_enter=!nexacro._toBoolean(_l);return _g;};_pGrid._setFocus=function(_a,_b,_c){if(nexacro._enableaccessibility){this._currentBand="grid";this._accept_arrow=true;this._removeAccessibilityCurrentFocus();if(_b==2){var _d=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_d&&_d.enable==false){this._setAccessibilityBandFocus("next",true,false);}}else if(_b==3){this._setAccessibilityBandFocus("prev",true);}}return nexacro.Component.prototype._setFocus.call(this,_a,_b,_c);};_pGrid._evtvalue=function(_a,_b){var _c="";if(_a&&_a.value){_c=_a.value;}else if(_b){_c=_b;}return _c;};_pGrid._getAvailableRect=function(_a){var _b={left:0,top:0,right:0,bottom:0,width:0,height:0};_b.left=_a._client_left;_b.top=_a._client_top;_b.right=_a._client_left+_a._client_width;_b.bottom=_a._client_top+_a._client_height;_b.width=_a._client_width;_b.height=_a._client_height;return _b;};_pGrid._getPosRect=function(_a){var _b={left:_a._adjust_left,top:_a._adjust_top,right:_a._getPosRight(),bottom:_a._getPosBottom(),width:_a._adjust_width,height:_a._adjust_height};return _b;};_pGrid._closePopup=function(){var _a=this._currentCellEditor;if(_a&&_a.popupwindow){_a._closePopup();}};_pGrid._setSelectBorder=function(_a,_b){if(!this._is_created){return;}var _c=this._bodyBand;if(_c&&!_a){_a=_c.on_find_CurrentStyle_selectborder(_c._pseudo);}if(!_c||!_a){return;}if(_b){this._destroySelectBorderElements();}var _d=[],_e=[];var _f=this._selectinfo;if(this._isAreaSelect()||this._isMultiSelect()){var _g=null;var _h=_f.area;for(var _aj=0,_ak=_h.length;_aj<_ak;_aj++ ){_e=[];for(var _m=_h[_aj].begrow,_al=_h[_aj].endrow;_m<=_al;_m++ ){var _i=_h[_aj].begcol;var _j=_h[_aj].endcol;if(this._isSelectRowType()){var _k=_c._get_row(_m);if(_k&&_k._cells){_j=_k._cells.length-1;}_i=0;}for(;_i<=_j;_i++ ){_g=this._getCurrentBodyCell(_m,_i);if(_g){if(_g._subComp){_e.push(_g._subComp._control_element);}_e.push(_g._control_element);}}}_d.push(_e);}_h=null;_e=null;_g=null;}else{var _l=_f.rows;var _m=_c._get_row(_l[0]);var _n=_f.getSelectCells(_l[0]);if(_m&&_m._cells){var _o=_m._cells;for(var _am=0,_an=_o.length;_am<_an;_am++ ){if(_n[_am]){if(_o[_am]._subComp){_e.push(_o[_am]._subComp._control_element);}_e.push(_o[_am]._control_element);}}_d.push(_e);_o=null;}_n=null;_l=null;_m=null;}if(_d&&_d.length>0){var _p=0;var _q=this._selectborder_elements;for(var _aj=0,_ao=_d.length;_aj<_ao;_aj++ ){_e=_d[_aj];if(_e&&_e.length>0){var _r=_e[0].linkedcontrol;if(!(_r instanceof nexacro.GridCell)){_r=_e[1].linkedcontrol;}var _s=_e[_e.length-1].linkedcontrol;var _t=_r.parent._getAreaRect(_r._refobj._area);var _u=_s.parent._getAreaRect(_s._refobj._area);var _v=this._getScrollLeft();var _w=this._getScrollTop();var _x=(_t.left+_r.parent._adjust_left+_r._adjust_left)-_v;var _y=(_t.top+_r.parent._adjust_top+_r._adjust_top)-_w;var _z=(_u.left+_s.parent._adjust_left+_s._adjust_left+_s._adjust_width-_v)-_x;var _aa=(_u.top+_s.parent._adjust_top+_s._adjust_top+_s._adjust_height-_w)-_y;if(!_q[_p]){var _ab=new nexacro.EventPassOverlayElement(this._bodyBand._control_element,_e);_ab.create();_q.push(_ab);}else{var _ab=_q[_p];_ab.setTargetElements(_e);}_p++ ;var _ac=0,_ad=0;var _ae=false,_af=false,_ag=false;var _ah=_r._refobj._area;var _ai=_s._refobj._area;if(_ah=="left"||_ah=="right"){_x=_x+_v;if(_ai!="left"&&_ai!="right"){_z=_z-_v;_ac=_t.width-_x;if(_ac>=_z){_z=_ac;}if(_x+_z>=_u.left+_u.width){_ac=(_x+_z)-(_u.left+_u.width);_z=_z-_ac;if(_ac>_a._right_width){_ag=true;}}}}else if(_ah=="body"){if(_ai=="right"){_ac=_v;_z=_z+_ac;if(_x>=_u.left){_x=_u.left;_z=_s._adjust_left+_s._adjust_width;}if(_x<=_t.left&&0<_t.left){_ac=_t.left-_x;_x=_t.left;_z=_z-_ac;if(_ac>_a._left_width){_ae=true;}}}else if(_ai=="body"){if(_x<=_t.left&&0<_t.left){_ac=_t.left-_x;_x=_t.left;_z=_z-_ac;if(_ac>_a._left_width){_ae=true;}}if(_x+_z>=_t.left+_t.width){_ac=(_x+_z)-(_t.left+_t.width);_z=_z-_ac;if(_ac>_a._right_width){_ag=true;}}}}if(this._fixed_height>0){if(this._fixed_endrow>=_r._rowidx){_y=_y+_w;if(this._fixed_endrow<_s._rowidx){_ad=this._fixed_height-_w;_aa=_aa+_ad;_ad=this._fixed_height-_y;if(_aa<=_ad){_aa=_ad;}}}else{_y=_y+this._fixed_height;if(_y<=this._fixed_height){_ad=this._fixed_height-_y;_y=this._fixed_height;_aa=_aa-_ad;if(_ad>=_a._top_width){_af=true;}}}}_x=(_t.left>0||_x>0)?_x-1:_x;_z=_z>0?_z:0;_aa=_aa>0?_aa:0;_ab.setElementPosition(_x,_y);_ab.setElementSize(_z,_aa);_ab._setElementBorder(_a,_ae,_af,_ag);_e=null;_e=[];}}this._selectborder_elements=_q;_q=null;}else{this._destroySelectBorderElements();}if(_p<this._selectborder_elements.length){this._destroySelectBorderElements(_p);}};_pGrid._destroySelectBorderElements=function(_a){var _b=this._selectborder_elements;if(_b.length){var _c=_a>0?_a:0;for(_c,len=_b.length;_c<len;_c++ ){_b[_c].destroy();_b[_c]=null;}}_b.splice(_a);this._selectborder_elements=_b;};_pGrid._destroyOverlayElements=function(){var _a=this._overlay_elements;if(_a.length){for(var _b=0,_c=_a.length;_b<_c;_b++ ){_a[_b].destroy();}_a=[];}this._overlay_elements=[];};_pGrid._setOverlayElements=function(_a,_b){if(_b> -1&&_b<_a.length){for(var _c=_a.length-1;_c>=_b;_c-- ){_a[_c].destroy();_a.splice(_c,1);}}this._overlay_elements=_a;};_pGrid._setOverlayElementProperty=function(_a,_b,_c,_d,_e,_f,_g,_h){if(!_a){return;}_a.setElementPosition(_b,_c);_a.setElementSize(_d,_e);if(_f&&_f.length>0){var _i=_f[0];var _j=_f[_f.length-1];var _k=_i._refobj;if(!_h&&_k.suppressalign.indexOf("first")!=0){if(_k.suppressalign.indexOf("last")==0){_i=_j;}else{_i=_f[Math.floor(_f.length/2)];}_k=_i._refobj;}var _l=_i.selected;_i.selected=false;var _m=this._getDataRow(_i._rowidx);var _n=_i._getDisplayText();var _o=_k._getDisplaytype(this._getDataRow(_i._rowidx));if(_o=="image"){_a.setElementText("");_a.setElementDecorateText("");_a.setElementImageUrl(_n);}else{_a.setElementImageUrl("");if(_n&&_n.indexOf("\r")!= -1){_n=_n.replace(/\r/g,"");}if(_o=="decoratetext"){_a.setElementDecorateText(_n);}else{if(_a.decoration!=""){_a.decoration="";_a.text=null;}_a.setElementText(_n);}_a.setElementWordWrap(_k._getWordwrap(_m));}_a.setElementToolTip(_i.tooltiptext);var _p=_i.on_find_CurrentStyle_font(_i._pseudo);var _q=_i.on_find_CurrentStyle_color(_i._pseudo);var _r=_i.on_find_CurrentStyle_letterspace(_i._pseudo);_a.setElementFont(_p);_a.setElementLetterSpace(_r);_a.setElementColor(_q);var _s=_i.on_find_CurrentStyle_cursor(_i._pseudo);_a.setElementCursor(_s);var _t=_i.on_find_CurrentStyle_align(_i._pseudo);if(_h){_a.setElementAlignXY(_t.halign,_t.valign);}else if(_k.suppressalign.indexOf("first")==0){_a.setElementAlignXY(_t.halign,"top");}else if(_k.suppressalign.indexOf("last")==0){_a.setElementAlignXY(_t.halign,"bottom");}else{_a.setElementAlignXY(_t.halign,"middle");}var _u=0;var _v=_i.width;if(_h){var _w=_k._col;var _x=null;for(var _ab=1,_ac=_f.length;_ab<_ac;_ab++ ){_x=_f[_ab]._refobj;if(_x&&_w<_x._col){_v+=_f[_ab].width;_w=_x._col;}}}var _y=_j.on_find_CurrentStyle_border(_i._pseudo);var _z=_i.on_find_CurrentStyle_padding(_i._pseudo);if(_v>(_d+_z.left+_y._right_width)){_u=_v-(_d+_z.left+_y._right_width);}var _aa={left:_z.left,top:0};_a.updateCellNodeClient(_b,_c,_d,_e,_u,_aa);_i.selected=_l;}};_pGrid._adjustOverlayElements=function(_a,_b,_c){if(_a||(_b&&_c)){this._destroyOverlayElements();}if(!this._curFormat||(!this._is_use_suppress&&!this._is_use_fakemerge)){return false;}var _d=false;var _e=this._overlay_elements;var _f=[],_g=[],_h="",_i=null,_j=null;var _k=null,_l=null,_m=null;var _n=0,_o=0,_p=0,_q=0,_r=0;var _s=this._curFormat._cols.length;var _t=0,_u=0;if(this._is_use_suppress){var _v=this._bodyBand;if(!_v){return false;}var _w=_v._get_rows();var _x;var _y=_w.length;var _z=(this._fixed_rowcnt>0)?(this._fixed_rowcnt-this._fixed_startrow):0;var _aa=this._fixed_endrow;var _ab=this._toprowpos[0];var _ac=this._disprowcnt;if(!_y){return false;}var _ad=_w[0]._cells;for(var _as=0;_as<_s;_as++ ){_j=this._getBodyCellInfo(_as);if(_j&&_j.suppress!=0&&_j.suppressalign.indexOf("over")>0){cellidx=_j._cellidx;_o=_n= -1;_p=_q=0;_x=_z+_ac;_f=[];for(var _ao=0;_ao<_y;_ao++ ){_i=this._getBodyCellItem(_ao,cellidx);if(_i){if(_z>0){if(_i._rowidx>_aa&&_i._rowidx<_ab){continue;}}else{if(_i._rowidx<_ab){continue;}}if(_x-- ==0){break;}_k=_i._setPositionInGrid();_n=(_n<0)?_k.left:_n;_o=(_o<0)?_k.top:_o;if(_k.top>_o){_f.push(_i._control_element);}else{_f.splice(0,1,_i._control_element);}var _ae=1;var _af=null;if(_ad.length>_s&&_j._rowspan==1){_af=this._getBodyCellItem(_ao,cellidx+(_s*_ae));while(_af){_f.push(_af._control_element);_ae++ ;_af=this._getBodyCellItem(_ao,cellidx+(_s*_ae));}_af=_f[_f.length-1].linkedcontrol;_ae=null;}var _ag=_i._getSuppressInfo();if(!_ag||_ag.text_proc==0){_h=_i._display_text;}if(!_i._hideInner){_i._hideInnerElement();}_g.push(_i);if(_ag&&_ag.last){if(_af){_k=_af._setPositionInGrid();_af=null;}_p=(_k.right>_n)?_k.right-_n:0;_q=(_k.bottom>_o)?_k.bottom-_o:0;_l=null;if(_f.length>0){if(_e[_r]){_l=_e[_r];_l.setTargetElements(_f);}else{_l=new nexacro.EventPassOverlayElement(_g[0]._band._control_element,_f);_l.create();_e.push(_l);}if(_l){_t=_g[0]._band._adjust_left;_u=_g[0]._band._adjust_top;_r++ ;this._setOverlayElementProperty(_l,_n-_t,_o-_u,_p,_q,_g,_h);}}else{_i._showInnerElement();}_f=[];_g=[];_h="";_k=_m=null;_n=_o= -1;_q=_p=0;}}}}}_d=true;}var _ah=this._fake_mergecell_arr;if(this._is_use_fakemerge&&_ah.length){var _ai,_aj,_ak,_al,_am,_an;for(var _as=0,_at=_ah.length;_as<_at;_as++ ){_f=[];_g=[];fake_mergecell=_ah[_as];_ak=fake_mergecell.start_row;_al=fake_mergecell.end_row;_ai=fake_mergecell.start_column;_aj=fake_mergecell.end_column;var _ao=0;if(fake_mergecell.start_row== -1||fake_mergecell.start_row== -2){_ao=_ai;}for(;_ao<=_aj;_ao++ ){if(fake_mergecell.start_row== -1){_ak=_al=0;_am=(fake_mergecell.start_subrow>=0)?fake_mergecell.start_subrow:0;_an=(fake_mergecell.end_subrow>=0)?fake_mergecell.end_subrow:this._curFormat._headrows.length-1;}else if(fake_mergecell.start_row== -2){_ak=_al=0;_am=(fake_mergecell.start_subrow>=0)?fake_mergecell.start_subrow:0;_an=(fake_mergecell.end_subrow>=0)?fake_mergecell.end_subrow:this._curFormat._summrows.length-1;}else{if(!this._curFormat._bodyrows){return false;}_j=this._getBodyCellInfo(_ao);if(_j){if(_j._col<_ai||_j._col>_aj){continue;}}else{break;}}for(var _au=_ak;_au<=_al;_au++ ){if(fake_mergecell.start_row>=0){_am=0;_an=this._curFormat._bodyrows.length-1;if(_au==_al&&fake_mergecell.end_subrow!=undefined){_an=fake_mergecell.end_subrow;}if(_au==_ak&&fake_mergecell.start_subrow!=undefined){_am=fake_mergecell.start_subrow;}}var _ap=0;while(true){if(fake_mergecell.start_row== -1){_i=this._getCurrentHeadCell(_ap++ ,true);}else if(fake_mergecell.start_row== -2){_i=this._getCurrentSummCell(_ap++ ,true);}else{_i=this._getCurrentBodyCell(_au,_ap++ );}if(!_i||_i._refobj._row>_an){break;}_j=_i._refobj;if(_j._col==_ao){_f.push(_i._control_element);_g.push(_i);}}}}if(_g.length>0){if(1){_m=null,_h=null;_l=_e[_r];if(!_l){_l=new nexacro.EventPassOverlayElement(_g[0]._band._control_element,_f);_l.create();_e.push(_l);}else{_l.setTargetElements(_f);}_j=_g[0]._refobj;if(_j){if(_g[0].subcells.length){_j=_g[0].subcells[0]._refobj;}_h=_j._getDisplayText(fake_mergecell.start_row);}var _aq=_g[0]._setPositionInGrid();var _ar=_g[_g.length-1]._setPositionInGrid();_n=_aq.left;_o=_aq.top;_p=(_ar.right>_n)?_ar.right-_n:0;_q=(_ar.bottom>_o)?_ar.bottom-_o:0;_t=_g[0]._band._adjust_left;_u=_g[0]._band._adjust_top;this._setOverlayElementProperty(_l,_n-_t,_o-_u,_p,_q,_g,_h,true);_n=_o=_p=_q=0;_aq=null,_ar=null,_m=null,_h="",_l=null;_r++ ;}else{_g[0]._showInnerElement();}}fake_mergecell=null,e_cell=null;}_d=true;}this._setOverlayElements(_e,_r);return _d;};_pGrid._moveToAccessibilityCell=function(_a,_b,_c,_d){if(this._is_band_focus&&!_b){var _e=true;if(_a=="prev"||_a=="up"){_e=this._setAccessibilityBandFocus(_a);}else{if(_a=="next"||(_a=="down"&&this._currentBand=="head")){this.currentcell=this.currentsubrow=this.currentcol=0;}if(!this._moveToPosAccessibilityCell(this.currentrow,this.currentcell)){_e=this._setAccessibilityBandFocus(_a);}}return _e;}if(this._currentBand=="grid"){if(_a=="prev"||_a=="next"||_a=="down"){if(_b){if(_a=="next"){if(this._bodyBand&&this._bodyBand._get_rows().length>0){var _f=null;_f=this._getFirstEditableCell();if(_f&&_f.row!==null){this._showEditorFocus=true;if(this.vscrollbar&&this.vscrollbar.visible){this.vscrollbar.set_pos(0);}this._currentBand="body";this._moveToPosAccessibilityCell(_f.row,_f.cell);this._showEditorFocus=false;return true;}}}return false;}return this._setAccessibilityBandFocus(_a,true);}else{this._accept_arrow=false;return false;}}var _g;var _e=true;var _h=null;var _i=false;this._is_band_focus=false;this._beforegridrowpos=this.currentrow;this._beforegridcolpos=this.currentcol;if(this._currentBand=="body"){this._is_first_bodycell=false;if(this._showEditing){this._hideEditor();}for(;true;){if(_b){_e=this._moveToCell(_a,true,_d,undefined,undefined,true);}else{_e=this._moveToCell(_a,false,_d,undefined,undefined,true);}if(_e){_h=this._getAccessibilityCurrentCell();if(_h){if(_b){_h._setFocus(false);break;}else{var _j=_h._refobj;var _k=this._getDataRow(_h._rowidx);var _l=_j._getDisplaytype(_k);_i=_h._isAccessibilityEnable();if(_i){if(_a=="up"||_a=="down"){if(this._isSelectRowType()&&_l!="tree"){var _m=_h.parent;_m._setFocus(false);break;}}this._showEditor();if(!this._showEditing){if(_h._subComp&&_l!="tree"){_h._subComp._setFocus(false);}else{_h._setFocus(false);}}break;}}}}else{if(!_b){_e=this._setAccessibilityBandFocus(_a);}break;}}return _e;}if(_b){if(this._currentBand=="head"){if(this._bodyBand._get_rows().length>0){this._currentBand="body";var _f=this._getFirstEditableCell();if(_f.row!==null){this._is_first_bodycell=true;_e=this._moveToPosAccessibilityCell(_f.row,_f.cell);}return true;}}return false;}if(_a=="next"){for(;true;){this.currentcell++ ;_h=this._getAccessibilityCurrentCell();if(_h){if(_h.width<=0){continue;}else{_i=_h._isAccessibilityEnable();if(!_i){continue;}var _j=_h._refobj;this.currentsubrow=_j._row;this.currentcol=_j._col;_h._showfull();_h._setFocus(false);}}else{this.currentcell-- ;_e=this._setAccessibilityBandFocus(_a);}break;}}else if(_a=="prev"){for(;true;){this.currentcell-- ;_h=this._getAccessibilityCurrentCell();if(_h){if(_h.width<=0){continue;}else{_i=_h._isAccessibilityEnable();if(!_i){continue;}var _j=_h._refobj;this.currentsubrow=_j._row;this.currentcol=_j._col;_h._showfull();_h._setFocus(false);}}else{this.currentcell++ ;_e=this._setAccessibilityBandFocus(_a);}break;}}else if(_a=="up"){if(this._currentBand=="head"){_g=this._headBand;}else{_g=this._summBand;}if(_g){var _n,_o;_h=this._getAccessibilityCurrentCell();if(_h){var _j=_h._refobj;var _p=_j._row;var _q=_j._col;var _r=this.currentcell;while(true){this.currentcell-- ;_h=this._getAccessibilityCurrentCell();if(_h){_n=_h._refobj._row;_o=_h._refobj._col;if(_o==_q&&_n==_p-1){_i=_h._isAccessibilityEnable();if(!_i){continue;}this.currentsubrow=_n;this.currentcol=_o;_h._setFocus(false);break;}}else{if(this.currentcell<=0){this.currentcol=_q;this.currentcell=_r;_e=this._setAccessibilityBandFocus(_a);break;}}}}}}else if(_a=="down"){var _n,_o;_h=this._getAccessibilityCurrentCell();if(_h){var _j=_h._refobj;var _p=_j._row;var _q=_j._col;var _r=this.currentcell;while(true){this.currentcell++ ;_h=this._getAccessibilityCurrentCell();if(_h){_n=_h._refobj._row;_o=_h._refobj._col;if(_o==_q&&_n==_p+1){this.currentsubrow=_n;this.currentcol=_o;_h._setFocus(false);break;}}else{this.currentcell=_r;_e=this._setAccessibilityBandFocus(_a);break;}}}}return _e;};_pGrid._setAccessibilityBandFocus=function(_a,_b,_c){var _d=true,_e=null,_f=this._currentBand;if(_a=="next"){if(_f=="grid"){if(this._headBand){_e=this._headBand;this._currentBand="head";this._currentDSrow=this.currentrow= -1;}else if(this._bodyBand&&this.body&&this.summarytype!="top"&&this.summarytype!="lefttop"){_e=this._bodyBand;this._currentBand="body";this._currentDSrow=this.currentrow=0;}else if(this._summBand){_e=this._summBand;this._currentBand="summ";this._currentDSrow=this.currentrow= -2;}else{this._accept_arrow=false;_d=false;}}else{if(_f=="head"){if(this._bodyBand&&this.summarytype!="top"&&this.summarytype!="lefttop"){this._is_first_bodycell=true;_e=this._bodyBand;this._currentBand="body";this._currentDSrow=this.currentrow=0;}else if(this._summBand){_e=this._summBand;this._currentBand="summ";this._currentDSrow=this.currentrow= -2;}}else if(_f=="body"){if(this._summBand&&this.summarytype!="top"&&this.summarytype!="lefttop"){this._hideEditor();_e=this._summBand;this._currentBand="summ";this._currentDSrow=this.currentrow= -2;}}else if(_f=="summ"&&(this.summarytype=="top"||this.summarytype=="lefttop")){if(this._bodyBand){this._is_first_bodycell=true;_e=this._bodyBand;this._currentBand="body";this._currentDSrow=this.currentrow=0;}}}if(_e){if(_c){this.currentsubrow=0;this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}else{var _g=_e._isAccessibilityEnable();if(!this._is_band_focus&&(_g||(_e._isBody&&this.rowcount<=0))){if(_b){this.currentcell=this.currentsubrow=this.currentcol=0;}this._moveToAccessibilityBand(false);}else{if(_f=="grid"&&_b&&!this.on_find_CurrentStyle_accessibility(this._pseudo).enable){this._first_focus=true;}this.currentcell=this.currentsubrow=this.currentcol=0;this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}}}}else if(_a=="prev"){if(_f=="grid"){if(_b||_c){if(this._summBand&&this.summarytype!="top"&&this.summarytype!="lefttop"){_e=this._summBand;this._currentBand="summ";this._currentDSrow=this.currentrow= -2;this.currentsubrow=_e._get_rows()[0]._format_rows.length-1;}else if(this._bodyBand&&this.body){_e=this._bodyBand;this._currentBand="body";this._currentDSrow=this.currentrow=this.rowcount-1;this.currentsubrow=0;}else if(this._headBand){_e=this._headBand;this._currentBand="head";this._currentDSrow=this.currentrow= -1;this.currentsubrow=_e._get_rows()[0]._format_rows.length-1;}else{_d=false;}}else{_d=false;}}else{if(_f=="summ"){var _g=this._summBand._isAccessibilityEnable();if(!this._is_band_focus&&_g){this._moveToAccessibilityBand(false);}else{if(this._bodyBand&&this.summarytype!="top"&&this.summarytype!="lefttop"){this._is_first_bodycell=true;_e=this._bodyBand;this._currentBand="body";this.currentrow=this._currentDSrow=this.rowcount-1;}else if(this._headBand){_e=this._headBand;this._currentBand="head";this._currentDSrow=this.currentrow= -1;}}}else if(_f=="body"){var _g=this._bodyBand._isAccessibilityEnable();if(!this._is_band_focus&&_g){this._hideEditor();this._moveToAccessibilityBand(false);}else{if(this._summBand&&(this.summarytype=="top"||this.summarytype=="lefttop")){this._hideEditor();_e=this._summBand;this._currentBand="summ";this._currentDSrow=this.currentrow= -2;this.currentsubrow=this._curFormat._summrows.length-1;}else if(this._headBand){this._hideEditor();_e=this._headBand;this._currentBand="head";this._currentDSrow=this.currentrow= -1;this.currentsubrow=this._curFormat._headrows.length-1;}}}}if(_e){var _g=_e._isAccessibilityEnable();if(_e._isBody&&this.rowcount<=0){this._removeAccessibilityCurrentFocus();_e._setFocus(false);this.currentcol=this._curFormat._cols.length-1;this.currentcell= -1;}else{if(!_c){this.currentcol=this._curFormat._cols.length-1;this.currentcell=this._getAccessibilityLastCellIndex()-1;}this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}}}else if(_a=="up"){if(_f=="summ"){var _g=this._summBand._isAccessibilityEnable();if(!this._is_band_focus&&_g){this._moveToAccessibilityBand(false);}else{if(this._bodyBand&&this.summarytype!="top"&&this.summarytype!="lefttop"){_e=this._bodyBand;this._currentBand="body";this._currentDSrow=this.currentrow=this.rowcount-1;this.currentsubrow=0;}else if(this._headBand){_e=this._headBand;this._currentBand="head";this._currentDSrow=this.currentrow= -1;this.currentsubrow=this._curFormat._headrows.length-1;}else{_f="grid";}}}else if(_f=="body"){var _g=this._bodyBand._isAccessibilityEnable();if(!this._is_band_focus&&_g){this._hideEditor();this._moveToAccessibilityBand(false);}else{if(this._summBand&&(this.summarytype=="top"||this.summarytype=="lefttop")){this._hideEditor();_e=this._summBand;this._currentBand="summ";this._currentDSrow=this.currentrow= -2;this.currentsubrow=this._curFormat._summrows.length-1;}else if(this._headBand){this._hideEditor();_e=this._headBand;this._currentBand="head";this._currentDSrow=this.currentrow= -1;this.currentsubrow=this._curFormat._headrows.length-1;}else{_f="grid";}}}else if(_f=="head"&&this.currentcell<=0){var _g=this._headBand._isAccessibilityEnable();if(!this._is_band_focus&&_g){this._moveToAccessibilityBand(false);}else{_f="grid";}}if(_e){this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}else if(_f=="grid"){this._is_band_focus=false;this._currentBand=_f;var _h=this.on_find_CurrentStyle_accessibility(this._pseudo);if(_h&&_h.enable){this._moveToAccessibilityBand(true);}else{_d=this._moveToAccessibilityCell(_a);}}}else if(_a=="down"){if(_f=="grid"){_d=this._setAccessibilityBandFocus("next",true);}else{if(_f=="head"){if(this._bodyBand&&this.summarytype!="top"&&this.summarytype!="lefttop"){this._is_first_bodycell=true;_e=this._bodyBand;this._currentBand="body";this._currentDSrow=this.currentrow=0;}else if(this._summBand){_e=this._summBand;this._currentBand="summ";this._currentDSrow=this.currentrow= -2;}}else if(_f=="body"&&this.summarytype!="top"&&this.summarytype!="lefttop"){if(this._summBand){this._hideEditor();_e=this._summBand;this._currentBand="summ";this._currentDSrow=this.currentrow= -2;}else if(this._bodyBand&&this.rowcount<=0){this._hideEditor();this._accept_arrow=false;_d=false;}}else if(_f=="summ"&&(this.summarytype=="top"||this.summarytype=="lefttop")){if(this._bodyBand){this._is_first_bodycell=true;_e=this._bodyBand;this._currentBand="body";this._currentDSrow=this.currentrow=0;}}if(_e){var _g=_e._isAccessibilityEnable();if(!this._is_band_focus&&(_g||(this.rowcount<=0&&_e._isBody))){this._moveToAccessibilityBand(false);}else{this.currentsubrow=0;this._moveToPosAccessibilityCell(this.currentrow,this.currentcell);}}else if(this.currentcell>=this._getAccessibilityLastCellIndex()-1){this._accept_arrow=false;_d=false;}}}return _d;};_pGrid._getAccessibilityCurrentCell=function(_a,_b){var _c=null;if(_a===undefined||_b===undefined){_a= -1;_b= -1;}else if(_b<0){_b=this._getAccessibilityCellIndex();}if(this._currentBand=="body"){_c=this._getCurrentBodyCell(_a,_b);}else{if(this._currentBand=="head"){_c=this._getCurrentHeadCell(_b,true);}else{_c=this._getCurrentSummCell(_b,true);}}return _c;};_pGrid._getAccessibilityLastCellIndex=function(){var _a= -1;if(this._currentBand=="head"&&this._curFormat._headcells){_a=this._curFormat._headcells.length;}else if(this._currentBand=="body"&&this._curFormat._bodycells){_a=this._curFormat._bodycells.length;}else if(this._currentBand=="summ"&&this._curFormat._summcells){_a=this._curFormat._summcells.length;}return _a;};_pGrid._removeAccessibilityCurrentFocus=function(_a){var _b=this._getWindow();if(_a){_b._removeFromCurrentFocusPath(this,true);}else{if(this._currentBand=="body"){_b._removeFromCurrentFocusPath(this._bodyBand,true);}else if(this._currentBand=="head"){_b._removeFromCurrentFocusPath(this._headBand,true);}else if(this._currentBand=="summ"){_b._removeFromCurrentFocusPath(this._summBand,true);}}};_pGrid._moveToAccessibilityBand=function(_a){this._removeAccessibilityCurrentFocus(_a);if(!_a){this._is_band_focus=true;var _b=this._currentBand;if(_b=="head"){this._headBand._setFocus(false);}else if(_b=="body"){this._bodyBand._setFocus(false);}else if(_b=="summ"){this._summBand._setFocus(false);}}else{this._setFocus(false);}};_pGrid._moveToPosAccessibilityCell=function(_a,_b){var _c=false,_d=null,_a=this._getDataRow(_a),_b=this._getAccessibilityCellIndex(_b);if(this._currentBand=="body"&&this._bodyBand._get_rows().length>0){this._hideEditor();_d=this._getAccessibilityCurrentCell();if(_d){var _e=_d._refobj;if(_e._row!=_a||_e._cellidx!=_b){_d._stat_change("notfocus","normal");}}this._moveToPosCell(_a,_b);}_d=this._getAccessibilityCurrentCell(_a,_b);if(_d&&nexacro._enableaccessibility){var _e=_d._refobj;_c=true;_d._showfull();if(this._currentBand!="body"||this.autoenter!="select"||!this._showEditing){if(_d._subComp&&_e._getDisplaytype(_a)!="tree"){_d._subComp._setFocus(false);}else{_d._setFocus(false);}}else{this._showEditor();}this.currentcol=_e._col;}this._is_band_focus=this._first_focus=false;return _c;};_pGrid._getAccessibilityCellIndex=function(_a){var _b=null;if(this._currentBand=="body"){_b=this._bodyBand;}else if(this._currentBand=="head"){_b=this._headBand;}else if(this._currentBand=="summ"){_b=this._summBand;}if(_b){var _c=_b._get_row(this._getDataRow(this.currentrow));if(_c){var _d=_c._cells,_e=null;for(var _f=0,_g=_d.length;_f<_g;_f++ ){_e=_d[_f]._refobj;if(_e._col<=this.currentcol&&this.currentcol<=(_e._col+_e._colspan-1)){if(this.currentsubrow==0){return _d[_f]._cellidx;}else{if(_e._row==this.currentsubrow){return _d[_f]._cellidx;}}}}}}return (_a>=0)?_a:null;};_pGrid._on_useInnerDsCells=function(_a,_b){this._refreshAll();};};